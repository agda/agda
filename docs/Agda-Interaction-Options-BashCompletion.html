<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Agda.Interaction.Options.BashCompletion</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">Agda</span><ul class="links" id="page-menu"><li><a href="src/Agda.Interaction.Options.BashCompletion.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Agda.Interaction.Options.BashCompletion</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Tools for shell completion scripts.</p><p>Bash completion takes a list of completion words (the current commandline)
 and a completion index (the current word to be completed) and returns
 a list of possible completions of this word.</p><p>To do bash completion <em>inside</em> Agda, we need to pass this data to Agda.
 So we equip Agda with a special option <code class="inline-code">--bash-completion</code> which takes
 first the completion index (number) and then the completion words.
 E.g.</p><pre>   agda --bash-completion 1 --warn
</pre><p>This should complete <code class="inline-code">--warn</code> to <code class="inline-code">--warning=</code>.</p><pre>   agda --bash-completion 1 --warning=
</pre><p>This would list the possible values for WARNING.
 However, these are too many and one may get the annoying question
 whether one really wants to see all.
 So we should only produce a small enough list.
 We show the common prefixes of all values up to a maximal number (threshold).
 To this end, we may store the possible completion as a compressed trie
 where instead of letters we use maximal non-overlapping prefixes.
 Then we compute a fair truncation of the tree so that the
 total number of leaves stay below the threshold.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">type</span> <a href="#t:Help">Help</a> = <a href="https://hackage.haskell.org/package/base-4.21.0.0/docs/Data-String.html#t:String" title="Data.String">String</a></li><li class="src short"><a href="#v:printedOptions">printedOptions</a> :: [<a href="https://hackage.haskell.org/package/base-4.21.0.0/docs/Data-String.html#t:String" title="Data.String">String</a>]</li><li class="src short"><a href="#v:printedOptionsWithHelp">printedOptionsWithHelp</a> :: [(<a href="https://hackage.haskell.org/package/base-4.21.0.0/docs/Data-String.html#t:String" title="Data.String">String</a>, <a href="Agda-Interaction-Options-BashCompletion.html#t:Help" title="Agda.Interaction.Options.BashCompletion">Help</a>)]</li><li class="src short"><a href="#v:printOptions">printOptions</a> :: [<a href="Agda-Utils-GetOpt.html#t:OptDescr" title="Agda.Utils.GetOpt">OptDescr</a> a] -&gt; [(<a href="https://hackage.haskell.org/package/base-4.21.0.0/docs/Data-String.html#t:String" title="Data.String">String</a>, <a href="Agda-Interaction-Options-BashCompletion.html#t:Help" title="Agda.Interaction.Options.BashCompletion">Help</a>)]</li><li class="src short"><span class="keyword">type</span> <a href="#t:Truncate">Truncate</a> = <a href="https://hackage.haskell.org/package/base-4.21.0.0/docs/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="https://hackage.haskell.org/package/base-4.21.0.0/docs/Data-Int.html#t:Int" title="Data.Int">Int</a></li><li class="src short"><a href="#v:bashComplete">bashComplete</a> :: <a href="Agda-Interaction-Options-BashCompletion.html#t:Truncate" title="Agda.Interaction.Options.BashCompletion">Truncate</a> -&gt; [<a href="https://hackage.haskell.org/package/base-4.21.0.0/docs/Data-String.html#t:String" title="Data.String">String</a>] -&gt; <a href="https://hackage.haskell.org/package/base-4.21.0.0/docs/Data-Either.html#t:Either" title="Data.Either">Either</a> <a href="https://hackage.haskell.org/package/base-4.21.0.0/docs/Data-String.html#t:String" title="Data.String">String</a> <a href="https://hackage.haskell.org/package/base-4.21.0.0/docs/Data-String.html#t:String" title="Data.String">String</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:Completion">Completion</a> = <a href="#v:Completion">Completion</a> {<ul class="subs"><li><a href="#v:extended">extended</a> :: <a href="https://hackage.haskell.org/package/base-4.21.0.0/docs/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="https://hackage.haskell.org/package/base-4.21.0.0/docs/Data-String.html#t:String" title="Data.String">String</a></li><li><a href="#v:completions">completions</a> :: [(<a href="https://hackage.haskell.org/package/base-4.21.0.0/docs/Data-String.html#t:String" title="Data.String">String</a>, <a href="Agda-Interaction-Options-BashCompletion.html#t:Help" title="Agda.Interaction.Options.BashCompletion">Help</a>)]</li></ul>}</li><li class="src short"><a href="#v:optionsTrie">optionsTrie</a> :: <a href="Agda-Utils-Trie.html#t:Trie" title="Agda.Utils.Trie">Trie</a> <a href="https://hackage.haskell.org/package/base-4.21.0.0/docs/Data-Char.html#t:Char" title="Data.Char">Char</a> <a href="Agda-Interaction-Options-BashCompletion.html#t:Help" title="Agda.Interaction.Options.BashCompletion">Help</a></li><li class="src short"><a href="#v:complete">complete</a> :: <a href="Agda-Interaction-Options-BashCompletion.html#t:Truncate" title="Agda.Interaction.Options.BashCompletion">Truncate</a> -&gt; <a href="https://hackage.haskell.org/package/base-4.21.0.0/docs/Data-String.html#t:String" title="Data.String">String</a> -&gt; <a href="Agda-Interaction-Options-BashCompletion.html#t:Completion" title="Agda.Interaction.Options.BashCompletion">Completion</a></li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:Help" class="def">Help</a> = <a href="https://hackage.haskell.org/package/base-4.21.0.0/docs/Data-String.html#t:String" title="Data.String">String</a> <a href="src/Agda.Interaction.Options.BashCompletion.html#Help" class="link">Source</a> <a href="#t:Help" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:printedOptions" class="def">printedOptions</a> :: [<a href="https://hackage.haskell.org/package/base-4.21.0.0/docs/Data-String.html#t:String" title="Data.String">String</a>] <a href="src/Agda.Interaction.Options.BashCompletion.html#printedOptions" class="link">Source</a> <a href="#v:printedOptions" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:printedOptionsWithHelp" class="def">printedOptionsWithHelp</a> :: [(<a href="https://hackage.haskell.org/package/base-4.21.0.0/docs/Data-String.html#t:String" title="Data.String">String</a>, <a href="Agda-Interaction-Options-BashCompletion.html#t:Help" title="Agda.Interaction.Options.BashCompletion">Help</a>)] <a href="src/Agda.Interaction.Options.BashCompletion.html#printedOptionsWithHelp" class="link">Source</a> <a href="#v:printedOptionsWithHelp" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:printOptions" class="def">printOptions</a> :: [<a href="Agda-Utils-GetOpt.html#t:OptDescr" title="Agda.Utils.GetOpt">OptDescr</a> a] -&gt; [(<a href="https://hackage.haskell.org/package/base-4.21.0.0/docs/Data-String.html#t:String" title="Data.String">String</a>, <a href="Agda-Interaction-Options-BashCompletion.html#t:Help" title="Agda.Interaction.Options.BashCompletion">Help</a>)] <a href="src/Agda.Interaction.Options.BashCompletion.html#printOptions" class="link">Source</a> <a href="#v:printOptions" class="selflink">#</a></p><div class="doc"><p>Print just the names of the given options (e.g. for bash completion scripts).
   For long options with finitely enumerable arguments, print all variants.</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:Truncate" class="def">Truncate</a> = <a href="https://hackage.haskell.org/package/base-4.21.0.0/docs/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="https://hackage.haskell.org/package/base-4.21.0.0/docs/Data-Int.html#t:Int" title="Data.Int">Int</a> <a href="src/Agda.Interaction.Options.BashCompletion.html#Truncate" class="link">Source</a> <a href="#t:Truncate" class="selflink">#</a></p><div class="doc"><p>Should the <code><a href="Agda-Interaction-Options-BashCompletion.html#v:completions" title="Agda.Interaction.Options.BashCompletion">completions</a></code> be truncated to a given maximum number of prefixes?</p></div></div><div class="top"><p class="src"><a id="v:bashComplete" class="def">bashComplete</a> <a href="src/Agda.Interaction.Options.BashCompletion.html#bashComplete" class="link">Source</a> <a href="#v:bashComplete" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="Agda-Interaction-Options-BashCompletion.html#t:Truncate" title="Agda.Interaction.Options.BashCompletion">Truncate</a></td><td class="doc"><p>Truncate completions suggestions?  To how many?</p></td></tr><tr><td class="src">-&gt; [<a href="https://hackage.haskell.org/package/base-4.21.0.0/docs/Data-String.html#t:String" title="Data.String">String</a>]</td><td class="doc"><p>Arguments following <code class="inline-code">--bash-complete</code>.</p></td></tr><tr><td class="src">-&gt; <a href="https://hackage.haskell.org/package/base-4.21.0.0/docs/Data-Either.html#t:Either" title="Data.Either">Either</a> <a href="https://hackage.haskell.org/package/base-4.21.0.0/docs/Data-String.html#t:String" title="Data.String">String</a> <a href="https://hackage.haskell.org/package/base-4.21.0.0/docs/Data-String.html#t:String" title="Data.String">String</a></td><td class="doc"><p>Error or <code class="inline-code">COMPREPLY</code>.</p></td></tr></table></div><div class="doc"><p>Handle the option <code class="inline-code">--bash-complete</code>.
   It expects the index <code class="inline-code">COMP_CWORD</code> as first argument
   that tells which of the following arguments <code class="inline-code">COMP_WORDS</code>
   is supposed to be completed.</p><p>It either returns an error message or the result for <code class="inline-code">COMPREPLY</code>.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Completion" class="def">Completion</a> <a href="src/Agda.Interaction.Options.BashCompletion.html#Completion" class="link">Source</a> <a href="#t:Completion" class="selflink">#</a></p><div class="doc"><p>The result of an invokation of (bash) completion.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Completion" class="def">Completion</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:extended" class="def">extended</a> :: <a href="https://hackage.haskell.org/package/base-4.21.0.0/docs/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="https://hackage.haskell.org/package/base-4.21.0.0/docs/Data-String.html#t:String" title="Data.String">String</a></dfn><div class="doc"><p>If <code><a href="https://hackage.haskell.org/package/base-4.21.0.0/docs/Data-Maybe.html#v:Nothing" title="Data.Maybe">Nothing</a></code>, then the completion word cannot become a valid option ever.</p></div></li><li><dfn class="src"><a id="v:completions" class="def">completions</a> :: [(<a href="https://hackage.haskell.org/package/base-4.21.0.0/docs/Data-String.html#t:String" title="Data.String">String</a>, <a href="Agda-Interaction-Options-BashCompletion.html#t:Help" title="Agda.Interaction.Options.BashCompletion">Help</a>)]</dfn><div class="doc"><p>If <code><a href="Agda-Utils-Null.html#v:null" title="Agda.Utils.Null">null</a></code>, the <code><a href="Agda-Interaction-Options-BashCompletion.html#v:extended" title="Agda.Interaction.Options.BashCompletion">extended</a></code> word cannot be further completed.</p></div></li></ul></div></td></tr></table></div></div><div class="top"><p class="src"><a id="v:optionsTrie" class="def">optionsTrie</a> :: <a href="Agda-Utils-Trie.html#t:Trie" title="Agda.Utils.Trie">Trie</a> <a href="https://hackage.haskell.org/package/base-4.21.0.0/docs/Data-Char.html#t:Char" title="Data.Char">Char</a> <a href="Agda-Interaction-Options-BashCompletion.html#t:Help" title="Agda.Interaction.Options.BashCompletion">Help</a> <a href="src/Agda.Interaction.Options.BashCompletion.html#optionsTrie" class="link">Source</a> <a href="#v:optionsTrie" class="selflink">#</a></p><div class="doc"><p>Cached trie of options.</p></div></div><div class="top"><p class="src"><a id="v:complete" class="def">complete</a> :: <a href="Agda-Interaction-Options-BashCompletion.html#t:Truncate" title="Agda.Interaction.Options.BashCompletion">Truncate</a> -&gt; <a href="https://hackage.haskell.org/package/base-4.21.0.0/docs/Data-String.html#t:String" title="Data.String">String</a> -&gt; <a href="Agda-Interaction-Options-BashCompletion.html#t:Completion" title="Agda.Interaction.Options.BashCompletion">Completion</a> <a href="src/Agda.Interaction.Options.BashCompletion.html#complete" class="link">Source</a> <a href="#v:complete" class="selflink">#</a></p><div class="doc"><p>Complete the given word as an option.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.30.0</p></div></body></html>