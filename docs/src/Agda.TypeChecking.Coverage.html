<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE NondecreasingIndentation #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE TypeApplications #-}</span><span>
</span><span id="line-3"></span><span>
</span><span id="line-4"></span><span class="annot"><span class="hs-comment">{-| Coverage checking, case splitting, and splitting for refine tactics.

 -}</span></span><span>
</span><span id="line-7"></span><span>
</span><span id="line-8"></span><span class="hs-keyword">module</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.html"><span class="hs-identifier">Agda.TypeChecking.Coverage</span></a></span><span>
</span><span id="line-9"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitClause.html#SplitClause"><span class="hs-identifier">SplitClause</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitClause.html#clauseToSplitClause"><span class="hs-identifier">clauseToSplitClause</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#insertTrailingArgs"><span class="hs-identifier">insertTrailingArgs</span></a></span><span>
</span><span id="line-10"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitClause.html#Covering"><span class="hs-identifier">Covering</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitClause.html#splitClauses"><span class="hs-identifier">splitClauses</span></a></span><span>
</span><span id="line-11"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#coverageCheck"><span class="hs-identifier">coverageCheck</span></a></span><span>
</span><span id="line-12"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#isCovered"><span class="hs-identifier">isCovered</span></a></span><span>
</span><span id="line-13"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#splitClauseWithAbsurd"><span class="hs-identifier">splitClauseWithAbsurd</span></a></span><span>
</span><span id="line-14"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#splitLast"><span class="hs-identifier">splitLast</span></a></span><span>
</span><span id="line-15"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#splitResult"><span class="hs-identifier">splitResult</span></a></span><span>
</span><span id="line-16"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Records.html#normaliseProjP"><span class="hs-identifier">normaliseProjP</span></a></span><span>
</span><span id="line-17"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-18"></span><span>
</span><span id="line-19"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Prelude</span></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">null</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-operator">(!!)</span></span><span class="hs-special">)</span><span>  </span><span class="hs-comment">-- do not use partial functions like !!</span><span>
</span><span id="line-20"></span><span>
</span><span id="line-21"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.Except</span></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier">MonadError</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">ExceptT</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">runExceptT</span></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-22"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.State</span></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier">State</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">evalState</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">state</span></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-23"></span><span>
</span><span id="line-24"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Bifunctor</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">second</span></span><span class="hs-special">)</span><span>
</span><span id="line-25"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Either</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">partitionEithers</span></span><span class="hs-special">)</span><span>
</span><span id="line-26"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Foldable</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">for_</span></span><span class="hs-special">)</span><span>
</span><span id="line-27"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.IntMap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">IntMap</span></span><span class="hs-special">)</span><span>
</span><span id="line-28"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.IntMap</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">IntMap</span></span><span>
</span><span id="line-29"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.IntSet</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">IntSet</span></span><span class="hs-special">)</span><span>
</span><span id="line-30"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.IntSet</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">IntSet</span></span><span>
</span><span id="line-31"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.List</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">List</span></span><span>
</span><span id="line-32"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Map</span></span><span class="hs-special">)</span><span>
</span><span id="line-33"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Map</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Map</span></span><span>
</span><span id="line-34"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Set</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Set</span></span><span>
</span><span id="line-35"></span><span>
</span><span id="line-36"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Agda.Benchmarking.html"><span class="hs-identifier">Agda.Benchmarking</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Bench</span></span><span>
</span><span id="line-37"></span><span>
</span><span id="line-38"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html"><span class="hs-identifier">Agda.Syntax.Common</span></a></span><span>
</span><span id="line-39"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Syntax.Common.Pretty.html"><span class="hs-identifier">Agda.Syntax.Common.Pretty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Common.Pretty.html#prettyShow"><span class="hs-identifier">prettyShow</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-40"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Syntax.Position.html"><span class="hs-identifier">Agda.Syntax.Position</span></a></span><span>
</span><span id="line-41"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html"><span class="hs-identifier">Agda.Syntax.Internal</span></a></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#DataOrRecord"><span class="hs-identifier">DataOrRecord</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-42"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.Pattern.html"><span class="hs-identifier">Agda.Syntax.Internal.Pattern</span></a></span><span>
</span><span id="line-43"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Syntax.Translation.InternalToAbstract.html"><span class="hs-identifier">Agda.Syntax.Translation.InternalToAbstract</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Translation.InternalToAbstract.html#NamedClause"><span class="hs-identifier">NamedClause</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-44"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Syntax.Scope.Base.html"><span class="hs-identifier">Agda.Syntax.Scope.Base</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Scope.Base.html#ScopeInfo"><span class="hs-identifier">ScopeInfo</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-45"></span><span>
</span><span id="line-46"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Primitive.html"><span class="hs-identifier">Agda.TypeChecking.Primitive</span></a></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Primitive.html#Nat"><span class="hs-identifier">Nat</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-47"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.html"><span class="hs-identifier">Agda.TypeChecking.Monad</span></a></span><span>
</span><span id="line-48"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Benchmark.html"><span class="hs-identifier">Agda.TypeChecking.Monad.Benchmark</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Bench</span></span><span>
</span><span id="line-49"></span><span>
</span><span id="line-50"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Rules.LHS.html"><span class="hs-identifier">Agda.TypeChecking.Rules.LHS</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Rules.LHS.html#DataOrRecord"><span class="hs-identifier">DataOrRecord</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Rules.LHS.html#checkSortOfSplitVar"><span class="hs-identifier">checkSortOfSplitVar</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-51"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Rules.LHS.Problem.html"><span class="hs-identifier">Agda.TypeChecking.Rules.LHS.Problem</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Rules.LHS.Problem.html#allFlexVars"><span class="hs-identifier">allFlexVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-52"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Rules.LHS.Unify.html"><span class="hs-identifier">Agda.TypeChecking.Rules.LHS.Unify</span></a></span><span>
</span><span id="line-53"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Rules.Term.html"><span class="hs-identifier">Agda.TypeChecking.Rules.Term</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Rules.Term.html#unquoteTactic"><span class="hs-identifier">unquoteTactic</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-54"></span><span>
</span><span id="line-55"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.Match.html"><span class="hs-identifier">Agda.TypeChecking.Coverage.Match</span></a></span><span>
</span><span id="line-56"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitPattern.html"><span class="hs-identifier">Agda.TypeChecking.Coverage.SplitPattern</span></a></span><span>
</span><span id="line-57"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitTree.html"><span class="hs-identifier">Agda.TypeChecking.Coverage.SplitTree</span></a></span><span>
</span><span id="line-58"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitClause.html"><span class="hs-identifier">Agda.TypeChecking.Coverage.SplitClause</span></a></span><span>
</span><span id="line-59"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.Cubical.html"><span class="hs-identifier">Agda.TypeChecking.Coverage.Cubical</span></a></span><span>
</span><span id="line-60"></span><span>
</span><span id="line-61"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Conversion.html"><span class="hs-identifier">Agda.TypeChecking.Conversion</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Conversion.html#tryConversion"><span class="hs-identifier">tryConversion</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Conversion.html#equalType"><span class="hs-identifier">equalType</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-62"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Datatypes.html"><span class="hs-identifier">Agda.TypeChecking.Datatypes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Datatypes.html#getConForm"><span class="hs-identifier">getConForm</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-63"></span><span class="hs-keyword">import</span><span> </span><span class="hs-pragma">{-# SOURCE</span><span> </span><span class="hs-pragma">#-}</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Empty.html"><span class="hs-identifier">Agda.TypeChecking.Empty</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Empty.html#checkEmptyTel"><span class="hs-identifier">checkEmptyTel</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Empty.html#isEmptyTel"><span class="hs-identifier">isEmptyTel</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Empty.html#isEmptyType"><span class="hs-identifier">isEmptyType</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-64"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Irrelevance.html"><span class="hs-identifier">Agda.TypeChecking.Irrelevance</span></a></span><span>
</span><span id="line-65"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html"><span class="hs-identifier">Agda.TypeChecking.Pretty</span></a></span><span>
</span><span id="line-66"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Substitute.html"><span class="hs-identifier">Agda.TypeChecking.Substitute</span></a></span><span>
</span><span id="line-67"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Reduce.html"><span class="hs-identifier">Agda.TypeChecking.Reduce</span></a></span><span>
</span><span id="line-68"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Records.html"><span class="hs-identifier">Agda.TypeChecking.Records</span></a></span><span>
</span><span id="line-69"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Sort.html"><span class="hs-identifier">Agda.TypeChecking.Sort</span></a></span><span>
</span><span id="line-70"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Telescope.html"><span class="hs-identifier">Agda.TypeChecking.Telescope</span></a></span><span>
</span><span id="line-71"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.MetaVars.html"><span class="hs-identifier">Agda.TypeChecking.MetaVars</span></a></span><span>
</span><span id="line-72"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Warnings.html"><span class="hs-identifier">Agda.TypeChecking.Warnings</span></a></span><span>
</span><span id="line-73"></span><span>
</span><span id="line-74"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Interaction.Options.html"><span class="hs-identifier">Agda.Interaction.Options</span></a></span><span>
</span><span id="line-75"></span><span>
</span><span id="line-76"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Utils.Either.html"><span class="hs-identifier">Agda.Utils.Either</span></a></span><span>
</span><span id="line-77"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Utils.Function.html"><span class="hs-identifier">Agda.Utils.Function</span></a></span><span>
</span><span id="line-78"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Utils.Functor.html"><span class="hs-identifier">Agda.Utils.Functor</span></a></span><span>
</span><span id="line-79"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Utils.List.html"><span class="hs-identifier">Agda.Utils.List</span></a></span><span>
</span><span id="line-80"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Utils.Lens.html"><span class="hs-identifier">Agda.Utils.Lens</span></a></span><span>
</span><span id="line-81"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Agda.Utils.List1.html"><span class="hs-identifier">Agda.Utils.List1</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">List1</span></span><span>
</span><span id="line-82"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Utils.Maybe.html"><span class="hs-identifier">Agda.Utils.Maybe</span></a></span><span>
</span><span id="line-83"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Utils.Monad.html"><span class="hs-identifier">Agda.Utils.Monad</span></a></span><span>
</span><span id="line-84"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Utils.Null.html"><span class="hs-identifier">Agda.Utils.Null</span></a></span><span>
</span><span id="line-85"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Utils.Permutation.html"><span class="hs-identifier">Agda.Utils.Permutation</span></a></span><span>
</span><span id="line-86"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Utils.Singleton.html"><span class="hs-identifier">Agda.Utils.Singleton</span></a></span><span>
</span><span id="line-87"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Utils.Size.html"><span class="hs-identifier">Agda.Utils.Size</span></a></span><span>
</span><span id="line-88"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Utils.Tuple.html"><span class="hs-identifier">Agda.Utils.Tuple</span></a></span><span>
</span><span id="line-89"></span><span>
</span><span id="line-90"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Utils.Impossible.html"><span class="hs-identifier">Agda.Utils.Impossible</span></a></span><span>
</span><span id="line-91"></span><span>
</span><span id="line-92"></span><span class="hs-keyword">type</span><span> </span><span id="CoverM"><span class="annot"><a href="Agda.TypeChecking.Coverage.html#CoverM"><span class="hs-identifier hs-var">CoverM</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ExceptT</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#SplitError"><span class="hs-identifier hs-type">SplitError</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">TCM</span></a></span><span>
</span><span id="line-93"></span><span>
</span><span id="line-94"></span><span class="hs-comment">-- | Top-level function for checking pattern coverage.</span><span>
</span><span id="line-95"></span><span class="hs-comment">--</span><span>
</span><span id="line-96"></span><span class="hs-comment">--   Effects:</span><span>
</span><span id="line-97"></span><span class="hs-comment">--</span><span>
</span><span id="line-98"></span><span class="hs-comment">--   - Marks unreachable clauses as such in the signature.</span><span>
</span><span id="line-99"></span><span class="hs-comment">--</span><span>
</span><span id="line-100"></span><span class="hs-comment">--   - Adds missing instances clauses to the signature.</span><span>
</span><span id="line-101"></span><span class="hs-comment">--</span><span>
</span><span id="line-102"></span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#coverageCheck"><span class="hs-identifier hs-type">coverageCheck</span></a></span><span>
</span><span id="line-103"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Abstract.Name.html#QName"><span class="hs-identifier hs-type">QName</span></a></span><span>     </span><span class="annot"><span class="hs-comment">-- ^ Name @f@ of definition.</span></span><span>
</span><span id="line-104"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span>      </span><span class="annot"><span class="hs-comment">-- ^ Absolute type (including the full parameter telescope).</span></span><span>
</span><span id="line-105"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.Syntax.Internal.html#Clause"><span class="hs-identifier hs-type">Clause</span></a></span><span class="hs-special">]</span><span>  </span><span class="annot"><span class="hs-comment">-- ^ Clauses of @f@.  These are the very clauses of @f@ in the signature.</span></span><span>
</span><span id="line-106"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">TCM</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitTree.html#SplitTree"><span class="hs-identifier hs-type">SplitTree</span></a></span><span>
</span><span id="line-107"></span><span id="coverageCheck"><span class="annot"><span class="annottext">coverageCheck :: QName -&gt; Type -&gt; [Clause] -&gt; TCM SplitTree
</span><a href="Agda.TypeChecking.Coverage.html#coverageCheck"><span class="hs-identifier hs-var hs-var">coverageCheck</span></a></span></span><span> </span><span id="local-6989586621682147958"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621682147958"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621682147959"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682147959"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span id="local-6989586621682147960"><span class="annot"><span class="annottext">[Clause]
</span><a href="#local-6989586621682147960"><span class="hs-identifier hs-var">cs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-108"></span><span>  </span><span class="annot"><span class="annottext">PatVarName -&gt; Int -&gt; PatVarName -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
PatVarName -&gt; Int -&gt; PatVarName -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSLn"><span class="hs-identifier hs-var">reportSLn</span></a></span><span> </span><span class="annot"><span class="annottext">PatVarName
</span><span class="hs-string">&quot;tc.cover.top&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">30</span></span><span> </span><span class="annot"><span class="annottext">(PatVarName -&gt; TCMT IO ()) -&gt; PatVarName -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PatVarName
</span><span class="hs-string">&quot;entering coverageCheck for &quot;</span></span><span> </span><span class="annot"><span class="annottext">PatVarName -&gt; PatVarName -&gt; PatVarName
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">QName -&gt; PatVarName
forall a. Pretty a =&gt; a -&gt; PatVarName
</span><a href="Agda.Syntax.Common.Pretty.html#prettyShow"><span class="hs-identifier hs-var">prettyShow</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621682147958"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-109"></span><span>  </span><span class="annot"><span class="annottext">PatVarName -&gt; Int -&gt; TCMT IO Doc -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
PatVarName -&gt; Int -&gt; TCMT IO Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">PatVarName
</span><span class="hs-string">&quot;tc.cover.top&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">75</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; TCMT IO ()) -&gt; TCMT IO Doc -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;  of type (raw): &quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PatVarName -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; PatVarName -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">(PatVarName -&gt; TCMT IO Doc)
-&gt; (Type -&gt; PatVarName) -&gt; Type -&gt; TCMT IO Doc
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; PatVarName
forall a. Pretty a =&gt; a -&gt; PatVarName
</span><a href="Agda.Syntax.Common.Pretty.html#prettyShow"><span class="hs-identifier hs-var">prettyShow</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682147959"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-110"></span><span>  </span><span class="annot"><span class="annottext">PatVarName -&gt; Int -&gt; TCMT IO Doc -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
PatVarName -&gt; Int -&gt; TCMT IO Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">PatVarName
</span><span class="hs-string">&quot;tc.cover.top&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">45</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; TCMT IO ()) -&gt; TCMT IO Doc -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;  of type: &quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Type -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; Type -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682147959"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-111"></span><span>  </span><span class="annot"><a href="Agda.TypeChecking.Substitute.html#TelV"><span class="hs-identifier hs-type">TelV</span></a></span><span> </span><span id="local-6989586621682147968"><span class="annot"><a href="#local-6989586621682147968"><span class="hs-identifier hs-var">gamma</span></a></span></span><span> </span><span id="local-6989586621682147969"><span class="annot"><a href="#local-6989586621682147969"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Type -&gt; TCMT IO (TelV Type)
forall (m :: * -&gt; *).
(MonadReduce m, MonadAddContext m) =&gt;
Int -&gt; Type -&gt; m (TelV Type)
</span><a href="Agda.TypeChecking.Telescope.html#telViewUpTo"><span class="hs-identifier hs-var">telViewUpTo</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">-</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682147959"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-112"></span><span>  </span><span class="annot"><a href="Agda.TypeChecking.Monad.Debug.html#reportSLn"><span class="hs-identifier hs-type">reportSLn</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;tc.cover.top&quot;</span></span><span> </span><span class="annot"><span class="hs-number">30</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><span class="hs-string">&quot;coverageCheck: computed telView&quot;</span></span><span>
</span><span id="line-113"></span><span>
</span><span id="line-114"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span class="hs-comment">-- n             = arity</span><span>
</span><span id="line-115"></span><span>      </span><span class="hs-comment">-- xs            = variable patterns fitting lgamma</span><span>
</span><span id="line-116"></span><span>      </span><span id="local-6989586621682147971"><span class="annot"><a href="#local-6989586621682147971"><span class="hs-identifier hs-var hs-var">n</span></a></span></span><span>            </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; Int
forall a. Sized a =&gt; a -&gt; Int
</span><a href="Agda.Utils.Size.html#size"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682147968"><span class="hs-identifier hs-var">gamma</span></a></span><span>
</span><span id="line-117"></span><span>      </span><span id="local-6989586621682147973"><span class="annot"><a href="#local-6989586621682147973"><span class="hs-identifier hs-var hs-var">xs</span></a></span></span><span>           </span><span class="hs-glyph">=</span><span>  </span><span class="annot"><span class="annottext">(NamedArg SplitPattern -&gt; NamedArg SplitPattern)
-&gt; [NamedArg SplitPattern] -&gt; [NamedArg SplitPattern]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Origin -&gt; NamedArg SplitPattern -&gt; NamedArg SplitPattern
forall a. LensOrigin a =&gt; Origin -&gt; a -&gt; a
</span><a href="Agda.Syntax.Common.html#setOrigin"><span class="hs-identifier hs-var">setOrigin</span></a></span><span> </span><span class="annot"><span class="annottext">Origin
</span><a href="Agda.Syntax.Common.html#Inserted"><span class="hs-identifier hs-var">Inserted</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([NamedArg SplitPattern] -&gt; [NamedArg SplitPattern])
-&gt; [NamedArg SplitPattern] -&gt; [NamedArg SplitPattern]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; [NamedArg SplitPattern]
forall a t. DeBruijn a =&gt; Tele (Dom t) -&gt; [NamedArg a]
</span><a href="Agda.TypeChecking.Telescope.html#teleNamedArgs"><span class="hs-identifier hs-var">teleNamedArgs</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682147968"><span class="hs-identifier hs-var">gamma</span></a></span><span>
</span><span id="line-118"></span><span>
</span><span id="line-119"></span><span>  </span><span class="annot"><a href="Agda.TypeChecking.Monad.Debug.html#reportSLn"><span class="hs-identifier hs-type">reportSLn</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;tc.cover.top&quot;</span></span><span> </span><span class="annot"><span class="hs-number">30</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><span class="hs-string">&quot;coverageCheck: getDefFreeVars&quot;</span></span><span>
</span><span id="line-120"></span><span>
</span><span id="line-121"></span><span>      </span><span class="hs-comment">-- The initial module parameter substitutions need to be weakened by the</span><span>
</span><span id="line-122"></span><span>      </span><span class="hs-comment">-- number of arguments that aren't module parameters.</span><span>
</span><span id="line-123"></span><span>  </span><span id="local-6989586621682147977"><span class="annot"><a href="#local-6989586621682147977"><span class="hs-identifier hs-var">fv</span></a></span></span><span>           </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Signature.html#getDefFreeVars"><span class="hs-identifier hs-type">getDefFreeVars</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682147958"><span class="hs-identifier hs-type">f</span></a></span><span>
</span><span id="line-124"></span><span>
</span><span id="line-125"></span><span>  </span><span class="annot"><a href="Agda.TypeChecking.Monad.Debug.html#reportSLn"><span class="hs-identifier hs-type">reportSLn</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;tc.cover.top&quot;</span></span><span> </span><span class="annot"><span class="hs-number">30</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><span class="hs-string">&quot;coverageCheck: getting checkpoints&quot;</span></span><span>
</span><span id="line-126"></span><span>
</span><span id="line-127"></span><span>  </span><span class="hs-comment">-- TODO: does this make sense? Why are we weakening by n - fv?</span><span>
</span><span id="line-128"></span><span>  </span><span id="local-6989586621682147979"><span class="annot"><a href="#local-6989586621682147979"><span class="hs-identifier hs-var">checkpoints</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#applySubst"><span class="hs-identifier hs-type">applySubst</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#raiseS"><span class="hs-identifier hs-type">raiseS</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682147971"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="annot"><span class="hs-glyph hs-type">-</span></span><span> </span><span class="annot"><a href="#local-6989586621682147977"><span class="hs-identifier hs-type">fv</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">&lt;$&gt;</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#viewTC"><span class="hs-identifier hs-type">viewTC</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#eCheckpoints"><span class="hs-identifier hs-type">eCheckpoints</span></a></span><span>
</span><span id="line-129"></span><span>
</span><span id="line-130"></span><span>      </span><span class="hs-comment">-- construct the initial split clause</span><span>
</span><span id="line-131"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682147987"><span class="annot"><a href="#local-6989586621682147987"><span class="hs-identifier hs-var hs-var">sc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Telescope
-&gt; [NamedArg SplitPattern]
-&gt; Substitution' SplitPattern
-&gt; Map CheckpointId (Substitution' Term)
-&gt; Maybe (Dom Type)
-&gt; SplitClause
</span><a href="Agda.TypeChecking.Coverage.SplitClause.html#SClause"><span class="hs-identifier hs-var">SClause</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682147968"><span class="hs-identifier hs-var">gamma</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621682147973"><span class="hs-identifier hs-var">xs</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' SplitPattern
forall a. Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#idS"><span class="hs-identifier hs-var">idS</span></a></span><span> </span><span class="annot"><span class="annottext">Map CheckpointId (Substitution' Term)
</span><a href="#local-6989586621682147979"><span class="hs-identifier hs-var">checkpoints</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe (Dom Type) -&gt; SplitClause)
-&gt; Maybe (Dom Type) -&gt; SplitClause
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Dom Type -&gt; Maybe (Dom Type)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(Dom Type -&gt; Maybe (Dom Type)) -&gt; Dom Type -&gt; Maybe (Dom Type)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; Dom Type
forall a. a -&gt; Dom a
</span><a href="Agda.Syntax.Internal.html#defaultDom"><span class="hs-identifier hs-var">defaultDom</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682147969"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-132"></span><span>
</span><span id="line-133"></span><span>  </span><span class="annot"><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-type">reportSDoc</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;tc.cover.top&quot;</span></span><span> </span><span class="annot"><span class="hs-number">10</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-134"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682148132"><span class="annot"><a href="#local-6989586621682148132"><span class="hs-identifier hs-var hs-var">prCl</span></a></span></span><span> </span><span id="local-6989586621682148133"><span class="annot"><span class="annottext">Clause
</span><a href="#local-6989586621682148133"><span class="hs-identifier hs-var">cl</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; m Doc -&gt; m Doc
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a.
MonadAddContext m =&gt;
Telescope -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Clause -&gt; Telescope
</span><a href="Agda.Syntax.Internal.html#clauseTel"><span class="hs-identifier hs-var">clauseTel</span></a></span><span> </span><span class="annot"><span class="annottext">Clause
</span><a href="#local-6989586621682148133"><span class="hs-identifier hs-var">cl</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(m Doc -&gt; m Doc) -&gt; m Doc -&gt; m Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-135"></span><span>                  </span><span class="annot"><span class="annottext">NAPs -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; NAPs -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCMPatternList"><span class="hs-identifier hs-var">prettyTCMPatternList</span></a></span><span> </span><span class="annot"><span class="annottext">(NAPs -&gt; m Doc) -&gt; NAPs -&gt; m Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Clause -&gt; NAPs
</span><a href="Agda.Syntax.Internal.html#namedClausePats"><span class="hs-identifier hs-var">namedClausePats</span></a></span><span> </span><span class="annot"><span class="annottext">Clause
</span><a href="#local-6989586621682148133"><span class="hs-identifier hs-var">cl</span></a></span><span>
</span><span id="line-136"></span><span>    </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#vcat"><span class="hs-identifier hs-type">vcat</span></a></span><span>
</span><span id="line-137"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><span class="hs-string">&quot;Coverage checking &quot;</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">++</span></span><span> </span><span class="annot"><a href="Agda.Syntax.Common.Pretty.html#prettyShow"><span class="hs-identifier hs-type">prettyShow</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682147958"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">++</span></span><span> </span><span class="annot"><span class="hs-string">&quot; with patterns:&quot;</span></span><span>
</span><span id="line-138"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#nest"><span class="hs-identifier hs-type">nest</span></a></span><span> </span><span class="annot"><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#vcat"><span class="hs-identifier hs-type">vcat</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">map</span></span><span> </span><span class="annot"><a href="#local-6989586621682148132"><span class="hs-identifier hs-type">prCl</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682147960"><span class="hs-identifier hs-type">cs</span></a></span><span>
</span><span id="line-139"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-140"></span><span>
</span><span id="line-141"></span><span>  </span><span class="hs-comment">-- used = actually used clauses for cover</span><span>
</span><span id="line-142"></span><span>  </span><span class="hs-comment">-- pss  = non-covered cases</span><span>
</span><span id="line-143"></span><span>  </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitClause.html#CoverResult"><span class="hs-identifier hs-type">CoverResult</span></a></span><span> </span><span id="local-6989586621682148141"><span class="annot"><a href="#local-6989586621682148141"><span class="hs-identifier hs-var">splitTree</span></a></span></span><span> </span><span id="local-6989586621682148142"><span class="annot"><a href="#local-6989586621682148142"><span class="hs-identifier hs-var">used</span></a></span></span><span> </span><span id="local-6989586621682148143"><span class="annot"><a href="#local-6989586621682148143"><span class="hs-identifier hs-var">pss</span></a></span></span><span> </span><span id="local-6989586621682148144"><span class="annot"><a href="#local-6989586621682148144"><span class="hs-identifier hs-var">qss</span></a></span></span><span> </span><span id="local-6989586621682148145"><span class="annot"><a href="#local-6989586621682148145"><span class="hs-identifier hs-var">noex</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#cover"><span class="hs-identifier hs-type">cover</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#YesInferMissing"><span class="hs-identifier hs-type">YesInferMissing</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682147958"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682147960"><span class="hs-identifier hs-type">cs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682147987"><span class="hs-identifier hs-type">sc</span></a></span><span>
</span><span id="line-144"></span><span>
</span><span id="line-145"></span><span>  </span><span class="hs-comment">-- Andreas, 2018-11-12, issue #378:</span><span>
</span><span id="line-146"></span><span>  </span><span class="hs-comment">-- some indices in @used@ and @noex@ point outside of @cs@,</span><span>
</span><span id="line-147"></span><span>  </span><span class="hs-comment">-- since missing hcomp clauses have been added during the course of @cover@.</span><span>
</span><span id="line-148"></span><span>  </span><span class="hs-comment">-- We simply delete theses indices from @noex@.</span><span>
</span><span id="line-149"></span><span>  </span><span id="local-6989586621682148148"><span class="annot"><a href="#local-6989586621682148148"><span class="hs-identifier hs-var">noex</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IntSet.filter</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-operator">&lt;</span></span><span> </span><span class="annot"><span class="hs-identifier">length</span></span><span> </span><span class="annot"><span class="hs-identifier">cs</span></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621682148145"><span class="hs-identifier hs-type">noex</span></a></span><span>
</span><span id="line-150"></span><span>
</span><span id="line-151"></span><span>  </span><span class="annot"><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-type">reportSDoc</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;tc.cover.top&quot;</span></span><span> </span><span class="annot"><span class="hs-number">10</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#vcat"><span class="hs-identifier hs-type">vcat</span></a></span><span>
</span><span id="line-152"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="hs-string">&quot;cover computed!&quot;</span></span><span>
</span><span id="line-153"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><span class="hs-string">&quot;used clauses: &quot;</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">++</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">show</span></span><span> </span><span class="annot"><a href="#local-6989586621682148142"><span class="hs-identifier hs-type">used</span></a></span><span>
</span><span id="line-154"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><span class="hs-string">&quot;non-exact clauses: &quot;</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">++</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">IntSet.toList</span></span><span> </span><span class="annot"><a href="#local-6989586621682148148"><span class="hs-identifier hs-type">noex</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-155"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-156"></span><span>  </span><span class="annot"><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-type">reportSDoc</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;tc.cover.splittree&quot;</span></span><span> </span><span class="annot"><span class="hs-number">10</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#vcat"><span class="hs-identifier hs-type">vcat</span></a></span><span>
</span><span id="line-157"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="hs-string">&quot;generated split tree for&quot;</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-type">&lt;+&gt;</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-type">prettyTCM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682147958"><span class="hs-identifier hs-type">f</span></a></span><span>
</span><span id="line-158"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Agda.Syntax.Common.Pretty.html#prettyShow"><span class="hs-identifier hs-type">prettyShow</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148141"><span class="hs-identifier hs-type">splitTree</span></a></span><span>
</span><span id="line-159"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-160"></span><span>  </span><span class="annot"><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-type">reportSDoc</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;tc.cover.covering&quot;</span></span><span> </span><span class="annot"><span class="hs-number">10</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#vcat"><span class="hs-identifier hs-type">vcat</span></a></span><span>
</span><span id="line-161"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><span class="hs-string">&quot;covering patterns for &quot;</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">++</span></span><span> </span><span class="annot"><a href="Agda.Syntax.Common.Pretty.html#prettyShow"><span class="hs-identifier hs-type">prettyShow</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682147958"><span class="hs-identifier hs-type">f</span></a></span><span>
</span><span id="line-162"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#nest"><span class="hs-identifier hs-type">nest</span></a></span><span> </span><span class="annot"><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#vcat"><span class="hs-identifier hs-type">vcat</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">map</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621682148154"><span class="annot"><span class="annottext">Clause
</span><a href="#local-6989586621682148154"><span class="hs-identifier hs-var">cl</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a.
MonadAddContext m =&gt;
Telescope -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Clause -&gt; Telescope
</span><a href="Agda.Syntax.Internal.html#clauseTel"><span class="hs-identifier hs-var">clauseTel</span></a></span><span> </span><span class="annot"><span class="annottext">Clause
</span><a href="#local-6989586621682148154"><span class="hs-identifier hs-var">cl</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; TCMT IO Doc) -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">NAPs -&gt; TCMT IO Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; NAPs -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCMPatternList"><span class="hs-identifier hs-var">prettyTCMPatternList</span></a></span><span> </span><span class="annot"><span class="annottext">(NAPs -&gt; TCMT IO Doc) -&gt; NAPs -&gt; TCMT IO Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Clause -&gt; NAPs
</span><a href="Agda.Syntax.Internal.html#namedClausePats"><span class="hs-identifier hs-var">namedClausePats</span></a></span><span> </span><span class="annot"><span class="annottext">Clause
</span><a href="#local-6989586621682148154"><span class="hs-identifier hs-var">cl</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621682148144"><span class="hs-identifier hs-type">qss</span></a></span><span>
</span><span id="line-163"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-164"></span><span>
</span><span id="line-165"></span><span>  </span><span class="hs-comment">-- Storing the covering clauses so that checkIApplyConfluence_ can</span><span>
</span><span id="line-166"></span><span>  </span><span class="hs-comment">-- find them later.</span><span>
</span><span id="line-167"></span><span>  </span><span class="hs-comment">-- Andreas, 2019-03-27, only needed when --cubical</span><span>
</span><span id="line-168"></span><span>  </span><span class="hs-comment">-- Jesper, 2022-10-18, also needed for some backends, so keep when flag says so</span><span>
</span><span id="line-169"></span><span>  </span><span id="local-6989586621682148155"><span class="annot"><a href="#local-6989586621682148155"><span class="hs-identifier hs-var">opts</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="Agda.Interaction.Options.HasOptions.html#pragmaOptions"><span class="hs-identifier hs-type">pragmaOptions</span></a></span><span>
</span><span id="line-170"></span><span>  </span><span class="annot"><a href="Agda.Utils.Monad.html#when"><span class="hs-identifier hs-type">when</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">isJust</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Interaction.Options.Base.html#optCubical"><span class="hs-identifier hs-type">optCubical</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148155"><span class="hs-identifier hs-type">opts</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">||</span></span><span> </span><span class="annot"><a href="Agda.Interaction.Options.Base.html#optKeepCoveringClauses"><span class="hs-identifier hs-type">optKeepCoveringClauses</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148155"><span class="hs-identifier hs-type">opts</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span>
</span><span id="line-171"></span><span>    </span><span class="annot"><a href="Agda.TypeChecking.Monad.State.html#modifySignature"><span class="hs-identifier hs-type">modifySignature</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.State.html#updateDefinition"><span class="hs-identifier hs-type">updateDefinition</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682147958"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.State.html#updateTheDef"><span class="hs-identifier hs-type">updateTheDef</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.State.html#updateCovering"><span class="hs-identifier hs-type">updateCovering</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">const</span></span><span> </span><span class="annot"><a href="#local-6989586621682148144"><span class="hs-identifier hs-type">qss</span></a></span><span>
</span><span id="line-172"></span><span>
</span><span id="line-173"></span><span>
</span><span id="line-174"></span><span>  </span><span class="hs-comment">-- filter out the missing clauses that are absurd.</span><span>
</span><span id="line-175"></span><span>  </span><span id="local-6989586621682148167"><span class="annot"><a href="#local-6989586621682148167"><span class="hs-identifier hs-var">pss</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="Agda.Utils.Monad.html#ifNotM"><span class="hs-identifier hs-type">ifNotM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Interaction.Options.Base.html#optInferAbsurdClauses"><span class="hs-identifier hs-type">optInferAbsurdClauses</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">&lt;$&gt;</span></span><span> </span><span class="annot"><a href="Agda.Interaction.Options.HasOptions.html#pragmaOptions"><span class="hs-identifier hs-type">pragmaOptions</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">pure</span></span><span> </span><span class="annot"><a href="#local-6989586621682148143"><span class="hs-identifier hs-type">pss</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-comment">{-else-}</span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span>
</span><span id="line-176"></span><span>   </span><span class="annot"><span class="hs-identifier hs-type">flip</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">filterM</span></span><span> </span><span class="annot"><a href="#local-6989586621682148143"><span class="hs-identifier hs-type">pss</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621682148172"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682148172"><span class="hs-identifier hs-var">tel</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621682148173"><span class="annot"><span class="annottext">NAPs
</span><a href="#local-6989586621682148173"><span class="hs-identifier hs-var">ps</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-177"></span><span>    </span><span class="hs-comment">-- Andreas, 2019-04-13, issue #3692: when adding missing absurd</span><span>
</span><span id="line-178"></span><span>    </span><span class="hs-comment">-- clauses, also put the absurd pattern in.</span><span>
</span><span id="line-179"></span><span>    </span><span class="annot"><span class="annottext">TCMT IO (Either ErrorNonEmpty Int)
-&gt; (ErrorNonEmpty -&gt; TCMT IO Bool)
-&gt; (Int -&gt; TCMT IO Bool)
-&gt; TCMT IO Bool
forall (m :: * -&gt; *) a b c.
Monad m =&gt;
m (Either a b) -&gt; (a -&gt; m c) -&gt; (b -&gt; m c) -&gt; m c
</span><a href="Agda.Utils.Either.html#caseEitherM"><span class="hs-identifier hs-var">caseEitherM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Range -&gt; Telescope -&gt; TCMT IO (Either ErrorNonEmpty Int)
</span><a href="Agda.TypeChecking.Empty.html#checkEmptyTel"><span class="hs-identifier hs-var">checkEmptyTel</span></a></span><span> </span><span class="annot"><span class="annottext">Range
forall a. Range' a
</span><a href="Agda.Syntax.Position.html#noRange"><span class="hs-identifier hs-var">noRange</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682148172"><span class="hs-identifier hs-var">tel</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span> </span><span class="annot"><span class="annottext">ErrorNonEmpty
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; TCMT IO Bool
forall a. a -&gt; TCMT IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((Int -&gt; TCMT IO Bool) -&gt; TCMT IO Bool)
-&gt; (Int -&gt; TCMT IO Bool) -&gt; TCMT IO Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621682148176"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682148176"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-180"></span><span>      </span><span class="hs-comment">-- Now, @l@ is the first type in @tel@ (counting from 0=leftmost)</span><span>
</span><span id="line-181"></span><span>      </span><span class="hs-comment">-- which is empty.  Turn it into a de Bruijn index @i@.</span><span>
</span><span id="line-182"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682148177"><span class="annot"><span class="annottext">i :: Int
</span><a href="#local-6989586621682148177"><span class="hs-identifier hs-var hs-var hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; Int
forall a. Sized a =&gt; a -&gt; Int
</span><a href="Agda.Utils.Size.html#size"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682148172"><span class="hs-identifier hs-var">tel</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682148176"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-183"></span><span>      </span><span class="hs-comment">-- Build a substitution mapping this pattern variable to the absurd pattern.</span><span>
</span><span id="line-184"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682148178"><span class="annot"><span class="annottext">sub :: PatternSubstitution
</span><a href="#local-6989586621682148178"><span class="hs-identifier hs-var hs-var hs-var">sub</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; DeBruijnPattern -&gt; PatternSubstitution
forall a. EndoSubst a =&gt; Int -&gt; a -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#inplaceS"><span class="hs-identifier hs-var">inplaceS</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682148177"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">(DeBruijnPattern -&gt; PatternSubstitution)
-&gt; DeBruijnPattern -&gt; PatternSubstitution
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; DeBruijnPattern
</span><a href="Agda.Syntax.Internal.html#absurdP"><span class="hs-identifier hs-var">absurdP</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682148177"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-185"></span><span>        </span><span class="hs-comment">-- ifNotM (isEmptyTel tel) (return True) $ do</span><span>
</span><span id="line-186"></span><span>      </span><span class="hs-comment">-- Jesper, 2018-11-28, Issue #3407: if the clause is absurd,</span><span>
</span><span id="line-187"></span><span>      </span><span class="hs-comment">-- add the appropriate absurd clause to the definition.</span><span>
</span><span id="line-188"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682148181"><span class="annot"><span class="annottext">cl :: Clause
</span><a href="#local-6989586621682148181"><span class="hs-identifier hs-var hs-var hs-var">cl</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Clause"><span class="hs-identifier hs-type">Clause</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">clauseLHSRange :: Range
</span><a href="Agda.Syntax.Internal.html#clauseLHSRange"><span class="hs-identifier hs-var">clauseLHSRange</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Range
forall a. Range' a
</span><a href="Agda.Syntax.Position.html#noRange"><span class="hs-identifier hs-var">noRange</span></a></span><span>
</span><span id="line-189"></span><span>                      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">clauseFullRange :: Range
</span><a href="Agda.Syntax.Internal.html#clauseFullRange"><span class="hs-identifier hs-var">clauseFullRange</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Range
forall a. Range' a
</span><a href="Agda.Syntax.Position.html#noRange"><span class="hs-identifier hs-var">noRange</span></a></span><span>
</span><span id="line-190"></span><span>                      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">clauseTel :: Telescope
</span><a href="Agda.Syntax.Internal.html#clauseTel"><span class="hs-identifier hs-var">clauseTel</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682148172"><span class="hs-identifier hs-var">tel</span></a></span><span>
</span><span id="line-191"></span><span>                      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">namedClausePats :: NAPs
</span><a href="Agda.Syntax.Internal.html#namedClausePats"><span class="hs-identifier hs-var">namedClausePats</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Substitution' (SubstArg NAPs) -&gt; NAPs -&gt; NAPs
forall a. Subst a =&gt; Substitution' (SubstArg a) -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#applySubst"><span class="hs-identifier hs-var">applySubst</span></a></span><span> </span><span class="annot"><span class="annottext">PatternSubstitution
Substitution' (SubstArg NAPs)
</span><a href="#local-6989586621682148178"><span class="hs-identifier hs-var">sub</span></a></span><span> </span><span class="annot"><span class="annottext">NAPs
</span><a href="#local-6989586621682148173"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-192"></span><span>                      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">clauseBody :: Maybe Term
</span><a href="Agda.Syntax.Internal.html#clauseBody"><span class="hs-identifier hs-var">clauseBody</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Term
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-193"></span><span>                      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">clauseType :: Maybe (Arg Type)
</span><a href="Agda.Syntax.Internal.html#clauseType"><span class="hs-identifier hs-var">clauseType</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (Arg Type)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-194"></span><span>                      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">clauseCatchall :: Catchall
</span><a href="Agda.Syntax.Internal.html#clauseCatchall"><span class="hs-identifier hs-var">clauseCatchall</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Range -&gt; Catchall
</span><a href="Agda.Syntax.Common.html#YesCatchall"><span class="hs-identifier hs-var">YesCatchall</span></a></span><span> </span><span class="annot"><span class="annottext">Range
forall a. Null a =&gt; a
</span><a href="Agda.Utils.Null.html#empty"><span class="hs-identifier hs-var">empty</span></a></span><span>       </span><span class="hs-comment">-- absurd clauses are safe as catch-all</span><span>
</span><span id="line-195"></span><span>                      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">clauseRecursive :: ClauseRecursive
</span><a href="Agda.Syntax.Internal.html#clauseRecursive"><span class="hs-identifier hs-var">clauseRecursive</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ClauseRecursive
</span><a href="Agda.Syntax.Internal.html#NotRecursive"><span class="hs-identifier hs-var">NotRecursive</span></a></span><span>
</span><span id="line-196"></span><span>                      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">clauseUnreachable :: Maybe Bool
</span><a href="Agda.Syntax.Internal.html#clauseUnreachable"><span class="hs-identifier hs-var">clauseUnreachable</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Maybe Bool
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-197"></span><span>                      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">clauseEllipsis :: ExpandedEllipsis
</span><a href="Agda.Syntax.Internal.html#clauseEllipsis"><span class="hs-identifier hs-var">clauseEllipsis</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ExpandedEllipsis
</span><a href="Agda.Syntax.Common.html#NoEllipsis"><span class="hs-identifier hs-var">NoEllipsis</span></a></span><span>
</span><span id="line-198"></span><span>                      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">clauseWhereModule :: Maybe ModuleName
</span><a href="Agda.Syntax.Internal.html#clauseWhereModule"><span class="hs-identifier hs-var">clauseWhereModule</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe ModuleName
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-199"></span><span>                      </span><span class="hs-special">}</span><span>
</span><span id="line-200"></span><span>      </span><span class="annot"><span class="annottext">PatVarName -&gt; Int -&gt; TCMT IO Doc -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
PatVarName -&gt; Int -&gt; TCMT IO Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">PatVarName
</span><span class="hs-string">&quot;tc.cover.missing&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">20</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; TCMT IO ()) -&gt; TCMT IO Doc -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc
forall (tcm :: * -&gt; *) a.
(MonadTCEnv tcm, ReadTCState tcm) =&gt;
tcm a -&gt; tcm a
</span><a href="Agda.TypeChecking.Monad.Context.html#inTopContext"><span class="hs-identifier hs-var">inTopContext</span></a></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; TCMT IO Doc) -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-201"></span><span>        </span><span class="annot"><span class="annottext">[TCMT IO Doc] -&gt; TCMT IO Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;adding missing absurd clause&quot;</span></span><span>
</span><span id="line-202"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Functor m =&gt; Int -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; TCMT IO Doc) -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">QNamed Clause -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; QNamed Clause -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">(QNamed Clause -&gt; TCMT IO Doc) -&gt; QNamed Clause -&gt; TCMT IO Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">QName -&gt; Clause -&gt; QNamed Clause
forall a. QName -&gt; a -&gt; QNamed a
</span><a href="Agda.Syntax.Abstract.Name.html#QNamed"><span class="hs-identifier hs-var">QNamed</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621682147958"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Clause
</span><a href="#local-6989586621682148181"><span class="hs-identifier hs-var">cl</span></a></span><span>
</span><span id="line-203"></span><span>            </span><span class="hs-special">]</span><span>
</span><span id="line-204"></span><span>      </span><span class="annot"><span class="annottext">PatVarName -&gt; Int -&gt; TCMT IO Doc -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
PatVarName -&gt; Int -&gt; TCMT IO Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">PatVarName
</span><span class="hs-string">&quot;tc.cover.missing&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">80</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; TCMT IO ()) -&gt; TCMT IO Doc -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc
forall (tcm :: * -&gt; *) a.
(MonadTCEnv tcm, ReadTCState tcm) =&gt;
tcm a -&gt; tcm a
</span><a href="Agda.TypeChecking.Monad.Context.html#inTopContext"><span class="hs-identifier hs-var">inTopContext</span></a></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; TCMT IO Doc) -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[TCMT IO Doc] -&gt; TCMT IO Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span>
</span><span id="line-205"></span><span>        </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;l   = &quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; TCMT IO Doc
forall (m :: * -&gt; *) a. (Applicative m, Pretty a) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#pretty"><span class="hs-identifier hs-var">pretty</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682148176"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-206"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;i   = &quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; TCMT IO Doc
forall (m :: * -&gt; *) a. (Applicative m, Pretty a) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#pretty"><span class="hs-identifier hs-var">pretty</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682148177"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-207"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;cl  = &quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">QNamed Clause -&gt; TCMT IO Doc
forall (m :: * -&gt; *) a. (Applicative m, Pretty a) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#pretty"><span class="hs-identifier hs-var">pretty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">QName -&gt; Clause -&gt; QNamed Clause
forall a. QName -&gt; a -&gt; QNamed a
</span><a href="Agda.Syntax.Abstract.Name.html#QNamed"><span class="hs-identifier hs-var">QNamed</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621682147958"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Clause
</span><a href="#local-6989586621682148181"><span class="hs-identifier hs-var">cl</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-208"></span><span>        </span><span class="hs-special">]</span><span>
</span><span id="line-209"></span><span>      </span><span class="annot"><span class="annottext">QName -&gt; [Clause] -&gt; TCMT IO ()
forall (m :: * -&gt; *).
(MonadConstraint m, MonadTCState m) =&gt;
QName -&gt; [Clause] -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Signature.html#addClauses"><span class="hs-identifier hs-var">addClauses</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621682147958"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">([Clause] -&gt; TCMT IO ()) -&gt; [Clause] -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Clause -&gt; [Clause]
forall el coll. Singleton el coll =&gt; el -&gt; coll
</span><a href="Agda.Utils.Singleton.html#singleton"><span class="hs-identifier hs-var">singleton</span></a></span><span> </span><span class="annot"><span class="annottext">Clause
</span><a href="#local-6989586621682148181"><span class="hs-identifier hs-var">cl</span></a></span><span>
</span><span id="line-210"></span><span>      </span><span class="annot"><span class="annottext">Bool -&gt; TCMT IO Bool
forall a. a -&gt; TCMT IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-211"></span><span>
</span><span id="line-212"></span><span>  </span><span class="hs-comment">-- report a warning if there are uncovered cases,</span><span>
</span><span id="line-213"></span><span>  </span><span class="annot"><a href="Agda.Utils.List1.html#unlessNull"><span class="hs-identifier hs-type">List1.unlessNull</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148167"><span class="hs-identifier hs-type">pss</span></a></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621682148203"><span class="annot"><span class="annottext">List1 (Telescope, NAPs)
</span><a href="#local-6989586621682148203"><span class="hs-identifier hs-var">pss</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-214"></span><span>    </span><span class="annot"><span class="annottext">(Set QName -&gt; f (Set QName)) -&gt; TCState -&gt; f TCState
Lens' TCState (Set QName)
</span><a href="Agda.TypeChecking.Monad.Base.html#stLocalPartialDefs"><span class="hs-identifier hs-var">stLocalPartialDefs</span></a></span><span> </span><span class="annot"><span class="annottext">Lens' TCState (Set QName) -&gt; (Set QName -&gt; Set QName) -&gt; TCMT IO ()
forall (m :: * -&gt; *) a.
MonadTCState m =&gt;
Lens' TCState a -&gt; (a -&gt; a) -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Base.html#modifyTCLens"><span class="hs-operator hs-var">`modifyTCLens`</span></a></span><span> </span><span class="annot"><span class="annottext">QName -&gt; Set QName -&gt; Set QName
forall a. Ord a =&gt; a -&gt; Set a -&gt; Set a
</span><span class="hs-identifier hs-var">Set.insert</span></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621682147958"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-215"></span><span>    </span><span class="annot"><span class="annottext">TCMT IO Bool -&gt; TCMT IO () -&gt; TCMT IO ()
forall (m :: * -&gt; *). Monad m =&gt; m Bool -&gt; m () -&gt; m ()
</span><a href="Agda.Utils.Monad.html#whenM"><span class="hs-identifier hs-var">whenM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">CoverageCheck
</span><a href="Agda.Syntax.Common.html#YesCoverageCheck"><span class="hs-identifier hs-var">YesCoverageCheck</span></a></span><span> </span><span class="annot"><span class="annottext">CoverageCheck -&gt; CoverageCheck -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(CoverageCheck -&gt; Bool) -&gt; TCMT IO CoverageCheck -&gt; TCMT IO Bool
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Lens' TCEnv CoverageCheck -&gt; TCMT IO CoverageCheck
forall (m :: * -&gt; *) a. MonadTCEnv m =&gt; Lens' TCEnv a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Base.html#viewTC"><span class="hs-identifier hs-var">viewTC</span></a></span><span> </span><span class="annot"><span class="annottext">(CoverageCheck -&gt; f CoverageCheck) -&gt; TCEnv -&gt; f TCEnv
Lens' TCEnv CoverageCheck
</span><a href="Agda.TypeChecking.Monad.Base.html#eCoverageCheck"><span class="hs-identifier hs-var">eCoverageCheck</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(TCMT IO () -&gt; TCMT IO ()) -&gt; TCMT IO () -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-216"></span><span>      </span><span class="annot"><span class="annottext">[Clause] -&gt; TCMT IO () -&gt; TCMT IO ()
forall (m :: * -&gt; *) x a.
(MonadTrace m, HasRange x) =&gt;
x -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Trace.html#setCurrentRange"><span class="hs-identifier hs-var">setCurrentRange</span></a></span><span> </span><span class="annot"><span class="annottext">[Clause]
</span><a href="#local-6989586621682147960"><span class="hs-identifier hs-var">cs</span></a></span><span> </span><span class="annot"><span class="annottext">(TCMT IO () -&gt; TCMT IO ()) -&gt; TCMT IO () -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Warning -&gt; TCMT IO ()
forall (m :: * -&gt; *).
(HasCallStack, MonadWarning m) =&gt;
Warning -&gt; m ()
</span><a href="Agda.TypeChecking.Warnings.html#warning"><span class="hs-identifier hs-var">warning</span></a></span><span> </span><span class="annot"><span class="annottext">(Warning -&gt; TCMT IO ()) -&gt; Warning -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">QName -&gt; List1 (Telescope, NAPs) -&gt; Warning
</span><a href="Agda.TypeChecking.Monad.Base.html#CoverageIssue"><span class="hs-identifier hs-var">CoverageIssue</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621682147958"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">List1 (Telescope, NAPs)
</span><a href="#local-6989586621682148203"><span class="hs-identifier hs-var">pss</span></a></span><span>
</span><span id="line-217"></span><span>
</span><span id="line-218"></span><span>  </span><span class="hs-comment">-- Andreas, 2017-08-28, issue #2723:</span><span>
</span><span id="line-219"></span><span>  </span><span class="hs-comment">-- Mark clauses as reachable or unreachable in the signature.</span><span>
</span><span id="line-220"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682148217"><span class="annot"><a href="#local-6989586621682148217"><span class="hs-identifier hs-var hs-var">cs1</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Int] -&gt; [Clause] -&gt; [(Int, Clause)]
forall a b. [a] -&gt; [b] -&gt; [(a, b)]
</span><span class="hs-identifier hs-var">zip</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-glyph">..</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">[Clause]
</span><a href="#local-6989586621682147960"><span class="hs-identifier hs-var">cs</span></a></span><span> </span><span class="annot"><span class="annottext">[(Int, Clause)] -&gt; ((Int, Clause) -&gt; Clause) -&gt; [Clause]
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; (a -&gt; b) -&gt; f b
</span><span class="hs-operator hs-var">&lt;&amp;&gt;</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682148219"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682148219"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682148220"><span class="annot"><span class="annottext">Clause
</span><a href="#local-6989586621682148220"><span class="hs-identifier hs-var">cl</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Clause
</span><a href="#local-6989586621682148220"><span class="hs-identifier hs-var">cl</span></a></span><span>
</span><span id="line-221"></span><span>             </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#clauseUnreachable"><span class="hs-identifier hs-var">clauseUnreachable</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="#local-6989586621682148219"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">`IntSet.notMember`</span></span><span> </span><span class="annot"><a href="#local-6989586621682148142"><span class="hs-identifier hs-type">used</span></a></span><span>
</span><span id="line-222"></span><span>             </span><span class="hs-special">}</span><span>
</span><span id="line-223"></span><span>
</span><span id="line-224"></span><span>  </span><span class="hs-comment">-- Replace the first clauses by @cs1@.  There might be more</span><span>
</span><span id="line-225"></span><span>  </span><span class="hs-comment">-- added by @inferMissingClause@.</span><span>
</span><span id="line-226"></span><span>  </span><span class="annot"><a href="Agda.TypeChecking.Monad.Signature.html#modifyFunClauses"><span class="hs-identifier hs-type">modifyFunClauses</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682147958"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621682148223"><span class="annot"><span class="annottext">[Clause]
</span><a href="#local-6989586621682148223"><span class="hs-identifier hs-var">cs0</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[Clause]
</span><a href="#local-6989586621682148217"><span class="hs-identifier hs-var">cs1</span></a></span><span> </span><span class="annot"><span class="annottext">[Clause] -&gt; [Clause] -&gt; [Clause]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; [Clause] -&gt; [Clause]
forall a. Int -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">drop</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Clause] -&gt; Int
forall a. [a] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">[Clause]
</span><a href="#local-6989586621682148217"><span class="hs-identifier hs-var">cs1</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Clause]
</span><a href="#local-6989586621682148223"><span class="hs-identifier hs-var">cs0</span></a></span><span>
</span><span id="line-227"></span><span>
</span><span id="line-228"></span><span>  </span><span class="hs-comment">-- Warn if there are unreachable clauses and mark them as unreachable.</span><span>
</span><span id="line-229"></span><span>  </span><span class="annot"><a href="Agda.Utils.List1.html#unlessNull"><span class="hs-identifier hs-type">List1.unlessNull</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">filter</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Just</span></span><span> </span><span class="annot"><span class="hs-identifier">True</span></span><span> </span><span class="annot"><span class="hs-operator">==</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">.</span></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#clauseUnreachable"><span class="hs-identifier hs-var">clauseUnreachable</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621682148217"><span class="hs-identifier hs-type">cs1</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621682148225"><span class="annot"><span class="annottext">List1 Clause
</span><a href="#local-6989586621682148225"><span class="hs-identifier hs-var">unreached</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-230"></span><span>    </span><span class="hs-comment">-- Warn about unreachable clauses.</span><span>
</span><span id="line-231"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682148226"><span class="annot"><span class="annottext">ranges :: NonEmpty Range
</span><a href="#local-6989586621682148226"><span class="hs-identifier hs-var hs-var">ranges</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Clause -&gt; Range) -&gt; List1 Clause -&gt; NonEmpty Range
forall a b. (a -&gt; b) -&gt; NonEmpty a -&gt; NonEmpty b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">Clause -&gt; Range
</span><a href="Agda.Syntax.Internal.html#clauseFullRange"><span class="hs-identifier hs-var">clauseFullRange</span></a></span><span> </span><span class="annot"><span class="annottext">List1 Clause
</span><a href="#local-6989586621682148225"><span class="hs-identifier hs-var">unreached</span></a></span><span>
</span><span id="line-232"></span><span>    </span><span class="annot"><span class="annottext">NonEmpty Range -&gt; TCMT IO () -&gt; TCMT IO ()
forall (m :: * -&gt; *) x a.
(MonadTrace m, HasRange x) =&gt;
x -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Trace.html#setCurrentRange"><span class="hs-identifier hs-var">setCurrentRange</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmpty Range
</span><a href="#local-6989586621682148226"><span class="hs-identifier hs-var">ranges</span></a></span><span> </span><span class="annot"><span class="annottext">(TCMT IO () -&gt; TCMT IO ()) -&gt; TCMT IO () -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Warning -&gt; TCMT IO ()
forall (m :: * -&gt; *).
(HasCallStack, MonadWarning m) =&gt;
Warning -&gt; m ()
</span><a href="Agda.TypeChecking.Warnings.html#warning"><span class="hs-identifier hs-var">warning</span></a></span><span> </span><span class="annot"><span class="annottext">(Warning -&gt; TCMT IO ()) -&gt; Warning -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">QName -&gt; NonEmpty Range -&gt; Warning
</span><a href="Agda.TypeChecking.Monad.Base.html#UnreachableClauses"><span class="hs-identifier hs-var">UnreachableClauses</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621682147958"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmpty Range
</span><a href="#local-6989586621682148226"><span class="hs-identifier hs-var">ranges</span></a></span><span>
</span><span id="line-233"></span><span>
</span><span id="line-234"></span><span>  </span><span class="hs-comment">-- Partition clauses into exact and non-exact ones.</span><span>
</span><span id="line-235"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682148228"><span class="annot"><a href="#local-6989586621682148228"><span class="hs-identifier hs-var">noexclauses</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682148229"><span class="annot"><a href="#local-6989586621682148229"><span class="hs-identifier hs-var">exclauses</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">partitionEithers</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span>
</span><span id="line-236"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">zipWith</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621682148231"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682148231"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621682148232"><span class="annot"><span class="annottext">Clause
</span><a href="#local-6989586621682148232"><span class="hs-identifier hs-var">c</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682148231"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; IntSet -&gt; Bool
</span><span class="hs-operator hs-var">`IntSet.member`</span></span><span> </span><span class="annot"><span class="annottext">IntSet
</span><a href="#local-6989586621682148148"><span class="hs-identifier hs-var">noex</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Clause -&gt; Either Clause Clause
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">Clause
</span><a href="#local-6989586621682148232"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Clause -&gt; Either Clause Clause
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">Clause
</span><a href="#local-6989586621682148232"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-number">0</span></span><span class="hs-glyph">..</span><span class="hs-special">]</span><span> </span><span class="annot"><a href="#local-6989586621682148217"><span class="hs-identifier hs-type">cs1</span></a></span><span>
</span><span id="line-237"></span><span>
</span><span id="line-238"></span><span>  </span><span class="hs-comment">-- Report a warning if there are clauses that are not preserved as</span><span>
</span><span id="line-239"></span><span>  </span><span class="hs-comment">-- definitional equalities and --exact-split is enabled</span><span>
</span><span id="line-240"></span><span>  </span><span class="hs-comment">-- and they are not labelled as CATCHALL.</span><span>
</span><span id="line-241"></span><span>  </span><span class="annot"><a href="Agda.Utils.List1.html#unlessNull"><span class="hs-identifier hs-type">List1.unlessNull</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">filter</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Utils.Null.html#null"><span class="hs-identifier hs-type">null</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">.</span></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#clauseCatchall"><span class="hs-identifier hs-var">clauseCatchall</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621682148228"><span class="hs-identifier hs-type">noexclauses</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621682148235"><span class="annot"><span class="annottext">List1 Clause
</span><a href="#local-6989586621682148235"><span class="hs-identifier hs-var">noexclauses</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-242"></span><span>      </span><span class="annot"><span class="annottext">NonEmpty Range -&gt; TCMT IO () -&gt; TCMT IO ()
forall (m :: * -&gt; *) x a.
(MonadTrace m, HasRange x) =&gt;
x -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Trace.html#setCurrentRange"><span class="hs-identifier hs-var">setCurrentRange</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Clause -&gt; Range) -&gt; List1 Clause -&gt; NonEmpty Range
forall a b. (a -&gt; b) -&gt; NonEmpty a -&gt; NonEmpty b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">Clause -&gt; Range
</span><a href="Agda.Syntax.Internal.html#clauseLHSRange"><span class="hs-identifier hs-var">clauseLHSRange</span></a></span><span> </span><span class="annot"><span class="annottext">List1 Clause
</span><a href="#local-6989586621682148235"><span class="hs-identifier hs-var">noexclauses</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(TCMT IO () -&gt; TCMT IO ()) -&gt; TCMT IO () -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-243"></span><span>        </span><span class="annot"><span class="annottext">Warning -&gt; TCMT IO ()
forall (m :: * -&gt; *).
(HasCallStack, MonadWarning m) =&gt;
Warning -&gt; m ()
</span><a href="Agda.TypeChecking.Warnings.html#warning"><span class="hs-identifier hs-var">warning</span></a></span><span> </span><span class="annot"><span class="annottext">(Warning -&gt; TCMT IO ()) -&gt; Warning -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">QName -&gt; List1 Clause -&gt; Warning
</span><a href="Agda.TypeChecking.Monad.Base.html#CoverageNoExactSplit"><span class="hs-identifier hs-var">CoverageNoExactSplit</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621682147958"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">List1 Clause
</span><a href="#local-6989586621682148235"><span class="hs-identifier hs-var">noexclauses</span></a></span><span>
</span><span id="line-244"></span><span>
</span><span id="line-245"></span><span>  </span><span class="hs-comment">-- Warn about unused CATCHALL pragmas.</span><span>
</span><span id="line-246"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">forM_</span></span><span> </span><span class="annot"><a href="#local-6989586621682148229"><span class="hs-identifier hs-type">exclauses</span></a></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621682148238"><span class="annot"><span class="annottext">Clause
</span><a href="#local-6989586621682148238"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-247"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Clause -&gt; Catchall
</span><a href="Agda.Syntax.Internal.html#clauseCatchall"><span class="hs-identifier hs-var">clauseCatchall</span></a></span><span> </span><span class="annot"><span class="annottext">Clause
</span><a href="#local-6989586621682148238"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-248"></span><span>      </span><span class="annot"><a href="Agda.Syntax.Common.html#YesCatchall"><span class="hs-identifier hs-type">YesCatchall</span></a></span><span> </span><span id="local-6989586621682148239"><span class="annot"><span class="annottext">Range
</span><a href="#local-6989586621682148239"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Range -&gt; Bool
forall a. Null a =&gt; a -&gt; Bool
</span><a href="Agda.Utils.Null.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">Range
</span><a href="#local-6989586621682148239"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-249"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Range -&gt; TCMT IO () -&gt; TCMT IO ()
forall (m :: * -&gt; *) x a.
(MonadTrace m, HasRange x) =&gt;
x -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Trace.html#setCurrentRange"><span class="hs-identifier hs-var">setCurrentRange</span></a></span><span> </span><span class="annot"><span class="annottext">Range
</span><a href="#local-6989586621682148239"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">(TCMT IO () -&gt; TCMT IO ()) -&gt; TCMT IO () -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Warning -&gt; TCMT IO ()
forall (m :: * -&gt; *).
(HasCallStack, MonadWarning m) =&gt;
Warning -&gt; m ()
</span><a href="Agda.TypeChecking.Warnings.html#warning"><span class="hs-identifier hs-var">warning</span></a></span><span> </span><span class="annot"><span class="annottext">(Warning -&gt; TCMT IO ()) -&gt; Warning -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Range -&gt; Doc -&gt; Warning
</span><a href="Agda.TypeChecking.Monad.Base.html#UselessPragma"><span class="hs-identifier hs-var">UselessPragma</span></a></span><span> </span><span class="annot"><span class="annottext">Range
</span><a href="#local-6989586621682148239"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">(Doc -&gt; Warning) -&gt; Doc -&gt; Warning
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Doc
</span><span class="hs-string">&quot;Superfluous CATCHALL pragma&quot;</span></span><span>
</span><span id="line-250"></span><span>      </span><span class="annot"><span class="annottext">Catchall
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; TCMT IO ()
forall a. a -&gt; TCMT IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-251"></span><span>
</span><span id="line-252"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><a href="#local-6989586621682148141"><span class="hs-identifier hs-type">splitTree</span></a></span><span>
</span><span id="line-253"></span><span>
</span><span id="line-254"></span><span class="hs-comment">-- | When checking whether a clause is already covered,</span><span>
</span><span id="line-255"></span><span class="hs-comment">--   we do not want 'inferMissingClause' as a side effect.</span><span>
</span><span id="line-256"></span><span class="hs-keyword">data</span><span> </span><span id="InferMissing"><span class="annot"><a href="Agda.TypeChecking.Coverage.html#InferMissing"><span class="hs-identifier hs-var">InferMissing</span></a></span></span><span>
</span><span id="line-257"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="YesInferMissing"><span class="annot"><a href="Agda.TypeChecking.Coverage.html#YesInferMissing"><span class="hs-identifier hs-var">YesInferMissing</span></a></span></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ Infer missing instance and tactic clauses.</span></span><span>
</span><span id="line-258"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="NoInferMissing"><span class="annot"><a href="Agda.TypeChecking.Coverage.html#NoInferMissing"><span class="hs-identifier hs-var">NoInferMissing</span></a></span></span><span>   </span><span class="annot"><span class="hs-comment">-- ^ Don't.</span></span><span>
</span><span id="line-259"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682148245"><span id="local-6989586621682148250"><span class="annot"><span class="annottext">InferMissing -&gt; InferMissing -&gt; Bool
(InferMissing -&gt; InferMissing -&gt; Bool)
-&gt; (InferMissing -&gt; InferMissing -&gt; Bool) -&gt; Eq InferMissing
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: InferMissing -&gt; InferMissing -&gt; Bool
== :: InferMissing -&gt; InferMissing -&gt; Bool
$c/= :: InferMissing -&gt; InferMissing -&gt; Bool
/= :: InferMissing -&gt; InferMissing -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682148254"><span id="local-6989586621682148256"><span id="local-6989586621682148260"><span class="annot"><span class="annottext">Int -&gt; InferMissing -&gt; PatVarName -&gt; PatVarName
[InferMissing] -&gt; PatVarName -&gt; PatVarName
InferMissing -&gt; PatVarName
(Int -&gt; InferMissing -&gt; PatVarName -&gt; PatVarName)
-&gt; (InferMissing -&gt; PatVarName)
-&gt; ([InferMissing] -&gt; PatVarName -&gt; PatVarName)
-&gt; Show InferMissing
forall a.
(Int -&gt; a -&gt; PatVarName -&gt; PatVarName)
-&gt; (a -&gt; PatVarName) -&gt; ([a] -&gt; PatVarName -&gt; PatVarName) -&gt; Show a
$cshowsPrec :: Int -&gt; InferMissing -&gt; PatVarName -&gt; PatVarName
showsPrec :: Int -&gt; InferMissing -&gt; PatVarName -&gt; PatVarName
$cshow :: InferMissing -&gt; PatVarName
show :: InferMissing -&gt; PatVarName
$cshowList :: [InferMissing] -&gt; PatVarName -&gt; PatVarName
showList :: [InferMissing] -&gt; PatVarName -&gt; PatVarName
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-260"></span><span>
</span><span id="line-261"></span><span class="hs-comment">-- | Top-level function for eliminating redundant clauses in the interactive</span><span>
</span><span id="line-262"></span><span class="hs-comment">--   case splitter</span><span>
</span><span id="line-263"></span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#isCovered"><span class="hs-identifier hs-type">isCovered</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Abstract.Name.html#QName"><span class="hs-identifier hs-type">QName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.Syntax.Internal.html#Clause"><span class="hs-identifier hs-type">Clause</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitClause.html#SplitClause"><span class="hs-identifier hs-type">SplitClause</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">TCM</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-264"></span><span id="isCovered"><span class="annot"><span class="annottext">isCovered :: QName -&gt; [Clause] -&gt; SplitClause -&gt; TCMT IO Bool
</span><a href="Agda.TypeChecking.Coverage.html#isCovered"><span class="hs-identifier hs-var hs-var">isCovered</span></a></span></span><span> </span><span id="local-6989586621682148264"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621682148264"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621682148265"><span class="annot"><span class="annottext">[Clause]
</span><a href="#local-6989586621682148265"><span class="hs-identifier hs-var">cs</span></a></span></span><span> </span><span id="local-6989586621682148266"><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621682148266"><span class="hs-identifier hs-var">sc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-265"></span><span>  </span><span class="annot"><span class="annottext">PatVarName -&gt; Int -&gt; TCMT IO Doc -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
PatVarName -&gt; Int -&gt; TCMT IO Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">PatVarName
</span><span class="hs-string">&quot;tc.cover.isCovered&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">20</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; TCMT IO ()) -&gt; TCMT IO Doc -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[TCMT IO Doc] -&gt; TCMT IO Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span>
</span><span id="line-266"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;isCovered&quot;</span></span><span>
</span><span id="line-267"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Functor m =&gt; Int -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; TCMT IO Doc) -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[TCMT IO Doc] -&gt; TCMT IO Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="annot"><span class="annottext">([TCMT IO Doc] -&gt; TCMT IO Doc) -&gt; [TCMT IO Doc] -&gt; TCMT IO Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-268"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;f  = &quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">QName -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; QName -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621682148264"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-269"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;cs = &quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[TCMT IO Doc] -&gt; TCMT IO Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Clause -&gt; TCMT IO Doc) -&gt; [Clause] -&gt; [TCMT IO Doc]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Functor m =&gt; Int -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; TCMT IO Doc)
-&gt; (Clause -&gt; TCMT IO Doc) -&gt; Clause -&gt; TCMT IO Doc
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">NamedClause -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; NamedClause -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">(NamedClause -&gt; TCMT IO Doc)
-&gt; (Clause -&gt; NamedClause) -&gt; Clause -&gt; TCMT IO Doc
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">QName -&gt; Bool -&gt; Clause -&gt; NamedClause
</span><a href="Agda.Syntax.Translation.InternalToAbstract.html#NamedClause"><span class="hs-identifier hs-var">NamedClause</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621682148264"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Clause]
</span><a href="#local-6989586621682148265"><span class="hs-identifier hs-var">cs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-270"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;sc = &quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SplitClause -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; SplitClause -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621682148266"><span class="hs-identifier hs-var">sc</span></a></span><span>
</span><span id="line-271"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-272"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-273"></span><span>  </span><span class="hs-comment">-- Jesper, 2019-10: introduce trailing arguments (see #3828)</span><span>
</span><span id="line-274"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">,</span><span> </span><span id="local-6989586621682148268"><span class="annot"><a href="#local-6989586621682148268"><span class="hs-identifier hs-var">sc'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SplitClause -&gt; TCM (Telescope, SplitClause)
</span><a href="Agda.TypeChecking.Coverage.html#insertTrailingArgs"><span class="hs-identifier hs-var">insertTrailingArgs</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621682148266"><span class="hs-identifier hs-var">sc</span></a></span><span>
</span><span id="line-275"></span><span>  </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitClause.html#CoverResult"><span class="hs-identifier hs-type">CoverResult</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitClause.html#coverMissingClauses"><span class="hs-identifier hs-var">coverMissingClauses</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682148270"><span class="annot"><a href="#local-6989586621682148270"><span class="hs-identifier hs-var">missing</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#cover"><span class="hs-identifier hs-type">cover</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#NoInferMissing"><span class="hs-identifier hs-type">NoInferMissing</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148264"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148265"><span class="hs-identifier hs-type">cs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148268"><span class="hs-identifier hs-type">sc'</span></a></span><span>
</span><span id="line-276"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Agda.Utils.Null.html#null"><span class="hs-identifier hs-type">null</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148270"><span class="hs-identifier hs-type">missing</span></a></span><span>
</span><span id="line-277"></span><span> </span><span class="hs-comment">-- Andreas, 2019-08-08 and 2020-02-11</span><span>
</span><span id="line-278"></span><span> </span><span class="hs-comment">-- If there is an error (e.g. unification error), don't report it</span><span>
</span><span id="line-279"></span><span> </span><span class="hs-comment">-- to the user.  Rather, assume the clause is not already covered.</span><span>
</span><span id="line-280"></span><span> </span><span class="annot"><span class="annottext">TCMT IO Bool -&gt; (TCErr -&gt; TCMT IO Bool) -&gt; TCMT IO Bool
forall a. TCMT IO a -&gt; (TCErr -&gt; TCMT IO a) -&gt; TCMT IO a
forall e (m :: * -&gt; *) a.
MonadError e m =&gt;
m a -&gt; (e -&gt; m a) -&gt; m a
</span><span class="hs-operator hs-var">`catchError`</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span class="annot"><span class="annottext">TCErr
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; TCMT IO Bool
forall a. a -&gt; TCMT IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-281"></span><span>
</span><span id="line-282"></span><span class="hs-comment">-- | @cover infermissing f cs (SClause _ _ ps _) = return (CoverResult splitTree used missing covering noex)@.</span><span>
</span><span id="line-283"></span><span class="hs-comment">--   checks that the list of clauses @cs@ covers the given split clause.</span><span>
</span><span id="line-284"></span><span class="hs-comment">--   Returns the @splitTree@, the @used@ clauses, @missing@ cases, the @covering@ clauses,</span><span>
</span><span id="line-285"></span><span class="hs-comment">--   and the non-exact clauses @noex@.</span><span>
</span><span id="line-286"></span><span class="hs-comment">--</span><span>
</span><span id="line-287"></span><span class="hs-comment">--   Effect: if 'YesInferMissing', adds missing instance clauses for @f@ to signature.</span><span>
</span><span id="line-288"></span><span class="hs-comment">--</span><span>
</span><span id="line-289"></span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#cover"><span class="hs-identifier hs-type">cover</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#InferMissing"><span class="hs-identifier hs-type">InferMissing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Abstract.Name.html#QName"><span class="hs-identifier hs-type">QName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.Syntax.Internal.html#Clause"><span class="hs-identifier hs-type">Clause</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitClause.html#SplitClause"><span class="hs-identifier hs-type">SplitClause</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-290"></span><span>         </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">TCM</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitClause.html#CoverResult"><span class="hs-identifier hs-type">CoverResult</span></a></span><span>
</span><span id="line-291"></span><span id="cover"><span class="annot"><span class="annottext">cover :: InferMissing -&gt; QName -&gt; [Clause] -&gt; SplitClause -&gt; TCM CoverResult
</span><a href="Agda.TypeChecking.Coverage.html#cover"><span class="hs-identifier hs-var hs-var">cover</span></a></span></span><span> </span><span id="local-6989586621682148272"><span class="annot"><span class="annottext">InferMissing
</span><a href="#local-6989586621682148272"><span class="hs-identifier hs-var">infermissing</span></a></span></span><span> </span><span id="local-6989586621682148273"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621682148273"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621682148274"><span class="annot"><span class="annottext">[Clause]
</span><a href="#local-6989586621682148274"><span class="hs-identifier hs-var">cs</span></a></span></span><span> </span><span id="local-6989586621682148275"><span class="annot"><span class="annottext">sc :: SplitClause
</span><a href="#local-6989586621682148275"><span class="hs-identifier hs-var">sc</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitClause.html#SClause"><span class="hs-identifier hs-type">SClause</span></a></span><span> </span><span id="local-6989586621682148276"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682148276"><span class="hs-identifier hs-var">tel</span></a></span></span><span> </span><span id="local-6989586621682148277"><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621682148277"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span class="annot"><span class="annottext">Substitution' SplitPattern
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Map CheckpointId (Substitution' Term)
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682148278"><span class="annot"><span class="annottext">Maybe (Dom Type)
</span><a href="#local-6989586621682148278"><span class="hs-identifier hs-var">target</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TCM CoverResult -&gt; TCM CoverResult
forall a. TCM a -&gt; TCM a
</span><a href="#local-6989586621682148279"><span class="hs-identifier hs-var">updateRelevance</span></a></span><span> </span><span class="annot"><span class="annottext">(TCM CoverResult -&gt; TCM CoverResult)
-&gt; TCM CoverResult -&gt; TCM CoverResult
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-292"></span><span>  </span><span class="annot"><span class="annottext">PatVarName -&gt; Int -&gt; TCMT IO Doc -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
PatVarName -&gt; Int -&gt; TCMT IO Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">PatVarName
</span><span class="hs-string">&quot;tc.cover.cover&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">10</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; TCMT IO ()) -&gt; TCMT IO Doc -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc
forall (tcm :: * -&gt; *) a.
(MonadTCEnv tcm, ReadTCState tcm) =&gt;
tcm a -&gt; tcm a
</span><a href="Agda.TypeChecking.Monad.Context.html#inTopContext"><span class="hs-identifier hs-var">inTopContext</span></a></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; TCMT IO Doc) -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[TCMT IO Doc] -&gt; TCMT IO Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span>
</span><span id="line-293"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;checking coverage of pattern:&quot;</span></span><span>
</span><span id="line-294"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Functor m =&gt; Int -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; TCMT IO Doc) -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SplitClause -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; SplitClause -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621682148275"><span class="hs-identifier hs-var">sc</span></a></span><span>
</span><span id="line-295"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Functor m =&gt; Int -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; TCMT IO Doc) -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;target sort =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="hs-keyword">do</span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a.
MonadAddContext m =&gt;
Telescope -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682148276"><span class="hs-identifier hs-var">tel</span></a></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; TCMT IO Doc) -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
-&gt; (Dom Type -&gt; TCMT IO Doc) -&gt; Maybe (Dom Type) -&gt; TCMT IO Doc
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><span class="hs-identifier hs-var">maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PatVarName -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; PatVarName -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">PatVarName
</span><span class="hs-string">&quot;&lt;none&gt;&quot;</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Sort -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; Sort -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">(Sort -&gt; TCMT IO Doc)
-&gt; (Dom Type -&gt; Sort) -&gt; Dom Type -&gt; TCMT IO Doc
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; Sort
forall a. LensSort a =&gt; a -&gt; Sort
</span><a href="Agda.Syntax.Internal.html#getSort"><span class="hs-identifier hs-var">getSort</span></a></span><span> </span><span class="annot"><span class="annottext">(Type -&gt; Sort) -&gt; (Dom Type -&gt; Type) -&gt; Dom Type -&gt; Sort
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Dom Type -&gt; Type
forall t e. Dom' t e -&gt; e
</span><a href="Agda.Syntax.Internal.html#unDom"><span class="hs-identifier hs-var">unDom</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe (Dom Type)
</span><a href="#local-6989586621682148278"><span class="hs-identifier hs-var">target</span></a></span><span>
</span><span id="line-296"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-297"></span><span>  </span><span class="annot"><span class="annottext">PatVarName -&gt; Int -&gt; PatVarName -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
PatVarName -&gt; Int -&gt; PatVarName -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSLn"><span class="hs-identifier hs-var">reportSLn</span></a></span><span> </span><span class="annot"><span class="annottext">PatVarName
</span><span class="hs-string">&quot;tc.cover.cover&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">80</span></span><span> </span><span class="annot"><span class="annottext">(PatVarName -&gt; TCMT IO ()) -&gt; PatVarName -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PatVarName
</span><span class="hs-string">&quot;raw target =\n&quot;</span></span><span> </span><span class="annot"><span class="annottext">PatVarName -&gt; PatVarName -&gt; PatVarName
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">Maybe (Dom Type) -&gt; PatVarName
forall a. Show a =&gt; a -&gt; PatVarName
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Maybe (Dom Type)
</span><a href="#local-6989586621682148278"><span class="hs-identifier hs-var">target</span></a></span><span>
</span><span id="line-298"></span><span>  </span><span class="annot"><span class="annottext">PatVarName -&gt; Int -&gt; TCMT IO () -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
PatVarName -&gt; Int -&gt; m () -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#verboseS"><span class="hs-identifier hs-var">verboseS</span></a></span><span>  </span><span class="annot"><span class="annottext">PatVarName
</span><span class="hs-string">&quot;tc.cover.matching&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">20</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO () -&gt; TCMT IO ()) -&gt; TCMT IO () -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-299"></span><span>    </span><span class="annot"><span class="annottext">PatVarName -&gt; Int -&gt; PatVarName -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
PatVarName -&gt; Int -&gt; PatVarName -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSLn"><span class="hs-identifier hs-var">reportSLn</span></a></span><span> </span><span class="annot"><span class="annottext">PatVarName
</span><span class="hs-string">&quot;tc.cover.matching&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">20</span></span><span> </span><span class="annot"><span class="annottext">(PatVarName -&gt; TCMT IO ()) -&gt; PatVarName -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PatVarName
</span><span class="hs-string">&quot;clauses when matching:&quot;</span></span><span>
</span><span id="line-300"></span><span>    </span><span class="annot"><span class="annottext">[Clause] -&gt; (Clause -&gt; TCMT IO ()) -&gt; TCMT IO ()
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
t a -&gt; (a -&gt; m b) -&gt; m ()
</span><span class="hs-identifier hs-var">forM_</span></span><span> </span><span class="annot"><span class="annottext">[Clause]
</span><a href="#local-6989586621682148274"><span class="hs-identifier hs-var">cs</span></a></span><span> </span><span class="annot"><span class="annottext">((Clause -&gt; TCMT IO ()) -&gt; TCMT IO ())
-&gt; (Clause -&gt; TCMT IO ()) -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621682148284"><span class="annot"><span class="annottext">Clause
</span><a href="#local-6989586621682148284"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-301"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682148285"><span class="annot"><span class="annottext">gamma :: Telescope
</span><a href="#local-6989586621682148285"><span class="hs-identifier hs-var hs-var">gamma</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Clause -&gt; Telescope
</span><a href="Agda.Syntax.Internal.html#clauseTel"><span class="hs-identifier hs-var">clauseTel</span></a></span><span> </span><span class="annot"><span class="annottext">Clause
</span><a href="#local-6989586621682148284"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-302"></span><span>          </span><span id="local-6989586621682148286"><span class="annot"><span class="annottext">ps :: NAPs
</span><a href="#local-6989586621682148286"><span class="hs-identifier hs-var hs-var">ps</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Clause -&gt; NAPs
</span><a href="Agda.Syntax.Internal.html#namedClausePats"><span class="hs-identifier hs-var">namedClausePats</span></a></span><span> </span><span class="annot"><span class="annottext">Clause
</span><a href="#local-6989586621682148284"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-303"></span><span>      </span><span class="annot"><span class="annottext">PatVarName -&gt; Int -&gt; TCMT IO Doc -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
PatVarName -&gt; Int -&gt; TCMT IO Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">PatVarName
</span><span class="hs-string">&quot;tc.cover.matching&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">20</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; TCMT IO ()) -&gt; TCMT IO Doc -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a.
MonadAddContext m =&gt;
Telescope -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682148285"><span class="hs-identifier hs-var">gamma</span></a></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; TCMT IO Doc) -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-304"></span><span>          </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;ps   :&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[DeBruijnPattern] -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; [DeBruijnPattern] -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Arg (Named_ DeBruijnPattern) -&gt; DeBruijnPattern)
-&gt; NAPs -&gt; [DeBruijnPattern]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">Arg (Named_ DeBruijnPattern) -&gt; DeBruijnPattern
forall a. NamedArg a -&gt; a
</span><a href="Agda.Syntax.Common.html#namedArg"><span class="hs-identifier hs-var">namedArg</span></a></span><span> </span><span class="annot"><span class="annottext">NAPs
</span><a href="#local-6989586621682148286"><span class="hs-identifier hs-var">ps</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-305"></span><span>
</span><span id="line-306"></span><span>  </span><span class="annot"><span class="annottext">[Clause]
-&gt; [NamedArg SplitPattern]
-&gt; TCMT IO (Match (Int, [(Int, SplitPattern)]))
forall (m :: * -&gt; *).
PureTCM m =&gt;
[Clause]
-&gt; [NamedArg SplitPattern]
-&gt; m (Match (Int, [(Int, SplitPattern)]))
</span><a href="Agda.TypeChecking.Coverage.Match.html#match"><span class="hs-identifier hs-var">match</span></a></span><span> </span><span class="annot"><span class="annottext">[Clause]
</span><a href="#local-6989586621682148274"><span class="hs-identifier hs-var">cs</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621682148277"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="annot"><span class="annottext">TCMT IO (Match (Int, [(Int, SplitPattern)]))
-&gt; (Match (Int, [(Int, SplitPattern)]) -&gt; TCM CoverResult)
-&gt; TCM CoverResult
forall a b. TCMT IO a -&gt; (a -&gt; TCMT IO b) -&gt; TCMT IO b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-307"></span><span>    </span><span class="annot"><a href="Agda.TypeChecking.Coverage.Match.html#Yes"><span class="hs-identifier hs-type">Yes</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682148290"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682148290"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621682148291"><span class="annot"><span class="annottext">[(Int, SplitPattern)]
</span><a href="#local-6989586621682148291"><span class="hs-identifier hs-var">mps</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-308"></span><span>      </span><span class="annot"><span class="annottext">PatVarName -&gt; Int -&gt; PatVarName -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
PatVarName -&gt; Int -&gt; PatVarName -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSLn"><span class="hs-identifier hs-var">reportSLn</span></a></span><span> </span><span class="annot"><span class="annottext">PatVarName
</span><span class="hs-string">&quot;tc.cover.cover&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">10</span></span><span> </span><span class="annot"><span class="annottext">(PatVarName -&gt; TCMT IO ()) -&gt; PatVarName -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PatVarName
</span><span class="hs-string">&quot;pattern covered by clause &quot;</span></span><span> </span><span class="annot"><span class="annottext">PatVarName -&gt; PatVarName -&gt; PatVarName
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; PatVarName
forall a. Show a =&gt; a -&gt; PatVarName
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682148290"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-309"></span><span>      </span><span class="annot"><span class="annottext">PatVarName -&gt; Int -&gt; TCMT IO Doc -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
PatVarName -&gt; Int -&gt; TCMT IO Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">PatVarName
</span><span class="hs-string">&quot;tc.cover.cover&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">20</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; TCMT IO ()) -&gt; TCMT IO Doc -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PatVarName -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; PatVarName -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">PatVarName
</span><span class="hs-string">&quot;with mps = &quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="hs-keyword">do</span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a.
MonadAddContext m =&gt;
Telescope -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682148276"><span class="hs-identifier hs-var">tel</span></a></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; TCMT IO Doc) -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[(Int, SplitPattern)] -&gt; TCMT IO Doc
forall (m :: * -&gt; *) a. (Applicative m, Pretty a) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#pretty"><span class="hs-identifier hs-var">pretty</span></a></span><span> </span><span class="annot"><span class="annottext">[(Int, SplitPattern)]
</span><a href="#local-6989586621682148291"><span class="hs-identifier hs-var">mps</span></a></span><span>
</span><span id="line-310"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682148292"><span class="annot"><span class="annottext">cl0 :: Clause
</span><a href="#local-6989586621682148292"><span class="hs-identifier hs-var hs-var hs-var">cl0</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Clause -&gt; [Clause] -&gt; Int -&gt; Clause
forall a. a -&gt; [a] -&gt; Int -&gt; a
</span><a href="Agda.Utils.List.html#indexWithDefault"><span class="hs-identifier hs-var">indexWithDefault</span></a></span><span> </span><span class="annot"><span class="annottext">Clause
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span> </span><span class="annot"><span class="annottext">[Clause]
</span><a href="#local-6989586621682148274"><span class="hs-identifier hs-var">cs</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682148290"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-311"></span><span>      </span><span class="hs-comment">-- Szumi, 2024-09-15, issue #7495: If the split clause has more</span><span>
</span><span id="line-312"></span><span>      </span><span class="hs-comment">-- patterns than the function clause, then the extra patterns need to</span><span>
</span><span id="line-313"></span><span>      </span><span class="hs-comment">-- be trivial for the clause to be exact</span><span>
</span><span id="line-314"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682148295"><span class="annot"><span class="annottext">extra :: [NamedArg SplitPattern]
</span><a href="#local-6989586621682148295"><span class="hs-identifier hs-var hs-var hs-var">extra</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; [NamedArg SplitPattern] -&gt; [NamedArg SplitPattern]
forall a. Int -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">drop</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NAPs -&gt; Int
forall a. [a] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">(NAPs -&gt; Int) -&gt; NAPs -&gt; Int
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Clause -&gt; NAPs
</span><a href="Agda.Syntax.Internal.html#namedClausePats"><span class="hs-identifier hs-var">namedClausePats</span></a></span><span> </span><span class="annot"><span class="annottext">Clause
</span><a href="#local-6989586621682148292"><span class="hs-identifier hs-var">cl0</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621682148277"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-315"></span><span>      </span><span id="local-6989586621682148296"><span class="annot"><a href="#local-6989586621682148296"><span class="hs-identifier hs-var">exact</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-316"></span><span>        </span><span class="annot"><span class="annottext">TCMT IO Bool -&gt; TCMT IO Bool -&gt; TCMT IO Bool
forall (m :: * -&gt; *). Monad m =&gt; m Bool -&gt; m Bool -&gt; m Bool
</span><a href="Agda.Utils.Monad.html#and2M"><span class="hs-identifier hs-var">and2M</span></a></span><span>
</span><span id="line-317"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(Int, SplitPattern)]
-&gt; ((Int, SplitPattern) -&gt; TCMT IO Bool) -&gt; TCMT IO Bool
forall (f :: * -&gt; *) (m :: * -&gt; *) a.
(Foldable f, Monad m) =&gt;
f a -&gt; (a -&gt; m Bool) -&gt; m Bool
</span><a href="Agda.Utils.Monad.html#forallM"><span class="hs-identifier hs-var">forallM</span></a></span><span> </span><span class="annot"><span class="annottext">[(Int, SplitPattern)]
</span><a href="#local-6989586621682148291"><span class="hs-identifier hs-var">mps</span></a></span><span> </span><span class="annot"><span class="annottext">(((Int, SplitPattern) -&gt; TCMT IO Bool) -&gt; TCMT IO Bool)
-&gt; ((Int, SplitPattern) -&gt; TCMT IO Bool) -&gt; TCMT IO Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SplitPattern -&gt; TCMT IO Bool
forall (m :: * -&gt; *) a. HasConstInfo m =&gt; Pattern' a -&gt; m Bool
</span><a href="Agda.TypeChecking.Coverage.SplitPattern.html#isTrivialPattern"><span class="hs-identifier hs-var">isTrivialPattern</span></a></span><span> </span><span class="annot"><span class="annottext">(SplitPattern -&gt; TCMT IO Bool)
-&gt; ((Int, SplitPattern) -&gt; SplitPattern)
-&gt; (Int, SplitPattern)
-&gt; TCMT IO Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Int, SplitPattern) -&gt; SplitPattern
forall a b. (a, b) -&gt; b
</span><span class="hs-identifier hs-var">snd</span></span><span class="hs-special">)</span><span>
</span><span id="line-318"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
-&gt; (NamedArg SplitPattern -&gt; TCMT IO Bool) -&gt; TCMT IO Bool
forall (f :: * -&gt; *) (m :: * -&gt; *) a.
(Foldable f, Monad m) =&gt;
f a -&gt; (a -&gt; m Bool) -&gt; m Bool
</span><a href="Agda.Utils.Monad.html#forallM"><span class="hs-identifier hs-var">forallM</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621682148295"><span class="hs-identifier hs-var">extra</span></a></span><span> </span><span class="annot"><span class="annottext">((NamedArg SplitPattern -&gt; TCMT IO Bool) -&gt; TCMT IO Bool)
-&gt; (NamedArg SplitPattern -&gt; TCMT IO Bool) -&gt; TCMT IO Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SplitPattern -&gt; TCMT IO Bool
forall (m :: * -&gt; *) a. HasConstInfo m =&gt; Pattern' a -&gt; m Bool
</span><a href="Agda.TypeChecking.Coverage.SplitPattern.html#isTrivialPattern"><span class="hs-identifier hs-var">isTrivialPattern</span></a></span><span> </span><span class="annot"><span class="annottext">(SplitPattern -&gt; TCMT IO Bool)
-&gt; (NamedArg SplitPattern -&gt; SplitPattern)
-&gt; NamedArg SplitPattern
-&gt; TCMT IO Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">NamedArg SplitPattern -&gt; SplitPattern
forall a. NamedArg a -&gt; a
</span><a href="Agda.Syntax.Common.html#namedArg"><span class="hs-identifier hs-var">namedArg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-319"></span><span>      </span><span id="local-6989586621682148301"><span class="annot"><a href="#local-6989586621682148301"><span class="hs-identifier hs-var">cl</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="#local-6989586621682148302"><span class="hs-identifier hs-type">applyCl</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148275"><span class="hs-identifier hs-type">sc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148292"><span class="hs-identifier hs-type">cl0</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148291"><span class="hs-identifier hs-type">mps</span></a></span><span>
</span><span id="line-320"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitClause.html#CoverResult"><span class="hs-identifier hs-type">CoverResult</span></a></span><span>
</span><span id="line-321"></span><span>        </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitClause.html#coverSplitTree"><span class="hs-identifier hs-var">coverSplitTree</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitTree.html#SplittingDone"><span class="hs-identifier hs-type">SplittingDone</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Utils.Size.html#size"><span class="hs-identifier hs-type">size</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148276"><span class="hs-identifier hs-type">tel</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-322"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitClause.html#coverUsedClauses"><span class="hs-identifier hs-var">coverUsedClauses</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Agda.Utils.Singleton.html#singleton"><span class="hs-identifier hs-type">singleton</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148290"><span class="hs-identifier hs-type">i</span></a></span><span>
</span><span id="line-323"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitClause.html#coverMissingClauses"><span class="hs-identifier hs-var">coverMissingClauses</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-324"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitClause.html#coverPatterns"><span class="hs-identifier hs-var">coverPatterns</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621682148301"><span class="hs-identifier hs-type">cl</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-325"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitClause.html#coverNoExactClauses"><span class="hs-identifier hs-var">coverNoExactClauses</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><a href="#local-6989586621682148296"><span class="hs-identifier hs-type">exact</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><a href="Agda.Utils.Null.html#empty"><span class="hs-identifier hs-type">empty</span></a></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><a href="Agda.Utils.Singleton.html#singleton"><span class="hs-identifier hs-type">singleton</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148290"><span class="hs-identifier hs-type">i</span></a></span><span>
</span><span id="line-326"></span><span>        </span><span class="hs-special">}</span><span>
</span><span id="line-327"></span><span>
</span><span id="line-328"></span><span>    </span><span class="annot"><span class="annottext">Match (Int, [(Int, SplitPattern)])
</span><a href="Agda.TypeChecking.Coverage.Match.html#No"><span class="hs-identifier hs-var">No</span></a></span><span>        </span><span class="hs-glyph">-&gt;</span><span>  </span><span class="hs-keyword">do</span><span>
</span><span id="line-329"></span><span>      </span><span class="annot"><span class="annottext">PatVarName -&gt; Int -&gt; PatVarName -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
PatVarName -&gt; Int -&gt; PatVarName -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSLn"><span class="hs-identifier hs-var">reportSLn</span></a></span><span> </span><span class="annot"><span class="annottext">PatVarName
</span><span class="hs-string">&quot;tc.cover&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">20</span></span><span> </span><span class="annot"><span class="annottext">(PatVarName -&gt; TCMT IO ()) -&gt; PatVarName -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PatVarName
</span><span class="hs-string">&quot;pattern is not covered&quot;</span></span><span>
</span><span id="line-330"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682148310"><span class="annot"><span class="annottext">infer :: Dom' a e -&gt; Bool
</span><a href="#local-6989586621682148310"><span class="hs-identifier hs-var hs-var">infer</span></a></span></span><span> </span><span id="local-6989586621682148311"><span class="annot"><span class="annottext">Dom' a e
</span><a href="#local-6989586621682148311"><span class="hs-identifier hs-var">dom</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Dom' a e -&gt; Bool
forall a. LensHiding a =&gt; a -&gt; Bool
</span><a href="Agda.Syntax.Common.html#isInstance"><span class="hs-identifier hs-var">isInstance</span></a></span><span> </span><span class="annot"><span class="annottext">Dom' a e
</span><a href="#local-6989586621682148311"><span class="hs-identifier hs-var">dom</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">Maybe a -&gt; Bool
forall a. Maybe a -&gt; Bool
</span><span class="hs-identifier hs-var">isJust</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Dom' a e -&gt; Maybe a
forall t e. Dom' t e -&gt; Maybe t
</span><a href="Agda.Syntax.Internal.html#domTactic"><span class="hs-identifier hs-var">domTactic</span></a></span><span> </span><span class="annot"><span class="annottext">Dom' a e
</span><a href="#local-6989586621682148311"><span class="hs-identifier hs-var">dom</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-331"></span><span>      </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">InferMissing
</span><a href="#local-6989586621682148272"><span class="hs-identifier hs-var">infermissing</span></a></span><span> </span><span class="annot"><span class="annottext">InferMissing -&gt; InferMissing -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">InferMissing
</span><a href="Agda.TypeChecking.Coverage.html#YesInferMissing"><span class="hs-identifier hs-var">YesInferMissing</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; (Dom Type -&gt; Bool) -&gt; Maybe (Dom Type) -&gt; Bool
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><span class="hs-identifier hs-var">maybe</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="annot"><span class="annottext">Dom Type -&gt; Bool
forall {a} {e}. Dom' a e -&gt; Bool
</span><a href="#local-6989586621682148310"><span class="hs-identifier hs-var">infer</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (Dom Type)
</span><a href="#local-6989586621682148278"><span class="hs-identifier hs-var">target</span></a></span><span>
</span><span id="line-332"></span><span>        </span><span class="hs-keyword">then</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-333"></span><span>          </span><span class="hs-comment">-- Ulf, 2016-10-31: For now we only infer instance clauses. It would</span><span>
</span><span id="line-334"></span><span>          </span><span class="hs-comment">-- make sense to do it also for hidden, but since the value of a</span><span>
</span><span id="line-335"></span><span>          </span><span class="hs-comment">-- hidden clause is expected to be forced by later clauses, it's too</span><span>
</span><span id="line-336"></span><span>          </span><span class="hs-comment">-- late to add it now. If it was inferrable we would have gotten a</span><span>
</span><span id="line-337"></span><span>          </span><span class="hs-comment">-- type error before getting to this point.</span><span>
</span><span id="line-338"></span><span>          </span><span class="hs-comment">-- Ulf, 2019-11-21: Also @tactic clauses.</span><span>
</span><span id="line-339"></span><span>          </span><span id="local-6989586621682148315"><span class="annot"><a href="#local-6989586621682148315"><span class="hs-identifier hs-var">cl</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">QName -&gt; SplitClause -&gt; TCM Clause
</span><a href="Agda.TypeChecking.Coverage.html#inferMissingClause"><span class="hs-identifier hs-var">inferMissingClause</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621682148273"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621682148275"><span class="hs-identifier hs-var">sc</span></a></span><span>
</span><span id="line-340"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitClause.html#CoverResult"><span class="hs-identifier hs-type">CoverResult</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitTree.html#SplittingDone"><span class="hs-identifier hs-type">SplittingDone</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Utils.Size.html#size"><span class="hs-identifier hs-type">size</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148276"><span class="hs-identifier hs-type">tel</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="Agda.Utils.Null.html#empty"><span class="hs-identifier hs-type">empty</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621682148315"><span class="hs-identifier hs-type">cl</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><a href="Agda.Utils.Null.html#empty"><span class="hs-identifier hs-type">empty</span></a></span><span>
</span><span id="line-341"></span><span>        </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-342"></span><span>          </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682148316"><span class="annot"><span class="annottext">ps' :: NAPs
</span><a href="#local-6989586621682148316"><span class="hs-identifier hs-var hs-var">ps'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern] -&gt; NAPs
</span><a href="Agda.TypeChecking.Coverage.SplitPattern.html#fromSplitPatterns"><span class="hs-identifier hs-var">fromSplitPatterns</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621682148277"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-343"></span><span>          </span><span class="annot"><span class="annottext">CoverResult -&gt; TCM CoverResult
forall a. a -&gt; TCMT IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(CoverResult -&gt; TCM CoverResult) -&gt; CoverResult -&gt; TCM CoverResult
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SplitTree
-&gt; IntSet
-&gt; [(Telescope, NAPs)]
-&gt; [Clause]
-&gt; IntSet
-&gt; CoverResult
</span><a href="Agda.TypeChecking.Coverage.SplitClause.html#CoverResult"><span class="hs-identifier hs-var">CoverResult</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; SplitTree
forall a. Int -&gt; SplitTree' a
</span><a href="Agda.TypeChecking.Coverage.SplitTree.html#SplittingDone"><span class="hs-identifier hs-var">SplittingDone</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Telescope -&gt; Int
forall a. Sized a =&gt; a -&gt; Int
</span><a href="Agda.Utils.Size.html#size"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682148276"><span class="hs-identifier hs-var">tel</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">IntSet
forall a. Null a =&gt; a
</span><a href="Agda.Utils.Null.html#empty"><span class="hs-identifier hs-var">empty</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682148276"><span class="hs-identifier hs-var">tel</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">NAPs
</span><a href="#local-6989586621682148316"><span class="hs-identifier hs-var">ps'</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">IntSet
forall a. Null a =&gt; a
</span><a href="Agda.Utils.Null.html#empty"><span class="hs-identifier hs-var">empty</span></a></span><span>
</span><span id="line-344"></span><span>
</span><span id="line-345"></span><span>    </span><span class="hs-comment">-- We need to split!</span><span>
</span><span id="line-346"></span><span>    </span><span class="hs-comment">-- If all clauses have an unsplit copattern, we try that first.</span><span>
</span><span id="line-347"></span><span>    </span><span class="annot"><a href="Agda.TypeChecking.Coverage.Match.html#Block"><span class="hs-identifier hs-type">Block</span></a></span><span> </span><span id="local-6989586621682148319"><span class="annot"><span class="annottext">BlockedOnResult
</span><a href="#local-6989586621682148319"><span class="hs-identifier hs-var">res</span></a></span></span><span> </span><span id="local-6989586621682148320"><span class="annot"><span class="annottext">BlockingVars
</span><a href="#local-6989586621682148320"><span class="hs-identifier hs-var">bs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">BlockedOnResult
-&gt; Bool
-&gt; (SplitError -&gt; TCM CoverResult)
-&gt; TCM CoverResult
-&gt; TCM CoverResult
</span><a href="#local-6989586621682148321"><span class="hs-identifier hs-var">trySplitRes</span></a></span><span> </span><span class="annot"><span class="annottext">BlockedOnResult
</span><a href="#local-6989586621682148319"><span class="hs-identifier hs-var">res</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BlockingVars -&gt; Bool
forall a. Null a =&gt; a -&gt; Bool
</span><a href="Agda.Utils.Null.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">BlockingVars
</span><a href="#local-6989586621682148320"><span class="hs-identifier hs-var">bs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SplitError -&gt; TCM CoverResult
forall a. SplitError -&gt; TCM a
</span><a href="#local-6989586621682148322"><span class="hs-identifier hs-var">splitError</span></a></span><span> </span><span class="annot"><span class="annottext">(TCM CoverResult -&gt; TCM CoverResult)
-&gt; TCM CoverResult -&gt; TCM CoverResult
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-348"></span><span>      </span><span class="annot"><span class="annottext">Bool -&gt; TCMT IO () -&gt; TCMT IO ()
forall b (m :: * -&gt; *). (IsBool b, Monad m) =&gt; b -&gt; m () -&gt; m ()
</span><a href="Agda.Utils.Monad.html#when"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BlockingVars -&gt; Bool
forall a. Null a =&gt; a -&gt; Bool
</span><a href="Agda.Utils.Null.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">BlockingVars
</span><a href="#local-6989586621682148320"><span class="hs-identifier hs-var">bs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TCMT IO ()
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span>
</span><span id="line-349"></span><span>      </span><span class="hs-comment">-- Otherwise, if there are variables to split, we try them</span><span>
</span><span id="line-350"></span><span>      </span><span class="hs-comment">-- in the order determined by a split strategy.</span><span>
</span><span id="line-351"></span><span>      </span><span class="annot"><span class="annottext">PatVarName -&gt; Int -&gt; PatVarName -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
PatVarName -&gt; Int -&gt; PatVarName -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSLn"><span class="hs-identifier hs-var">reportSLn</span></a></span><span> </span><span class="annot"><span class="annottext">PatVarName
</span><span class="hs-string">&quot;tc.cover.strategy&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">20</span></span><span> </span><span class="annot"><span class="annottext">(PatVarName -&gt; TCMT IO ()) -&gt; PatVarName -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PatVarName
</span><span class="hs-string">&quot;blocking vars = &quot;</span></span><span> </span><span class="annot"><span class="annottext">PatVarName -&gt; PatVarName -&gt; PatVarName
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">BlockingVars -&gt; PatVarName
forall a. Pretty a =&gt; a -&gt; PatVarName
</span><a href="Agda.Syntax.Common.Pretty.html#prettyShow"><span class="hs-identifier hs-var">prettyShow</span></a></span><span> </span><span class="annot"><span class="annottext">BlockingVars
</span><a href="#local-6989586621682148320"><span class="hs-identifier hs-var">bs</span></a></span><span>
</span><span id="line-352"></span><span>      </span><span class="hs-comment">-- xs is a non-empty lists of blocking variables</span><span>
</span><span id="line-353"></span><span>      </span><span class="hs-comment">-- try splitting on one of them</span><span>
</span><span id="line-354"></span><span>      </span><span id="local-6989586621682148323"><span class="annot"><a href="#local-6989586621682148323"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">BlockingVars -&gt; Telescope -&gt; TCM BlockingVars
</span><a href="Agda.TypeChecking.Coverage.html#splitStrategy"><span class="hs-identifier hs-var">splitStrategy</span></a></span><span> </span><span class="annot"><span class="annottext">BlockingVars
</span><a href="#local-6989586621682148320"><span class="hs-identifier hs-var">bs</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682148276"><span class="hs-identifier hs-var">tel</span></a></span><span>
</span><span id="line-355"></span><span>      </span><span class="hs-comment">-- Andreas, 2017-10-08, issue #2594</span><span>
</span><span id="line-356"></span><span>      </span><span class="hs-comment">-- First, try to find split order for complete coverage.</span><span>
</span><span id="line-357"></span><span>      </span><span class="hs-comment">-- If this fails, try to at least carry out the splitting to the end.</span><span>
</span><span id="line-358"></span><span>      </span><span class="annot"><a href="#local-6989586621682148325"><span class="hs-identifier hs-type">continue</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148323"><span class="hs-identifier hs-type">xs</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#NoAllowPartialCover"><span class="hs-identifier hs-type">NoAllowPartialCover</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621682148327"><span class="annot"><span class="annottext">SplitError
</span><a href="#local-6989586621682148327"><span class="hs-identifier hs-var">_err</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-359"></span><span>        </span><span class="annot"><span class="annottext">BlockingVars
-&gt; AllowPartialCover
-&gt; (SplitError -&gt; TCM CoverResult)
-&gt; TCM CoverResult
</span><a href="#local-6989586621682148325"><span class="hs-identifier hs-var">continue</span></a></span><span> </span><span class="annot"><span class="annottext">BlockingVars
</span><a href="#local-6989586621682148323"><span class="hs-identifier hs-var">xs</span></a></span><span> </span><span class="annot"><span class="annottext">AllowPartialCover
</span><a href="Agda.TypeChecking.Coverage.html#YesAllowPartialCover"><span class="hs-identifier hs-var">YesAllowPartialCover</span></a></span><span> </span><span class="annot"><span class="annottext">((SplitError -&gt; TCM CoverResult) -&gt; TCM CoverResult)
-&gt; (SplitError -&gt; TCM CoverResult) -&gt; TCM CoverResult
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621682148329"><span class="annot"><span class="annottext">SplitError
</span><a href="#local-6989586621682148329"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-360"></span><span>          </span><span class="annot"><span class="annottext">SplitError -&gt; TCM CoverResult
forall a. SplitError -&gt; TCM a
</span><a href="#local-6989586621682148322"><span class="hs-identifier hs-var">splitError</span></a></span><span> </span><span class="annot"><span class="annottext">SplitError
</span><a href="#local-6989586621682148329"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-361"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-362"></span><span>    </span><span class="hs-comment">-- Andreas, 2019-08-07, issue #3966</span><span>
</span><span id="line-363"></span><span>    </span><span class="hs-comment">-- When we get a SplitError, tighten the error Range to the clauses</span><span>
</span><span id="line-364"></span><span>    </span><span class="hs-comment">-- that are still candidates for covering the SplitClause.</span><span>
</span><span id="line-365"></span><span>    </span><span id="local-6989586621682145924"><span class="annot"><a href="#local-6989586621682148322"><span class="hs-identifier hs-type">splitError</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#SplitError"><span class="hs-identifier hs-type">SplitError</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">TCM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682145924"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-366"></span><span>    </span><span id="local-6989586621682148322"><span class="annot"><span class="annottext">splitError :: forall a. SplitError -&gt; TCM a
</span><a href="#local-6989586621682148322"><span class="hs-identifier hs-var hs-var">splitError</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TCM a -&gt; TCM a
forall a. TCM a -&gt; TCM a
</span><a href="#local-6989586621682148333"><span class="hs-identifier hs-var">withRangeOfCandidateClauses</span></a></span><span> </span><span class="annot"><span class="annottext">(TCM a -&gt; TCM a) -&gt; (SplitError -&gt; TCM a) -&gt; SplitError -&gt; TCM a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">TypeError -&gt; TCM a
forall (m :: * -&gt; *) a.
(HasCallStack, MonadTCError m) =&gt;
TypeError -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Base.html#typeError"><span class="hs-identifier hs-var">typeError</span></a></span><span> </span><span class="annot"><span class="annottext">(TypeError -&gt; TCM a)
-&gt; (SplitError -&gt; TypeError) -&gt; SplitError -&gt; TCM a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">SplitError -&gt; TypeError
</span><a href="Agda.TypeChecking.Monad.Base.html#SplitError"><span class="hs-identifier hs-var">SplitError</span></a></span><span>
</span><span id="line-367"></span><span>
</span><span id="line-368"></span><span>    </span><span class="hs-comment">-- This repeats the matching, but since we are crashing anyway,</span><span>
</span><span id="line-369"></span><span>    </span><span class="hs-comment">-- the extra work just to compute a better Range does not matter.</span><span>
</span><span id="line-370"></span><span>    </span><span id="local-6989586621682148336"><span class="annot"><a href="#local-6989586621682148333"><span class="hs-identifier hs-type">withRangeOfCandidateClauses</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">TCM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148336"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">TCM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148336"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-371"></span><span>    </span><span id="local-6989586621682148333"><span class="annot"><span class="annottext">withRangeOfCandidateClauses :: forall a. TCM a -&gt; TCM a
</span><a href="#local-6989586621682148333"><span class="hs-identifier hs-var hs-var">withRangeOfCandidateClauses</span></a></span></span><span> </span><span id="local-6989586621682148344"><span class="annot"><span class="annottext">TCM a
</span><a href="#local-6989586621682148344"><span class="hs-identifier hs-var">cont</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-372"></span><span>      </span><span id="local-6989586621682148345"><span class="annot"><a href="#local-6989586621682148345"><span class="hs-identifier hs-var">cands</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">((Clause, Match (DList (Int, SplitPattern))) -&gt; Maybe Clause)
-&gt; [(Clause, Match (DList (Int, SplitPattern)))] -&gt; [Clause]
forall a b. (a -&gt; Maybe b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">mapMaybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Clause -&gt; Match (DList (Int, SplitPattern)) -&gt; Maybe Clause)
-&gt; (Clause, Match (DList (Int, SplitPattern))) -&gt; Maybe Clause
forall a b c. (a -&gt; b -&gt; c) -&gt; (a, b) -&gt; c
</span><span class="hs-identifier hs-var">uncurry</span></span><span> </span><span class="annot"><span class="annottext">Clause -&gt; Match (DList (Int, SplitPattern)) -&gt; Maybe Clause
forall a. Clause -&gt; Match a -&gt; Maybe Clause
</span><a href="#local-6989586621682148348"><span class="hs-identifier hs-var">notNo</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([(Clause, Match (DList (Int, SplitPattern)))] -&gt; [Clause])
-&gt; ([Match (DList (Int, SplitPattern))]
    -&gt; [(Clause, Match (DList (Int, SplitPattern)))])
-&gt; [Match (DList (Int, SplitPattern))]
-&gt; [Clause]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">[Clause]
-&gt; [Match (DList (Int, SplitPattern))]
-&gt; [(Clause, Match (DList (Int, SplitPattern)))]
forall a b. [a] -&gt; [b] -&gt; [(a, b)]
</span><span class="hs-identifier hs-var">zip</span></span><span> </span><span class="annot"><span class="annottext">[Clause]
</span><a href="#local-6989586621682148274"><span class="hs-identifier hs-var">cs</span></a></span><span> </span><span class="annot"><span class="annottext">([Match (DList (Int, SplitPattern))] -&gt; [Clause])
-&gt; TCMT IO [Match (DList (Int, SplitPattern))] -&gt; TCMT IO [Clause]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">(Clause -&gt; TCMT IO (Match (DList (Int, SplitPattern))))
-&gt; [Clause] -&gt; TCMT IO [Match (DList (Int, SplitPattern))]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
-&gt; Clause -&gt; TCMT IO (Match (DList (Int, SplitPattern)))
forall (m :: * -&gt; *).
PureTCM m =&gt;
[NamedArg SplitPattern]
-&gt; Clause -&gt; m (Match (DList (Int, SplitPattern)))
</span><a href="Agda.TypeChecking.Coverage.Match.html#matchClause"><span class="hs-identifier hs-var">matchClause</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621682148277"><span class="hs-identifier hs-var">ps</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Clause]
</span><a href="#local-6989586621682148274"><span class="hs-identifier hs-var">cs</span></a></span><span>
</span><span id="line-373"></span><span>      </span><span class="annot"><a href="Agda.TypeChecking.Monad.Trace.html#setCurrentRange"><span class="hs-identifier hs-type">setCurrentRange</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148345"><span class="hs-identifier hs-type">cands</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148344"><span class="hs-identifier hs-type">cont</span></a></span><span>
</span><span id="line-374"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-375"></span><span>        </span><span id="local-6989586621682145937"><span class="annot"><a href="#local-6989586621682148348"><span class="hs-identifier hs-type">notNo</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Clause"><span class="hs-identifier hs-type">Clause</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.Match.html#Match"><span class="hs-identifier hs-type">Match</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682145937"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Clause"><span class="hs-identifier hs-type">Clause</span></a></span></span><span>
</span><span id="line-376"></span><span>        </span><span id="local-6989586621682148348"><span class="annot"><span class="annottext">notNo :: forall a. Clause -&gt; Match a -&gt; Maybe Clause
</span><a href="#local-6989586621682148348"><span class="hs-identifier hs-var hs-var">notNo</span></a></span></span><span> </span><span id="local-6989586621682148351"><span class="annot"><span class="annottext">Clause
</span><a href="#local-6989586621682148351"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-377"></span><span>          </span><span class="annot"><a href="Agda.TypeChecking.Coverage.Match.html#Yes"><span class="hs-identifier hs-type">Yes</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Clause -&gt; Maybe Clause
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Clause
</span><a href="#local-6989586621682148351"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-378"></span><span>          </span><span class="annot"><a href="Agda.TypeChecking.Coverage.Match.html#Block"><span class="hs-identifier hs-type">Block</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Clause -&gt; Maybe Clause
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Clause
</span><a href="#local-6989586621682148351"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-379"></span><span>          </span><span class="annot"><a href="Agda.TypeChecking.Coverage.Match.html#No"><span class="hs-identifier hs-type">No</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe Clause
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-380"></span><span>
</span><span id="line-381"></span><span>    </span><span class="hs-comment">-- Rename the variables in a telescope in accordance with their</span><span>
</span><span id="line-382"></span><span>    </span><span class="hs-comment">-- first appearance in the given NAPs. This is done to preserve</span><span>
</span><span id="line-383"></span><span>    </span><span class="hs-comment">-- variable names in IApplyConfluence error messages. Specifically,</span><span>
</span><span id="line-384"></span><span>    </span><span class="hs-comment">-- consider e.g.</span><span>
</span><span id="line-385"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-386"></span><span>    </span><span class="hs-comment">--  data T : Set where</span><span>
</span><span id="line-387"></span><span>    </span><span class="hs-comment">--    x : T</span><span>
</span><span id="line-388"></span><span>    </span><span class="hs-comment">--    p : Path (Path T x x) refl refl</span><span>
</span><span id="line-389"></span><span>    </span><span class="hs-comment">--  f (p i j) = ...</span><span>
</span><span id="line-390"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-391"></span><span>    </span><span class="hs-comment">-- When generating the covering clause corresponding to f's clause,</span><span>
</span><span id="line-392"></span><span>    </span><span class="hs-comment">-- the names we have in scope are i and i&#8321;, since those are the</span><span>
</span><span id="line-393"></span><span>    </span><span class="hs-comment">-- names of both PathP binder arguments. (recall Path A x y = PathP (&#955; i &#8594; A) x y)</span><span>
</span><span id="line-394"></span><span>    </span><span class="hs-comment">-- So if we tried to print (Var 0 []) in the context of</span><span>
</span><span id="line-395"></span><span>    </span><span class="hs-comment">-- IApplyConfluence for that clause, what we see isn't j, it's i&#8321;.</span><span>
</span><span id="line-396"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-397"></span><span>    </span><span class="hs-comment">-- This function takes &quot;name suggestions&quot; from both variable</span><span>
</span><span id="line-398"></span><span>    </span><span class="hs-comment">-- patterns and IApply co/patterns, and replaces any existing names</span><span>
</span><span id="line-399"></span><span>    </span><span class="hs-comment">-- in the telescope by the name in that pattern.</span><span>
</span><span id="line-400"></span><span>    </span><span class="annot"><a href="#local-6989586621682148352"><span class="hs-identifier hs-type">renTeleFromNap</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitClause.html#SplitClause"><span class="hs-identifier hs-type">SplitClause</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Clause"><span class="hs-identifier hs-type">Clause</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Telescope"><span class="hs-identifier hs-type">Telescope</span></a></span><span>
</span><span id="line-401"></span><span>    </span><span id="local-6989586621682148352"><span class="annot"><span class="annottext">renTeleFromNap :: SplitClause -&gt; Clause -&gt; Telescope
</span><a href="#local-6989586621682148352"><span class="hs-identifier hs-var hs-var">renTeleFromNap</span></a></span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitClause.html#SClause"><span class="hs-identifier hs-type">SClause</span></a></span><span class="hs-special">{</span><span class="annot"><span class="annottext">scTel :: SplitClause -&gt; Telescope
</span><a href="Agda.TypeChecking.Coverage.SplitClause.html#scTel"><span class="hs-identifier hs-var">scTel</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682148354"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682148354"><span class="hs-identifier hs-var">tel</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">scPats :: SplitClause -&gt; [NamedArg SplitPattern]
</span><a href="Agda.TypeChecking.Coverage.SplitClause.html#scPats"><span class="hs-identifier hs-var">scPats</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682148356"><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621682148356"><span class="hs-identifier hs-var">sps</span></a></span></span><span class="hs-special">}</span><span> </span><span id="local-6989586621682148357"><span class="annot"><span class="annottext">Clause
</span><a href="#local-6989586621682148357"><span class="hs-identifier hs-var">clause</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-402"></span><span>      </span><span class="annot"><span class="annottext">ListTel -&gt; Telescope
</span><a href="Agda.Syntax.Internal.html#telFromList"><span class="hs-identifier hs-var">telFromList</span></a></span><span> </span><span class="annot"><span class="annottext">(ListTel -&gt; Telescope) -&gt; ListTel -&gt; Telescope
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">State Int ListTel -&gt; Int -&gt; ListTel
forall s a. State s a -&gt; s -&gt; a
</span><span class="hs-identifier hs-var">evalState</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Dom (PatVarName, Type)
 -&gt; StateT Int Identity (Dom (PatVarName, Type)))
-&gt; ListTel -&gt; State Int ListTel
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; [a] -&gt; f [b]
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">Dom (PatVarName, Type)
-&gt; StateT Int Identity (Dom (PatVarName, Type))
</span><a href="#local-6989586621682148360"><span class="hs-identifier hs-var">upd</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Telescope -&gt; ListTel
forall t. Tele (Dom t) -&gt; [Dom (PatVarName, t)]
</span><a href="Agda.Syntax.Internal.html#telToList"><span class="hs-identifier hs-var">telToList</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682148354"><span class="hs-identifier hs-var">tel</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682148362"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682148363"><span class="hs-identifier hs-var">offset</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-403"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-404"></span><span>        </span><span id="local-6989586621682148364"><span class="annot"><span class="annottext">ps :: NAPs
</span><a href="#local-6989586621682148364"><span class="hs-identifier hs-var hs-var">ps</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Clause -&gt; NAPs
</span><a href="Agda.Syntax.Internal.html#namedClausePats"><span class="hs-identifier hs-var">namedClausePats</span></a></span><span> </span><span class="annot"><span class="annottext">Clause
</span><a href="#local-6989586621682148357"><span class="hs-identifier hs-var">clause</span></a></span><span>
</span><span id="line-405"></span><span>        </span><span id="local-6989586621682148363"><span class="annot"><span class="annottext">offset :: Int
</span><a href="#local-6989586621682148363"><span class="hs-identifier hs-var hs-var">offset</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">NAPs -&gt; Int
forall a. [a] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[NamedArg SplitPattern] -&gt; NAPs
</span><a href="Agda.TypeChecking.Coverage.SplitPattern.html#fromSplitPatterns"><span class="hs-identifier hs-var">fromSplitPatterns</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621682148356"><span class="hs-identifier hs-var">sps</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">NAPs -&gt; Int
forall a. [a] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">NAPs
</span><a href="#local-6989586621682148364"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-406"></span><span>        </span><span class="hs-comment">-- Fold a single pattern into a map of name suggestions:</span><span>
</span><span id="line-407"></span><span>        </span><span class="hs-comment">-- In the running example above, we have</span><span>
</span><span id="line-408"></span><span>        </span><span class="hs-comment">--    f (p i@1 j@0)</span><span>
</span><span id="line-409"></span><span>        </span><span class="hs-comment">-- so the map that nameSuggest (p ...) returns is {0 &#8594; j, 1 &#8594; j}</span><span>
</span><span id="line-410"></span><span>        </span><span class="annot"><a href="#local-6989586621682148366"><span class="hs-identifier hs-type">nameSuggest</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#DeBruijnPattern"><span class="hs-identifier hs-type">DeBruijnPattern</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IntMap</span></span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html#ArgName"><span class="hs-identifier hs-type">ArgName</span></a></span><span>
</span><span id="line-411"></span><span>        </span><span id="local-6989586621682148366"><span class="annot"><span class="annottext">nameSuggest :: DeBruijnPattern -&gt; IntMap PatVarName
</span><a href="#local-6989586621682148366"><span class="hs-identifier hs-var hs-var">nameSuggest</span></a></span></span><span> </span><span id="local-6989586621682148368"><span class="annot"><span class="annottext">DeBruijnPattern
</span><a href="#local-6989586621682148368"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((DeBruijnPattern -&gt; IntMap PatVarName)
 -&gt; DeBruijnPattern -&gt; IntMap PatVarName)
-&gt; DeBruijnPattern
-&gt; (DeBruijnPattern -&gt; IntMap PatVarName)
-&gt; IntMap PatVarName
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="annot"><span class="annottext">(DeBruijnPattern -&gt; IntMap PatVarName)
-&gt; DeBruijnPattern -&gt; IntMap PatVarName
forall a b m.
(PatternLike a b, Monoid m) =&gt;
(Pattern' a -&gt; m) -&gt; b -&gt; m
</span><a href="Agda.Syntax.Internal.Pattern.html#foldPattern"><span class="hs-identifier hs-var">foldPattern</span></a></span><span> </span><span class="annot"><span class="annottext">DeBruijnPattern
</span><a href="#local-6989586621682148368"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="annot"><span class="annottext">((DeBruijnPattern -&gt; IntMap PatVarName) -&gt; IntMap PatVarName)
-&gt; (DeBruijnPattern -&gt; IntMap PatVarName) -&gt; IntMap PatVarName
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-412"></span><span>          </span><span class="annot"><a href="Agda.Syntax.Internal.html#VarP"><span class="hs-identifier hs-type">VarP</span></a></span><span> </span><span class="annot"><span class="annottext">PatternInfo
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682148371"><span class="annot"><span class="annottext">DBPatVar
</span><a href="#local-6989586621682148371"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">DBPatVar -&gt; PatVarName
</span><a href="Agda.Syntax.Internal.html#dbPatVarName"><span class="hs-identifier hs-var">dbPatVarName</span></a></span><span> </span><span class="annot"><span class="annottext">DBPatVar
</span><a href="#local-6989586621682148371"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">PatVarName -&gt; PatVarName -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">/=</span></span><span> </span><span class="annot"><span class="annottext">PatVarName
</span><span class="hs-string">&quot;_&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-413"></span><span>            </span><span class="annot"><span class="annottext">Int -&gt; PatVarName -&gt; IntMap PatVarName
forall a. Int -&gt; a -&gt; IntMap a
</span><span class="hs-identifier hs-var">IntMap.singleton</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DBPatVar -&gt; Int
</span><a href="Agda.Syntax.Internal.html#dbPatVarIndex"><span class="hs-identifier hs-var">dbPatVarIndex</span></a></span><span> </span><span class="annot"><span class="annottext">DBPatVar
</span><a href="#local-6989586621682148371"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DBPatVar -&gt; PatVarName
</span><a href="Agda.Syntax.Internal.html#dbPatVarName"><span class="hs-identifier hs-var">dbPatVarName</span></a></span><span> </span><span class="annot"><span class="annottext">DBPatVar
</span><a href="#local-6989586621682148371"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-414"></span><span>          </span><span class="annot"><a href="Agda.Syntax.Internal.html#IApplyP"><span class="hs-identifier hs-type">IApplyP</span></a></span><span> </span><span class="annot"><span class="annottext">PatternInfo
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Term
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Term
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682148377"><span class="annot"><span class="annottext">DBPatVar
</span><a href="#local-6989586621682148377"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">DBPatVar -&gt; PatVarName
</span><a href="Agda.Syntax.Internal.html#dbPatVarName"><span class="hs-identifier hs-var">dbPatVarName</span></a></span><span> </span><span class="annot"><span class="annottext">DBPatVar
</span><a href="#local-6989586621682148377"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">PatVarName -&gt; PatVarName -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">/=</span></span><span> </span><span class="annot"><span class="annottext">PatVarName
</span><span class="hs-string">&quot;_&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-415"></span><span>            </span><span class="annot"><span class="annottext">Int -&gt; PatVarName -&gt; IntMap PatVarName
forall a. Int -&gt; a -&gt; IntMap a
</span><span class="hs-identifier hs-var">IntMap.singleton</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DBPatVar -&gt; Int
</span><a href="Agda.Syntax.Internal.html#dbPatVarIndex"><span class="hs-identifier hs-var">dbPatVarIndex</span></a></span><span> </span><span class="annot"><span class="annottext">DBPatVar
</span><a href="#local-6989586621682148377"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DBPatVar -&gt; PatVarName
</span><a href="Agda.Syntax.Internal.html#dbPatVarName"><span class="hs-identifier hs-var">dbPatVarName</span></a></span><span> </span><span class="annot"><span class="annottext">DBPatVar
</span><a href="#local-6989586621682148377"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-416"></span><span>          </span><span class="annot"><span class="annottext">DeBruijnPattern
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">IntMap PatVarName
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-417"></span><span>
</span><span id="line-418"></span><span>        </span><span class="hs-comment">-- Suggestions from all patterns..</span><span>
</span><span id="line-419"></span><span>        </span><span id="local-6989586621682148378"><span class="annot"><span class="annottext">suggestions :: IntMap PatVarName
</span><a href="#local-6989586621682148378"><span class="hs-identifier hs-var hs-var">suggestions</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Arg (Named_ DeBruijnPattern) -&gt; IntMap PatVarName)
-&gt; NAPs -&gt; IntMap PatVarName
forall m a. Monoid m =&gt; (a -&gt; m) -&gt; [a] -&gt; m
forall (t :: * -&gt; *) m a.
(Foldable t, Monoid m) =&gt;
(a -&gt; m) -&gt; t a -&gt; m
</span><span class="hs-identifier hs-var">foldMap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DeBruijnPattern -&gt; IntMap PatVarName
</span><a href="#local-6989586621682148366"><span class="hs-identifier hs-var">nameSuggest</span></a></span><span> </span><span class="annot"><span class="annottext">(DeBruijnPattern -&gt; IntMap PatVarName)
-&gt; (Arg (Named_ DeBruijnPattern) -&gt; DeBruijnPattern)
-&gt; Arg (Named_ DeBruijnPattern)
-&gt; IntMap PatVarName
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Named_ DeBruijnPattern -&gt; DeBruijnPattern
forall name a. Named name a -&gt; a
</span><a href="Agda.Syntax.Common.html#namedThing"><span class="hs-identifier hs-var">namedThing</span></a></span><span> </span><span class="annot"><span class="annottext">(Named_ DeBruijnPattern -&gt; DeBruijnPattern)
-&gt; (Arg (Named_ DeBruijnPattern) -&gt; Named_ DeBruijnPattern)
-&gt; Arg (Named_ DeBruijnPattern)
-&gt; DeBruijnPattern
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Arg (Named_ DeBruijnPattern) -&gt; Named_ DeBruijnPattern
forall e. Arg e -&gt; e
</span><a href="Agda.Syntax.Common.html#unArg"><span class="hs-identifier hs-var">unArg</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NAPs
</span><a href="#local-6989586621682148364"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-420"></span><span>
</span><span id="line-421"></span><span>        </span><span class="hs-comment">-- The state will start counting from (length &#915; - 1), which is</span><span>
</span><span id="line-422"></span><span>        </span><span class="hs-comment">-- the *highest* variable index, i.e. the index of the variable</span><span>
</span><span id="line-423"></span><span>        </span><span class="hs-comment">-- with level 0. Instead of doing a lot of de Bruijn arithmetic</span><span>
</span><span id="line-424"></span><span>        </span><span class="hs-comment">-- + recursion, traverse handles iteration and the State handles</span><span>
</span><span id="line-425"></span><span>        </span><span class="hs-comment">-- counting down.</span><span>
</span><span id="line-426"></span><span>        </span><span id="local-6989586621682148362"><span class="annot"><span class="annottext">size :: Int
</span><a href="#local-6989586621682148362"><span class="hs-identifier hs-var hs-var">size</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ListTel -&gt; Int
forall a. [a] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Telescope -&gt; ListTel
forall t. Tele (Dom t) -&gt; [Dom (PatVarName, t)]
</span><a href="Agda.Syntax.Internal.html#telToList"><span class="hs-identifier hs-var">telToList</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682148354"><span class="hs-identifier hs-var">tel</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-427"></span><span>
</span><span id="line-428"></span><span>        </span><span class="annot"><a href="#local-6989586621682148360"><span class="hs-identifier hs-type">upd</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Dom"><span class="hs-identifier hs-type">Dom</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Common.html#ArgName"><span class="hs-identifier hs-type">ArgName</span></a></span><span> </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">State</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Dom"><span class="hs-identifier hs-type">Dom</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Common.html#ArgName"><span class="hs-identifier hs-type">ArgName</span></a></span><span> </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-429"></span><span>        </span><span id="local-6989586621682148360"><span class="annot"><span class="annottext">upd :: Dom (PatVarName, Type)
-&gt; StateT Int Identity (Dom (PatVarName, Type))
</span><a href="#local-6989586621682148360"><span class="hs-identifier hs-var hs-var">upd</span></a></span></span><span> </span><span id="local-6989586621682148382"><span class="annot"><span class="annottext">Dom (PatVarName, Type)
</span><a href="#local-6989586621682148382"><span class="hs-identifier hs-var">dom</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Int -&gt; (Dom (PatVarName, Type), Int))
-&gt; StateT Int Identity (Dom (PatVarName, Type))
forall a. (Int -&gt; (a, Int)) -&gt; StateT Int Identity a
forall s (m :: * -&gt; *) a. MonadState s m =&gt; (s -&gt; (a, s)) -&gt; m a
</span><span class="hs-identifier hs-var">state</span></span><span> </span><span class="annot"><span class="annottext">((Int -&gt; (Dom (PatVarName, Type), Int))
 -&gt; StateT Int Identity (Dom (PatVarName, Type)))
-&gt; (Int -&gt; (Dom (PatVarName, Type), Int))
-&gt; StateT Int Identity (Dom (PatVarName, Type))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621682148383"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682148383"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-430"></span><span>          </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Int -&gt; IntMap PatVarName -&gt; Maybe PatVarName
forall a. Int -&gt; IntMap a -&gt; Maybe a
</span><span class="hs-identifier hs-var">IntMap.lookup</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682148383"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">IntMap PatVarName
</span><a href="#local-6989586621682148378"><span class="hs-identifier hs-var">suggestions</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-431"></span><span>            </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621682148385"><span class="annot"><span class="annottext">PatVarName
</span><a href="#local-6989586621682148385"><span class="hs-identifier hs-var">nm'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">Dom (PatVarName, Type)
</span><a href="#local-6989586621682148382"><span class="hs-identifier hs-var">dom</span></a></span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#domName"><span class="hs-identifier hs-var">domName</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Common.html#WithOrigin"><span class="hs-identifier hs-type">WithOrigin</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html#CaseSplit"><span class="hs-identifier hs-type">CaseSplit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Common.html#unranged"><span class="hs-identifier hs-type">unranged</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148385"><span class="hs-identifier hs-type">nm'</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-432"></span><span>                             </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#unDom"><span class="hs-identifier hs-var">unDom</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682148385"><span class="hs-identifier hs-type">nm'</span></a></span><span> </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">snd</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#unDom"><span class="hs-identifier hs-var">unDom</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148382"><span class="hs-identifier hs-type">dom</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-433"></span><span>                             </span><span class="hs-special">}</span><span> </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682148383"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span>
</span><span id="line-434"></span><span>            </span><span class="annot"><span class="annottext">Maybe PatVarName
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Dom (PatVarName, Type)
</span><a href="#local-6989586621682148382"><span class="hs-identifier hs-var">dom</span></a></span><span> </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682148383"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span>
</span><span id="line-435"></span><span>
</span><span id="line-436"></span><span>    </span><span class="annot"><a href="#local-6989586621682148302"><span class="hs-identifier hs-type">applyCl</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitClause.html#SplitClause"><span class="hs-identifier hs-type">SplitClause</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Clause"><span class="hs-identifier hs-type">Clause</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Common.html#Nat"><span class="hs-identifier hs-type">Nat</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitPattern.html#SplitPattern"><span class="hs-identifier hs-type">SplitPattern</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">TCM</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Clause"><span class="hs-identifier hs-type">Clause</span></a></span><span>
</span><span id="line-437"></span><span>    </span><span id="local-6989586621682148302"><span class="annot"><span class="annottext">applyCl :: SplitClause -&gt; Clause -&gt; [(Int, SplitPattern)] -&gt; TCM Clause
</span><a href="#local-6989586621682148302"><span class="hs-identifier hs-var hs-var">applyCl</span></a></span></span><span> </span><span id="local-6989586621682148391"><span class="annot"><span class="annottext">sc :: SplitClause
</span><a href="#local-6989586621682148391"><span class="hs-identifier hs-var">sc</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitClause.html#SClause"><span class="hs-identifier hs-type">SClause</span></a></span><span class="hs-special">{</span><span class="annot"><span class="annottext">scTel :: SplitClause -&gt; Telescope
</span><a href="Agda.TypeChecking.Coverage.SplitClause.html#scTel"><span class="hs-identifier hs-var">scTel</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682148392"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682148392"><span class="hs-identifier hs-var">pretel</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">scPats :: SplitClause -&gt; [NamedArg SplitPattern]
</span><a href="Agda.TypeChecking.Coverage.SplitClause.html#scPats"><span class="hs-identifier hs-var">scPats</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682148393"><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621682148393"><span class="hs-identifier hs-var">sps</span></a></span></span><span class="hs-special">}</span><span> </span><span id="local-6989586621682148394"><span class="annot"><span class="annottext">Clause
</span><a href="#local-6989586621682148394"><span class="hs-identifier hs-var">cl</span></a></span></span><span> </span><span id="local-6989586621682148395"><span class="annot"><span class="annottext">[(Int, SplitPattern)]
</span><a href="#local-6989586621682148395"><span class="hs-identifier hs-var">mps</span></a></span></span><span>
</span><span id="line-438"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621682148396"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682148396"><span class="hs-identifier hs-var">tel</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SplitClause -&gt; Clause -&gt; Telescope
</span><a href="#local-6989586621682148352"><span class="hs-identifier hs-var">renTeleFromNap</span></a></span><span> </span><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621682148391"><span class="hs-identifier hs-var">sc</span></a></span><span> </span><span class="annot"><span class="annottext">Clause
</span><a href="#local-6989586621682148394"><span class="hs-identifier hs-var">cl</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; TCM Clause -&gt; TCM Clause
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a.
MonadAddContext m =&gt;
Telescope -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682148396"><span class="hs-identifier hs-var">tel</span></a></span><span> </span><span class="annot"><span class="annottext">(TCM Clause -&gt; TCM Clause) -&gt; TCM Clause -&gt; TCM Clause
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-439"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682148397"><span class="annot"><span class="annottext">ps :: NAPs
</span><a href="#local-6989586621682148397"><span class="hs-identifier hs-var hs-var hs-var">ps</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Clause -&gt; NAPs
</span><a href="Agda.Syntax.Internal.html#namedClausePats"><span class="hs-identifier hs-var">namedClausePats</span></a></span><span> </span><span class="annot"><span class="annottext">Clause
</span><a href="#local-6989586621682148394"><span class="hs-identifier hs-var">cl</span></a></span><span>
</span><span id="line-440"></span><span>        </span><span class="annot"><span class="annottext">PatVarName -&gt; Int -&gt; TCMT IO Doc -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
PatVarName -&gt; Int -&gt; TCMT IO Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">PatVarName
</span><span class="hs-string">&quot;tc.cover.applyCl&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">40</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; TCMT IO ()) -&gt; TCMT IO Doc -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;applyCl&quot;</span></span><span>
</span><span id="line-441"></span><span>        </span><span class="annot"><span class="annottext">PatVarName -&gt; Int -&gt; TCMT IO Doc -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
PatVarName -&gt; Int -&gt; TCMT IO Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">PatVarName
</span><span class="hs-string">&quot;tc.cover.applyCl&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">40</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; TCMT IO ()) -&gt; TCMT IO Doc -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;pretel =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; TCMT IO Doc
forall (m :: * -&gt; *) a. (Applicative m, Pretty a) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#pretty"><span class="hs-identifier hs-var">pretty</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682148392"><span class="hs-identifier hs-var">pretel</span></a></span><span>
</span><span id="line-442"></span><span>        </span><span class="annot"><span class="annottext">PatVarName -&gt; Int -&gt; TCMT IO Doc -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
PatVarName -&gt; Int -&gt; TCMT IO Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">PatVarName
</span><span class="hs-string">&quot;tc.cover.applyCl&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">40</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; TCMT IO ()) -&gt; TCMT IO Doc -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;tel    =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; TCMT IO Doc
forall (m :: * -&gt; *) a. (Applicative m, Pretty a) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#pretty"><span class="hs-identifier hs-var">pretty</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682148396"><span class="hs-identifier hs-var">tel</span></a></span><span>
</span><span id="line-443"></span><span>        </span><span class="annot"><span class="annottext">PatVarName -&gt; Int -&gt; TCMT IO Doc -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
PatVarName -&gt; Int -&gt; TCMT IO Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">PatVarName
</span><span class="hs-string">&quot;tc.cover.applyCl&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">40</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; TCMT IO ()) -&gt; TCMT IO Doc -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;ps     =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">NAPs -&gt; TCMT IO Doc
forall (m :: * -&gt; *) a. (Applicative m, Pretty a) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#pretty"><span class="hs-identifier hs-var">pretty</span></a></span><span> </span><span class="annot"><span class="annottext">NAPs
</span><a href="#local-6989586621682148397"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-444"></span><span>        </span><span class="annot"><span class="annottext">PatVarName -&gt; Int -&gt; TCMT IO Doc -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
PatVarName -&gt; Int -&gt; TCMT IO Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">PatVarName
</span><span class="hs-string">&quot;tc.cover.applyCl&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">40</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; TCMT IO ()) -&gt; TCMT IO Doc -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;mps    =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[(Int, SplitPattern)] -&gt; TCMT IO Doc
forall (m :: * -&gt; *) a. (Applicative m, Pretty a) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#pretty"><span class="hs-identifier hs-var">pretty</span></a></span><span> </span><span class="annot"><span class="annottext">[(Int, SplitPattern)]
</span><a href="#local-6989586621682148395"><span class="hs-identifier hs-var">mps</span></a></span><span>
</span><span id="line-445"></span><span>        </span><span class="annot"><span class="annottext">PatVarName -&gt; Int -&gt; TCMT IO Doc -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
PatVarName -&gt; Int -&gt; TCMT IO Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">PatVarName
</span><span class="hs-string">&quot;tc.cover.applyCl&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">40</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; TCMT IO ()) -&gt; TCMT IO Doc -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;s      =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">PatternSubstitution -&gt; TCMT IO Doc
forall (m :: * -&gt; *) a. (Applicative m, Pretty a) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#pretty"><span class="hs-identifier hs-var">pretty</span></a></span><span> </span><span class="annot"><span class="annottext">PatternSubstitution
</span><a href="#local-6989586621682148398"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-446"></span><span>        </span><span class="annot"><span class="annottext">PatVarName -&gt; Int -&gt; TCMT IO Doc -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
PatVarName -&gt; Int -&gt; TCMT IO Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">PatVarName
</span><span class="hs-string">&quot;tc.cover.applyCl&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">40</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; TCMT IO ()) -&gt; TCMT IO Doc -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;ps[s]  =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">NAPs -&gt; TCMT IO Doc
forall (m :: * -&gt; *) a. (Applicative m, Pretty a) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#pretty"><span class="hs-identifier hs-var">pretty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PatternSubstitution
Substitution' (SubstArg NAPs)
</span><a href="#local-6989586621682148398"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' (SubstArg NAPs) -&gt; NAPs -&gt; NAPs
forall a. Subst a =&gt; Substitution' (SubstArg a) -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#applySubst"><span class="hs-operator hs-var">`applySubst`</span></a></span><span> </span><span class="annot"><span class="annottext">NAPs
</span><a href="#local-6989586621682148397"><span class="hs-identifier hs-var">ps</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-447"></span><span>
</span><span id="line-448"></span><span>        </span><span class="hs-comment">-- If a matching clause has fewer patterns than the split</span><span>
</span><span id="line-449"></span><span>        </span><span class="hs-comment">-- clause we ought to copy over the extra ones.</span><span>
</span><span id="line-450"></span><span>        </span><span class="hs-comment">-- e.g. if the user wrote:</span><span>
</span><span id="line-451"></span><span>        </span><span class="hs-comment">--</span><span>
</span><span id="line-452"></span><span>        </span><span class="hs-comment">--   bar : Bool -&gt; Bool</span><span>
</span><span id="line-453"></span><span>        </span><span class="hs-comment">--   bar false = false</span><span>
</span><span id="line-454"></span><span>        </span><span class="hs-comment">--   bar = \ _ -&gt; true</span><span>
</span><span id="line-455"></span><span>        </span><span class="hs-comment">--</span><span>
</span><span id="line-456"></span><span>        </span><span class="hs-comment">-- then for the second clause the @extra@ patterns will be @[true]@.</span><span>
</span><span id="line-457"></span><span>
</span><span id="line-458"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682148399"><span class="annot"><span class="annottext">extra :: NAPs
</span><a href="#local-6989586621682148399"><span class="hs-identifier hs-var hs-var hs-var">extra</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; NAPs -&gt; NAPs
forall a. Int -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">drop</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NAPs -&gt; Int
forall a. [a] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">NAPs
</span><a href="#local-6989586621682148397"><span class="hs-identifier hs-var">ps</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(NAPs -&gt; NAPs) -&gt; NAPs -&gt; NAPs
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern] -&gt; NAPs
</span><a href="Agda.TypeChecking.Coverage.SplitPattern.html#fromSplitPatterns"><span class="hs-identifier hs-var">fromSplitPatterns</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621682148393"><span class="hs-identifier hs-var">sps</span></a></span><span>
</span><span id="line-459"></span><span>            </span><span id="local-6989586621682148400"><span class="annot"><span class="annottext">n_extra :: Int
</span><a href="#local-6989586621682148400"><span class="hs-identifier hs-var hs-var hs-var">n_extra</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NAPs -&gt; Int
forall a. [a] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">NAPs
</span><a href="#local-6989586621682148399"><span class="hs-identifier hs-var">extra</span></a></span><span>
</span><span id="line-460"></span><span>
</span><span id="line-461"></span><span>        </span><span class="annot"><span class="annottext">PatVarName -&gt; Int -&gt; TCMT IO Doc -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
PatVarName -&gt; Int -&gt; TCMT IO Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">PatVarName
</span><span class="hs-string">&quot;tc.cover.applyCl&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">40</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; TCMT IO ()) -&gt; TCMT IO Doc -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;extra  =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">NAPs -&gt; TCMT IO Doc
forall (m :: * -&gt; *) a. (Applicative m, Pretty a) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#pretty"><span class="hs-identifier hs-var">pretty</span></a></span><span> </span><span class="annot"><span class="annottext">NAPs
</span><a href="#local-6989586621682148399"><span class="hs-identifier hs-var">extra</span></a></span><span>
</span><span id="line-462"></span><span>
</span><span id="line-463"></span><span>        </span><span class="hs-comment">-- When we add the extra patterns we also update the type</span><span>
</span><span id="line-464"></span><span>        </span><span class="hs-comment">-- and the body of the clause.</span><span>
</span><span id="line-465"></span><span>
</span><span id="line-466"></span><span>        </span><span id="local-6989586621682148401"><span class="annot"><a href="#local-6989586621682148401"><span class="hs-identifier hs-var">mtv</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Arg Type -&gt; TCMT IO (Arg (TelV Type)))
-&gt; Maybe (Arg Type) -&gt; TCMT IO (Maybe (Arg (TelV Type)))
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; Maybe a -&gt; f (Maybe b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">((Arg Type -&gt; TCMT IO (Arg (TelV Type)))
 -&gt; Maybe (Arg Type) -&gt; TCMT IO (Maybe (Arg (TelV Type))))
-&gt; ((Type -&gt; TCMT IO (TelV Type))
    -&gt; Arg Type -&gt; TCMT IO (Arg (TelV Type)))
-&gt; (Type -&gt; TCMT IO (TelV Type))
-&gt; Maybe (Arg Type)
-&gt; TCMT IO (Maybe (Arg (TelV Type)))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Type -&gt; TCMT IO (TelV Type))
-&gt; Arg Type -&gt; TCMT IO (Arg (TelV Type))
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; Arg a -&gt; f (Arg b)
</span><span class="hs-identifier hs-var">traverse</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Type -&gt; TCMT IO (TelV Type)
forall (m :: * -&gt; *). PureTCM m =&gt; Int -&gt; Type -&gt; m (TelV Type)
</span><a href="Agda.TypeChecking.Telescope.html#telViewUpToPath"><span class="hs-identifier hs-var">telViewUpToPath</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682148400"><span class="hs-identifier hs-var">n_extra</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Maybe (Arg Type) -&gt; TCMT IO (Maybe (Arg (TelV Type))))
-&gt; Maybe (Arg Type) -&gt; TCMT IO (Maybe (Arg (TelV Type)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Clause -&gt; Maybe (Arg Type)
</span><a href="Agda.Syntax.Internal.html#clauseType"><span class="hs-identifier hs-var">clauseType</span></a></span><span> </span><span class="annot"><span class="annottext">Clause
</span><a href="#local-6989586621682148394"><span class="hs-identifier hs-var">cl</span></a></span><span>
</span><span id="line-467"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682148403"><span class="annot"><a href="#local-6989586621682148403"><span class="hs-identifier hs-var hs-var">ty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Arg (TelV Type) -&gt; Arg Type)
-&gt; Maybe (Arg (TelV Type)) -&gt; Maybe (Arg Type)
forall a b. (a -&gt; b) -&gt; Maybe a -&gt; Maybe b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">((Arg (TelV Type) -&gt; Arg Type)
 -&gt; Maybe (Arg (TelV Type)) -&gt; Maybe (Arg Type))
-&gt; ((TelV Type -&gt; Type) -&gt; Arg (TelV Type) -&gt; Arg Type)
-&gt; (TelV Type -&gt; Type)
-&gt; Maybe (Arg (TelV Type))
-&gt; Maybe (Arg Type)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(TelV Type -&gt; Type) -&gt; Arg (TelV Type) -&gt; Arg Type
forall a b. (a -&gt; b) -&gt; Arg a -&gt; Arg b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">[DeBruijnPattern] -&gt; PatternSubstitution
forall a. DeBruijn a =&gt; [a] -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#parallelS"><span class="hs-identifier hs-var">parallelS</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[DeBruijnPattern] -&gt; [DeBruijnPattern]
forall a. [a] -&gt; [a]
</span><span class="hs-identifier hs-var">reverse</span></span><span> </span><span class="annot"><span class="annottext">([DeBruijnPattern] -&gt; [DeBruijnPattern])
-&gt; [DeBruijnPattern] -&gt; [DeBruijnPattern]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Arg (Named_ DeBruijnPattern) -&gt; DeBruijnPattern)
-&gt; NAPs -&gt; [DeBruijnPattern]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">Arg (Named_ DeBruijnPattern) -&gt; DeBruijnPattern
forall a. NamedArg a -&gt; a
</span><a href="Agda.Syntax.Common.html#namedArg"><span class="hs-identifier hs-var">namedArg</span></a></span><span> </span><span class="annot"><span class="annottext">NAPs
</span><a href="#local-6989586621682148399"><span class="hs-identifier hs-var">extra</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">PatternSubstitution -&gt; PatternSubstitution -&gt; PatternSubstitution
forall a.
EndoSubst a =&gt;
Substitution' a -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#composeS"><span class="hs-operator hs-var">`composeS`</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; PatternSubstitution -&gt; PatternSubstitution
forall a. Int -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#liftS"><span class="hs-identifier hs-var">liftS</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682148400"><span class="hs-identifier hs-var">n_extra</span></a></span><span> </span><span class="annot"><span class="annottext">PatternSubstitution
</span><a href="#local-6989586621682148398"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">PatternSubstitution -&gt; Type -&gt; Type
forall a. TermSubst a =&gt; PatternSubstitution -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.html#applyPatSubst"><span class="hs-operator hs-var">`applyPatSubst`</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Type -&gt; Type) -&gt; (TelV Type -&gt; Type) -&gt; TelV Type -&gt; Type
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">TelV Type -&gt; Type
forall a. TelV a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.html#theCore"><span class="hs-identifier hs-var">theCore</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe (Arg (TelV Type))
</span><a href="#local-6989586621682148401"><span class="hs-identifier hs-var">mtv</span></a></span><span>
</span><span id="line-468"></span><span>
</span><span id="line-469"></span><span>        </span><span class="annot"><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-type">reportSDoc</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;tc.cover.applyCl&quot;</span></span><span> </span><span class="annot"><span class="hs-number">40</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><span class="hs-string">&quot;new ty =&quot;</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-type">&lt;+&gt;</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#pretty"><span class="hs-identifier hs-type">pretty</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148403"><span class="hs-identifier hs-type">ty</span></a></span><span>
</span><span id="line-470"></span><span>
</span><span id="line-471"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span>
</span><span id="line-472"></span><span>             </span><span class="annot"><a href="Agda.Syntax.Internal.html#Clause"><span class="hs-identifier hs-type">Clause</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#clauseLHSRange"><span class="hs-identifier hs-var">clauseLHSRange</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#clauseLHSRange"><span class="hs-identifier hs-var">clauseLHSRange</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148394"><span class="hs-identifier hs-type">cl</span></a></span><span>
</span><span id="line-473"></span><span>                    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#clauseFullRange"><span class="hs-identifier hs-var">clauseFullRange</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#clauseFullRange"><span class="hs-identifier hs-var">clauseFullRange</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148394"><span class="hs-identifier hs-type">cl</span></a></span><span>
</span><span id="line-474"></span><span>                    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#clauseTel"><span class="hs-identifier hs-var">clauseTel</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682148396"><span class="hs-identifier hs-type">tel</span></a></span><span>
</span><span id="line-475"></span><span>                    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#namedClausePats"><span class="hs-identifier hs-var">namedClausePats</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682148398"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#applySubst"><span class="hs-operator hs-type">`applySubst`</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148397"><span class="hs-identifier hs-type">ps</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">++</span></span><span> </span><span class="annot"><a href="#local-6989586621682148399"><span class="hs-identifier hs-type">extra</span></a></span><span>
</span><span id="line-476"></span><span>                    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#clauseBody"><span class="hs-identifier hs-var">clauseBody</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-operator">`applyE`</span></span><span> </span><span class="annot"><span class="hs-identifier">patternsToElims</span></span><span> </span><span class="annot"><span class="hs-identifier">extra</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">.</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">s</span></span><span> </span><span class="annot"><span class="hs-operator">`applyPatSubst`</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">&lt;$&gt;</span></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#clauseBody"><span class="hs-identifier hs-var">clauseBody</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148394"><span class="hs-identifier hs-type">cl</span></a></span><span>
</span><span id="line-477"></span><span>                    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#clauseType"><span class="hs-identifier hs-var">clauseType</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682148403"><span class="hs-identifier hs-type">ty</span></a></span><span>
</span><span id="line-478"></span><span>                    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#clauseCatchall"><span class="hs-identifier hs-var">clauseCatchall</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#clauseCatchall"><span class="hs-identifier hs-var">clauseCatchall</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148394"><span class="hs-identifier hs-type">cl</span></a></span><span>
</span><span id="line-479"></span><span>                    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#clauseRecursive"><span class="hs-identifier hs-var">clauseRecursive</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#clauseRecursive"><span class="hs-identifier hs-var">clauseRecursive</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148394"><span class="hs-identifier hs-type">cl</span></a></span><span>
</span><span id="line-480"></span><span>                    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#clauseUnreachable"><span class="hs-identifier hs-var">clauseUnreachable</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#clauseUnreachable"><span class="hs-identifier hs-var">clauseUnreachable</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148394"><span class="hs-identifier hs-type">cl</span></a></span><span>
</span><span id="line-481"></span><span>                    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#clauseEllipsis"><span class="hs-identifier hs-var">clauseEllipsis</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#clauseEllipsis"><span class="hs-identifier hs-var">clauseEllipsis</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148394"><span class="hs-identifier hs-type">cl</span></a></span><span>
</span><span id="line-482"></span><span>                    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#clauseWhereModule"><span class="hs-identifier hs-var">clauseWhereModule</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#clauseWhereModule"><span class="hs-identifier hs-var">clauseWhereModule</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148394"><span class="hs-identifier hs-type">cl</span></a></span><span>
</span><span id="line-483"></span><span>                    </span><span class="hs-special">}</span><span>
</span><span id="line-484"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-485"></span><span>      </span><span id="local-6989586621682148412"><span class="annot"><span class="annottext">mps' :: Map Int DeBruijnPattern
</span><a href="#local-6989586621682148412"><span class="hs-identifier hs-var hs-var">mps'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-486"></span><span>        </span><span class="annot"><span class="annottext">[(Int, DeBruijnPattern)] -&gt; Map Int DeBruijnPattern
forall k a. Ord k =&gt; [(k, a)] -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.fromList</span></span><span> </span><span class="annot"><span class="annottext">([(Int, DeBruijnPattern)] -&gt; Map Int DeBruijnPattern)
-&gt; [(Int, DeBruijnPattern)] -&gt; Map Int DeBruijnPattern
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-487"></span><span>        </span><span class="annot"><span class="annottext">((Int, SplitPattern) -&gt; (Int, DeBruijnPattern))
-&gt; [(Int, SplitPattern)] -&gt; [(Int, DeBruijnPattern)]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(SplitPattern -&gt; DeBruijnPattern)
-&gt; (Int, SplitPattern) -&gt; (Int, DeBruijnPattern)
forall b d a. (b -&gt; d) -&gt; (a, b) -&gt; (a, d)
</span><a href="Agda.Utils.Tuple.html#mapSnd"><span class="hs-identifier hs-var">mapSnd</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Arg (Named_ DeBruijnPattern) -&gt; DeBruijnPattern
forall a. NamedArg a -&gt; a
</span><a href="Agda.Syntax.Common.html#namedArg"><span class="hs-identifier hs-var">namedArg</span></a></span><span> </span><span class="annot"><span class="annottext">(Arg (Named_ DeBruijnPattern) -&gt; DeBruijnPattern)
-&gt; (SplitPattern -&gt; Arg (Named_ DeBruijnPattern))
-&gt; SplitPattern
-&gt; DeBruijnPattern
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">NamedArg SplitPattern -&gt; Arg (Named_ DeBruijnPattern)
</span><a href="Agda.TypeChecking.Coverage.SplitPattern.html#fromSplitPattern"><span class="hs-identifier hs-var">fromSplitPattern</span></a></span><span> </span><span class="annot"><span class="annottext">(NamedArg SplitPattern -&gt; Arg (Named_ DeBruijnPattern))
-&gt; (SplitPattern -&gt; NamedArg SplitPattern)
-&gt; SplitPattern
-&gt; Arg (Named_ DeBruijnPattern)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">SplitPattern -&gt; NamedArg SplitPattern
forall a. a -&gt; NamedArg a
</span><a href="Agda.Syntax.Common.html#defaultNamedArg"><span class="hs-identifier hs-var">defaultNamedArg</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(Int, SplitPattern)]
</span><a href="#local-6989586621682148395"><span class="hs-identifier hs-var">mps</span></a></span><span>
</span><span id="line-488"></span><span>      </span><span id="local-6989586621682148398"><span class="annot"><span class="annottext">s :: PatternSubstitution
</span><a href="#local-6989586621682148398"><span class="hs-identifier hs-var hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[DeBruijnPattern] -&gt; PatternSubstitution
forall a. DeBruijn a =&gt; [a] -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#parallelS"><span class="hs-identifier hs-var">parallelS</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Int] -&gt; (Int -&gt; DeBruijnPattern) -&gt; [DeBruijnPattern]
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; (a -&gt; b) -&gt; f b
</span><a href="Agda.Utils.Functor.html#for"><span class="hs-identifier hs-var">for</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Map Int DeBruijnPattern -&gt; Maybe (Int, DeBruijnPattern)
forall k a. Map k a -&gt; Maybe (k, a)
</span><span class="hs-identifier hs-var">Map.lookupMax</span></span><span> </span><span class="annot"><span class="annottext">Map Int DeBruijnPattern
</span><a href="#local-6989586621682148412"><span class="hs-identifier hs-var">mps'</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-489"></span><span>                            </span><span class="annot"><span class="annottext">Maybe (Int, DeBruijnPattern)
</span><span class="hs-identifier hs-var">Nothing</span></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-490"></span><span>                            </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682148419"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682148419"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">DeBruijnPattern
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-glyph">..</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682148419"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((Int -&gt; DeBruijnPattern) -&gt; [DeBruijnPattern])
-&gt; (Int -&gt; DeBruijnPattern) -&gt; [DeBruijnPattern]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621682148420"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682148420"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-491"></span><span>                     </span><span class="annot"><span class="annottext">DeBruijnPattern -&gt; Maybe DeBruijnPattern -&gt; DeBruijnPattern
forall a. a -&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromMaybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; DeBruijnPattern
forall a. DeBruijn a =&gt; Int -&gt; a
</span><a href="Agda.TypeChecking.Substitute.DeBruijn.html#deBruijnVar"><span class="hs-identifier hs-var">deBruijnVar</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682148420"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Map Int DeBruijnPattern -&gt; Maybe DeBruijnPattern
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Map.lookup</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682148420"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Map Int DeBruijnPattern
</span><a href="#local-6989586621682148412"><span class="hs-identifier hs-var">mps'</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-492"></span><span>
</span><span id="line-493"></span><span>    </span><span id="local-6989586621682145895"><span class="annot"><a href="#local-6989586621682148279"><span class="hs-identifier hs-type">updateRelevance</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">TCM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682145895"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">TCM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682145895"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-494"></span><span>    </span><span id="local-6989586621682148279"><span class="annot"><span class="annottext">updateRelevance :: forall a. TCM a -&gt; TCM a
</span><a href="#local-6989586621682148279"><span class="hs-identifier hs-var hs-var">updateRelevance</span></a></span></span><span> </span><span id="local-6989586621682148428"><span class="annot"><span class="annottext">TCM a
</span><a href="#local-6989586621682148428"><span class="hs-identifier hs-var">cont</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-495"></span><span>      </span><span class="hs-comment">-- Don't do anything if there is no target type info.</span><span>
</span><span id="line-496"></span><span>      </span><span class="annot"><span class="annottext">Maybe (Dom Type) -&gt; TCM a -&gt; (Dom Type -&gt; TCM a) -&gt; TCM a
forall a b. Maybe a -&gt; b -&gt; (a -&gt; b) -&gt; b
</span><a href="Agda.Utils.Maybe.html#caseMaybe"><span class="hs-identifier hs-var">caseMaybe</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (Dom Type)
</span><a href="#local-6989586621682148278"><span class="hs-identifier hs-var">target</span></a></span><span> </span><span class="annot"><span class="annottext">TCM a
</span><a href="#local-6989586621682148428"><span class="hs-identifier hs-var">cont</span></a></span><span> </span><span class="annot"><span class="annottext">((Dom Type -&gt; TCM a) -&gt; TCM a) -&gt; (Dom Type -&gt; TCM a) -&gt; TCM a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621682148430"><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621682148430"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-497"></span><span>        </span><span class="hs-comment">-- TODO (2018-10-16): if proofs get erased in the compiler, also wake erased vars!</span><span>
</span><span id="line-498"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682148431"><span class="annot"><span class="annottext">m :: Modality
</span><a href="#local-6989586621682148431"><span class="hs-identifier hs-var hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Dom Type -&gt; Modality
forall a. LensModality a =&gt; a -&gt; Modality
</span><a href="Agda.Syntax.Common.html#getModality"><span class="hs-identifier hs-var">getModality</span></a></span><span> </span><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621682148430"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-499"></span><span>        </span><span class="annot"><span class="annottext">Modality -&gt; TCM a -&gt; TCM a
forall (tcm :: * -&gt; *) m a.
(MonadTCEnv tcm, LensModality m) =&gt;
m -&gt; tcm a -&gt; tcm a
</span><a href="Agda.TypeChecking.Monad.Modality.html#applyModalityToContext"><span class="hs-identifier hs-var">applyModalityToContext</span></a></span><span> </span><span class="annot"><span class="annottext">Modality
</span><a href="#local-6989586621682148431"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">TCM a
</span><a href="#local-6989586621682148428"><span class="hs-identifier hs-var">cont</span></a></span><span>
</span><span id="line-500"></span><span>
</span><span id="line-501"></span><span>    </span><span class="annot"><a href="#local-6989586621682148325"><span class="hs-identifier hs-type">continue</span></a></span><span>
</span><span id="line-502"></span><span>      </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.TypeChecking.Coverage.Match.html#BlockingVar"><span class="hs-identifier hs-type">BlockingVar</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-503"></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#AllowPartialCover"><span class="hs-identifier hs-type">AllowPartialCover</span></a></span><span>
</span><span id="line-504"></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#SplitError"><span class="hs-identifier hs-type">SplitError</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">TCM</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitClause.html#CoverResult"><span class="hs-identifier hs-type">CoverResult</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-505"></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">TCM</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitClause.html#CoverResult"><span class="hs-identifier hs-type">CoverResult</span></a></span><span>
</span><span id="line-506"></span><span>    </span><span id="local-6989586621682148325"><span class="annot"><span class="annottext">continue :: BlockingVars
-&gt; AllowPartialCover
-&gt; (SplitError -&gt; TCM CoverResult)
-&gt; TCM CoverResult
</span><a href="#local-6989586621682148325"><span class="hs-identifier hs-var hs-var">continue</span></a></span></span><span> </span><span id="local-6989586621682148434"><span class="annot"><span class="annottext">BlockingVars
</span><a href="#local-6989586621682148434"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span id="local-6989586621682148435"><span class="annot"><span class="annottext">AllowPartialCover
</span><a href="#local-6989586621682148435"><span class="hs-identifier hs-var">allowPartialCover</span></a></span></span><span> </span><span id="local-6989586621682148436"><span class="annot"><span class="annottext">SplitError -&gt; TCM CoverResult
</span><a href="#local-6989586621682148436"><span class="hs-identifier hs-var">handle</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-507"></span><span>      </span><span id="local-6989586621682148437"><span class="annot"><a href="#local-6989586621682148437"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(BlockingVar
 -&gt; TCMT IO (Either SplitError (Covering, BlockingVar)))
-&gt; BlockingVars
-&gt; TCMT IO (Either SplitError (Covering, BlockingVar))
forall (m :: * -&gt; *) a err b.
Monad m =&gt;
(a -&gt; m (Either err b)) -&gt; [a] -&gt; m (Either err b)
</span><a href="Agda.Utils.Monad.html#altM1"><span class="hs-identifier hs-var">altM1</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621682148439"><span class="annot"><span class="annottext">BlockingVar
</span><a href="#local-6989586621682148439"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Covering -&gt; (Covering, BlockingVar))
-&gt; Either SplitError Covering
-&gt; Either SplitError (Covering, BlockingVar)
forall a b. (a -&gt; b) -&gt; Either SplitError a -&gt; Either SplitError b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">,</span><span class="annot"><span class="annottext">BlockingVar
</span><a href="#local-6989586621682148439"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Either SplitError Covering
 -&gt; Either SplitError (Covering, BlockingVar))
-&gt; TCMT IO (Either SplitError Covering)
-&gt; TCMT IO (Either SplitError (Covering, BlockingVar))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Induction
-&gt; AllowPartialCover
-&gt; SplitClause
-&gt; BlockingVar
-&gt; TCMT IO (Either SplitError Covering)
</span><a href="Agda.TypeChecking.Coverage.html#split"><span class="hs-identifier hs-var">split</span></a></span><span> </span><span class="annot"><span class="annottext">Induction
</span><a href="Agda.Syntax.Common.Aspect.html#Inductive"><span class="hs-identifier hs-var">Inductive</span></a></span><span> </span><span class="annot"><span class="annottext">AllowPartialCover
</span><a href="#local-6989586621682148435"><span class="hs-identifier hs-var">allowPartialCover</span></a></span><span> </span><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621682148275"><span class="hs-identifier hs-var">sc</span></a></span><span> </span><span class="annot"><span class="annottext">BlockingVar
</span><a href="#local-6989586621682148439"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">BlockingVars
</span><a href="#local-6989586621682148434"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-508"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><a href="#local-6989586621682148437"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-509"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span id="local-6989586621682148442"><span class="annot"><span class="annottext">SplitError
</span><a href="#local-6989586621682148442"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SplitError -&gt; TCM CoverResult
</span><a href="#local-6989586621682148436"><span class="hs-identifier hs-var">handle</span></a></span><span> </span><span class="annot"><span class="annottext">SplitError
</span><a href="#local-6989586621682148442"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-510"></span><span>        </span><span class="hs-comment">-- If we get the empty covering, we have reached an impossible case</span><span>
</span><span id="line-511"></span><span>        </span><span class="hs-comment">-- and are done.</span><span>
</span><span id="line-512"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitClause.html#Covering"><span class="hs-identifier hs-type">Covering</span></a></span><span> </span><span id="local-6989586621682148444"><span class="annot"><span class="annottext">Arg Int
</span><a href="#local-6989586621682148444"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">BlockingVar
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-513"></span><span>         </span><span class="hs-keyword">do</span><span>
</span><span id="line-514"></span><span>          </span><span class="hs-comment">-- TODO Andrea: I guess an empty pattern is not part of the cover?</span><span>
</span><span id="line-515"></span><span>          </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682148445"><span class="annot"><span class="annottext">qs :: [a]
</span><a href="#local-6989586621682148445"><span class="hs-identifier hs-var hs-var">qs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-516"></span><span>          </span><span class="annot"><span class="annottext">CoverResult -&gt; TCM CoverResult
forall a. a -&gt; TCMT IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(CoverResult -&gt; TCM CoverResult) -&gt; CoverResult -&gt; TCM CoverResult
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SplitTree
-&gt; IntSet
-&gt; [(Telescope, NAPs)]
-&gt; [Clause]
-&gt; IntSet
-&gt; CoverResult
</span><a href="Agda.TypeChecking.Coverage.SplitClause.html#CoverResult"><span class="hs-identifier hs-var">CoverResult</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; SplitTree
forall a. Int -&gt; SplitTree' a
</span><a href="Agda.TypeChecking.Coverage.SplitTree.html#SplittingDone"><span class="hs-identifier hs-var">SplittingDone</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Telescope -&gt; Int
forall a. Sized a =&gt; a -&gt; Int
</span><a href="Agda.Utils.Size.html#size"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682148276"><span class="hs-identifier hs-var">tel</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">IntSet
forall a. Null a =&gt; a
</span><a href="Agda.Utils.Null.html#empty"><span class="hs-identifier hs-var">empty</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">[Clause]
forall a. [a]
</span><a href="#local-6989586621682148445"><span class="hs-identifier hs-var">qs</span></a></span><span> </span><span class="annot"><span class="annottext">IntSet
forall a. Null a =&gt; a
</span><a href="Agda.Utils.Null.html#empty"><span class="hs-identifier hs-var">empty</span></a></span><span>
</span><span id="line-517"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitClause.html#Covering"><span class="hs-identifier hs-type">Covering</span></a></span><span> </span><span id="local-6989586621682148446"><span class="annot"><span class="annottext">Arg Int
</span><a href="#local-6989586621682148446"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621682148447"><span class="annot"><span class="annottext">[(SplitTag, (SplitClause, IInfo))]
</span><a href="#local-6989586621682148447"><span class="hs-identifier hs-var">scs'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682148448"><span class="annot"><span class="annottext">BlockingVar
</span><a href="#local-6989586621682148448"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-518"></span><span>          </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682148449"><span class="annot"><span class="annottext">scs :: [(SplitTag, SplitClause)]
</span><a href="#local-6989586621682148449"><span class="hs-identifier hs-var hs-var hs-var">scs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((SplitTag, (SplitClause, IInfo)) -&gt; (SplitTag, SplitClause))
-&gt; [(SplitTag, (SplitClause, IInfo))] -&gt; [(SplitTag, SplitClause)]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621682148450"><span class="annot"><span class="annottext">SplitTag
</span><a href="#local-6989586621682148450"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">,</span><span class="hs-special">(</span><span id="local-6989586621682148451"><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621682148451"><span class="hs-identifier hs-var">sc</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621682148452"><span class="annot"><span class="annottext">IInfo
</span><a href="#local-6989586621682148452"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SplitTag
</span><a href="#local-6989586621682148450"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621682148451"><span class="hs-identifier hs-var">sc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(SplitTag, (SplitClause, IInfo))]
</span><a href="#local-6989586621682148447"><span class="hs-identifier hs-var">scs'</span></a></span><span>
</span><span id="line-519"></span><span>
</span><span id="line-520"></span><span>          </span><span class="hs-special">(</span><span id="local-6989586621682148453"><span class="annot"><a href="#local-6989586621682148453"><span class="hs-identifier hs-var">results_trX</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682148454"><span class="annot"><a href="#local-6989586621682148454"><span class="hs-identifier hs-var">cs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">QName
-&gt; Arg Int
-&gt; BlockingVar
-&gt; SplitClause
-&gt; [(SplitTag, (SplitClause, IInfo))]
-&gt; [Clause]
-&gt; TCM ([(SplitTag, CoverResult)], [Clause])
</span><a href="Agda.TypeChecking.Coverage.Cubical.html#createMissingIndexedClauses"><span class="hs-identifier hs-var">createMissingIndexedClauses</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621682148273"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Arg Int
</span><a href="#local-6989586621682148446"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">BlockingVar
</span><a href="#local-6989586621682148448"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621682148275"><span class="hs-identifier hs-var">sc</span></a></span><span> </span><span class="annot"><span class="annottext">[(SplitTag, (SplitClause, IInfo))]
</span><a href="#local-6989586621682148447"><span class="hs-identifier hs-var">scs'</span></a></span><span> </span><span class="annot"><span class="annottext">[Clause]
</span><a href="#local-6989586621682148274"><span class="hs-identifier hs-var">cs</span></a></span><span>
</span><span id="line-521"></span><span>          </span><span class="hs-special">(</span><span id="local-6989586621682148456"><span class="annot"><a href="#local-6989586621682148456"><span class="hs-identifier hs-var">scs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682148457"><span class="annot"><a href="#local-6989586621682148457"><span class="hs-identifier hs-var">cs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682148458"><span class="annot"><a href="#local-6989586621682148458"><span class="hs-identifier hs-var">results_hc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-522"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682148459"><span class="annot"><a href="#local-6989586621682148459"><span class="hs-identifier hs-var hs-var">fallback</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">([(SplitTag, SplitClause)], [Clause], [(SplitTag, CoverResult)])
-&gt; TCMT
     IO ([(SplitTag, SplitClause)], [Clause], [(SplitTag, CoverResult)])
forall a. a -&gt; TCMT IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(SplitTag, SplitClause)]
</span><a href="#local-6989586621682148449"><span class="hs-identifier hs-var">scs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Clause]
</span><a href="#local-6989586621682148454"><span class="hs-identifier hs-var">cs</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-523"></span><span>            </span><span class="annot"><a href="Agda.Utils.Maybe.html#caseMaybeM"><span class="hs-identifier hs-type">caseMaybeM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Monad.Builtin.html#getPrimitiveName%27"><span class="hs-identifier hs-type">getPrimitiveName'</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Builtin.html#builtinHComp"><span class="hs-identifier hs-type">builtinHComp</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621682148459"><span class="hs-identifier hs-type">fallback</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621682148463"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621682148463"><span class="hs-identifier hs-var">comp</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-524"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682148464"><span class="annot"><span class="annottext">isComp :: SplitTag -&gt; Bool
</span><a href="#local-6989586621682148464"><span class="hs-identifier hs-var hs-var">isComp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-525"></span><span>                  </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitTree.html#SplitCon"><span class="hs-identifier hs-type">SplitCon</span></a></span><span> </span><span id="local-6989586621682148466"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621682148466"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621682148463"><span class="hs-identifier hs-var">comp</span></a></span><span> </span><span class="annot"><span class="annottext">QName -&gt; QName -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621682148466"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-526"></span><span>                  </span><span class="annot"><span class="annottext">SplitTag
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-527"></span><span>            </span><span class="annot"><span class="annottext">Maybe (SplitTag, SplitClause)
-&gt; TCMT
     IO ([(SplitTag, SplitClause)], [Clause], [(SplitTag, CoverResult)])
-&gt; ((SplitTag, SplitClause)
    -&gt; TCMT
         IO
         ([(SplitTag, SplitClause)], [Clause], [(SplitTag, CoverResult)]))
-&gt; TCMT
     IO ([(SplitTag, SplitClause)], [Clause], [(SplitTag, CoverResult)])
forall a b. Maybe a -&gt; b -&gt; (a -&gt; b) -&gt; b
</span><a href="Agda.Utils.Maybe.html#caseMaybe"><span class="hs-identifier hs-var">caseMaybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">((SplitTag, SplitClause) -&gt; Bool)
-&gt; [(SplitTag, SplitClause)] -&gt; Maybe (SplitTag, SplitClause)
forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Maybe a
</span><span class="hs-identifier hs-var">List.find</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SplitTag -&gt; Bool
</span><a href="#local-6989586621682148464"><span class="hs-identifier hs-var">isComp</span></a></span><span> </span><span class="annot"><span class="annottext">(SplitTag -&gt; Bool)
-&gt; ((SplitTag, SplitClause) -&gt; SplitTag)
-&gt; (SplitTag, SplitClause)
-&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(SplitTag, SplitClause) -&gt; SplitTag
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(SplitTag, SplitClause)]
</span><a href="#local-6989586621682148449"><span class="hs-identifier hs-var">scs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TCMT
  IO ([(SplitTag, SplitClause)], [Clause], [(SplitTag, CoverResult)])
</span><a href="#local-6989586621682148459"><span class="hs-identifier hs-var">fallback</span></a></span><span> </span><span class="annot"><span class="annottext">(((SplitTag, SplitClause)
  -&gt; TCMT
       IO
       ([(SplitTag, SplitClause)], [Clause], [(SplitTag, CoverResult)]))
 -&gt; TCMT
      IO
      ([(SplitTag, SplitClause)], [Clause], [(SplitTag, CoverResult)]))
-&gt; ((SplitTag, SplitClause)
    -&gt; TCMT
         IO
         ([(SplitTag, SplitClause)], [Clause], [(SplitTag, CoverResult)]))
-&gt; TCMT
     IO ([(SplitTag, SplitClause)], [Clause], [(SplitTag, CoverResult)])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682148469"><span class="annot"><span class="annottext">SplitTag
</span><a href="#local-6989586621682148469"><span class="hs-identifier hs-var">sp</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682148470"><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621682148470"><span class="hs-identifier hs-var">newSc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-528"></span><span>            </span><span class="hs-special">(</span><span id="local-6989586621682148471"><span class="annot"><a href="#local-6989586621682148471"><span class="hs-identifier hs-var">res</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621682148472"><span class="annot"><a href="#local-6989586621682148472"><span class="hs-identifier hs-var">cs'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">QName
-&gt; Arg Int
-&gt; BlockingVar
-&gt; SplitClause
-&gt; SplitClause
-&gt; [Clause]
-&gt; TCM ([(SplitTag, CoverResult)], [Clause])
</span><a href="Agda.TypeChecking.Coverage.Cubical.html#createMissingHCompClause"><span class="hs-identifier hs-var">createMissingHCompClause</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621682148273"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Arg Int
</span><a href="#local-6989586621682148446"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">BlockingVar
</span><a href="#local-6989586621682148448"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621682148275"><span class="hs-identifier hs-var">sc</span></a></span><span> </span><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621682148470"><span class="hs-identifier hs-var">newSc</span></a></span><span> </span><span class="annot"><span class="annottext">[Clause]
</span><a href="#local-6989586621682148454"><span class="hs-identifier hs-var">cs</span></a></span><span>
</span><span id="line-529"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682148474"><span class="annot"><a href="#local-6989586621682148474"><span class="hs-identifier hs-var hs-var">scs2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((SplitTag, SplitClause) -&gt; Bool)
-&gt; [(SplitTag, SplitClause)] -&gt; [(SplitTag, SplitClause)]
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">filter</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; Bool)
-&gt; ((SplitTag, SplitClause) -&gt; Bool)
-&gt; (SplitTag, SplitClause)
-&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">SplitTag -&gt; Bool
</span><a href="#local-6989586621682148464"><span class="hs-identifier hs-var">isComp</span></a></span><span> </span><span class="annot"><span class="annottext">(SplitTag -&gt; Bool)
-&gt; ((SplitTag, SplitClause) -&gt; SplitTag)
-&gt; (SplitTag, SplitClause)
-&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(SplitTag, SplitClause) -&gt; SplitTag
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(SplitTag, SplitClause)]
</span><a href="#local-6989586621682148449"><span class="hs-identifier hs-var">scs</span></a></span><span>
</span><span id="line-530"></span><span>            </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682148474"><span class="hs-identifier hs-type">scs2</span></a></span><span class="hs-special">,</span><span class="annot"><a href="#local-6989586621682148472"><span class="hs-identifier hs-type">cs'</span></a></span><span class="hs-special">,</span><span class="annot"><a href="#local-6989586621682148471"><span class="hs-identifier hs-type">res</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-531"></span><span>
</span><span id="line-532"></span><span>          </span><span id="local-6989586621682148475"><span class="annot"><a href="#local-6989586621682148475"><span class="hs-identifier hs-var">results</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="hs-identifier hs-type">mapM</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#cover"><span class="hs-identifier hs-type">cover</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148272"><span class="hs-identifier hs-type">infermissing</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148273"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148457"><span class="hs-identifier hs-type">cs</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">.</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">snd</span></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621682148456"><span class="hs-identifier hs-type">scs</span></a></span><span>
</span><span id="line-533"></span><span>          </span><span class="hs-keyword">let</span><span>
</span><span id="line-534"></span><span>            </span><span id="local-6989586621682148476"><span class="annot"><a href="#local-6989586621682148476"><span class="hs-identifier hs-var hs-var">results_extra</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(SplitTag, CoverResult)]
</span><a href="#local-6989586621682148458"><span class="hs-identifier hs-var">results_hc</span></a></span><span> </span><span class="annot"><span class="annottext">[(SplitTag, CoverResult)]
-&gt; [(SplitTag, CoverResult)] -&gt; [(SplitTag, CoverResult)]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[(SplitTag, CoverResult)]
</span><a href="#local-6989586621682148453"><span class="hs-identifier hs-var">results_trX</span></a></span><span>
</span><span id="line-535"></span><span>            </span><span id="local-6989586621682148477"><span class="annot"><a href="#local-6989586621682148477"><span class="hs-identifier hs-var hs-var">trees_extra</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((SplitTag, CoverResult) -&gt; (SplitTag, SplitTree))
-&gt; [(SplitTag, CoverResult)] -&gt; [(SplitTag, SplitTree)]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(CoverResult -&gt; SplitTree)
-&gt; (SplitTag, CoverResult) -&gt; (SplitTag, SplitTree)
forall b d a. (b -&gt; d) -&gt; (a, b) -&gt; (a, d)
forall (p :: * -&gt; * -&gt; *) b c a.
Bifunctor p =&gt;
(b -&gt; c) -&gt; p a b -&gt; p a c
</span><span class="hs-identifier hs-var">second</span></span><span> </span><span class="annot"><span class="annottext">CoverResult -&gt; SplitTree
</span><a href="Agda.TypeChecking.Coverage.SplitClause.html#coverSplitTree"><span class="hs-identifier hs-var">coverSplitTree</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(SplitTag, CoverResult)]
</span><a href="#local-6989586621682148476"><span class="hs-identifier hs-var">results_extra</span></a></span><span>
</span><span id="line-536"></span><span>            </span><span id="local-6989586621682148478"><span class="annot"><a href="#local-6989586621682148478"><span class="hs-identifier hs-var hs-var">results'</span></a></span></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[CoverResult]
</span><a href="#local-6989586621682148475"><span class="hs-identifier hs-var">results</span></a></span><span> </span><span class="annot"><span class="annottext">[CoverResult] -&gt; [CoverResult] -&gt; [CoverResult]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">((SplitTag, CoverResult) -&gt; CoverResult)
-&gt; [(SplitTag, CoverResult)] -&gt; [CoverResult]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">(SplitTag, CoverResult) -&gt; CoverResult
forall a b. (a, b) -&gt; b
</span><span class="hs-identifier hs-var">snd</span></span><span> </span><span class="annot"><span class="annottext">[(SplitTag, CoverResult)]
</span><a href="#local-6989586621682148476"><span class="hs-identifier hs-var">results_extra</span></a></span><span>
</span><span id="line-537"></span><span>            </span><span class="hs-comment">-- Andreas, 2025-10-12: add trees_extra later because they would get lost</span><span>
</span><span id="line-538"></span><span>            </span><span class="hs-comment">-- by the zipWith that constructs trees' below.</span><span>
</span><span id="line-539"></span><span>            </span><span id="local-6989586621682148479"><span class="annot"><a href="#local-6989586621682148479"><span class="hs-identifier hs-var hs-var">trees</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(CoverResult -&gt; SplitTree) -&gt; [CoverResult] -&gt; [SplitTree]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">CoverResult -&gt; SplitTree
</span><a href="Agda.TypeChecking.Coverage.SplitClause.html#coverSplitTree"><span class="hs-identifier hs-var">coverSplitTree</span></a></span><span>      </span><span class="annot"><span class="annottext">[CoverResult]
</span><a href="#local-6989586621682148475"><span class="hs-identifier hs-var">results</span></a></span><span>   </span><span class="hs-comment">-- missing ' is not a typo</span><span>
</span><span id="line-540"></span><span>            </span><span id="local-6989586621682148480"><span class="annot"><a href="#local-6989586621682148480"><span class="hs-identifier hs-var hs-var">useds</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(CoverResult -&gt; IntSet) -&gt; [CoverResult] -&gt; [IntSet]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">CoverResult -&gt; IntSet
</span><a href="Agda.TypeChecking.Coverage.SplitClause.html#coverUsedClauses"><span class="hs-identifier hs-var">coverUsedClauses</span></a></span><span>    </span><span class="annot"><span class="annottext">[CoverResult]
</span><a href="#local-6989586621682148478"><span class="hs-identifier hs-var">results'</span></a></span><span>
</span><span id="line-541"></span><span>            </span><span id="local-6989586621682148481"><span class="annot"><a href="#local-6989586621682148481"><span class="hs-identifier hs-var hs-var">psss</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(CoverResult -&gt; [(Telescope, NAPs)])
-&gt; [CoverResult] -&gt; [[(Telescope, NAPs)]]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">CoverResult -&gt; [(Telescope, NAPs)]
</span><a href="Agda.TypeChecking.Coverage.SplitClause.html#coverMissingClauses"><span class="hs-identifier hs-var">coverMissingClauses</span></a></span><span> </span><span class="annot"><span class="annottext">[CoverResult]
</span><a href="#local-6989586621682148478"><span class="hs-identifier hs-var">results'</span></a></span><span>
</span><span id="line-542"></span><span>            </span><span id="local-6989586621682148482"><span class="annot"><a href="#local-6989586621682148482"><span class="hs-identifier hs-var hs-var">qsss</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(CoverResult -&gt; [Clause]) -&gt; [CoverResult] -&gt; [[Clause]]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">CoverResult -&gt; [Clause]
</span><a href="Agda.TypeChecking.Coverage.SplitClause.html#coverPatterns"><span class="hs-identifier hs-var">coverPatterns</span></a></span><span>       </span><span class="annot"><span class="annottext">[CoverResult]
</span><a href="#local-6989586621682148478"><span class="hs-identifier hs-var">results'</span></a></span><span>
</span><span id="line-543"></span><span>            </span><span id="local-6989586621682148483"><span class="annot"><a href="#local-6989586621682148483"><span class="hs-identifier hs-var hs-var">noex</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(CoverResult -&gt; IntSet) -&gt; [CoverResult] -&gt; [IntSet]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">CoverResult -&gt; IntSet
</span><a href="Agda.TypeChecking.Coverage.SplitClause.html#coverNoExactClauses"><span class="hs-identifier hs-var">coverNoExactClauses</span></a></span><span> </span><span class="annot"><span class="annottext">[CoverResult]
</span><a href="#local-6989586621682148478"><span class="hs-identifier hs-var">results'</span></a></span><span>
</span><span id="line-544"></span><span>          </span><span class="hs-comment">-- Jesper, 2016-03-10  We need to remember which variables were</span><span>
</span><span id="line-545"></span><span>          </span><span class="hs-comment">-- eta-expanded by the unifier in order to generate a correct split</span><span>
</span><span id="line-546"></span><span>          </span><span class="hs-comment">-- tree (see Issue 1872).</span><span>
</span><span id="line-547"></span><span>          </span><span class="annot"><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-type">reportSDoc</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;tc.cover.split.eta&quot;</span></span><span> </span><span class="annot"><span class="hs-number">60</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#vcat"><span class="hs-identifier hs-type">vcat</span></a></span><span>
</span><span id="line-548"></span><span>            </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="hs-string">&quot;etaRecordSplits&quot;</span></span><span>
</span><span id="line-549"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#nest"><span class="hs-identifier hs-type">nest</span></a></span><span> </span><span class="annot"><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#vcat"><span class="hs-identifier hs-type">vcat</span></a></span><span>
</span><span id="line-550"></span><span>              </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="hs-string">&quot;n   = &quot;</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-type">&lt;+&gt;</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">show</span></span><span> </span><span class="annot"><a href="#local-6989586621682148446"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-551"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-string">&quot;scs = &quot;</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-type">&lt;+&gt;</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-type">prettyTCM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148456"><span class="hs-identifier hs-type">scs</span></a></span><span>
</span><span id="line-552"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-string">&quot;ps  = &quot;</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-type">&lt;+&gt;</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#prettyTCMPatternList"><span class="hs-identifier hs-type">prettyTCMPatternList</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitPattern.html#fromSplitPatterns"><span class="hs-identifier hs-type">fromSplitPatterns</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148277"><span class="hs-identifier hs-type">ps</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-553"></span><span>              </span><span class="hs-special">]</span><span>
</span><span id="line-554"></span><span>            </span><span class="hs-special">]</span><span>
</span><span id="line-555"></span><span>          </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682148484"><span class="annot"><a href="#local-6989586621682148484"><span class="hs-identifier hs-var hs-var">trees'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(SplitTree -&gt; (SplitTag, SplitClause) -&gt; (SplitTag, SplitTree))
-&gt; [SplitTree]
-&gt; [(SplitTag, SplitClause)]
-&gt; [(SplitTag, SplitTree)]
forall a b c. (a -&gt; b -&gt; c) -&gt; [a] -&gt; [b] -&gt; [c]
</span><span class="hs-identifier hs-var">zipWith</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(SplitClause -&gt; SplitTree)
-&gt; (SplitTag, SplitClause) -&gt; (SplitTag, SplitTree)
forall b d a. (b -&gt; d) -&gt; (a, b) -&gt; (a, d)
forall (p :: * -&gt; * -&gt; *) b c a.
Bifunctor p =&gt;
(b -&gt; c) -&gt; p a b -&gt; p a c
</span><span class="hs-identifier hs-var">second</span></span><span> </span><span class="annot"><span class="annottext">((SplitClause -&gt; SplitTree)
 -&gt; (SplitTag, SplitClause) -&gt; (SplitTag, SplitTree))
-&gt; (SplitTree -&gt; SplitClause -&gt; SplitTree)
-&gt; SplitTree
-&gt; (SplitTag, SplitClause)
-&gt; (SplitTag, SplitTree)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Int
-&gt; [NamedArg SplitPattern] -&gt; SplitTree -&gt; SplitClause -&gt; SplitTree
</span><a href="#local-6989586621682148485"><span class="hs-identifier hs-var">etaRecordSplits</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Arg Int -&gt; Int
forall e. Arg e -&gt; e
</span><a href="Agda.Syntax.Common.html#unArg"><span class="hs-identifier hs-var">unArg</span></a></span><span> </span><span class="annot"><span class="annottext">Arg Int
</span><a href="#local-6989586621682148446"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621682148277"><span class="hs-identifier hs-var">ps</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[SplitTree]
</span><a href="#local-6989586621682148479"><span class="hs-identifier hs-var">trees</span></a></span><span> </span><span class="annot"><span class="annottext">[(SplitTag, SplitClause)]
</span><a href="#local-6989586621682148456"><span class="hs-identifier hs-var">scs</span></a></span><span>
</span><span id="line-556"></span><span>              </span><span id="local-6989586621682148486"><span class="annot"><a href="#local-6989586621682148486"><span class="hs-identifier hs-var hs-var">tree</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Arg Int -&gt; LazySplit -&gt; [(SplitTag, SplitTree)] -&gt; SplitTree
forall a. Arg Int -&gt; LazySplit -&gt; SplitTrees' a -&gt; SplitTree' a
</span><a href="Agda.TypeChecking.Coverage.SplitTree.html#SplitAt"><span class="hs-identifier hs-var">SplitAt</span></a></span><span> </span><span class="annot"><span class="annottext">Arg Int
</span><a href="#local-6989586621682148446"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">LazySplit
</span><a href="Agda.TypeChecking.Coverage.SplitTree.html#StrictSplit"><span class="hs-identifier hs-var">StrictSplit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(SplitTag, SplitTree)]
</span><a href="#local-6989586621682148484"><span class="hs-identifier hs-var">trees'</span></a></span><span> </span><span class="annot"><span class="annottext">[(SplitTag, SplitTree)]
-&gt; [(SplitTag, SplitTree)] -&gt; [(SplitTag, SplitTree)]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[(SplitTag, SplitTree)]
</span><a href="#local-6989586621682148477"><span class="hs-identifier hs-var">trees_extra</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- TODO: Lazy?</span><span>
</span><span id="line-557"></span><span>          </span><span class="hs-comment">-- Andreas, 2025-10-12: Debug printing to clarify the trees_extra situation.</span><span>
</span><span id="line-558"></span><span>          </span><span class="annot"><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-type">reportSDoc</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;tc.cover.cubical&quot;</span></span><span> </span><span class="annot"><span class="hs-number">30</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#vcat"><span class="hs-identifier hs-type">vcat</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span>
</span><span id="line-559"></span><span>            </span><span class="annot"><span class="hs-string">&quot;trees:&quot;</span></span><span>           </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">map</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#pretty"><span class="hs-identifier hs-type">pretty</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148479"><span class="hs-identifier hs-type">trees</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">++</span></span><span>
</span><span id="line-560"></span><span>            </span><span class="annot"><span class="hs-string">&quot;trees':&quot;</span></span><span>          </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">map</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#pretty"><span class="hs-identifier hs-type">pretty</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148484"><span class="hs-identifier hs-type">trees'</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">++</span></span><span>
</span><span id="line-561"></span><span>            </span><span class="annot"><span class="hs-string">&quot;trees_extra:&quot;</span></span><span>     </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">map</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#pretty"><span class="hs-identifier hs-type">pretty</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148477"><span class="hs-identifier hs-type">trees_extra</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">++</span></span><span>
</span><span id="line-562"></span><span>            </span><span class="annot"><span class="hs-string">&quot;coverSplitTree:&quot;</span></span><span>  </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#pretty"><span class="hs-identifier hs-type">pretty</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148486"><span class="hs-identifier hs-type">tree</span></a></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span>
</span><span id="line-563"></span><span>            </span><span class="annot"><span class="hs-string">&quot;coverPatterns:&quot;</span></span><span>   </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">map</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-type">prettyTCM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">concat</span></span><span> </span><span class="annot"><a href="#local-6989586621682148482"><span class="hs-identifier hs-type">qsss</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-564"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitClause.html#CoverResult"><span class="hs-identifier hs-type">CoverResult</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148486"><span class="hs-identifier hs-type">tree</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">IntSet.unions</span></span><span> </span><span class="annot"><a href="#local-6989586621682148480"><span class="hs-identifier hs-type">useds</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">concat</span></span><span> </span><span class="annot"><a href="#local-6989586621682148481"><span class="hs-identifier hs-type">psss</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">concat</span></span><span> </span><span class="annot"><a href="#local-6989586621682148482"><span class="hs-identifier hs-type">qsss</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">IntSet.unions</span></span><span> </span><span class="annot"><a href="#local-6989586621682148483"><span class="hs-identifier hs-type">noex</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-565"></span><span>
</span><span id="line-566"></span><span>    </span><span class="hs-comment">-- Try to split result</span><span>
</span><span id="line-567"></span><span>    </span><span class="annot"><a href="#local-6989586621682148321"><span class="hs-identifier hs-type">trySplitRes</span></a></span><span>
</span><span id="line-568"></span><span>      </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.Match.html#BlockedOnResult"><span class="hs-identifier hs-type">BlockedOnResult</span></a></span><span>                  </span><span class="hs-comment">-- Are we blocked on the result?</span><span>
</span><span id="line-569"></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>                             </span><span class="hs-comment">-- Is this the last thing we try?</span><span>
</span><span id="line-570"></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#SplitError"><span class="hs-identifier hs-type">SplitError</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">TCM</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitClause.html#CoverResult"><span class="hs-identifier hs-type">CoverResult</span></a></span><span class="hs-special">)</span><span>  </span><span class="hs-comment">-- Handler for 'SplitError'</span><span>
</span><span id="line-571"></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">TCM</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitClause.html#CoverResult"><span class="hs-identifier hs-type">CoverResult</span></a></span><span>                  </span><span class="hs-comment">-- Continuation</span><span>
</span><span id="line-572"></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">TCM</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitClause.html#CoverResult"><span class="hs-identifier hs-type">CoverResult</span></a></span><span>
</span><span id="line-573"></span><span>    </span><span class="hs-comment">-- not blocked on result: try regular splits</span><span>
</span><span id="line-574"></span><span>    </span><span id="local-6989586621682148321"><span class="annot"><span class="annottext">trySplitRes :: BlockedOnResult
-&gt; Bool
-&gt; (SplitError -&gt; TCM CoverResult)
-&gt; TCM CoverResult
-&gt; TCM CoverResult
</span><a href="#local-6989586621682148321"><span class="hs-identifier hs-var hs-var">trySplitRes</span></a></span></span><span> </span><span class="annot"><span class="annottext">BlockedOnResult
</span><a href="Agda.TypeChecking.Coverage.Match.html#NotBlockedOnResult"><span class="hs-identifier hs-var">NotBlockedOnResult</span></a></span><span> </span><span id="local-6989586621682148492"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682148492"><span class="hs-identifier hs-var">finalSplit</span></a></span></span><span> </span><span id="local-6989586621682148493"><span class="annot"><span class="annottext">SplitError -&gt; TCM CoverResult
</span><a href="#local-6989586621682148493"><span class="hs-identifier hs-var">splitError</span></a></span></span><span> </span><span id="local-6989586621682148494"><span class="annot"><span class="annottext">TCM CoverResult
</span><a href="#local-6989586621682148494"><span class="hs-identifier hs-var">cont</span></a></span></span><span>
</span><span id="line-575"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682148492"><span class="hs-identifier hs-var">finalSplit</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TCM CoverResult
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span> </span><span class="hs-comment">-- there must be *some* reason we are blocked</span><span>
</span><span id="line-576"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TCM CoverResult
</span><a href="#local-6989586621682148494"><span class="hs-identifier hs-var">cont</span></a></span><span>
</span><span id="line-577"></span><span>    </span><span class="hs-comment">-- blocked on arguments that are not yet introduced:</span><span>
</span><span id="line-578"></span><span>
</span><span id="line-579"></span><span>    </span><span class="hs-comment">-- we must split on a variable so that the target type becomes a pi type</span><span>
</span><span id="line-580"></span><span>    </span><span class="annot"><a href="#local-6989586621682148321"><span class="hs-identifier hs-var">trySplitRes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Coverage.Match.html#BlockedOnApply"><span class="hs-identifier hs-type">BlockedOnApply</span></a></span><span> </span><span class="annot"><span class="annottext">ApplyOrIApply
</span><a href="Agda.TypeChecking.Coverage.Match.html#IsApply"><span class="hs-identifier hs-var">IsApply</span></a></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682148497"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682148497"><span class="hs-identifier hs-var">finalSplit</span></a></span></span><span> </span><span id="local-6989586621682148498"><span class="annot"><span class="annottext">SplitError -&gt; TCM CoverResult
</span><a href="#local-6989586621682148498"><span class="hs-identifier hs-var">splitError</span></a></span></span><span> </span><span id="local-6989586621682148499"><span class="annot"><span class="annottext">TCM CoverResult
</span><a href="#local-6989586621682148499"><span class="hs-identifier hs-var">cont</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-581"></span><span>      </span><span class="hs-comment">-- Andreas, 2021-12-31, issue #5712.</span><span>
</span><span id="line-582"></span><span>      </span><span class="hs-comment">-- If there is a tactic to solve the clause, we might not have inserted</span><span>
</span><span id="line-583"></span><span>      </span><span class="hs-comment">-- trailing args (due to #5358).  Now we force it!</span><span>
</span><span id="line-584"></span><span>      </span><span class="hs-special">(</span><span id="local-6989586621682148500"><span class="annot"><a href="#local-6989586621682148500"><span class="hs-identifier hs-var">tel</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682148501"><span class="annot"><a href="#local-6989586621682148501"><span class="hs-identifier hs-var">sc'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SplitClause -&gt; TCM (Telescope, SplitClause)
</span><a href="Agda.TypeChecking.Coverage.html#insertTrailingArgs"><span class="hs-identifier hs-var">insertTrailingArgs</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621682148275"><span class="hs-identifier hs-var">sc</span></a></span><span>
</span><span id="line-585"></span><span>      </span><span class="hs-keyword">if</span><span> </span><span class="annot"><a href="Agda.Utils.Null.html#null"><span class="hs-identifier hs-type">null</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148500"><span class="hs-identifier hs-type">tel</span></a></span><span> </span><span class="hs-keyword">then</span><span>
</span><span id="line-586"></span><span>        </span><span class="hs-keyword">if</span><span> </span><span class="annot"><a href="#local-6989586621682148497"><span class="hs-identifier hs-type">finalSplit</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-type">__IMPOSSIBLE__</span></a></span><span> </span><span class="hs-comment">-- already ruled out by lhs checker</span><span>
</span><span id="line-587"></span><span>        </span><span class="hs-keyword">else</span><span> </span><span class="annot"><a href="#local-6989586621682148499"><span class="hs-identifier hs-type">cont</span></a></span><span>
</span><span id="line-588"></span><span>      </span><span class="hs-keyword">else</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#cover"><span class="hs-identifier hs-type">cover</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148272"><span class="hs-identifier hs-type">infermissing</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148273"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148274"><span class="hs-identifier hs-type">cs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148501"><span class="hs-identifier hs-type">sc'</span></a></span><span>
</span><span id="line-589"></span><span>
</span><span id="line-590"></span><span>    </span><span class="hs-comment">-- ...or it was an IApply pattern, so we might just need to introduce the variable now.</span><span>
</span><span id="line-591"></span><span>    </span><span class="annot"><a href="#local-6989586621682148321"><span class="hs-identifier hs-var">trySplitRes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Coverage.Match.html#BlockedOnApply"><span class="hs-identifier hs-type">BlockedOnApply</span></a></span><span> </span><span class="annot"><span class="annottext">ApplyOrIApply
</span><a href="Agda.TypeChecking.Coverage.Match.html#IsIApply"><span class="hs-identifier hs-var">IsIApply</span></a></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682148503"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682148503"><span class="hs-identifier hs-var">finalSplit</span></a></span></span><span> </span><span id="local-6989586621682148504"><span class="annot"><span class="annottext">SplitError -&gt; TCM CoverResult
</span><a href="#local-6989586621682148504"><span class="hs-identifier hs-var">splitError</span></a></span></span><span> </span><span id="local-6989586621682148505"><span class="annot"><span class="annottext">TCM CoverResult
</span><a href="#local-6989586621682148505"><span class="hs-identifier hs-var">cont</span></a></span></span><span>
</span><span id="line-592"></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-593"></span><span>         </span><span class="annot"><span class="annottext">TCMT IO (Maybe SplitClause)
-&gt; TCM CoverResult
-&gt; (SplitClause -&gt; TCM CoverResult)
-&gt; TCM CoverResult
forall (m :: * -&gt; *) a b.
Monad m =&gt;
m (Maybe a) -&gt; m b -&gt; (a -&gt; m b) -&gt; m b
</span><a href="Agda.Utils.Maybe.html#caseMaybeM"><span class="hs-identifier hs-var">caseMaybeM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">QName -&gt; SplitClause -&gt; TCMT IO (Maybe SplitClause)
</span><a href="Agda.TypeChecking.Coverage.html#splitResultPath"><span class="hs-identifier hs-var">splitResultPath</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621682148273"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621682148275"><span class="hs-identifier hs-var">sc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TCM CoverResult
</span><a href="#local-6989586621682148507"><span class="hs-identifier hs-var">fallback</span></a></span><span> </span><span class="annot"><span class="annottext">((SplitClause -&gt; TCM CoverResult) -&gt; TCM CoverResult)
-&gt; (SplitClause -&gt; TCM CoverResult) -&gt; TCM CoverResult
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">InferMissing -&gt; QName -&gt; [Clause] -&gt; SplitClause -&gt; TCM CoverResult
</span><a href="Agda.TypeChecking.Coverage.html#cover"><span class="hs-identifier hs-var">cover</span></a></span><span> </span><span class="annot"><span class="annottext">InferMissing
</span><a href="#local-6989586621682148272"><span class="hs-identifier hs-var">infermissing</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621682148273"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">[Clause]
</span><a href="#local-6989586621682148274"><span class="hs-identifier hs-var">cs</span></a></span><span> </span><span class="annot"><span class="annottext">(SplitClause -&gt; TCM CoverResult)
-&gt; ((Telescope, SplitClause) -&gt; SplitClause)
-&gt; (Telescope, SplitClause)
-&gt; TCM CoverResult
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Telescope, SplitClause) -&gt; SplitClause
forall a b. (a, b) -&gt; b
</span><span class="hs-identifier hs-var">snd</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((Telescope, SplitClause) -&gt; TCM CoverResult)
-&gt; (SplitClause -&gt; TCM (Telescope, SplitClause))
-&gt; SplitClause
-&gt; TCM CoverResult
forall (m :: * -&gt; *) b c a.
Monad m =&gt;
(b -&gt; m c) -&gt; (a -&gt; m b) -&gt; a -&gt; m c
</span><span class="hs-operator hs-var">&lt;=&lt;</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SplitClause -&gt; TCM (Telescope, SplitClause)
</span><a href="Agda.TypeChecking.Coverage.html#insertTrailingArgs"><span class="hs-identifier hs-var">insertTrailingArgs</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-594"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-595"></span><span>        </span><span id="local-6989586621682148507"><span class="annot"><span class="annottext">fallback :: TCM CoverResult
</span><a href="#local-6989586621682148507"><span class="hs-identifier hs-var hs-var">fallback</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682148503"><span class="hs-identifier hs-var">finalSplit</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TCM CoverResult
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span> </span><span class="hs-comment">-- already ruled out by lhs checker?</span><span>
</span><span id="line-596"></span><span>                 </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TCM CoverResult
</span><a href="#local-6989586621682148505"><span class="hs-identifier hs-var">cont</span></a></span><span>
</span><span id="line-597"></span><span>
</span><span id="line-598"></span><span>    </span><span class="hs-comment">-- Andreas, 2025-10-25, issue #8139</span><span>
</span><span id="line-599"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-600"></span><span>    </span><span class="hs-comment">-- - This was the old logic:</span><span>
</span><span id="line-601"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-602"></span><span>    </span><span class="hs-comment">-- -- blocked on result but there are catchalls:</span><span>
</span><span id="line-603"></span><span>    </span><span class="hs-comment">-- -- try regular splits if there are any, or else throw an error,</span><span>
</span><span id="line-604"></span><span>    </span><span class="hs-comment">-- -- this is nicer than continuing and reporting unreachable clauses</span><span>
</span><span id="line-605"></span><span>    </span><span class="hs-comment">-- -- (see issue #2833)</span><span>
</span><span id="line-606"></span><span>    </span><span class="hs-comment">-- trySplitRes (BlockedOnProj True) finalSplit splitError cont</span><span>
</span><span id="line-607"></span><span>    </span><span class="hs-comment">--   | finalSplit = splitError CosplitCatchall</span><span>
</span><span id="line-608"></span><span>    </span><span class="hs-comment">--   | otherwise  = cont</span><span>
</span><span id="line-609"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-610"></span><span>    </span><span class="hs-comment">-- - The new logic allows copattern catchalls for the sake of further splitting</span><span>
</span><span id="line-611"></span><span>    </span><span class="hs-comment">--   but they are reported as unreachable.</span><span>
</span><span id="line-612"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-613"></span><span>    </span><span class="hs-comment">-- blocked on result but there are catchalls:</span><span>
</span><span id="line-614"></span><span>    </span><span class="hs-comment">-- try regular splits if there are any</span><span>
</span><span id="line-615"></span><span>    </span><span class="annot"><a href="#local-6989586621682148321"><span class="hs-identifier hs-var">trySplitRes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Coverage.Match.html#BlockedOnProj"><span class="hs-identifier hs-type">BlockedOnProj</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span id="local-6989586621682148510"><span class="annot"><span class="annottext">SplitError -&gt; TCM CoverResult
</span><a href="#local-6989586621682148510"><span class="hs-identifier hs-var">splitError</span></a></span></span><span> </span><span id="local-6989586621682148511"><span class="annot"><span class="annottext">TCM CoverResult
</span><a href="#local-6989586621682148511"><span class="hs-identifier hs-var">cont</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TCM CoverResult
</span><a href="#local-6989586621682148511"><span class="hs-identifier hs-var">cont</span></a></span><span>
</span><span id="line-616"></span><span>    </span><span class="hs-comment">-- all clauses have an unsplit copattern: try to split</span><span>
</span><span id="line-617"></span><span>    </span><span class="annot"><a href="#local-6989586621682148321"><span class="hs-identifier hs-var">trySplitRes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Coverage.Match.html#BlockedOnProj"><span class="hs-identifier hs-type">BlockedOnProj</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682148512"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682148512"><span class="hs-identifier hs-var">finalSplit</span></a></span></span><span> </span><span id="local-6989586621682148513"><span class="annot"><span class="annottext">SplitError -&gt; TCM CoverResult
</span><a href="#local-6989586621682148513"><span class="hs-identifier hs-var">splitError</span></a></span></span><span> </span><span id="local-6989586621682148514"><span class="annot"><span class="annottext">TCM CoverResult
</span><a href="#local-6989586621682148514"><span class="hs-identifier hs-var">cont</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-618"></span><span>      </span><span class="annot"><span class="annottext">PatVarName -&gt; Int -&gt; PatVarName -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
PatVarName -&gt; Int -&gt; PatVarName -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSLn"><span class="hs-identifier hs-var">reportSLn</span></a></span><span> </span><span class="annot"><span class="annottext">PatVarName
</span><span class="hs-string">&quot;tc.cover&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">20</span></span><span> </span><span class="annot"><span class="annottext">(PatVarName -&gt; TCMT IO ()) -&gt; PatVarName -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PatVarName
</span><span class="hs-string">&quot;blocked by projection pattern&quot;</span></span><span>
</span><span id="line-619"></span><span>      </span><span class="hs-comment">-- forM is a monadic map over a Maybe here</span><span>
</span><span id="line-620"></span><span>      </span><span id="local-6989586621682148515"><span class="annot"><a href="#local-6989586621682148515"><span class="hs-identifier hs-var">mcov</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">QName -&gt; SplitClause -&gt; TCMT IO (Either SplitError Covering)
</span><a href="Agda.TypeChecking.Coverage.html#splitResultRecord"><span class="hs-identifier hs-var">splitResultRecord</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621682148273"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621682148275"><span class="hs-identifier hs-var">sc</span></a></span><span>
</span><span id="line-621"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><a href="#local-6989586621682148515"><span class="hs-identifier hs-type">mcov</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-622"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span id="local-6989586621682148517"><span class="annot"><span class="annottext">SplitError
</span><a href="#local-6989586621682148517"><span class="hs-identifier hs-var">err</span></a></span></span><span>
</span><span id="line-623"></span><span>          </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682148512"><span class="hs-identifier hs-var">finalSplit</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SplitError -&gt; TCM CoverResult
</span><a href="#local-6989586621682148513"><span class="hs-identifier hs-var">splitError</span></a></span><span> </span><span class="annot"><span class="annottext">SplitError
</span><a href="#local-6989586621682148517"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-624"></span><span>          </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TCM CoverResult
</span><a href="#local-6989586621682148514"><span class="hs-identifier hs-var">cont</span></a></span><span>
</span><span id="line-625"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitClause.html#Covering"><span class="hs-identifier hs-type">Covering</span></a></span><span> </span><span id="local-6989586621682148518"><span class="annot"><span class="annottext">Arg Int
</span><a href="#local-6989586621682148518"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621682148519"><span class="annot"><span class="annottext">[(SplitTag, (SplitClause, IInfo))]
</span><a href="#local-6989586621682148519"><span class="hs-identifier hs-var">scs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-626"></span><span>          </span><span class="hs-comment">-- If result splitting was successful, continue coverage checking.</span><span>
</span><span id="line-627"></span><span>          </span><span class="hs-special">(</span><span id="local-6989586621682148520"><span class="annot"><a href="#local-6989586621682148520"><span class="hs-identifier hs-var">projs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682148521"><span class="annot"><a href="#local-6989586621682148521"><span class="hs-identifier hs-var">results</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[(SplitTag, CoverResult)] -&gt; ([SplitTag], [CoverResult])
forall a b. [(a, b)] -&gt; ([a], [b])
</span><span class="hs-identifier hs-var">unzip</span></span><span> </span><span class="annot"><span class="annottext">([(SplitTag, CoverResult)] -&gt; ([SplitTag], [CoverResult]))
-&gt; TCMT IO [(SplitTag, CoverResult)]
-&gt; TCMT IO ([SplitTag], [CoverResult])
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-628"></span><span>            </span><span class="annot"><span class="annottext">((SplitTag, SplitClause) -&gt; TCMT IO (SplitTag, CoverResult))
-&gt; [(SplitTag, SplitClause)] -&gt; TCMT IO [(SplitTag, CoverResult)]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(SplitClause -&gt; TCM CoverResult)
-&gt; (SplitTag, SplitClause) -&gt; TCMT IO (SplitTag, CoverResult)
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Decoration t, Functor m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b.
Functor m =&gt;
(a -&gt; m b) -&gt; (SplitTag, a) -&gt; m (SplitTag, b)
</span><a href="Agda.Utils.Functor.html#traverseF"><span class="hs-identifier hs-var">traverseF</span></a></span><span> </span><span class="annot"><span class="annottext">((SplitClause -&gt; TCM CoverResult)
 -&gt; (SplitTag, SplitClause) -&gt; TCMT IO (SplitTag, CoverResult))
-&gt; (SplitClause -&gt; TCM CoverResult)
-&gt; (SplitTag, SplitClause)
-&gt; TCMT IO (SplitTag, CoverResult)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">InferMissing -&gt; QName -&gt; [Clause] -&gt; SplitClause -&gt; TCM CoverResult
</span><a href="Agda.TypeChecking.Coverage.html#cover"><span class="hs-identifier hs-var">cover</span></a></span><span> </span><span class="annot"><span class="annottext">InferMissing
</span><a href="#local-6989586621682148272"><span class="hs-identifier hs-var">infermissing</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621682148273"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">[Clause]
</span><a href="#local-6989586621682148274"><span class="hs-identifier hs-var">cs</span></a></span><span> </span><span class="annot"><span class="annottext">(SplitClause -&gt; TCM CoverResult)
-&gt; (SplitClause -&gt; TCMT IO SplitClause)
-&gt; SplitClause
-&gt; TCM CoverResult
forall (m :: * -&gt; *) b c a.
Monad m =&gt;
(b -&gt; m c) -&gt; (a -&gt; m b) -&gt; a -&gt; m c
</span><span class="hs-operator hs-var">&lt;=&lt;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Telescope, SplitClause) -&gt; SplitClause
forall a b. (a, b) -&gt; b
</span><span class="hs-identifier hs-var">snd</span></span><span> </span><span class="annot"><span class="annottext">((Telescope, SplitClause) -&gt; SplitClause)
-&gt; (SplitClause -&gt; TCM (Telescope, SplitClause))
-&gt; SplitClause
-&gt; TCMT IO SplitClause
forall (m :: * -&gt; *) b c a.
Functor m =&gt;
(b -&gt; c) -&gt; (a -&gt; m b) -&gt; a -&gt; m c
</span><a href="Agda.Utils.Functor.html#%3C.%3E"><span class="hs-operator hs-var">&lt;.&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SplitClause -&gt; TCM (Telescope, SplitClause)
</span><a href="Agda.TypeChecking.Coverage.html#insertTrailingArgs"><span class="hs-identifier hs-var">insertTrailingArgs</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">((SplitTag, (SplitClause, IInfo)) -&gt; (SplitTag, SplitClause))
-&gt; [(SplitTag, (SplitClause, IInfo))] -&gt; [(SplitTag, SplitClause)]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621682148525"><span class="annot"><span class="annottext">SplitTag
</span><a href="#local-6989586621682148525"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">,</span><span class="hs-special">(</span><span id="local-6989586621682148526"><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621682148526"><span class="hs-identifier hs-var">sc</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621682148527"><span class="annot"><span class="annottext">IInfo
</span><a href="#local-6989586621682148527"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SplitTag
</span><a href="#local-6989586621682148525"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621682148526"><span class="hs-identifier hs-var">sc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(SplitTag, (SplitClause, IInfo))]
</span><a href="#local-6989586621682148519"><span class="hs-identifier hs-var">scs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-629"></span><span>            </span><span class="hs-comment">-- OR:</span><span>
</span><span id="line-630"></span><span>            </span><span class="hs-comment">-- forM scs $ \ (proj, sc') -&gt; (proj,) &lt;$&gt; do</span><span>
</span><span id="line-631"></span><span>            </span><span class="hs-comment">--   cover f cs =&lt;&lt; do</span><span>
</span><span id="line-632"></span><span>            </span><span class="hs-comment">--     snd &lt;$&gt; fixTarget sc'</span><span>
</span><span id="line-633"></span><span>          </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682148528"><span class="annot"><a href="#local-6989586621682148528"><span class="hs-identifier hs-var hs-var">trees</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(CoverResult -&gt; SplitTree) -&gt; [CoverResult] -&gt; [SplitTree]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">CoverResult -&gt; SplitTree
</span><a href="Agda.TypeChecking.Coverage.SplitClause.html#coverSplitTree"><span class="hs-identifier hs-var">coverSplitTree</span></a></span><span> </span><span class="annot"><span class="annottext">[CoverResult]
</span><a href="#local-6989586621682148521"><span class="hs-identifier hs-var">results</span></a></span><span>
</span><span id="line-634"></span><span>              </span><span id="local-6989586621682148529"><span class="annot"><a href="#local-6989586621682148529"><span class="hs-identifier hs-var hs-var">useds</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(CoverResult -&gt; IntSet) -&gt; [CoverResult] -&gt; [IntSet]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">CoverResult -&gt; IntSet
</span><a href="Agda.TypeChecking.Coverage.SplitClause.html#coverUsedClauses"><span class="hs-identifier hs-var">coverUsedClauses</span></a></span><span> </span><span class="annot"><span class="annottext">[CoverResult]
</span><a href="#local-6989586621682148521"><span class="hs-identifier hs-var">results</span></a></span><span>
</span><span id="line-635"></span><span>              </span><span id="local-6989586621682148530"><span class="annot"><a href="#local-6989586621682148530"><span class="hs-identifier hs-var hs-var">psss</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(CoverResult -&gt; [(Telescope, NAPs)])
-&gt; [CoverResult] -&gt; [[(Telescope, NAPs)]]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">CoverResult -&gt; [(Telescope, NAPs)]
</span><a href="Agda.TypeChecking.Coverage.SplitClause.html#coverMissingClauses"><span class="hs-identifier hs-var">coverMissingClauses</span></a></span><span> </span><span class="annot"><span class="annottext">[CoverResult]
</span><a href="#local-6989586621682148521"><span class="hs-identifier hs-var">results</span></a></span><span>
</span><span id="line-636"></span><span>              </span><span id="local-6989586621682148531"><span class="annot"><a href="#local-6989586621682148531"><span class="hs-identifier hs-var hs-var">qsss</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(CoverResult -&gt; [Clause]) -&gt; [CoverResult] -&gt; [[Clause]]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">CoverResult -&gt; [Clause]
</span><a href="Agda.TypeChecking.Coverage.SplitClause.html#coverPatterns"><span class="hs-identifier hs-var">coverPatterns</span></a></span><span> </span><span class="annot"><span class="annottext">[CoverResult]
</span><a href="#local-6989586621682148521"><span class="hs-identifier hs-var">results</span></a></span><span>
</span><span id="line-637"></span><span>              </span><span id="local-6989586621682148532"><span class="annot"><a href="#local-6989586621682148532"><span class="hs-identifier hs-var hs-var">noex</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(CoverResult -&gt; IntSet) -&gt; [CoverResult] -&gt; [IntSet]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">CoverResult -&gt; IntSet
</span><a href="Agda.TypeChecking.Coverage.SplitClause.html#coverNoExactClauses"><span class="hs-identifier hs-var">coverNoExactClauses</span></a></span><span> </span><span class="annot"><span class="annottext">[CoverResult]
</span><a href="#local-6989586621682148521"><span class="hs-identifier hs-var">results</span></a></span><span>
</span><span id="line-638"></span><span>              </span><span id="local-6989586621682148533"><span class="annot"><a href="#local-6989586621682148533"><span class="hs-identifier hs-var hs-var">tree</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Arg Int -&gt; LazySplit -&gt; [(SplitTag, SplitTree)] -&gt; SplitTree
forall a. Arg Int -&gt; LazySplit -&gt; SplitTrees' a -&gt; SplitTree' a
</span><a href="Agda.TypeChecking.Coverage.SplitTree.html#SplitAt"><span class="hs-identifier hs-var">SplitAt</span></a></span><span> </span><span class="annot"><span class="annottext">Arg Int
</span><a href="#local-6989586621682148518"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">LazySplit
</span><a href="Agda.TypeChecking.Coverage.SplitTree.html#StrictSplit"><span class="hs-identifier hs-var">StrictSplit</span></a></span><span> </span><span class="annot"><span class="annottext">([(SplitTag, SplitTree)] -&gt; SplitTree)
-&gt; [(SplitTag, SplitTree)] -&gt; SplitTree
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[SplitTag] -&gt; [SplitTree] -&gt; [(SplitTag, SplitTree)]
forall a b. [a] -&gt; [b] -&gt; [(a, b)]
</span><span class="hs-identifier hs-var">zip</span></span><span> </span><span class="annot"><span class="annottext">[SplitTag]
</span><a href="#local-6989586621682148520"><span class="hs-identifier hs-var">projs</span></a></span><span> </span><span class="annot"><span class="annottext">[SplitTree]
</span><a href="#local-6989586621682148528"><span class="hs-identifier hs-var">trees</span></a></span><span>   </span><span class="hs-comment">-- TODO: Lazy?</span><span>
</span><span id="line-639"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitClause.html#CoverResult"><span class="hs-identifier hs-type">CoverResult</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148533"><span class="hs-identifier hs-type">tree</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">IntSet.unions</span></span><span> </span><span class="annot"><a href="#local-6989586621682148529"><span class="hs-identifier hs-type">useds</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">concat</span></span><span> </span><span class="annot"><a href="#local-6989586621682148530"><span class="hs-identifier hs-type">psss</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">concat</span></span><span> </span><span class="annot"><a href="#local-6989586621682148531"><span class="hs-identifier hs-type">qsss</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">IntSet.unions</span></span><span> </span><span class="annot"><a href="#local-6989586621682148532"><span class="hs-identifier hs-type">noex</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-640"></span><span>
</span><span id="line-641"></span><span>    </span><span class="annot"><a href="#local-6989586621682148534"><span class="hs-identifier hs-type">gatherEtaSplits</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitClause.html#SplitClause"><span class="hs-identifier hs-type">SplitClause</span></a></span><span>
</span><span id="line-642"></span><span>                    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.Syntax.Common.html#NamedArg"><span class="hs-identifier hs-type">NamedArg</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitPattern.html#SplitPattern"><span class="hs-identifier hs-type">SplitPattern</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.Syntax.Common.html#NamedArg"><span class="hs-identifier hs-type">NamedArg</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitPattern.html#SplitPattern"><span class="hs-identifier hs-type">SplitPattern</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-643"></span><span>    </span><span id="local-6989586621682148534"><span class="annot"><span class="annottext">gatherEtaSplits :: Int
-&gt; SplitClause
-&gt; [NamedArg SplitPattern]
-&gt; [NamedArg SplitPattern]
</span><a href="#local-6989586621682148534"><span class="hs-identifier hs-var hs-var">gatherEtaSplits</span></a></span></span><span> </span><span id="local-6989586621682148535"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682148535"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621682148536"><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621682148536"><span class="hs-identifier hs-var">sc</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-644"></span><span>       </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682148535"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;=</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span> </span><span class="hs-comment">-- we should have encountered the main</span><span>
</span><span id="line-645"></span><span>                                    </span><span class="hs-comment">-- split by now already</span><span>
</span><span id="line-646"></span><span>       </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-647"></span><span>    </span><span class="annot"><a href="#local-6989586621682148534"><span class="hs-identifier hs-var">gatherEtaSplits</span></a></span><span> </span><span id="local-6989586621682148537"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682148537"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621682148538"><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621682148538"><span class="hs-identifier hs-var">sc</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682148539"><span class="annot"><span class="annottext">NamedArg SplitPattern
</span><a href="#local-6989586621682148539"><span class="hs-identifier hs-var">p</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621682148540"><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621682148540"><span class="hs-identifier hs-var">ps</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">NamedArg SplitPattern -&gt; SplitPattern
forall a. NamedArg a -&gt; a
</span><a href="Agda.Syntax.Common.html#namedArg"><span class="hs-identifier hs-var">namedArg</span></a></span><span> </span><span class="annot"><span class="annottext">NamedArg SplitPattern
</span><a href="#local-6989586621682148539"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-648"></span><span>      </span><span class="annot"><a href="Agda.Syntax.Internal.html#VarP"><span class="hs-identifier hs-type">VarP</span></a></span><span> </span><span class="annot"><span class="annottext">PatternInfo
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682148541"><span class="annot"><span class="annottext">SplitPatVar
</span><a href="#local-6989586621682148541"><span class="hs-identifier hs-var">x</span></a></span></span><span>
</span><span id="line-649"></span><span>       </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682148537"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">SplitPattern
</span><a href="#local-6989586621682148542"><span class="hs-identifier hs-var">p'</span></a></span><span> </span><span class="hs-keyword">of</span><span> </span><span class="hs-comment">-- this is the main split</span><span>
</span><span id="line-650"></span><span>           </span><span class="annot"><a href="Agda.Syntax.Internal.html#VarP"><span class="hs-identifier hs-type">VarP</span></a></span><span>  </span><span class="annot"><span class="annottext">PatternInfo
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">SplitPatVar
</span><span class="hs-identifier">_</span></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NamedArg SplitPattern
</span><a href="#local-6989586621682148539"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">NamedArg SplitPattern
-&gt; [NamedArg SplitPattern] -&gt; [NamedArg SplitPattern]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">Int
-&gt; SplitClause
-&gt; [NamedArg SplitPattern]
-&gt; [NamedArg SplitPattern]
</span><a href="#local-6989586621682148534"><span class="hs-identifier hs-var">gatherEtaSplits</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">-</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621682148538"><span class="hs-identifier hs-var">sc</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621682148540"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-651"></span><span>           </span><span class="annot"><a href="Agda.Syntax.Internal.html#DotP"><span class="hs-identifier hs-type">DotP</span></a></span><span>  </span><span class="annot"><span class="annottext">PatternInfo
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Term
</span><span class="hs-identifier">_</span></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span>
</span><span id="line-652"></span><span>           </span><span class="annot"><a href="Agda.Syntax.Internal.html#ConP"><span class="hs-identifier hs-type">ConP</span></a></span><span>  </span><span class="annot"><span class="annottext">ConHead
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">ConPatternInfo
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682148545"><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621682148545"><span class="hs-identifier hs-var">qs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621682148545"><span class="hs-identifier hs-var">qs</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
-&gt; [NamedArg SplitPattern] -&gt; [NamedArg SplitPattern]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">Int
-&gt; SplitClause
-&gt; [NamedArg SplitPattern]
-&gt; [NamedArg SplitPattern]
</span><a href="#local-6989586621682148534"><span class="hs-identifier hs-var">gatherEtaSplits</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">-</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621682148538"><span class="hs-identifier hs-var">sc</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621682148540"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-653"></span><span>           </span><span class="annot"><a href="Agda.Syntax.Internal.html#LitP"><span class="hs-identifier hs-type">LitP</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int
-&gt; SplitClause
-&gt; [NamedArg SplitPattern]
-&gt; [NamedArg SplitPattern]
</span><a href="#local-6989586621682148534"><span class="hs-identifier hs-var">gatherEtaSplits</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">-</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621682148538"><span class="hs-identifier hs-var">sc</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621682148540"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-654"></span><span>           </span><span class="annot"><a href="Agda.Syntax.Internal.html#ProjP"><span class="hs-identifier hs-type">ProjP</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span>
</span><span id="line-655"></span><span>           </span><span class="annot"><a href="Agda.Syntax.Internal.html#IApplyP"><span class="hs-identifier hs-type">IApplyP</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span>
</span><span id="line-656"></span><span>           </span><span class="annot"><a href="Agda.Syntax.Internal.html#DefP"><span class="hs-identifier hs-type">DefP</span></a></span><span>  </span><span class="annot"><span class="annottext">PatternInfo
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">QName
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682148549"><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621682148549"><span class="hs-identifier hs-var">qs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621682148549"><span class="hs-identifier hs-var">qs</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
-&gt; [NamedArg SplitPattern] -&gt; [NamedArg SplitPattern]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">Int
-&gt; SplitClause
-&gt; [NamedArg SplitPattern]
-&gt; [NamedArg SplitPattern]
</span><a href="#local-6989586621682148534"><span class="hs-identifier hs-var">gatherEtaSplits</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">-</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621682148538"><span class="hs-identifier hs-var">sc</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621682148540"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="hs-comment">-- __IMPOSSIBLE__ -- Andrea: maybe?</span><span>
</span><span id="line-657"></span><span>       </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-658"></span><span>           </span><span class="annot"><span class="annottext">(SplitPattern -&gt; SplitPattern)
-&gt; NamedArg SplitPattern -&gt; NamedArg SplitPattern
forall a b. (a -&gt; b) -&gt; NamedArg a -&gt; NamedArg b
</span><a href="Agda.Syntax.Common.html#updateNamedArg"><span class="hs-identifier hs-var">updateNamedArg</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span> </span><span class="annot"><span class="annottext">SplitPattern
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SplitPattern
</span><a href="#local-6989586621682148542"><span class="hs-identifier hs-var">p'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NamedArg SplitPattern
</span><a href="#local-6989586621682148539"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">NamedArg SplitPattern
-&gt; [NamedArg SplitPattern] -&gt; [NamedArg SplitPattern]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">Int
-&gt; SplitClause
-&gt; [NamedArg SplitPattern]
-&gt; [NamedArg SplitPattern]
</span><a href="#local-6989586621682148534"><span class="hs-identifier hs-var">gatherEtaSplits</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682148537"><span class="hs-identifier hs-var">n</span></a></span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621682148538"><span class="hs-identifier hs-var">sc</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621682148540"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-659"></span><span>        </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621682148542"><span class="annot"><span class="annottext">p' :: SplitPattern
</span><a href="#local-6989586621682148542"><span class="hs-identifier hs-var hs-var">p'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Substitution' SplitPattern -&gt; Int -&gt; SplitPattern
forall a. EndoSubst a =&gt; Substitution' a -&gt; Int -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#lookupS"><span class="hs-identifier hs-var">lookupS</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SplitClause -&gt; Substitution' SplitPattern
</span><a href="Agda.TypeChecking.Coverage.SplitClause.html#scSubst"><span class="hs-identifier hs-var">scSubst</span></a></span><span> </span><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621682148538"><span class="hs-identifier hs-var">sc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Int -&gt; SplitPattern) -&gt; Int -&gt; SplitPattern
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SplitPatVar -&gt; Int
</span><a href="Agda.TypeChecking.Coverage.SplitPattern.html#splitPatVarIndex"><span class="hs-identifier hs-var">splitPatVarIndex</span></a></span><span> </span><span class="annot"><span class="annottext">SplitPatVar
</span><a href="#local-6989586621682148541"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-660"></span><span>      </span><span class="annot"><a href="Agda.Syntax.Internal.html#IApplyP"><span class="hs-identifier hs-type">IApplyP</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>   </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-661"></span><span>           </span><span class="annot"><span class="annottext">(SplitPattern -&gt; SplitPattern)
-&gt; NamedArg SplitPattern -&gt; NamedArg SplitPattern
forall a b. (a -&gt; b) -&gt; NamedArg a -&gt; NamedArg b
</span><a href="Agda.Syntax.Common.html#updateNamedArg"><span class="hs-identifier hs-var">updateNamedArg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Substitution' (SubstArg SplitPattern)
-&gt; SplitPattern -&gt; SplitPattern
forall a. Subst a =&gt; Substitution' (SubstArg a) -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#applySubst"><span class="hs-identifier hs-var">applySubst</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SplitClause -&gt; Substitution' SplitPattern
</span><a href="Agda.TypeChecking.Coverage.SplitClause.html#scSubst"><span class="hs-identifier hs-var">scSubst</span></a></span><span> </span><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621682148538"><span class="hs-identifier hs-var">sc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NamedArg SplitPattern
</span><a href="#local-6989586621682148539"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">NamedArg SplitPattern
-&gt; [NamedArg SplitPattern] -&gt; [NamedArg SplitPattern]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">Int
-&gt; SplitClause
-&gt; [NamedArg SplitPattern]
-&gt; [NamedArg SplitPattern]
</span><a href="#local-6989586621682148534"><span class="hs-identifier hs-var">gatherEtaSplits</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682148537"><span class="hs-identifier hs-var">n</span></a></span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621682148538"><span class="hs-identifier hs-var">sc</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621682148540"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-662"></span><span>      </span><span class="annot"><a href="Agda.Syntax.Internal.html#DotP"><span class="hs-identifier hs-type">DotP</span></a></span><span>  </span><span class="annot"><span class="annottext">PatternInfo
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Term
</span><span class="hs-identifier">_</span></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NamedArg SplitPattern
</span><a href="#local-6989586621682148539"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">NamedArg SplitPattern
-&gt; [NamedArg SplitPattern] -&gt; [NamedArg SplitPattern]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">Int
-&gt; SplitClause
-&gt; [NamedArg SplitPattern]
-&gt; [NamedArg SplitPattern]
</span><a href="#local-6989586621682148534"><span class="hs-identifier hs-var">gatherEtaSplits</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682148537"><span class="hs-identifier hs-var">n</span></a></span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621682148538"><span class="hs-identifier hs-var">sc</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621682148540"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="hs-comment">-- count dot patterns</span><span>
</span><span id="line-663"></span><span>      </span><span class="annot"><a href="Agda.Syntax.Internal.html#ConP"><span class="hs-identifier hs-type">ConP</span></a></span><span>  </span><span class="annot"><span class="annottext">ConHead
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">ConPatternInfo
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682148554"><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621682148554"><span class="hs-identifier hs-var">qs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int
-&gt; SplitClause
-&gt; [NamedArg SplitPattern]
-&gt; [NamedArg SplitPattern]
</span><a href="#local-6989586621682148534"><span class="hs-identifier hs-var">gatherEtaSplits</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682148537"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621682148538"><span class="hs-identifier hs-var">sc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621682148554"><span class="hs-identifier hs-var">qs</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
-&gt; [NamedArg SplitPattern] -&gt; [NamedArg SplitPattern]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621682148540"><span class="hs-identifier hs-var">ps</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-664"></span><span>      </span><span class="annot"><a href="Agda.Syntax.Internal.html#DefP"><span class="hs-identifier hs-type">DefP</span></a></span><span>  </span><span class="annot"><span class="annottext">PatternInfo
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">QName
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682148555"><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621682148555"><span class="hs-identifier hs-var">qs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int
-&gt; SplitClause
-&gt; [NamedArg SplitPattern]
-&gt; [NamedArg SplitPattern]
</span><a href="#local-6989586621682148534"><span class="hs-identifier hs-var">gatherEtaSplits</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682148537"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621682148538"><span class="hs-identifier hs-var">sc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621682148555"><span class="hs-identifier hs-var">qs</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
-&gt; [NamedArg SplitPattern] -&gt; [NamedArg SplitPattern]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621682148540"><span class="hs-identifier hs-var">ps</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-665"></span><span>      </span><span class="annot"><a href="Agda.Syntax.Internal.html#LitP"><span class="hs-identifier hs-type">LitP</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int
-&gt; SplitClause
-&gt; [NamedArg SplitPattern]
-&gt; [NamedArg SplitPattern]
</span><a href="#local-6989586621682148534"><span class="hs-identifier hs-var">gatherEtaSplits</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682148537"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621682148538"><span class="hs-identifier hs-var">sc</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621682148540"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-666"></span><span>      </span><span class="annot"><a href="Agda.Syntax.Internal.html#ProjP"><span class="hs-identifier hs-type">ProjP</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int
-&gt; SplitClause
-&gt; [NamedArg SplitPattern]
-&gt; [NamedArg SplitPattern]
</span><a href="#local-6989586621682148534"><span class="hs-identifier hs-var">gatherEtaSplits</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682148537"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621682148538"><span class="hs-identifier hs-var">sc</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621682148540"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-667"></span><span>
</span><span id="line-668"></span><span>    </span><span class="annot"><a href="#local-6989586621682148556"><span class="hs-identifier hs-type">addEtaSplits</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.Syntax.Common.html#NamedArg"><span class="hs-identifier hs-type">NamedArg</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitPattern.html#SplitPattern"><span class="hs-identifier hs-type">SplitPattern</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitTree.html#SplitTree"><span class="hs-identifier hs-type">SplitTree</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitTree.html#SplitTree"><span class="hs-identifier hs-type">SplitTree</span></a></span><span>
</span><span id="line-669"></span><span>    </span><span id="local-6989586621682148556"><span class="annot"><span class="annottext">addEtaSplits :: Int -&gt; [NamedArg SplitPattern] -&gt; SplitTree -&gt; SplitTree
</span><a href="#local-6989586621682148556"><span class="hs-identifier hs-var hs-var">addEtaSplits</span></a></span></span><span> </span><span id="local-6989586621682148557"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682148557"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>     </span><span id="local-6989586621682148558"><span class="annot"><span class="annottext">SplitTree
</span><a href="#local-6989586621682148558"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SplitTree
</span><a href="#local-6989586621682148558"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-670"></span><span>    </span><span class="annot"><a href="#local-6989586621682148556"><span class="hs-identifier hs-var">addEtaSplits</span></a></span><span> </span><span id="local-6989586621682148559"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682148559"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682148560"><span class="annot"><span class="annottext">NamedArg SplitPattern
</span><a href="#local-6989586621682148560"><span class="hs-identifier hs-var">p</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621682148561"><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621682148561"><span class="hs-identifier hs-var">ps</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682148562"><span class="annot"><span class="annottext">SplitTree
</span><a href="#local-6989586621682148562"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">NamedArg SplitPattern -&gt; SplitPattern
forall a. NamedArg a -&gt; a
</span><a href="Agda.Syntax.Common.html#namedArg"><span class="hs-identifier hs-var">namedArg</span></a></span><span> </span><span class="annot"><span class="annottext">NamedArg SplitPattern
</span><a href="#local-6989586621682148560"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-671"></span><span>      </span><span class="annot"><a href="Agda.Syntax.Internal.html#VarP"><span class="hs-identifier hs-type">VarP</span></a></span><span>  </span><span class="annot"><span class="annottext">PatternInfo
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">SplitPatVar
</span><span class="hs-identifier">_</span></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; [NamedArg SplitPattern] -&gt; SplitTree -&gt; SplitTree
</span><a href="#local-6989586621682148556"><span class="hs-identifier hs-var">addEtaSplits</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682148559"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621682148561"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="annot"><span class="annottext">SplitTree
</span><a href="#local-6989586621682148562"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-672"></span><span>      </span><span class="annot"><a href="Agda.Syntax.Internal.html#DotP"><span class="hs-identifier hs-type">DotP</span></a></span><span>  </span><span class="annot"><span class="annottext">PatternInfo
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Term
</span><span class="hs-identifier">_</span></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; [NamedArg SplitPattern] -&gt; SplitTree -&gt; SplitTree
</span><a href="#local-6989586621682148556"><span class="hs-identifier hs-var">addEtaSplits</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682148559"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621682148561"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="annot"><span class="annottext">SplitTree
</span><a href="#local-6989586621682148562"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-673"></span><span>      </span><span class="annot"><a href="Agda.Syntax.Internal.html#ConP"><span class="hs-identifier hs-type">ConP</span></a></span><span> </span><span id="local-6989586621682148563"><span class="annot"><span class="annottext">ConHead
</span><a href="#local-6989586621682148563"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span id="local-6989586621682148564"><span class="annot"><span class="annottext">ConPatternInfo
</span><a href="#local-6989586621682148564"><span class="hs-identifier hs-var">cpi</span></a></span></span><span> </span><span id="local-6989586621682148565"><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621682148565"><span class="hs-identifier hs-var">qs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Arg Int -&gt; LazySplit -&gt; [(SplitTag, SplitTree)] -&gt; SplitTree
forall a. Arg Int -&gt; LazySplit -&gt; SplitTrees' a -&gt; SplitTree' a
</span><a href="Agda.TypeChecking.Coverage.SplitTree.html#SplitAt"><span class="hs-identifier hs-var">SplitAt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NamedArg SplitPattern
</span><a href="#local-6989586621682148560"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">NamedArg SplitPattern -&gt; Int -&gt; Arg Int
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; b -&gt; f b
</span><span class="hs-operator hs-var">$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682148559"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LazySplit
</span><a href="Agda.TypeChecking.Coverage.SplitTree.html#LazySplit"><span class="hs-identifier hs-var">LazySplit</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">QName -&gt; SplitTag
</span><a href="Agda.TypeChecking.Coverage.SplitTree.html#SplitCon"><span class="hs-identifier hs-var">SplitCon</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConHead -&gt; QName
</span><a href="Agda.Syntax.Internal.html#conName"><span class="hs-identifier hs-var">conName</span></a></span><span> </span><span class="annot"><span class="annottext">ConHead
</span><a href="#local-6989586621682148563"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int -&gt; [NamedArg SplitPattern] -&gt; SplitTree -&gt; SplitTree
</span><a href="#local-6989586621682148556"><span class="hs-identifier hs-var">addEtaSplits</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682148559"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621682148565"><span class="hs-identifier hs-var">qs</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
-&gt; [NamedArg SplitPattern] -&gt; [NamedArg SplitPattern]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621682148561"><span class="hs-identifier hs-var">ps</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SplitTree
</span><a href="#local-6989586621682148562"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-674"></span><span>      </span><span class="annot"><a href="Agda.Syntax.Internal.html#LitP"><span class="hs-identifier hs-type">LitP</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SplitTree
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span>
</span><span id="line-675"></span><span>      </span><span class="annot"><a href="Agda.Syntax.Internal.html#ProjP"><span class="hs-identifier hs-type">ProjP</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SplitTree
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span>
</span><span id="line-676"></span><span>      </span><span class="annot"><a href="Agda.Syntax.Internal.html#DefP"><span class="hs-identifier hs-type">DefP</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SplitTree
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span> </span><span class="hs-comment">-- Andrea: maybe?</span><span>
</span><span id="line-677"></span><span>      </span><span class="annot"><a href="Agda.Syntax.Internal.html#IApplyP"><span class="hs-identifier hs-type">IApplyP</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; [NamedArg SplitPattern] -&gt; SplitTree -&gt; SplitTree
</span><a href="#local-6989586621682148556"><span class="hs-identifier hs-var">addEtaSplits</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682148559"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621682148561"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="annot"><span class="annottext">SplitTree
</span><a href="#local-6989586621682148562"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-678"></span><span>
</span><span id="line-679"></span><span>    </span><span class="annot"><a href="#local-6989586621682148485"><span class="hs-identifier hs-type">etaRecordSplits</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.Syntax.Common.html#NamedArg"><span class="hs-identifier hs-type">NamedArg</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitPattern.html#SplitPattern"><span class="hs-identifier hs-type">SplitPattern</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-680"></span><span>                    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitTree.html#SplitTree"><span class="hs-identifier hs-type">SplitTree</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitClause.html#SplitClause"><span class="hs-identifier hs-type">SplitClause</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitTree.html#SplitTree"><span class="hs-identifier hs-type">SplitTree</span></a></span><span>
</span><span id="line-681"></span><span>    </span><span id="local-6989586621682148485"><span class="annot"><span class="annottext">etaRecordSplits :: Int
-&gt; [NamedArg SplitPattern] -&gt; SplitTree -&gt; SplitClause -&gt; SplitTree
</span><a href="#local-6989586621682148485"><span class="hs-identifier hs-var hs-var">etaRecordSplits</span></a></span></span><span> </span><span id="local-6989586621682148569"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682148569"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621682148570"><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621682148570"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span id="local-6989586621682148571"><span class="annot"><span class="annottext">SplitTree
</span><a href="#local-6989586621682148571"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span id="local-6989586621682148572"><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621682148572"><span class="hs-identifier hs-var">sc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; [NamedArg SplitPattern] -&gt; SplitTree -&gt; SplitTree
</span><a href="#local-6989586621682148556"><span class="hs-identifier hs-var">addEtaSplits</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
-&gt; SplitClause
-&gt; [NamedArg SplitPattern]
-&gt; [NamedArg SplitPattern]
</span><a href="#local-6989586621682148534"><span class="hs-identifier hs-var">gatherEtaSplits</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682148569"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621682148572"><span class="hs-identifier hs-var">sc</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621682148570"><span class="hs-identifier hs-var">ps</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SplitTree
</span><a href="#local-6989586621682148571"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-682"></span><span>
</span><span id="line-683"></span><span>
</span><span id="line-684"></span><span class="annot"><span class="hs-comment">-- | Append a instance clause to the clauses of a function.</span></span><span>
</span><span id="line-685"></span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#inferMissingClause"><span class="hs-identifier hs-type">inferMissingClause</span></a></span><span>
</span><span id="line-686"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Abstract.Name.html#QName"><span class="hs-identifier hs-type">QName</span></a></span><span>
</span><span id="line-687"></span><span>       </span><span class="annot"><span class="hs-comment">-- ^ Function name.</span></span><span>
</span><span id="line-688"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitClause.html#SplitClause"><span class="hs-identifier hs-type">SplitClause</span></a></span><span>
</span><span id="line-689"></span><span>       </span><span class="annot"><span class="hs-comment">-- ^ Clause to add.  Clause hiding (in 'clauseType') must be 'Instance'.</span></span><span>
</span><span id="line-690"></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">TCM</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Clause"><span class="hs-identifier hs-type">Clause</span></a></span><span>
</span><span id="line-691"></span><span id="inferMissingClause"><span class="annot"><span class="annottext">inferMissingClause :: QName -&gt; SplitClause -&gt; TCM Clause
</span><a href="Agda.TypeChecking.Coverage.html#inferMissingClause"><span class="hs-identifier hs-var hs-var">inferMissingClause</span></a></span></span><span> </span><span id="local-6989586621682148574"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621682148574"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitClause.html#SClause"><span class="hs-identifier hs-type">SClause</span></a></span><span> </span><span id="local-6989586621682148575"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682148575"><span class="hs-identifier hs-var">tel</span></a></span></span><span> </span><span id="local-6989586621682148576"><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621682148576"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span class="annot"><span class="annottext">Substitution' SplitPattern
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682148577"><span class="annot"><span class="annottext">Map CheckpointId (Substitution' Term)
</span><a href="#local-6989586621682148577"><span class="hs-identifier hs-var">cps</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621682148578"><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621682148578"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">QName -&gt; TCM Clause -&gt; TCM Clause
forall (m :: * -&gt; *) x a.
(MonadTrace m, HasRange x) =&gt;
x -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Trace.html#setCurrentRange"><span class="hs-identifier hs-var">setCurrentRange</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621682148574"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">(TCM Clause -&gt; TCM Clause) -&gt; TCM Clause -&gt; TCM Clause
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-692"></span><span>  </span><span class="annot"><span class="annottext">PatVarName -&gt; Int -&gt; TCMT IO Doc -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
PatVarName -&gt; Int -&gt; TCMT IO Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">PatVarName
</span><span class="hs-string">&quot;tc.cover.infer&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">20</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; TCMT IO ()) -&gt; TCMT IO Doc -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a.
MonadAddContext m =&gt;
Telescope -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682148575"><span class="hs-identifier hs-var">tel</span></a></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; TCMT IO Doc) -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;Trying to infer right-hand side of type&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Dom Type -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; Dom Type -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621682148578"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-693"></span><span>  </span><span id="local-6989586621682148579"><span class="annot"><a href="#local-6989586621682148579"><span class="hs-identifier hs-var">rhs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-694"></span><span>    </span><span class="annot"><span class="annottext">Telescope -&gt; TCMT IO Term -&gt; TCMT IO Term
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a.
MonadAddContext m =&gt;
Telescope -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682148575"><span class="hs-identifier hs-var">tel</span></a></span><span>
</span><span id="line-695"></span><span>    </span><span class="annot"><span class="annottext">(TCMT IO Term -&gt; TCMT IO Term) -&gt; TCMT IO Term -&gt; TCMT IO Term
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Lens' TCEnv (Map CheckpointId (Substitution' Term))
-&gt; (Map CheckpointId (Substitution' Term)
    -&gt; Map CheckpointId (Substitution' Term))
-&gt; TCMT IO Term
-&gt; TCMT IO Term
forall (m :: * -&gt; *) a b.
MonadTCEnv m =&gt;
Lens' TCEnv a -&gt; (a -&gt; a) -&gt; m b -&gt; m b
</span><a href="Agda.TypeChecking.Monad.Base.html#locallyTC"><span class="hs-identifier hs-var">locallyTC</span></a></span><span> </span><span class="annot"><span class="annottext">(Map CheckpointId (Substitution' Term)
 -&gt; f (Map CheckpointId (Substitution' Term)))
-&gt; TCEnv -&gt; f TCEnv
Lens' TCEnv (Map CheckpointId (Substitution' Term))
</span><a href="Agda.TypeChecking.Monad.Base.html#eCheckpoints"><span class="hs-identifier hs-var">eCheckpoints</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map CheckpointId (Substitution' Term)
-&gt; Map CheckpointId (Substitution' Term)
-&gt; Map CheckpointId (Substitution' Term)
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="annot"><span class="annottext">Map CheckpointId (Substitution' Term)
</span><a href="#local-6989586621682148577"><span class="hs-identifier hs-var">cps</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-696"></span><span>    </span><span class="annot"><span class="annottext">(TCMT IO Term -&gt; TCMT IO Term) -&gt; TCMT IO Term -&gt; TCMT IO Term
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Substitution' Term -&gt; TCMT IO Term -&gt; TCMT IO Term
forall (tcm :: * -&gt; *) a.
(MonadDebug tcm, MonadTCM tcm, MonadFresh CheckpointId tcm,
 ReadTCState tcm) =&gt;
Substitution' Term -&gt; tcm a -&gt; tcm a
</span><a href="Agda.TypeChecking.Monad.Context.html#checkpoint"><span class="hs-identifier hs-var">checkpoint</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' Term
forall a. Substitution' a
</span><a href="Agda.Syntax.Internal.html#IdS"><span class="hs-identifier hs-var">IdS</span></a></span><span>    </span><span class="hs-comment">-- introduce a fresh checkpoint</span><span>
</span><span id="line-697"></span><span>    </span><span class="annot"><span class="annottext">(TCMT IO Term -&gt; TCMT IO Term) -&gt; TCMT IO Term -&gt; TCMT IO Term
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Dom Type -&gt; Hiding
forall a. LensHiding a =&gt; a -&gt; Hiding
</span><a href="Agda.Syntax.Common.html#getHiding"><span class="hs-identifier hs-var">getHiding</span></a></span><span> </span><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621682148578"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-698"></span><span>        </span><span class="annot"><span class="annottext">Hiding
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621682148586"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621682148586"><span class="hs-identifier hs-var">tac</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Dom Type -&gt; Maybe Term
forall t e. Dom' t e -&gt; Maybe t
</span><a href="Agda.Syntax.Internal.html#domTactic"><span class="hs-identifier hs-var">domTactic</span></a></span><span> </span><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621682148578"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-699"></span><span>          </span><span class="annot"><span class="annottext">PatVarName -&gt; Int -&gt; TCMT IO Doc -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
PatVarName -&gt; Int -&gt; TCMT IO Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">PatVarName
</span><span class="hs-string">&quot;tc.cover.infer&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">40</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; TCMT IO ()) -&gt; TCMT IO Doc -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[TCMT IO Doc] -&gt; TCMT IO Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span>
</span><span id="line-700"></span><span>            </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;@tactic rhs&quot;</span></span><span>
</span><span id="line-701"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Functor m =&gt; Int -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; TCMT IO Doc) -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;target =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Dom Type -&gt; TCMT IO Doc
forall (m :: * -&gt; *) a. (Applicative m, Pretty a) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#pretty"><span class="hs-identifier hs-var">pretty</span></a></span><span> </span><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621682148578"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-702"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682148587"><span class="annot"><a href="#local-6989586621682148587"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">RunMetaOccursCheck -&gt; Comparison -&gt; Type -&gt; TCMT IO (MetaId, Term)
forall (m :: * -&gt; *).
MonadMetaSolver m =&gt;
RunMetaOccursCheck -&gt; Comparison -&gt; Type -&gt; m (MetaId, Term)
</span><a href="Agda.TypeChecking.MetaVars.html#newValueMeta"><span class="hs-identifier hs-var">newValueMeta</span></a></span><span> </span><span class="annot"><span class="annottext">RunMetaOccursCheck
</span><a href="Agda.TypeChecking.Monad.Base.html#DontRunMetaOccursCheck"><span class="hs-identifier hs-var">DontRunMetaOccursCheck</span></a></span><span> </span><span class="annot"><span class="annottext">Comparison
</span><a href="Agda.TypeChecking.Monad.Base.Types.html#CmpLeq"><span class="hs-identifier hs-var">CmpLeq</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Dom Type -&gt; Type
forall t e. Dom' t e -&gt; e
</span><a href="Agda.Syntax.Internal.html#unDom"><span class="hs-identifier hs-var">unDom</span></a></span><span> </span><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621682148578"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-703"></span><span>          </span><span class="annot"><a href="#local-6989586621682148587"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">&lt;$</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Rules.Term.html#unquoteTactic"><span class="hs-identifier hs-type">unquoteTactic</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148586"><span class="hs-identifier hs-type">tac</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148587"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#unDom"><span class="hs-identifier hs-var">unDom</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148578"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-704"></span><span>        </span><span class="annot"><a href="Agda.Syntax.Common.html#Instance"><span class="hs-identifier hs-type">Instance</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(MetaId, Term) -&gt; Term
forall a b. (a, b) -&gt; b
</span><span class="hs-identifier hs-var">snd</span></span><span> </span><span class="annot"><span class="annottext">((MetaId, Term) -&gt; Term) -&gt; TCMT IO (MetaId, Term) -&gt; TCMT IO Term
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">PatVarName -&gt; Type -&gt; TCMT IO (MetaId, Term)
forall (m :: * -&gt; *).
MonadMetaSolver m =&gt;
PatVarName -&gt; Type -&gt; m (MetaId, Term)
</span><a href="Agda.TypeChecking.MetaVars.html#newInstanceMeta"><span class="hs-identifier hs-var">newInstanceMeta</span></a></span><span> </span><span class="annot"><span class="annottext">PatVarName
</span><span class="hs-string">&quot;&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Dom Type -&gt; Type
forall t e. Dom' t e -&gt; e
</span><a href="Agda.Syntax.Internal.html#unDom"><span class="hs-identifier hs-var">unDom</span></a></span><span> </span><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621682148578"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-705"></span><span>        </span><span class="annot"><span class="annottext">Hiding
</span><a href="Agda.Syntax.Common.html#Hidden"><span class="hs-identifier hs-var">Hidden</span></a></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TCMT IO Term
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span>
</span><span id="line-706"></span><span>        </span><span class="annot"><span class="annottext">Hiding
</span><a href="Agda.Syntax.Common.html#NotHidden"><span class="hs-identifier hs-var">NotHidden</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TCMT IO Term
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span>
</span><span id="line-707"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682148595"><span class="annot"><a href="#local-6989586621682148595"><span class="hs-identifier hs-var hs-var">cl</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Clause"><span class="hs-identifier hs-type">Clause</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">clauseLHSRange :: Range
</span><a href="Agda.Syntax.Internal.html#clauseLHSRange"><span class="hs-identifier hs-var">clauseLHSRange</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Range
forall a. Range' a
</span><a href="Agda.Syntax.Position.html#noRange"><span class="hs-identifier hs-var">noRange</span></a></span><span>
</span><span id="line-708"></span><span>                  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">clauseFullRange :: Range
</span><a href="Agda.Syntax.Internal.html#clauseFullRange"><span class="hs-identifier hs-var">clauseFullRange</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Range
forall a. Range' a
</span><a href="Agda.Syntax.Position.html#noRange"><span class="hs-identifier hs-var">noRange</span></a></span><span>
</span><span id="line-709"></span><span>                  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">clauseTel :: Telescope
</span><a href="Agda.Syntax.Internal.html#clauseTel"><span class="hs-identifier hs-var">clauseTel</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682148575"><span class="hs-identifier hs-var">tel</span></a></span><span>
</span><span id="line-710"></span><span>                  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">namedClausePats :: NAPs
</span><a href="Agda.Syntax.Internal.html#namedClausePats"><span class="hs-identifier hs-var">namedClausePats</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern] -&gt; NAPs
</span><a href="Agda.TypeChecking.Coverage.SplitPattern.html#fromSplitPatterns"><span class="hs-identifier hs-var">fromSplitPatterns</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621682148576"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-711"></span><span>                  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">clauseBody :: Maybe Term
</span><a href="Agda.Syntax.Internal.html#clauseBody"><span class="hs-identifier hs-var">clauseBody</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Term -&gt; Maybe Term
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621682148579"><span class="hs-identifier hs-var">rhs</span></a></span><span>
</span><span id="line-712"></span><span>                  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">clauseType :: Maybe (Arg Type)
</span><a href="Agda.Syntax.Internal.html#clauseType"><span class="hs-identifier hs-var">clauseType</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Arg Type -&gt; Maybe (Arg Type)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Dom Type -&gt; Arg Type
forall t a. Dom' t a -&gt; Arg a
</span><a href="Agda.Syntax.Internal.html#argFromDom"><span class="hs-identifier hs-var">argFromDom</span></a></span><span> </span><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621682148578"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-713"></span><span>                  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">clauseCatchall :: Catchall
</span><a href="Agda.Syntax.Internal.html#clauseCatchall"><span class="hs-identifier hs-var">clauseCatchall</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Catchall
forall a. Null a =&gt; a
</span><a href="Agda.Utils.Null.html#empty"><span class="hs-identifier hs-var">empty</span></a></span><span>
</span><span id="line-714"></span><span>                  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">clauseRecursive :: ClauseRecursive
</span><a href="Agda.Syntax.Internal.html#clauseRecursive"><span class="hs-identifier hs-var">clauseRecursive</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ClauseRecursive
</span><a href="Agda.Syntax.Internal.html#MaybeRecursive"><span class="hs-identifier hs-var">MaybeRecursive</span></a></span><span>  </span><span class="hs-comment">-- could be recursive</span><span>
</span><span id="line-715"></span><span>                  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">clauseUnreachable :: Maybe Bool
</span><a href="Agda.Syntax.Internal.html#clauseUnreachable"><span class="hs-identifier hs-var">clauseUnreachable</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Maybe Bool
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>      </span><span class="hs-comment">-- missing, thus, not unreachable</span><span>
</span><span id="line-716"></span><span>                  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">clauseEllipsis :: ExpandedEllipsis
</span><a href="Agda.Syntax.Internal.html#clauseEllipsis"><span class="hs-identifier hs-var">clauseEllipsis</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ExpandedEllipsis
</span><a href="Agda.Syntax.Common.html#NoEllipsis"><span class="hs-identifier hs-var">NoEllipsis</span></a></span><span>
</span><span id="line-717"></span><span>                  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">clauseWhereModule :: Maybe ModuleName
</span><a href="Agda.Syntax.Internal.html#clauseWhereModule"><span class="hs-identifier hs-var">clauseWhereModule</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe ModuleName
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-718"></span><span>                  </span><span class="hs-special">}</span><span>
</span><span id="line-719"></span><span>  </span><span class="annot"><a href="Agda.TypeChecking.Monad.Signature.html#addClauses"><span class="hs-identifier hs-type">addClauses</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148574"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Agda.Utils.Singleton.html#singleton"><span class="hs-identifier hs-type">singleton</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148595"><span class="hs-identifier hs-type">cl</span></a></span><span>  </span><span class="hs-comment">-- Important: add at the end.</span><span>
</span><span id="line-720"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><a href="#local-6989586621682148595"><span class="hs-identifier hs-type">cl</span></a></span><span>
</span><span id="line-721"></span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#inferMissingClause"><span class="hs-identifier hs-var">inferMissingClause</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitClause.html#SClause"><span class="hs-identifier hs-type">SClause</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Substitution' SplitPattern
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Map CheckpointId (Substitution' Term)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Maybe (Dom Type)
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TCM Clause
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span>
</span><span id="line-722"></span><span>
</span><span id="line-723"></span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#splitStrategy"><span class="hs-identifier hs-type">splitStrategy</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.Match.html#BlockingVars"><span class="hs-identifier hs-type">BlockingVars</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Telescope"><span class="hs-identifier hs-type">Telescope</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">TCM</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.Match.html#BlockingVars"><span class="hs-identifier hs-type">BlockingVars</span></a></span><span>
</span><span id="line-724"></span><span id="splitStrategy"><span class="annot"><span class="annottext">splitStrategy :: BlockingVars -&gt; Telescope -&gt; TCM BlockingVars
</span><a href="Agda.TypeChecking.Coverage.html#splitStrategy"><span class="hs-identifier hs-var hs-var">splitStrategy</span></a></span></span><span> </span><span id="local-6989586621682148598"><span class="annot"><span class="annottext">BlockingVars
</span><a href="#local-6989586621682148598"><span class="hs-identifier hs-var">bs</span></a></span></span><span> </span><span id="local-6989586621682148599"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682148599"><span class="hs-identifier hs-var">tel</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BlockingVars -&gt; TCM BlockingVars
forall a. a -&gt; TCMT IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(BlockingVars -&gt; TCM BlockingVars)
-&gt; BlockingVars -&gt; TCM BlockingVars
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(BlockingVar -&gt; BlockingVar) -&gt; BlockingVars -&gt; BlockingVars
forall a. (a -&gt; a) -&gt; [a] -&gt; [a]
</span><a href="Agda.Utils.List.html#updateLast"><span class="hs-identifier hs-var">updateLast</span></a></span><span> </span><span class="annot"><span class="annottext">BlockingVar -&gt; BlockingVar
</span><a href="Agda.TypeChecking.Coverage.Match.html#setBlockingVarOverlap"><span class="hs-identifier hs-var">setBlockingVarOverlap</span></a></span><span> </span><span class="annot"><span class="annottext">BlockingVars
</span><a href="#local-6989586621682148602"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-725"></span><span>  </span><span class="hs-comment">-- Make sure we do not insists on precomputed coverage when</span><span>
</span><span id="line-726"></span><span>  </span><span class="hs-comment">-- we make our last try to split.</span><span>
</span><span id="line-727"></span><span>  </span><span class="hs-comment">-- Otherwise, we will not get a nice error message.</span><span>
</span><span id="line-728"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-729"></span><span>    </span><span id="local-6989586621682148602"><span class="annot"><span class="annottext">xs :: BlockingVars
</span><a href="#local-6989586621682148602"><span class="hs-identifier hs-var hs-var">xs</span></a></span></span><span>             </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BlockingVars
</span><a href="#local-6989586621682148603"><span class="hs-identifier hs-var">strict</span></a></span><span> </span><span class="annot"><span class="annottext">BlockingVars -&gt; BlockingVars -&gt; BlockingVars
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">BlockingVars
</span><a href="#local-6989586621682148604"><span class="hs-identifier hs-var">lazy</span></a></span><span>
</span><span id="line-730"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621682148604"><span class="annot"><span class="annottext">BlockingVars
</span><a href="#local-6989586621682148604"><span class="hs-identifier hs-var">lazy</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682148603"><span class="annot"><span class="annottext">BlockingVars
</span><a href="#local-6989586621682148603"><span class="hs-identifier hs-var">strict</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(BlockingVar -&gt; Bool)
-&gt; BlockingVars -&gt; (BlockingVars, BlockingVars)
forall a. (a -&gt; Bool) -&gt; [a] -&gt; ([a], [a])
</span><span class="hs-identifier hs-var">List.partition</span></span><span> </span><span class="annot"><span class="annottext">BlockingVar -&gt; Bool
</span><a href="Agda.TypeChecking.Coverage.Match.html#blockingVarLazy"><span class="hs-identifier hs-var">blockingVarLazy</span></a></span><span> </span><span class="annot"><span class="annottext">BlockingVars
</span><a href="#local-6989586621682148598"><span class="hs-identifier hs-var">bs</span></a></span><span>
</span><span id="line-731"></span><span class="hs-comment">{- KEEP!
--  Andreas, 2012-10-13
--  The following split strategy which prefers all-constructor columns
--  fails on test/fail/CoverStrategy
    xs       = ys ++ zs
    (ys, zs) = partition allConstructors bs
    allConstructors :: BlockingVar -&gt; Bool
    allConstructors = isJust . snd
-}</span><span>
</span><span id="line-740"></span><span>
</span><span id="line-741"></span><span>
</span><span id="line-742"></span><span class="hs-comment">-- | Check that a type is a non-irrelevant datatype or a record with</span><span>
</span><span id="line-743"></span><span class="hs-comment">-- named constructor. Unless the 'Induction' argument is 'CoInductive'</span><span>
</span><span id="line-744"></span><span class="hs-comment">-- the data type must be inductive.</span><span>
</span><span id="line-745"></span><span id="local-6989586621682146064"><span class="annot"><a href="Agda.TypeChecking.Coverage.html#isDatatype"><span class="hs-identifier hs-type">isDatatype</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#MonadTCM"><span class="hs-identifier hs-type">MonadTCM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682146064"><span class="hs-identifier hs-type">tcm</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadError</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#SplitError"><span class="hs-identifier hs-type">SplitError</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682146064"><span class="hs-identifier hs-type">tcm</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-746"></span><span>              </span><span class="annot"><a href="Agda.Syntax.Common.Aspect.html#Induction"><span class="hs-identifier hs-type">Induction</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Dom"><span class="hs-identifier hs-type">Dom</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-747"></span><span>              </span><span class="annot"><a href="#local-6989586621682146064"><span class="hs-identifier hs-type">tcm</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Rules.LHS.html#DataOrRecord"><span class="hs-identifier hs-type">DataOrRecord</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Abstract.Name.html#QName"><span class="hs-identifier hs-type">QName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Sort"><span class="hs-identifier hs-type">Sort</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Args"><span class="hs-identifier hs-type">Args</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Args"><span class="hs-identifier hs-type">Args</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.Syntax.Abstract.Name.html#QName"><span class="hs-identifier hs-type">QName</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">)</span></span><span>
</span><span id="line-748"></span><span id="isDatatype"><span class="annot"><span class="annottext">isDatatype :: forall (tcm :: * -&gt; *).
(MonadTCM tcm, MonadError SplitError tcm) =&gt;
Induction
-&gt; Dom Type
-&gt; tcm (DataOrRecord, QName, Sort, Args, Args, [QName], Bool)
</span><a href="Agda.TypeChecking.Coverage.html#isDatatype"><span class="hs-identifier hs-var hs-var">isDatatype</span></a></span></span><span> </span><span id="local-6989586621682148665"><span class="annot"><span class="annottext">Induction
</span><a href="#local-6989586621682148665"><span class="hs-identifier hs-var">ind</span></a></span></span><span> </span><span id="local-6989586621682148666"><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621682148666"><span class="hs-identifier hs-var">at</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-749"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682148667"><span class="annot"><span class="annottext">t :: Type
</span><a href="#local-6989586621682148667"><span class="hs-identifier hs-var hs-var hs-var">t</span></a></span></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Dom Type -&gt; Type
forall t e. Dom' t e -&gt; e
</span><a href="Agda.Syntax.Internal.html#unDom"><span class="hs-identifier hs-var">unDom</span></a></span><span> </span><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621682148666"><span class="hs-identifier hs-var">at</span></a></span><span>
</span><span id="line-750"></span><span>      </span><span id="local-6989586621682148668"><span class="annot"><span class="annottext">throw :: (Closure Type -&gt; SplitError)
-&gt; tcm (DataOrRecord, QName, Sort, Args, Args, [QName], Bool)
</span><a href="#local-6989586621682148668"><span class="hs-identifier hs-var hs-var hs-var">throw</span></a></span></span><span> </span><span id="local-6989586621682148669"><span class="annot"><span class="annottext">Closure Type -&gt; SplitError
</span><a href="#local-6989586621682148669"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SplitError
-&gt; tcm (DataOrRecord, QName, Sort, Args, Args, [QName], Bool)
forall a. SplitError -&gt; tcm a
forall e (m :: * -&gt; *) a. MonadError e m =&gt; e -&gt; m a
</span><span class="hs-identifier hs-var">throwError</span></span><span> </span><span class="annot"><span class="annottext">(SplitError
 -&gt; tcm (DataOrRecord, QName, Sort, Args, Args, [QName], Bool))
-&gt; (Closure Type -&gt; SplitError)
-&gt; Closure Type
-&gt; tcm (DataOrRecord, QName, Sort, Args, Args, [QName], Bool)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Closure Type -&gt; SplitError
</span><a href="#local-6989586621682148669"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">(Closure Type
 -&gt; tcm (DataOrRecord, QName, Sort, Args, Args, [QName], Bool))
-&gt; tcm (Closure Type)
-&gt; tcm (DataOrRecord, QName, Sort, Args, Args, [QName], Bool)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">=&lt;&lt;</span></span><span> </span><span class="hs-keyword">do</span><span> </span><span class="annot"><span class="annottext">TCM (Closure Type) -&gt; tcm (Closure Type)
forall a. TCM a -&gt; tcm a
forall (tcm :: * -&gt; *) a. MonadTCM tcm =&gt; TCM a -&gt; tcm a
</span><a href="Agda.TypeChecking.Monad.Base.html#liftTCM"><span class="hs-identifier hs-var">liftTCM</span></a></span><span> </span><span class="annot"><span class="annottext">(TCM (Closure Type) -&gt; tcm (Closure Type))
-&gt; TCM (Closure Type) -&gt; tcm (Closure Type)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; TCM (Closure Type)
forall (m :: * -&gt; *) a.
(MonadTCEnv m, ReadTCState m) =&gt;
a -&gt; m (Closure a)
</span><a href="Agda.TypeChecking.Monad.Base.html#buildClosure"><span class="hs-identifier hs-var">buildClosure</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682148667"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-751"></span><span>  </span><span id="local-6989586621682148674"><span class="annot"><a href="#local-6989586621682148674"><span class="hs-identifier hs-var">t'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TCM Type -&gt; tcm Type
forall a. TCM a -&gt; tcm a
forall (tcm :: * -&gt; *) a. MonadTCM tcm =&gt; TCM a -&gt; tcm a
</span><a href="Agda.TypeChecking.Monad.Base.html#liftTCM"><span class="hs-identifier hs-var">liftTCM</span></a></span><span> </span><span class="annot"><span class="annottext">(TCM Type -&gt; tcm Type) -&gt; TCM Type -&gt; tcm Type
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; TCM Type
forall a (m :: * -&gt; *). (Reduce a, MonadReduce m) =&gt; a -&gt; m a
</span><a href="Agda.TypeChecking.Reduce.html#reduce"><span class="hs-identifier hs-var">reduce</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682148667"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-752"></span><span>  </span><span id="local-6989586621682148676"><span class="annot"><a href="#local-6989586621682148676"><span class="hs-identifier hs-var">mInterval</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#liftTCM"><span class="hs-identifier hs-type">liftTCM</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Builtin.html#getBuiltinName%27"><span class="hs-identifier hs-type">getBuiltinName'</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Builtin.html#builtinInterval"><span class="hs-identifier hs-type">builtinInterval</span></a></span><span>
</span><span id="line-753"></span><span>  </span><span id="local-6989586621682148679"><span class="annot"><a href="#local-6989586621682148679"><span class="hs-identifier hs-var">mIsOne</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#liftTCM"><span class="hs-identifier hs-type">liftTCM</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Builtin.html#getBuiltinName%27"><span class="hs-identifier hs-type">getBuiltinName'</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Builtin.html#builtinIsOne"><span class="hs-identifier hs-type">builtinIsOne</span></a></span><span>
</span><span id="line-754"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#unEl"><span class="hs-identifier hs-var">unEl</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148674"><span class="hs-identifier hs-type">t'</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-755"></span><span>    </span><span class="annot"><a href="Agda.Syntax.Internal.html#Def"><span class="hs-identifier hs-type">Def</span></a></span><span> </span><span id="local-6989586621682148683"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621682148683"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">QName -&gt; Maybe QName
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621682148683"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe QName -&gt; Maybe QName -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Maybe QName
</span><a href="#local-6989586621682148676"><span class="hs-identifier hs-var">mInterval</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Closure Type -&gt; SplitError)
-&gt; tcm (DataOrRecord, QName, Sort, Args, Args, [QName], Bool)
</span><a href="#local-6989586621682148668"><span class="hs-identifier hs-var">throw</span></a></span><span> </span><span class="annot"><span class="annottext">Closure Type -&gt; SplitError
</span><a href="Agda.TypeChecking.Monad.Base.html#NotADatatype"><span class="hs-identifier hs-var">NotADatatype</span></a></span><span>
</span><span id="line-756"></span><span>    </span><span class="annot"><a href="Agda.Syntax.Internal.html#Def"><span class="hs-identifier hs-type">Def</span></a></span><span> </span><span id="local-6989586621682148685"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621682148685"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.Syntax.Internal.Elim.html#Apply"><span class="hs-identifier hs-type">Apply</span></a></span><span> </span><span id="local-6989586621682148687"><span class="annot"><span class="annottext">Arg Term
</span><a href="#local-6989586621682148687"><span class="hs-identifier hs-var">phi</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">QName -&gt; Maybe QName
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621682148685"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe QName -&gt; Maybe QName -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Maybe QName
</span><a href="#local-6989586621682148679"><span class="hs-identifier hs-var">mIsOne</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-757"></span><span>                </span><span id="local-6989586621682148688"><span class="annot"><a href="#local-6989586621682148688"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TCM [(IntMap Bool, [Term])] -&gt; tcm [(IntMap Bool, [Term])]
forall a. TCM a -&gt; tcm a
forall (tcm :: * -&gt; *) a. MonadTCM tcm =&gt; TCM a -&gt; tcm a
</span><a href="Agda.TypeChecking.Monad.Base.html#liftTCM"><span class="hs-identifier hs-var">liftTCM</span></a></span><span> </span><span class="annot"><span class="annottext">(TCM [(IntMap Bool, [Term])] -&gt; tcm [(IntMap Bool, [Term])])
-&gt; TCM [(IntMap Bool, [Term])] -&gt; tcm [(IntMap Bool, [Term])]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Term -&gt; TCM [(IntMap Bool, [Term])]
forall (m :: * -&gt; *).
HasBuiltins m =&gt;
Term -&gt; m [(IntMap Bool, [Term])]
</span><a href="Agda.TypeChecking.Primitive.Cubical.Base.html#decomposeInterval"><span class="hs-identifier hs-var">decomposeInterval</span></a></span><span> </span><span class="annot"><span class="annottext">(Term -&gt; TCM [(IntMap Bool, [Term])])
-&gt; TCMT IO Term -&gt; TCM [(IntMap Bool, [Term])]
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">=&lt;&lt;</span></span><span> </span><span class="annot"><span class="annottext">Term -&gt; TCMT IO Term
forall a (m :: * -&gt; *). (Reduce a, MonadReduce m) =&gt; a -&gt; m a
</span><a href="Agda.TypeChecking.Reduce.html#reduce"><span class="hs-identifier hs-var">reduce</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Arg Term -&gt; Term
forall e. Arg e -&gt; e
</span><a href="Agda.Syntax.Common.html#unArg"><span class="hs-identifier hs-var">unArg</span></a></span><span> </span><span class="annot"><span class="annottext">Arg Term
</span><a href="#local-6989586621682148687"><span class="hs-identifier hs-var">phi</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-758"></span><span>                </span><span class="hs-keyword">if</span><span> </span><span class="annot"><a href="Agda.Utils.Null.html#null"><span class="hs-identifier hs-type">null</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148688"><span class="hs-identifier hs-type">xs</span></a></span><span>
</span><span id="line-759"></span><span>                   </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#IsData"><span class="hs-identifier hs-type">IsData</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621682148685"><span class="hs-identifier hs-type">d</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#mkSSet"><span class="hs-identifier hs-type">mkSSet</span></a></span><span> </span><span class="annot"><span class="hs-number">0</span></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621682148687"><span class="hs-identifier hs-type">phi</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">False</span></span><span class="hs-special">)</span><span>
</span><span id="line-760"></span><span>                   </span><span class="hs-keyword">else</span><span> </span><span class="annot"><a href="#local-6989586621682148668"><span class="hs-identifier hs-type">throw</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#NotADatatype"><span class="hs-identifier hs-type">NotADatatype</span></a></span><span>
</span><span id="line-761"></span><span>    </span><span class="annot"><a href="Agda.Syntax.Internal.html#Def"><span class="hs-identifier hs-type">Def</span></a></span><span> </span><span id="local-6989586621682148692"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621682148692"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span id="local-6989586621682148693"><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621682148693"><span class="hs-identifier hs-var">es</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-762"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span class="hs-glyph">~</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621682148694"><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621682148694"><span class="hs-identifier hs-var hs-var">args</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Elims -&gt; Maybe Args
forall a. [Elim' a] -&gt; Maybe [Arg a]
</span><a href="Agda.Syntax.Internal.Elim.html#allApplyElims"><span class="hs-identifier hs-var">allApplyElims</span></a></span><span> </span><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621682148693"><span class="hs-identifier hs-var">es</span></a></span><span>
</span><span id="line-763"></span><span>      </span><span id="local-6989586621682148696"><span class="annot"><a href="#local-6989586621682148696"><span class="hs-identifier hs-var">def</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TCM Definition -&gt; tcm Definition
forall a. TCM a -&gt; tcm a
forall (tcm :: * -&gt; *) a. MonadTCM tcm =&gt; TCM a -&gt; tcm a
</span><a href="Agda.TypeChecking.Monad.Base.html#liftTCM"><span class="hs-identifier hs-var">liftTCM</span></a></span><span> </span><span class="annot"><span class="annottext">(TCM Definition -&gt; tcm Definition)
-&gt; TCM Definition -&gt; tcm Definition
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">QName -&gt; TCM Definition
forall (m :: * -&gt; *). HasConstInfo m =&gt; QName -&gt; m Definition
</span><a href="Agda.TypeChecking.Monad.Signature.html#getConstInfo"><span class="hs-identifier hs-var">getConstInfo</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621682148692"><span class="hs-identifier hs-var">d</span></a></span><span>
</span><span id="line-764"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#theDef"><span class="hs-identifier hs-var">theDef</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148696"><span class="hs-identifier hs-type">def</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-765"></span><span>        </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#Datatype"><span class="hs-identifier hs-type">Datatype</span></a></span><span class="hs-special">{</span><span class="annot"><span class="annottext">dataSort :: Defn -&gt; Sort
</span><a href="Agda.TypeChecking.Monad.Base.html#dataSort"><span class="hs-identifier hs-var">dataSort</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682148701"><span class="annot"><span class="annottext">Sort
</span><a href="#local-6989586621682148701"><span class="hs-identifier hs-var">s</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dataPars :: Defn -&gt; Int
</span><a href="Agda.TypeChecking.Monad.Base.html#dataPars"><span class="hs-identifier hs-var">dataPars</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682148703"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682148703"><span class="hs-identifier hs-var">np</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dataCons :: Defn -&gt; [QName]
</span><a href="Agda.TypeChecking.Monad.Base.html#dataCons"><span class="hs-identifier hs-var">dataCons</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682148705"><span class="annot"><span class="annottext">[QName]
</span><a href="#local-6989586621682148705"><span class="hs-identifier hs-var">cs</span></a></span></span><span class="hs-special">}</span><span>
</span><span id="line-766"></span><span>          </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-767"></span><span>              </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682148706"><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621682148706"><span class="hs-identifier hs-var">ps</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682148707"><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621682148707"><span class="hs-identifier hs-var">is</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Args -&gt; (Args, Args)
forall a. Int -&gt; [a] -&gt; ([a], [a])
</span><span class="hs-identifier hs-var">splitAt</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682148703"><span class="hs-identifier hs-var">np</span></a></span><span> </span><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621682148694"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-768"></span><span>              </span><span class="annot"><span class="annottext">(DataOrRecord, QName, Sort, Args, Args, [QName], Bool)
-&gt; tcm (DataOrRecord, QName, Sort, Args, Args, [QName], Bool)
forall a. a -&gt; tcm a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DataOrRecord
forall p. DataOrRecord' p
</span><a href="Agda.Syntax.Internal.html#IsData"><span class="hs-identifier hs-var">IsData</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621682148692"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Sort
</span><a href="#local-6989586621682148701"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621682148706"><span class="hs-identifier hs-var">ps</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621682148707"><span class="hs-identifier hs-var">is</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[QName]
</span><a href="#local-6989586621682148705"><span class="hs-identifier hs-var">cs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; Bool) -&gt; Bool -&gt; Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[QName] -&gt; Bool
forall a. Null a =&gt; a -&gt; Bool
</span><a href="Agda.Utils.Null.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Defn -&gt; [QName]
</span><a href="Agda.TypeChecking.Monad.Base.html#dataPathCons"><span class="hs-identifier hs-var">dataPathCons</span></a></span><span> </span><span class="annot"><span class="annottext">(Defn -&gt; [QName]) -&gt; Defn -&gt; [QName]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Definition -&gt; Defn
</span><a href="Agda.TypeChecking.Monad.Base.html#theDef"><span class="hs-identifier hs-var">theDef</span></a></span><span> </span><span class="annot"><span class="annottext">Definition
</span><a href="#local-6989586621682148696"><span class="hs-identifier hs-var">def</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-769"></span><span>        </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#Record"><span class="hs-identifier hs-type">Record</span></a></span><span class="hs-special">{</span><span class="annot"><span class="annottext">recPars :: Defn -&gt; Int
</span><a href="Agda.TypeChecking.Monad.Base.html#recPars"><span class="hs-identifier hs-var">recPars</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682148712"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682148712"><span class="hs-identifier hs-var">np</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">recConHead :: Defn -&gt; ConHead
</span><a href="Agda.TypeChecking.Monad.Base.html#recConHead"><span class="hs-identifier hs-var">recConHead</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682148714"><span class="annot"><span class="annottext">ConHead
</span><a href="#local-6989586621682148714"><span class="hs-identifier hs-var">con</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">recInduction :: Defn -&gt; Maybe Induction
</span><a href="Agda.TypeChecking.Monad.Base.html#recInduction"><span class="hs-identifier hs-var">recInduction</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682148716"><span class="annot"><span class="annottext">Maybe Induction
</span><a href="#local-6989586621682148716"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682148717"><span class="annot"><span class="annottext">EtaEquality
recEtaEquality' :: EtaEquality
recEtaEquality' :: Defn -&gt; EtaEquality
</span><a href="#local-6989586621682148717"><span class="hs-identifier hs-var hs-var">recEtaEquality'</span></a></span></span><span class="hs-special">}</span><span>
</span><span id="line-770"></span><span>          </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Maybe Induction
</span><a href="#local-6989586621682148716"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Induction -&gt; Maybe Induction -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Induction -&gt; Maybe Induction
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Induction
</span><a href="Agda.Syntax.Common.Aspect.html#CoInductive"><span class="hs-identifier hs-var">CoInductive</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Induction
</span><a href="#local-6989586621682148665"><span class="hs-identifier hs-var">ind</span></a></span><span> </span><span class="annot"><span class="annottext">Induction -&gt; Induction -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">/=</span></span><span> </span><span class="annot"><span class="annottext">Induction
</span><a href="Agda.Syntax.Common.Aspect.html#CoInductive"><span class="hs-identifier hs-var">CoInductive</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-771"></span><span>              </span><span class="annot"><span class="annottext">(Closure Type -&gt; SplitError)
-&gt; tcm (DataOrRecord, QName, Sort, Args, Args, [QName], Bool)
</span><a href="#local-6989586621682148668"><span class="hs-identifier hs-var">throw</span></a></span><span> </span><span class="annot"><span class="annottext">Closure Type -&gt; SplitError
</span><a href="Agda.TypeChecking.Monad.Base.html#CoinductiveDatatype"><span class="hs-identifier hs-var">CoinductiveDatatype</span></a></span><span>
</span><span id="line-772"></span><span>          </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-773"></span><span>              </span><span id="local-6989586621682148720"><span class="annot"><a href="#local-6989586621682148720"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TCM Sort -&gt; tcm Sort
forall a. TCM a -&gt; tcm a
forall (tcm :: * -&gt; *) a. MonadTCM tcm =&gt; TCM a -&gt; tcm a
</span><a href="Agda.TypeChecking.Monad.Base.html#liftTCM"><span class="hs-identifier hs-var">liftTCM</span></a></span><span> </span><span class="annot"><span class="annottext">(TCM Sort -&gt; tcm Sort) -&gt; TCM Sort -&gt; tcm Sort
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; TCM Sort
forall (m :: * -&gt; *).
(PureTCM m, MonadBlock m, MonadError TCErr m) =&gt;
Type -&gt; m Sort
</span><a href="Agda.TypeChecking.Sort.html#shouldBeSort"><span class="hs-identifier hs-var">shouldBeSort</span></a></span><span> </span><span class="annot"><span class="annottext">(Type -&gt; TCM Sort) -&gt; TCM Type -&gt; TCM Sort
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">=&lt;&lt;</span></span><span> </span><span class="annot"><span class="annottext">Definition -&gt; Type
</span><a href="Agda.TypeChecking.Monad.Base.html#defType"><span class="hs-identifier hs-var">defType</span></a></span><span> </span><span class="annot"><span class="annottext">Definition
</span><a href="#local-6989586621682148696"><span class="hs-identifier hs-var">def</span></a></span><span> </span><span class="annot"><span class="annottext">Type -&gt; Args -&gt; TCM Type
forall a (m :: * -&gt; *).
(PiApplyM a, MonadReduce m, HasBuiltins m) =&gt;
Type -&gt; a -&gt; m Type
forall (m :: * -&gt; *).
(MonadReduce m, HasBuiltins m) =&gt;
Type -&gt; Args -&gt; m Type
</span><a href="Agda.TypeChecking.Telescope.html#piApplyM"><span class="hs-operator hs-var">`piApplyM`</span></a></span><span> </span><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621682148694"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-774"></span><span>              </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#IsRecord"><span class="hs-identifier hs-type">IsRecord</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#InductionAndEta"><span class="hs-identifier hs-type">InductionAndEta</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#recordInduction"><span class="hs-identifier hs-var">recordInduction</span></a></span><span class="hs-glyph">=</span><span class="annot"><a href="#local-6989586621682148716"><span class="hs-identifier hs-type">i</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#recordEtaEquality"><span class="hs-identifier hs-var">recordEtaEquality</span></a></span><span class="hs-glyph">=</span><span class="annot"><a href="#local-6989586621682148717"><span class="hs-identifier hs-type">recEtaEquality'</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621682148692"><span class="hs-identifier hs-type">d</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621682148720"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621682148694"><span class="hs-identifier hs-type">args</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.Syntax.Internal.html#conName"><span class="hs-identifier hs-var">conName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148714"><span class="hs-identifier hs-type">con</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">False</span></span><span class="hs-special">)</span><span>
</span><span id="line-775"></span><span>        </span><span class="annot"><span class="annottext">Defn
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Closure Type -&gt; SplitError)
-&gt; tcm (DataOrRecord, QName, Sort, Args, Args, [QName], Bool)
</span><a href="#local-6989586621682148668"><span class="hs-identifier hs-var">throw</span></a></span><span> </span><span class="annot"><span class="annottext">Closure Type -&gt; SplitError
</span><a href="Agda.TypeChecking.Monad.Base.html#NotADatatype"><span class="hs-identifier hs-var">NotADatatype</span></a></span><span>
</span><span id="line-776"></span><span>    </span><span class="annot"><span class="annottext">Term
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Closure Type -&gt; SplitError)
-&gt; tcm (DataOrRecord, QName, Sort, Args, Args, [QName], Bool)
</span><a href="#local-6989586621682148668"><span class="hs-identifier hs-var">throw</span></a></span><span> </span><span class="annot"><span class="annottext">Closure Type -&gt; SplitError
</span><a href="Agda.TypeChecking.Monad.Base.html#NotADatatype"><span class="hs-identifier hs-var">NotADatatype</span></a></span><span>
</span><span id="line-777"></span><span>
</span><span id="line-778"></span><span class="annot"><span class="hs-comment">-- | Update the target type of the split clause after a case split.</span></span><span>
</span><span id="line-779"></span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#fixTargetType"><span class="hs-identifier hs-type">fixTargetType</span></a></span><span>
</span><span id="line-780"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html#Quantity"><span class="hs-identifier hs-type">Quantity</span></a></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ The quantity of the thing that is split.</span></span><span>
</span><span id="line-781"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitTree.html#SplitTag"><span class="hs-identifier hs-type">SplitTag</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitClause.html#SplitClause"><span class="hs-identifier hs-type">SplitClause</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Dom"><span class="hs-identifier hs-type">Dom</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">TCM</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitClause.html#SplitClause"><span class="hs-identifier hs-type">SplitClause</span></a></span><span>
</span><span id="line-782"></span><span id="fixTargetType"><span class="annot"><span class="annottext">fixTargetType :: Quantity
-&gt; SplitTag -&gt; SplitClause -&gt; Dom Type -&gt; TCMT IO SplitClause
</span><a href="Agda.TypeChecking.Coverage.html#fixTargetType"><span class="hs-identifier hs-var hs-var">fixTargetType</span></a></span></span><span> </span><span id="local-6989586621682148729"><span class="annot"><span class="annottext">Quantity
</span><a href="#local-6989586621682148729"><span class="hs-identifier hs-var">q</span></a></span></span><span> </span><span id="local-6989586621682148730"><span class="annot"><span class="annottext">SplitTag
</span><a href="#local-6989586621682148730"><span class="hs-identifier hs-var">tag</span></a></span></span><span> </span><span id="local-6989586621682148731"><span class="annot"><span class="annottext">sc :: SplitClause
</span><a href="#local-6989586621682148731"><span class="hs-identifier hs-var">sc</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitClause.html#SClause"><span class="hs-identifier hs-type">SClause</span></a></span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">scTel :: SplitClause -&gt; Telescope
</span><a href="Agda.TypeChecking.Coverage.SplitClause.html#scTel"><span class="hs-identifier hs-var">scTel</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682148732"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682148732"><span class="hs-identifier hs-var">sctel</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">scSubst :: SplitClause -&gt; Substitution' SplitPattern
</span><a href="Agda.TypeChecking.Coverage.SplitClause.html#scSubst"><span class="hs-identifier hs-var">scSubst</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682148733"><span class="annot"><span class="annottext">Substitution' SplitPattern
</span><a href="#local-6989586621682148733"><span class="hs-identifier hs-var">sigma</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span id="local-6989586621682148734"><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621682148734"><span class="hs-identifier hs-var">target</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-783"></span><span>    </span><span class="annot"><span class="annottext">PatVarName -&gt; Int -&gt; TCMT IO Doc -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
PatVarName -&gt; Int -&gt; TCMT IO Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">PatVarName
</span><span class="hs-string">&quot;tc.cover.target&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">20</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; TCMT IO ()) -&gt; TCMT IO Doc -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[TCMT IO Doc] -&gt; TCMT IO Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span>
</span><span id="line-784"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;split clause telescope: &quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; Telescope -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682148732"><span class="hs-identifier hs-var">sctel</span></a></span><span>
</span><span id="line-785"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-786"></span><span>    </span><span class="annot"><span class="annottext">PatVarName -&gt; Int -&gt; TCMT IO Doc -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
PatVarName -&gt; Int -&gt; TCMT IO Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">PatVarName
</span><span class="hs-string">&quot;tc.cover.target&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">60</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; TCMT IO ()) -&gt; TCMT IO Doc -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[TCMT IO Doc] -&gt; TCMT IO Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span>
</span><span id="line-787"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;substitution          : &quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' SplitPattern -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *).
MonadPretty m =&gt;
Substitution' SplitPattern -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' SplitPattern
</span><a href="#local-6989586621682148733"><span class="hs-identifier hs-var">sigma</span></a></span><span>
</span><span id="line-788"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-789"></span><span>    </span><span class="annot"><span class="annottext">PatVarName -&gt; Int -&gt; TCMT IO Doc -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
PatVarName -&gt; Int -&gt; TCMT IO Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">PatVarName
</span><span class="hs-string">&quot;tc.cover.target&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">60</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; TCMT IO ()) -&gt; TCMT IO Doc -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[TCMT IO Doc] -&gt; TCMT IO Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span>
</span><span id="line-790"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;target type before substitution:&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Dom Type -&gt; TCMT IO Doc
forall (m :: * -&gt; *) a. (Applicative m, Pretty a) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#pretty"><span class="hs-identifier hs-var">pretty</span></a></span><span> </span><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621682148734"><span class="hs-identifier hs-var">target</span></a></span><span>
</span><span id="line-791"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;             after substitution:&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Dom Type -&gt; TCMT IO Doc
forall (m :: * -&gt; *) a. (Applicative m, Pretty a) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#pretty"><span class="hs-identifier hs-var">pretty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Substitution' SplitPattern -&gt; Dom Type -&gt; Dom Type
forall a. TermSubst a =&gt; Substitution' SplitPattern -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Coverage.SplitPattern.html#applySplitPSubst"><span class="hs-identifier hs-var">applySplitPSubst</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' SplitPattern
</span><a href="#local-6989586621682148733"><span class="hs-identifier hs-var">sigma</span></a></span><span> </span><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621682148734"><span class="hs-identifier hs-var">target</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-792"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-793"></span><span>
</span><span id="line-794"></span><span>    </span><span class="hs-comment">-- We update the target quantity to 0 for erased constructors, but</span><span>
</span><span id="line-795"></span><span>    </span><span class="hs-comment">-- not if the match is made in an erased position, or if the</span><span>
</span><span id="line-796"></span><span>    </span><span class="hs-comment">-- original constructor definition is not erased.</span><span>
</span><span id="line-797"></span><span>    </span><span id="local-6989586621682148736"><span class="annot"><a href="#local-6989586621682148736"><span class="hs-identifier hs-var">updQuant</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-798"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682148737"><span class="annot"><span class="annottext">erased :: Bool
</span><a href="#local-6989586621682148737"><span class="hs-identifier hs-var hs-var">erased</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Quantity
</span><a href="#local-6989586621682148729"><span class="hs-identifier hs-var">q</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-799"></span><span>            </span><span class="annot"><a href="Agda.Syntax.Common.html#Quantity0"><span class="hs-identifier hs-type">Quantity0</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-800"></span><span>            </span><span class="annot"><a href="Agda.Syntax.Common.html#Quantity1"><span class="hs-identifier hs-type">Quantity1</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span>
</span><span id="line-801"></span><span>            </span><span class="annot"><a href="Agda.Syntax.Common.html#Quantity%3C9"><span class="hs-identifier hs-type">Quantity&#969;</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-802"></span><span>      </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682148737"><span class="hs-identifier hs-var">erased</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">(Dom Type -&gt; Dom Type) -&gt; TCMT IO (Dom Type -&gt; Dom Type)
forall a. a -&gt; TCMT IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Dom Type -&gt; Dom Type
forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">SplitTag
</span><a href="#local-6989586621682148730"><span class="hs-identifier hs-var">tag</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-803"></span><span>        </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitTree.html#SplitCon"><span class="hs-identifier hs-type">SplitCon</span></a></span><span> </span><span id="local-6989586621682148742"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621682148742"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-804"></span><span>          </span><span id="local-6989586621682148743"><span class="annot"><a href="#local-6989586621682148743"><span class="hs-identifier hs-var">q</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Definition -&gt; Quantity
forall a. LensQuantity a =&gt; a -&gt; Quantity
</span><a href="Agda.Syntax.Common.html#getQuantity"><span class="hs-identifier hs-var">getQuantity</span></a></span><span> </span><span class="annot"><span class="annottext">(Definition -&gt; Quantity) -&gt; TCM Definition -&gt; TCMT IO Quantity
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">QName -&gt; TCM Definition
forall (m :: * -&gt; *).
(ReadTCState m, HasConstInfo m) =&gt;
QName -&gt; m Definition
</span><a href="Agda.TypeChecking.Monad.Signature.html#getOriginalConstInfo"><span class="hs-identifier hs-var">getOriginalConstInfo</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621682148742"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-805"></span><span>          </span><span class="hs-keyword">case</span><span> </span><span class="annot"><a href="#local-6989586621682148743"><span class="hs-identifier hs-type">q</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-806"></span><span>            </span><span class="annot"><a href="Agda.Syntax.Common.html#Quantity0"><span class="hs-identifier hs-type">Quantity0</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Dom Type -&gt; Dom Type) -&gt; TCMT IO (Dom Type -&gt; Dom Type)
forall a. a -&gt; TCMT IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">((Dom Type -&gt; Dom Type) -&gt; TCMT IO (Dom Type -&gt; Dom Type))
-&gt; (Dom Type -&gt; Dom Type) -&gt; TCMT IO (Dom Type -&gt; Dom Type)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Quantity -&gt; Quantity) -&gt; Dom Type -&gt; Dom Type
forall a. LensQuantity a =&gt; (Quantity -&gt; Quantity) -&gt; a -&gt; a
</span><a href="Agda.Syntax.Common.html#mapQuantity"><span class="hs-identifier hs-var">mapQuantity</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Quantity -&gt; Quantity -&gt; Quantity
</span><a href="Agda.Syntax.Common.html#composeQuantity"><span class="hs-identifier hs-var">composeQuantity</span></a></span><span> </span><span class="annot"><span class="annottext">Quantity
</span><a href="#local-6989586621682148743"><span class="hs-identifier hs-var">q</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-807"></span><span>            </span><span class="annot"><a href="Agda.Syntax.Common.html#Quantity1"><span class="hs-identifier hs-type">Quantity1</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Dom Type -&gt; Dom Type) -&gt; TCMT IO (Dom Type -&gt; Dom Type)
forall a. a -&gt; TCMT IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Dom Type -&gt; Dom Type
forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span>
</span><span id="line-808"></span><span>            </span><span class="annot"><a href="Agda.Syntax.Common.html#Quantity%3C9"><span class="hs-identifier hs-type">Quantity&#969;</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Dom Type -&gt; Dom Type) -&gt; TCMT IO (Dom Type -&gt; Dom Type)
forall a. a -&gt; TCMT IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Dom Type -&gt; Dom Type
forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span>
</span><span id="line-809"></span><span>        </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitTree.html#SplitLit"><span class="hs-identifier hs-type">SplitLit</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Dom Type -&gt; Dom Type) -&gt; TCMT IO (Dom Type -&gt; Dom Type)
forall a. a -&gt; TCMT IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Dom Type -&gt; Dom Type
forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span>
</span><span id="line-810"></span><span>        </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitTree.html#SplitCatchall"><span class="hs-identifier hs-type">SplitCatchall</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Dom Type -&gt; Dom Type) -&gt; TCMT IO (Dom Type -&gt; Dom Type)
forall a. a -&gt; TCMT IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Dom Type -&gt; Dom Type
forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span>
</span><span id="line-811"></span><span>
</span><span id="line-812"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="#local-6989586621682148731"><span class="hs-identifier hs-type">sc</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitClause.html#scTarget"><span class="hs-identifier hs-var">scTarget</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="#local-6989586621682148736"><span class="hs-identifier hs-type">updQuant</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitPattern.html#applySplitPSubst"><span class="hs-identifier hs-type">applySplitPSubst</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148733"><span class="hs-identifier hs-type">sigma</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148734"><span class="hs-identifier hs-type">target</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-813"></span><span>
</span><span id="line-814"></span><span>
</span><span id="line-815"></span><span class="hs-comment">-- | Add more patterns to split clause if the target type is a function type.</span><span>
</span><span id="line-816"></span><span class="hs-comment">--   Returns the domains of the function type (if any).</span><span>
</span><span id="line-817"></span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#insertTrailingArgs"><span class="hs-identifier hs-type">insertTrailingArgs</span></a></span><span>
</span><span id="line-818"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>         </span><span class="annot"><span class="hs-comment">-- ^ Force insertion even when there is a 'domTactic'?</span></span><span>
</span><span id="line-819"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitClause.html#SplitClause"><span class="hs-identifier hs-type">SplitClause</span></a></span><span>
</span><span id="line-820"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">TCM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Telescope"><span class="hs-identifier hs-type">Telescope</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitClause.html#SplitClause"><span class="hs-identifier hs-type">SplitClause</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-821"></span><span id="insertTrailingArgs"><span class="annot"><span class="annottext">insertTrailingArgs :: Bool -&gt; SplitClause -&gt; TCM (Telescope, SplitClause)
</span><a href="Agda.TypeChecking.Coverage.html#insertTrailingArgs"><span class="hs-identifier hs-var hs-var">insertTrailingArgs</span></a></span></span><span> </span><span id="local-6989586621682148751"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682148751"><span class="hs-identifier hs-var">force</span></a></span></span><span> </span><span id="local-6989586621682148752"><span class="annot"><span class="annottext">sc :: SplitClause
</span><a href="#local-6989586621682148752"><span class="hs-identifier hs-var">sc</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitClause.html#SClause"><span class="hs-identifier hs-type">SClause</span></a></span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">scTel :: SplitClause -&gt; Telescope
</span><a href="Agda.TypeChecking.Coverage.SplitClause.html#scTel"><span class="hs-identifier hs-var">scTel</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682148753"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682148753"><span class="hs-identifier hs-var">sctel</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">scPats :: SplitClause -&gt; [NamedArg SplitPattern]
</span><a href="Agda.TypeChecking.Coverage.SplitClause.html#scPats"><span class="hs-identifier hs-var">scPats</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682148754"><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621682148754"><span class="hs-identifier hs-var">ps</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">scSubst :: SplitClause -&gt; Substitution' SplitPattern
</span><a href="Agda.TypeChecking.Coverage.SplitClause.html#scSubst"><span class="hs-identifier hs-var">scSubst</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682148755"><span class="annot"><span class="annottext">Substitution' SplitPattern
</span><a href="#local-6989586621682148755"><span class="hs-identifier hs-var">sigma</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">scCheckpoints :: SplitClause -&gt; Map CheckpointId (Substitution' Term)
</span><a href="Agda.TypeChecking.Coverage.SplitClause.html#scCheckpoints"><span class="hs-identifier hs-var">scCheckpoints</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682148757"><span class="annot"><span class="annottext">Map CheckpointId (Substitution' Term)
</span><a href="#local-6989586621682148757"><span class="hs-identifier hs-var">cps</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">scTarget :: SplitClause -&gt; Maybe (Dom Type)
</span><a href="Agda.TypeChecking.Coverage.SplitClause.html#scTarget"><span class="hs-identifier hs-var">scTarget</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682148758"><span class="annot"><span class="annottext">Maybe (Dom Type)
</span><a href="#local-6989586621682148758"><span class="hs-identifier hs-var">target</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-822"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682148759"><span class="annot"><span class="annottext">fallback :: TCM (Telescope, SplitClause)
</span><a href="#local-6989586621682148759"><span class="hs-identifier hs-var hs-var">fallback</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Telescope, SplitClause) -&gt; TCM (Telescope, SplitClause)
forall a. a -&gt; TCMT IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Telescope
forall a. Null a =&gt; a
</span><a href="Agda.Utils.Null.html#empty"><span class="hs-identifier hs-var">empty</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621682148752"><span class="hs-identifier hs-var">sc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-823"></span><span>  </span><span class="annot"><span class="annottext">Maybe (Dom Type)
-&gt; TCM (Telescope, SplitClause)
-&gt; (Dom Type -&gt; TCM (Telescope, SplitClause))
-&gt; TCM (Telescope, SplitClause)
forall a b. Maybe a -&gt; b -&gt; (a -&gt; b) -&gt; b
</span><a href="Agda.Utils.Maybe.html#caseMaybe"><span class="hs-identifier hs-var">caseMaybe</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (Dom Type)
</span><a href="#local-6989586621682148758"><span class="hs-identifier hs-var">target</span></a></span><span> </span><span class="annot"><span class="annottext">TCM (Telescope, SplitClause)
</span><a href="#local-6989586621682148759"><span class="hs-identifier hs-var">fallback</span></a></span><span> </span><span class="annot"><span class="annottext">((Dom Type -&gt; TCM (Telescope, SplitClause))
 -&gt; TCM (Telescope, SplitClause))
-&gt; (Dom Type -&gt; TCM (Telescope, SplitClause))
-&gt; TCM (Telescope, SplitClause)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621682148760"><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621682148760"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-824"></span><span>    </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Maybe Term -&gt; Bool
forall a. Maybe a -&gt; Bool
</span><span class="hs-identifier hs-var">isJust</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Dom Type -&gt; Maybe Term
forall t e. Dom' t e -&gt; Maybe t
</span><a href="Agda.Syntax.Internal.html#domTactic"><span class="hs-identifier hs-var">domTactic</span></a></span><span> </span><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621682148760"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682148751"><span class="hs-identifier hs-var">force</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">TCM (Telescope, SplitClause)
</span><a href="#local-6989586621682148759"><span class="hs-identifier hs-var">fallback</span></a></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-825"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Substitute.html#TelV"><span class="hs-identifier hs-type">TelV</span></a></span><span> </span><span id="local-6989586621682148761"><span class="annot"><a href="#local-6989586621682148761"><span class="hs-identifier hs-var">tel</span></a></span></span><span> </span><span id="local-6989586621682148762"><span class="annot"><a href="#local-6989586621682148762"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; TCMT IO (TelV Type) -&gt; TCMT IO (TelV Type)
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a.
MonadAddContext m =&gt;
Telescope -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682148753"><span class="hs-identifier hs-var">sctel</span></a></span><span> </span><span class="annot"><span class="annottext">(TCMT IO (TelV Type) -&gt; TCMT IO (TelV Type))
-&gt; TCMT IO (TelV Type) -&gt; TCMT IO (TelV Type)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Type -&gt; TCMT IO (TelV Type)
forall (m :: * -&gt; *).
(MonadReduce m, MonadAddContext m) =&gt;
Int -&gt; Type -&gt; m (TelV Type)
</span><a href="Agda.TypeChecking.Telescope.html#telViewUpTo"><span class="hs-identifier hs-var">telViewUpTo</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">-</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Type -&gt; TCMT IO (TelV Type)) -&gt; Type -&gt; TCMT IO (TelV Type)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Dom Type -&gt; Type
forall t e. Dom' t e -&gt; e
</span><a href="Agda.Syntax.Internal.html#unDom"><span class="hs-identifier hs-var">unDom</span></a></span><span> </span><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621682148760"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-826"></span><span>    </span><span class="annot"><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-type">reportSDoc</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;tc.cover.target&quot;</span></span><span> </span><span class="annot"><span class="hs-number">15</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#sep"><span class="hs-identifier hs-type">sep</span></a></span><span>
</span><span id="line-827"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="hs-string">&quot;target type telescope: &quot;</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-type">&lt;+&gt;</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-828"></span><span>          </span><span class="annot"><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-type">addContext</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148753"><span class="hs-identifier hs-type">sctel</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-type">prettyTCM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148761"><span class="hs-identifier hs-type">tel</span></a></span><span>
</span><span id="line-829"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-string">&quot;target type core     : &quot;</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-type">&lt;+&gt;</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-830"></span><span>          </span><span class="annot"><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-type">addContext</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148753"><span class="hs-identifier hs-type">sctel</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-type">addContext</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148761"><span class="hs-identifier hs-type">tel</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-type">prettyTCM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148762"><span class="hs-identifier hs-type">b</span></a></span><span>
</span><span id="line-831"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-832"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682148763"><span class="annot"><a href="#local-6989586621682148763"><span class="hs-identifier hs-var hs-var">n</span></a></span></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; Int
forall a. Sized a =&gt; a -&gt; Int
</span><a href="Agda.Utils.Size.html#size"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682148761"><span class="hs-identifier hs-var">tel</span></a></span><span>
</span><span id="line-833"></span><span>        </span><span class="hs-comment">-- Andreas, 2016-10-04 issue #2236</span><span>
</span><span id="line-834"></span><span>        </span><span class="hs-comment">-- Need to set origin to &quot;Inserted&quot; to avoid printing of hidden patterns.</span><span>
</span><span id="line-835"></span><span>        </span><span id="local-6989586621682148764"><span class="annot"><a href="#local-6989586621682148764"><span class="hs-identifier hs-var hs-var">xs</span></a></span></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(NamedArg SplitPattern -&gt; NamedArg SplitPattern)
-&gt; [NamedArg SplitPattern] -&gt; [NamedArg SplitPattern]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(ArgInfo -&gt; ArgInfo)
-&gt; NamedArg SplitPattern -&gt; NamedArg SplitPattern
forall a. LensArgInfo a =&gt; (ArgInfo -&gt; ArgInfo) -&gt; a -&gt; a
</span><a href="Agda.Syntax.Common.html#mapArgInfo"><span class="hs-identifier hs-var">mapArgInfo</span></a></span><span> </span><span class="annot"><span class="annottext">ArgInfo -&gt; ArgInfo
</span><a href="Agda.TypeChecking.Coverage.html#hiddenInserted"><span class="hs-identifier hs-var">hiddenInserted</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([NamedArg SplitPattern] -&gt; [NamedArg SplitPattern])
-&gt; [NamedArg SplitPattern] -&gt; [NamedArg SplitPattern]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; [NamedArg SplitPattern]
forall a t. DeBruijn a =&gt; Tele (Dom t) -&gt; [NamedArg a]
</span><a href="Agda.TypeChecking.Telescope.html#teleNamedArgs"><span class="hs-identifier hs-var">teleNamedArgs</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682148761"><span class="hs-identifier hs-var">tel</span></a></span><span>
</span><span id="line-836"></span><span>        </span><span class="hs-comment">-- Compute new split clause</span><span>
</span><span id="line-837"></span><span>        </span><span id="local-6989586621682148767"><span class="annot"><a href="#local-6989586621682148767"><span class="hs-identifier hs-var hs-var">sctel'</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ListTel -&gt; Telescope
</span><a href="Agda.Syntax.Internal.html#telFromList"><span class="hs-identifier hs-var">telFromList</span></a></span><span> </span><span class="annot"><span class="annottext">(ListTel -&gt; Telescope) -&gt; ListTel -&gt; Telescope
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; ListTel
forall t. Tele (Dom t) -&gt; [Dom (PatVarName, t)]
</span><a href="Agda.Syntax.Internal.html#telToList"><span class="hs-identifier hs-var">telToList</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Telescope -&gt; Telescope
forall a. Subst a =&gt; Int -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#raise"><span class="hs-identifier hs-var">raise</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682148763"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682148753"><span class="hs-identifier hs-var">sctel</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ListTel -&gt; ListTel -&gt; ListTel
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; ListTel
forall t. Tele (Dom t) -&gt; [Dom (PatVarName, t)]
</span><a href="Agda.Syntax.Internal.html#telToList"><span class="hs-identifier hs-var">telToList</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682148761"><span class="hs-identifier hs-var">tel</span></a></span><span>
</span><span id="line-838"></span><span>        </span><span class="hs-comment">-- Dot patterns in @ps@ need to be raised!  (Issue 1298)</span><span>
</span><span id="line-839"></span><span>        </span><span id="local-6989586621682148769"><span class="annot"><a href="#local-6989586621682148769"><span class="hs-identifier hs-var hs-var">ps'</span></a></span></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Substitution' (SubstArg [NamedArg SplitPattern])
-&gt; [NamedArg SplitPattern] -&gt; [NamedArg SplitPattern]
forall a. Subst a =&gt; Substitution' (SubstArg a) -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#applySubst"><span class="hs-identifier hs-var">applySubst</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Substitution' SplitPattern
forall a. Int -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#raiseS"><span class="hs-identifier hs-var">raiseS</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682148763"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621682148754"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
-&gt; [NamedArg SplitPattern] -&gt; [NamedArg SplitPattern]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621682148764"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-840"></span><span>        </span><span id="local-6989586621682148770"><span class="annot"><a href="#local-6989586621682148770"><span class="hs-identifier hs-var hs-var">newTarget</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Dom Type -&gt; Maybe (Dom Type)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(Dom Type -&gt; Maybe (Dom Type)) -&gt; Dom Type -&gt; Maybe (Dom Type)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-special">(</span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Telescope -&gt; Bool
forall a. Null a =&gt; a -&gt; Bool
</span><a href="Agda.Utils.Null.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682148761"><span class="hs-identifier hs-var">tel</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621682148760"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#domTactic"><span class="hs-identifier hs-var">domTactic</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Nothing</span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621682148760"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Dom Type -&gt; Type -&gt; Dom Type
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; b -&gt; f b
</span><span class="hs-operator hs-var">$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682148762"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-841"></span><span>        </span><span id="local-6989586621682148771"><span class="annot"><a href="#local-6989586621682148771"><span class="hs-identifier hs-var hs-var">sc'</span></a></span></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitClause.html#SClause"><span class="hs-identifier hs-type">SClause</span></a></span><span>
</span><span id="line-842"></span><span>          </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">scTel :: Telescope
</span><a href="Agda.TypeChecking.Coverage.SplitClause.html#scTel"><span class="hs-identifier hs-var">scTel</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682148767"><span class="hs-identifier hs-var">sctel'</span></a></span><span>
</span><span id="line-843"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">scPats :: [NamedArg SplitPattern]
</span><a href="Agda.TypeChecking.Coverage.SplitClause.html#scPats"><span class="hs-identifier hs-var">scPats</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621682148769"><span class="hs-identifier hs-var">ps'</span></a></span><span>
</span><span id="line-844"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">scSubst :: Substitution' SplitPattern
</span><a href="Agda.TypeChecking.Coverage.SplitClause.html#scSubst"><span class="hs-identifier hs-var">scSubst</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Substitution' SplitPattern -&gt; Substitution' SplitPattern
forall a. Int -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#wkS"><span class="hs-identifier hs-var">wkS</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682148763"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">(Substitution' SplitPattern -&gt; Substitution' SplitPattern)
-&gt; Substitution' SplitPattern -&gt; Substitution' SplitPattern
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Substitution' SplitPattern
</span><a href="#local-6989586621682148755"><span class="hs-identifier hs-var">sigma</span></a></span><span> </span><span class="hs-comment">-- Should be wkS instead of liftS since</span><span>
</span><span id="line-845"></span><span>                                     </span><span class="hs-comment">-- variables are only added to new tel.</span><span>
</span><span id="line-846"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">scCheckpoints :: Map CheckpointId (Substitution' Term)
</span><a href="Agda.TypeChecking.Coverage.SplitClause.html#scCheckpoints"><span class="hs-identifier hs-var">scCheckpoints</span></a></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Substitution' (SubstArg (Map CheckpointId (Substitution' Term)))
-&gt; Map CheckpointId (Substitution' Term)
-&gt; Map CheckpointId (Substitution' Term)
forall a. Subst a =&gt; Substitution' (SubstArg a) -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#applySubst"><span class="hs-identifier hs-var">applySubst</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Substitution' Term
forall a. Int -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#raiseS"><span class="hs-identifier hs-var">raiseS</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682148763"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Map CheckpointId (Substitution' Term)
</span><a href="#local-6989586621682148757"><span class="hs-identifier hs-var">cps</span></a></span><span>
</span><span id="line-847"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">scTarget :: Maybe (Dom Type)
</span><a href="Agda.TypeChecking.Coverage.SplitClause.html#scTarget"><span class="hs-identifier hs-var">scTarget</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (Dom Type)
</span><a href="#local-6989586621682148770"><span class="hs-identifier hs-var">newTarget</span></a></span><span>
</span><span id="line-848"></span><span>          </span><span class="hs-special">}</span><span>
</span><span id="line-849"></span><span>    </span><span class="hs-comment">-- Separate debug printing to find cause of crash (Issue 1374)</span><span>
</span><span id="line-850"></span><span>    </span><span class="annot"><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-type">reportSDoc</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;tc.cover.target&quot;</span></span><span> </span><span class="annot"><span class="hs-number">30</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#sep"><span class="hs-identifier hs-type">sep</span></a></span><span>
</span><span id="line-851"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="hs-string">&quot;new split clause telescope   : &quot;</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-type">&lt;+&gt;</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-type">prettyTCM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148767"><span class="hs-identifier hs-type">sctel'</span></a></span><span>
</span><span id="line-852"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-853"></span><span>    </span><span class="annot"><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-type">reportSDoc</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;tc.cover.target&quot;</span></span><span> </span><span class="annot"><span class="hs-number">30</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#sep"><span class="hs-identifier hs-type">sep</span></a></span><span>
</span><span id="line-854"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="hs-string">&quot;new split clause patterns    : &quot;</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-type">&lt;+&gt;</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-855"></span><span>          </span><span class="annot"><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-type">addContext</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148767"><span class="hs-identifier hs-type">sctel'</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#prettyTCMPatternList"><span class="hs-identifier hs-type">prettyTCMPatternList</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitPattern.html#fromSplitPatterns"><span class="hs-identifier hs-type">fromSplitPatterns</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148769"><span class="hs-identifier hs-type">ps'</span></a></span><span>
</span><span id="line-856"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-857"></span><span>    </span><span class="annot"><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-type">reportSDoc</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;tc.cover.target&quot;</span></span><span> </span><span class="annot"><span class="hs-number">60</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#sep"><span class="hs-identifier hs-type">sep</span></a></span><span>
</span><span id="line-858"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="hs-string">&quot;new split clause substitution: &quot;</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-type">&lt;+&gt;</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-type">prettyTCM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitClause.html#scSubst"><span class="hs-identifier hs-var">scSubst</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148771"><span class="hs-identifier hs-type">sc'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-859"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-860"></span><span>    </span><span class="annot"><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-type">reportSDoc</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;tc.cover.target&quot;</span></span><span> </span><span class="annot"><span class="hs-number">30</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#sep"><span class="hs-identifier hs-type">sep</span></a></span><span>
</span><span id="line-861"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="hs-string">&quot;new split clause target      : &quot;</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-type">&lt;+&gt;</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-862"></span><span>          </span><span class="annot"><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-type">addContext</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148767"><span class="hs-identifier hs-type">sctel'</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-type">prettyTCM</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">fromJust</span></span><span> </span><span class="annot"><a href="#local-6989586621682148770"><span class="hs-identifier hs-type">newTarget</span></a></span><span>
</span><span id="line-863"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-864"></span><span>    </span><span class="annot"><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-type">reportSDoc</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;tc.cover.target&quot;</span></span><span> </span><span class="annot"><span class="hs-number">20</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#sep"><span class="hs-identifier hs-type">sep</span></a></span><span>
</span><span id="line-865"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="hs-string">&quot;new split clause&quot;</span></span><span>
</span><span id="line-866"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-type">prettyTCM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148771"><span class="hs-identifier hs-type">sc'</span></a></span><span>
</span><span id="line-867"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-868"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><a href="#local-6989586621682148763"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">==</span></span><span> </span><span class="annot"><span class="hs-number">0</span></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Utils.Null.html#empty"><span class="hs-identifier hs-type">empty</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621682148752"><span class="hs-identifier hs-type">sc</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitClause.html#scTarget"><span class="hs-identifier hs-var">scTarget</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682148770"><span class="hs-identifier hs-type">newTarget</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">else</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682148761"><span class="hs-identifier hs-type">tel</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621682148771"><span class="hs-identifier hs-type">sc'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-869"></span><span>
</span><span id="line-870"></span><span class="hs-comment">-- Andreas, 2017-01-18, issue #819, set visible arguments to UserWritten.</span><span>
</span><span id="line-871"></span><span class="hs-comment">-- Otherwise, they will be printed as _.</span><span>
</span><span id="line-872"></span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#hiddenInserted"><span class="hs-identifier hs-type">hiddenInserted</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html#ArgInfo"><span class="hs-identifier hs-type">ArgInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html#ArgInfo"><span class="hs-identifier hs-type">ArgInfo</span></a></span><span>
</span><span id="line-873"></span><span id="hiddenInserted"><span class="annot"><span class="annottext">hiddenInserted :: ArgInfo -&gt; ArgInfo
</span><a href="Agda.TypeChecking.Coverage.html#hiddenInserted"><span class="hs-identifier hs-var hs-var">hiddenInserted</span></a></span></span><span> </span><span id="local-6989586621682148774"><span class="annot"><span class="annottext">ArgInfo
</span><a href="#local-6989586621682148774"><span class="hs-identifier hs-var">ai</span></a></span></span><span>
</span><span id="line-874"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">ArgInfo -&gt; Bool
forall a. LensHiding a =&gt; a -&gt; Bool
</span><a href="Agda.Syntax.Common.html#visible"><span class="hs-identifier hs-var">visible</span></a></span><span> </span><span class="annot"><span class="annottext">ArgInfo
</span><a href="#local-6989586621682148774"><span class="hs-identifier hs-var">ai</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Origin -&gt; ArgInfo -&gt; ArgInfo
forall a. LensOrigin a =&gt; Origin -&gt; a -&gt; a
</span><a href="Agda.Syntax.Common.html#setOrigin"><span class="hs-identifier hs-var">setOrigin</span></a></span><span> </span><span class="annot"><span class="annottext">Origin
</span><a href="Agda.Syntax.Common.html#UserWritten"><span class="hs-identifier hs-var">UserWritten</span></a></span><span> </span><span class="annot"><span class="annottext">ArgInfo
</span><a href="#local-6989586621682148774"><span class="hs-identifier hs-var">ai</span></a></span><span>
</span><span id="line-875"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Origin -&gt; ArgInfo -&gt; ArgInfo
forall a. LensOrigin a =&gt; Origin -&gt; a -&gt; a
</span><a href="Agda.Syntax.Common.html#setOrigin"><span class="hs-identifier hs-var">setOrigin</span></a></span><span> </span><span class="annot"><span class="annottext">Origin
</span><a href="Agda.Syntax.Common.html#Inserted"><span class="hs-identifier hs-var">Inserted</span></a></span><span> </span><span class="annot"><span class="annottext">ArgInfo
</span><a href="#local-6989586621682148774"><span class="hs-identifier hs-var">ai</span></a></span><span>
</span><span id="line-876"></span><span>
</span><span id="line-877"></span><span>
</span><span id="line-878"></span><span class="hs-comment">-- | Checks if a type in this sort supports hcomp.</span><span>
</span><span id="line-879"></span><span class="hs-comment">--   currently all such types will have a Level.</span><span>
</span><span id="line-880"></span><span class="hs-comment">--   precondition: Sort in whnf and not blocked.</span><span>
</span><span id="line-881"></span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#hasHComp"><span class="hs-identifier hs-type">hasHComp</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Sort"><span class="hs-identifier hs-type">Sort</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Level"><span class="hs-identifier hs-type">Level</span></a></span><span>
</span><span id="line-882"></span><span id="hasHComp"><span class="annot"><span class="annottext">hasHComp :: Sort -&gt; Maybe Level
</span><a href="Agda.TypeChecking.Coverage.html#hasHComp"><span class="hs-identifier hs-var hs-var">hasHComp</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span id="local-6989586621682148779"><span class="annot"><span class="annottext">Level
</span><a href="#local-6989586621682148779"><span class="hs-identifier hs-var">l</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Level -&gt; Maybe Level
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Level
</span><a href="#local-6989586621682148779"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-883"></span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#hasHComp"><span class="hs-identifier hs-var">hasHComp</span></a></span><span> </span><span class="annot"><span class="annottext">Sort
</span><span class="hs-identifier">_</span></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Level
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-884"></span><span>
</span><span id="line-885"></span><span>
</span><span id="line-886"></span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#computeHCompSplit"><span class="hs-identifier hs-type">computeHCompSplit</span></a></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Telescope"><span class="hs-identifier hs-type">Telescope</span></a></span><span>   </span><span class="annot"><span class="hs-comment">-- ^ Telescope before split point.</span></span><span>
</span><span id="line-887"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#PatVarName"><span class="hs-identifier hs-type">PatVarName</span></a></span><span>                   </span><span class="annot"><span class="hs-comment">-- ^ Name of pattern variable at split point.</span></span><span>
</span><span id="line-888"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Telescope"><span class="hs-identifier hs-type">Telescope</span></a></span><span>                    </span><span class="annot"><span class="hs-comment">-- ^ Telescope after split point.</span></span><span>
</span><span id="line-889"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Abstract.Name.html#QName"><span class="hs-identifier hs-type">QName</span></a></span><span>                        </span><span class="annot"><span class="hs-comment">-- ^ Name of datatype to split at.</span></span><span>
</span><span id="line-890"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Args"><span class="hs-identifier hs-type">Args</span></a></span><span>                         </span><span class="annot"><span class="hs-comment">-- ^ Data type parameters.</span></span><span>
</span><span id="line-891"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Args"><span class="hs-identifier hs-type">Args</span></a></span><span>                         </span><span class="annot"><span class="hs-comment">-- ^ Data type indices.</span></span><span>
</span><span id="line-892"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html#Nat"><span class="hs-identifier hs-type">Nat</span></a></span><span>                          </span><span class="annot"><span class="hs-comment">-- ^ Index of split variable.</span></span><span>
</span><span id="line-893"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Telescope"><span class="hs-identifier hs-type">Telescope</span></a></span><span>                    </span><span class="annot"><span class="hs-comment">-- ^ Telescope for the patterns.</span></span><span>
</span><span id="line-894"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.Syntax.Common.html#NamedArg"><span class="hs-identifier hs-type">NamedArg</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitPattern.html#SplitPattern"><span class="hs-identifier hs-type">SplitPattern</span></a></span><span class="hs-special">]</span><span>      </span><span class="annot"><span class="hs-comment">-- ^ Patterns before doing the split.</span></span><span>
</span><span id="line-895"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#CheckpointId"><span class="hs-identifier hs-type">CheckpointId</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Substitution"><span class="hs-identifier hs-type">Substitution</span></a></span><span> </span><span class="hs-comment">-- ^ Current checkpoints</span><span>
</span><span id="line-896"></span><span>  </span><span class="hs-comment">-- -&gt; QName                        -- ^ Constructor to fit into hole.</span><span>
</span><span id="line-897"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#CoverM"><span class="hs-identifier hs-type">CoverM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitTree.html#SplitTag"><span class="hs-identifier hs-type">SplitTag</span></a></span><span class="hs-special">,</span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitClause.html#SplitClause"><span class="hs-identifier hs-type">SplitClause</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>   </span><span class="annot"><span class="hs-comment">-- ^ New split clause if successful.</span></span><span>
</span><span id="line-898"></span><span id="computeHCompSplit"><span class="annot"><span class="annottext">computeHCompSplit :: Telescope
-&gt; PatVarName
-&gt; Telescope
-&gt; QName
-&gt; Args
-&gt; Args
-&gt; Int
-&gt; Telescope
-&gt; [NamedArg SplitPattern]
-&gt; Map CheckpointId (Substitution' Term)
-&gt; CoverM (Maybe (SplitTag, SplitClause))
</span><a href="Agda.TypeChecking.Coverage.html#computeHCompSplit"><span class="hs-identifier hs-var hs-var">computeHCompSplit</span></a></span></span><span> </span><span id="local-6989586621682148782"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682148782"><span class="hs-identifier hs-var">delta1</span></a></span></span><span> </span><span id="local-6989586621682148783"><span class="annot"><span class="annottext">PatVarName
</span><a href="#local-6989586621682148783"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621682148784"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682148784"><span class="hs-identifier hs-var">delta2</span></a></span></span><span> </span><span id="local-6989586621682148785"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621682148785"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span id="local-6989586621682148786"><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621682148786"><span class="hs-identifier hs-var">pars</span></a></span></span><span> </span><span id="local-6989586621682148787"><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621682148787"><span class="hs-identifier hs-var">ixs</span></a></span></span><span> </span><span id="local-6989586621682148788"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682148788"><span class="hs-identifier hs-var">hix</span></a></span></span><span> </span><span id="local-6989586621682148789"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682148789"><span class="hs-identifier hs-var">tel</span></a></span></span><span> </span><span id="local-6989586621682148790"><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621682148790"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span id="local-6989586621682148791"><span class="annot"><span class="annottext">Map CheckpointId (Substitution' Term)
</span><a href="#local-6989586621682148791"><span class="hs-identifier hs-var">cps</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-899"></span><span>  </span><span id="local-6989586621682148792"><span class="annot"><a href="#local-6989586621682148792"><span class="hs-identifier hs-var">withK</span></a></span></span><span>   </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; Bool)
-&gt; ExceptT SplitError (TCMT IO) Bool
-&gt; ExceptT SplitError (TCMT IO) Bool
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ExceptT SplitError (TCMT IO) Bool
forall (m :: * -&gt; *). HasOptions m =&gt; m Bool
</span><a href="Agda.TypeChecking.Monad.Base.html#cubicalCompatibleOption"><span class="hs-identifier hs-var">cubicalCompatibleOption</span></a></span><span>
</span><span id="line-900"></span><span>  </span><span class="hs-keyword">if</span><span> </span><span class="annot"><a href="#local-6989586621682148792"><span class="hs-identifier hs-type">withK</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Nothing</span></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-901"></span><span>    </span><span class="hs-comment">-- Get the type of the datatype</span><span>
</span><span id="line-902"></span><span>  </span><span class="hs-comment">-- &#916;1 &#8866; dtype</span><span>
</span><span id="line-903"></span><span>  </span><span id="local-6989586621682148794"><span class="annot"><a href="#local-6989586621682148794"><span class="hs-identifier hs-var">dsort</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#liftTCM"><span class="hs-identifier hs-type">liftTCM</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">parallelS</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">reverse</span></span><span> </span><span class="annot"><span class="hs-operator">$</span></span><span> </span><span class="annot"><span class="hs-identifier">map</span></span><span> </span><span class="annot"><span class="hs-identifier">unArg</span></span><span> </span><span class="annot"><span class="hs-identifier">pars</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator">`applySubst`</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">.</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#dataSort"><span class="hs-identifier hs-var">dataSort</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">.</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#theDef"><span class="hs-identifier hs-var">theDef</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">&lt;$&gt;</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Signature.html#getConstInfo"><span class="hs-identifier hs-type">getConstInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148785"><span class="hs-identifier hs-type">d</span></a></span><span>
</span><span id="line-904"></span><span>  </span><span id="local-6989586621682148795"><span class="annot"><a href="#local-6989586621682148795"><span class="hs-identifier hs-var">hCompName</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="hs-identifier hs-type">fromMaybe</span></span><span> </span><span class="annot"><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-type">__IMPOSSIBLE__</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">&lt;$&gt;</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Builtin.html#getPrimitiveName%27"><span class="hs-identifier hs-type">getPrimitiveName'</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Builtin.html#builtinHComp"><span class="hs-identifier hs-type">builtinHComp</span></a></span><span>
</span><span id="line-905"></span><span>  </span><span id="local-6989586621682148796"><span class="annot"><a href="#local-6989586621682148796"><span class="hs-identifier hs-var">theHCompT</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#defType"><span class="hs-identifier hs-var">defType</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">&lt;$&gt;</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Signature.html#getConstInfo"><span class="hs-identifier hs-type">getConstInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148795"><span class="hs-identifier hs-type">hCompName</span></a></span><span>
</span><span id="line-906"></span><span>
</span><span id="line-907"></span><span>  </span><span class="hs-comment">-- TODO can dsort be blocked or not in whnf?</span><span>
</span><span id="line-908"></span><span>  </span><span class="annot"><a href="Agda.Utils.Maybe.html#caseMaybe"><span class="hs-identifier hs-type">caseMaybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#hasHComp"><span class="hs-identifier hs-type">hasHComp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148794"><span class="hs-identifier hs-type">dsort</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Nothing</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621682148797"><span class="annot"><span class="annottext">Level
</span><a href="#local-6989586621682148797"><span class="hs-identifier hs-var">dlvl'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-909"></span><span>  </span><span class="hs-keyword">let</span><span>
</span><span id="line-910"></span><span>    </span><span id="local-6989586621682148798"><span class="annot"><span class="annottext">dlvl :: Term
</span><a href="#local-6989586621682148798"><span class="hs-identifier hs-var hs-var hs-var">dlvl</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Level -&gt; Term
</span><a href="Agda.Syntax.Internal.html#Level"><span class="hs-identifier hs-var">Level</span></a></span><span> </span><span class="annot"><span class="annottext">Level
</span><a href="#local-6989586621682148797"><span class="hs-identifier hs-var">dlvl'</span></a></span><span>
</span><span id="line-911"></span><span>    </span><span id="local-6989586621682148800"><span class="annot"><span class="annottext">dterm :: Term
</span><a href="#local-6989586621682148800"><span class="hs-identifier hs-var hs-var hs-var">dterm</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">QName -&gt; Elims -&gt; Term
</span><a href="Agda.Syntax.Internal.html#Def"><span class="hs-identifier hs-var">Def</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621682148785"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">Term -&gt; Args -&gt; Term
forall t. Apply t =&gt; t -&gt; Args -&gt; t
</span><a href="Agda.TypeChecking.Substitute.Class.html#apply"><span class="hs-operator hs-var">`apply`</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621682148786"><span class="hs-identifier hs-var">pars</span></a></span><span> </span><span class="annot"><span class="annottext">Args -&gt; Args -&gt; Args
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621682148787"><span class="hs-identifier hs-var">ixs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-912"></span><span>  </span><span class="hs-comment">-- &#916;1 &#8866; gamma</span><span>
</span><span id="line-913"></span><span>  </span><span class="annot"><a href="Agda.TypeChecking.Substitute.html#TelV"><span class="hs-identifier hs-type">TelV</span></a></span><span> </span><span id="local-6989586621682148802"><span class="annot"><a href="#local-6989586621682148802"><span class="hs-identifier hs-var">gamma</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TCMT IO (TelV Type) -&gt; ExceptT SplitError (TCMT IO) (TelV Type)
forall (m :: * -&gt; *) a. Monad m =&gt; m a -&gt; ExceptT SplitError m a
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO (TelV Type) -&gt; ExceptT SplitError (TCMT IO) (TelV Type))
-&gt; TCMT IO (TelV Type) -&gt; ExceptT SplitError (TCMT IO) (TelV Type)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; TCMT IO (TelV Type)
forall (m :: * -&gt; *).
(MonadReduce m, MonadAddContext m) =&gt;
Type -&gt; m (TelV Type)
</span><a href="Agda.TypeChecking.Telescope.html#telView"><span class="hs-identifier hs-var">telView</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682148796"><span class="hs-identifier hs-var">theHCompT</span></a></span><span> </span><span class="annot"><span class="annottext">Type -&gt; Args -&gt; Type
</span><a href="Agda.TypeChecking.Substitute.html#piApply"><span class="hs-operator hs-var">`piApply`</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Hiding -&gt; Arg Term -&gt; Arg Term
forall a. LensHiding a =&gt; Hiding -&gt; a -&gt; a
</span><a href="Agda.Syntax.Common.html#setHiding"><span class="hs-identifier hs-var">setHiding</span></a></span><span> </span><span class="annot"><span class="annottext">Hiding
</span><a href="Agda.Syntax.Common.html#Hidden"><span class="hs-identifier hs-var">Hidden</span></a></span><span> </span><span class="annot"><span class="annottext">(Arg Term -&gt; Arg Term) -&gt; Arg Term -&gt; Arg Term
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Term -&gt; Arg Term
forall a. a -&gt; Arg a
</span><a href="Agda.Syntax.Common.html#defaultArg"><span class="hs-identifier hs-var">defaultArg</span></a></span><span> </span><span class="annot"><span class="annottext">(Term -&gt; Arg Term) -&gt; Term -&gt; Arg Term
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621682148798"><span class="hs-identifier hs-var">dlvl</span></a></span><span> </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Term -&gt; Arg Term
forall a. a -&gt; Arg a
</span><a href="Agda.Syntax.Common.html#defaultArg"><span class="hs-identifier hs-var">defaultArg</span></a></span><span> </span><span class="annot"><span class="annottext">(Term -&gt; Arg Term) -&gt; Term -&gt; Arg Term
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621682148800"><span class="hs-identifier hs-var">dterm</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-914"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682148782"><span class="hs-identifier hs-type">delta1</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#abstract"><span class="hs-operator hs-type">`abstract`</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148802"><span class="hs-identifier hs-type">gamma</span></a></span><span class="hs-special">,</span><span class="annot"><a href="Agda.Syntax.Internal.html#IdS"><span class="hs-identifier hs-type">IdS</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-915"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621682148809"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682148809"><span class="hs-identifier hs-var">delta1'</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621682148810"><span class="annot"><span class="annottext">PatternSubstitution
</span><a href="#local-6989586621682148810"><span class="hs-identifier hs-var">rho0</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-916"></span><span class="hs-comment">--      debugSubst &quot;rho0&quot; rho0</span><span>
</span><span id="line-917"></span><span>
</span><span id="line-918"></span><span>      </span><span class="hs-comment">-- We have &#916;&#8321;' &#8866; &#961;&#8320; : &#916;&#8321;&#915;, so split it into the part for &#916;&#8321; and the part for &#915;</span><span>
</span><span id="line-919"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682148811"><span class="annot"><span class="annottext">Substitution' SplitPattern
</span><a href="#local-6989586621682148811"><span class="hs-identifier hs-var hs-var">rho1</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621682148812"><span class="annot"><span class="annottext">Substitution' SplitPattern
</span><a href="#local-6989586621682148812"><span class="hs-identifier hs-var hs-var">rho2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
-&gt; Substitution' SplitPattern
-&gt; (Substitution' SplitPattern, Substitution' SplitPattern)
forall a.
Int -&gt; Substitution' a -&gt; (Substitution' a, Substitution' a)
</span><a href="Agda.TypeChecking.Substitute.Class.html#splitS"><span class="hs-identifier hs-var">splitS</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Telescope -&gt; Int
forall a. Sized a =&gt; a -&gt; Int
</span><a href="Agda.Utils.Size.html#size"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682148802"><span class="hs-identifier hs-var">gamma</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Substitution' SplitPattern
 -&gt; (Substitution' SplitPattern, Substitution' SplitPattern))
-&gt; Substitution' SplitPattern
-&gt; (Substitution' SplitPattern, Substitution' SplitPattern)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PatternSubstitution -&gt; Substitution' SplitPattern
</span><a href="Agda.TypeChecking.Coverage.SplitPattern.html#toSplitPSubst"><span class="hs-identifier hs-var">toSplitPSubst</span></a></span><span> </span><span class="annot"><span class="annottext">PatternSubstitution
</span><a href="#local-6989586621682148810"><span class="hs-identifier hs-var">rho0</span></a></span><span>
</span><span id="line-920"></span><span>
</span><span id="line-921"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682148815"><span class="annot"><span class="annottext">defp :: SplitPattern
</span><a href="#local-6989586621682148815"><span class="hs-identifier hs-var hs-var hs-var">defp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PatternInfo -&gt; QName -&gt; [NamedArg SplitPattern] -&gt; SplitPattern
forall x.
PatternInfo -&gt; QName -&gt; [NamedArg (Pattern' x)] -&gt; Pattern' x
</span><a href="Agda.Syntax.Internal.html#DefP"><span class="hs-identifier hs-var">DefP</span></a></span><span> </span><span class="annot"><span class="annottext">PatternInfo
</span><a href="Agda.Syntax.Internal.html#defaultPatternInfo"><span class="hs-identifier hs-var">defaultPatternInfo</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621682148795"><span class="hs-identifier hs-var">hCompName</span></a></span><span> </span><span class="annot"><span class="annottext">([NamedArg SplitPattern] -&gt; SplitPattern)
-&gt; ([NamedArg SplitPattern] -&gt; [NamedArg SplitPattern])
-&gt; [NamedArg SplitPattern]
-&gt; SplitPattern
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(NamedArg SplitPattern -&gt; NamedArg SplitPattern)
-&gt; [NamedArg SplitPattern] -&gt; [NamedArg SplitPattern]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Origin -&gt; NamedArg SplitPattern -&gt; NamedArg SplitPattern
forall a. LensOrigin a =&gt; Origin -&gt; a -&gt; a
</span><a href="Agda.Syntax.Common.html#setOrigin"><span class="hs-identifier hs-var">setOrigin</span></a></span><span> </span><span class="annot"><span class="annottext">Origin
</span><a href="Agda.Syntax.Common.html#Inserted"><span class="hs-identifier hs-var">Inserted</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([NamedArg SplitPattern] -&gt; SplitPattern)
-&gt; [NamedArg SplitPattern] -&gt; SplitPattern
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-comment">-- should there be a different Origin here?</span><span>
</span><span id="line-922"></span><span>                   </span><span class="annot"><span class="annottext">(Arg SplitPattern -&gt; NamedArg SplitPattern)
-&gt; [Arg SplitPattern] -&gt; [NamedArg SplitPattern]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(SplitPattern -&gt; Named NamedName SplitPattern)
-&gt; Arg SplitPattern -&gt; NamedArg SplitPattern
forall a b. (a -&gt; b) -&gt; Arg a -&gt; Arg b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">SplitPattern -&gt; Named NamedName SplitPattern
forall a name. a -&gt; Named name a
</span><a href="Agda.Syntax.Common.html#unnamed"><span class="hs-identifier hs-var">unnamed</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Hiding -&gt; Arg SplitPattern -&gt; Arg SplitPattern
forall a. LensHiding a =&gt; Hiding -&gt; a -&gt; a
</span><a href="Agda.Syntax.Common.html#setHiding"><span class="hs-identifier hs-var">setHiding</span></a></span><span> </span><span class="annot"><span class="annottext">Hiding
</span><a href="Agda.Syntax.Common.html#Hidden"><span class="hs-identifier hs-var">Hidden</span></a></span><span> </span><span class="annot"><span class="annottext">(Arg SplitPattern -&gt; Arg SplitPattern)
-&gt; Arg SplitPattern -&gt; Arg SplitPattern
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SplitPattern -&gt; Arg SplitPattern
forall a. a -&gt; Arg a
</span><a href="Agda.Syntax.Common.html#defaultArg"><span class="hs-identifier hs-var">defaultArg</span></a></span><span> </span><span class="annot"><span class="annottext">(SplitPattern -&gt; Arg SplitPattern)
-&gt; SplitPattern -&gt; Arg SplitPattern
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Substitution' (SubstArg SplitPattern)
-&gt; SplitPattern -&gt; SplitPattern
forall a. Subst a =&gt; Substitution' (SubstArg a) -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#applySubst"><span class="hs-identifier hs-var">applySubst</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' SplitPattern
Substitution' (SubstArg SplitPattern)
</span><a href="#local-6989586621682148811"><span class="hs-identifier hs-var">rho1</span></a></span><span> </span><span class="annot"><span class="annottext">(SplitPattern -&gt; SplitPattern) -&gt; SplitPattern -&gt; SplitPattern
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PatternInfo -&gt; Term -&gt; SplitPattern
forall x. PatternInfo -&gt; Term -&gt; Pattern' x
</span><a href="Agda.Syntax.Internal.html#DotP"><span class="hs-identifier hs-var">DotP</span></a></span><span> </span><span class="annot"><span class="annottext">PatternInfo
</span><a href="Agda.Syntax.Internal.html#defaultPatternInfo"><span class="hs-identifier hs-var">defaultPatternInfo</span></a></span><span> </span><span class="annot"><span class="annottext">(Term -&gt; SplitPattern) -&gt; Term -&gt; SplitPattern
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621682148798"><span class="hs-identifier hs-var">dlvl</span></a></span><span>
</span><span id="line-923"></span><span>                                      </span><span class="hs-special">,</span><span class="annot"><span class="annottext">Hiding -&gt; Arg SplitPattern -&gt; Arg SplitPattern
forall a. LensHiding a =&gt; Hiding -&gt; a -&gt; a
</span><a href="Agda.Syntax.Common.html#setHiding"><span class="hs-identifier hs-var">setHiding</span></a></span><span> </span><span class="annot"><span class="annottext">Hiding
</span><a href="Agda.Syntax.Common.html#Hidden"><span class="hs-identifier hs-var">Hidden</span></a></span><span> </span><span class="annot"><span class="annottext">(Arg SplitPattern -&gt; Arg SplitPattern)
-&gt; Arg SplitPattern -&gt; Arg SplitPattern
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SplitPattern -&gt; Arg SplitPattern
forall a. a -&gt; Arg a
</span><a href="Agda.Syntax.Common.html#defaultArg"><span class="hs-identifier hs-var">defaultArg</span></a></span><span> </span><span class="annot"><span class="annottext">(SplitPattern -&gt; Arg SplitPattern)
-&gt; SplitPattern -&gt; Arg SplitPattern
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Substitution' (SubstArg SplitPattern)
-&gt; SplitPattern -&gt; SplitPattern
forall a. Subst a =&gt; Substitution' (SubstArg a) -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#applySubst"><span class="hs-identifier hs-var">applySubst</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' SplitPattern
Substitution' (SubstArg SplitPattern)
</span><a href="#local-6989586621682148811"><span class="hs-identifier hs-var">rho1</span></a></span><span> </span><span class="annot"><span class="annottext">(SplitPattern -&gt; SplitPattern) -&gt; SplitPattern -&gt; SplitPattern
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PatternInfo -&gt; Term -&gt; SplitPattern
forall x. PatternInfo -&gt; Term -&gt; Pattern' x
</span><a href="Agda.Syntax.Internal.html#DotP"><span class="hs-identifier hs-var">DotP</span></a></span><span> </span><span class="annot"><span class="annottext">PatternInfo
</span><a href="Agda.Syntax.Internal.html#defaultPatternInfo"><span class="hs-identifier hs-var">defaultPatternInfo</span></a></span><span> </span><span class="annot"><span class="annottext">(Term -&gt; SplitPattern) -&gt; Term -&gt; SplitPattern
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621682148800"><span class="hs-identifier hs-var">dterm</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-924"></span><span>                   </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
-&gt; [NamedArg SplitPattern] -&gt; [NamedArg SplitPattern]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">Substitution' (SubstArg [NamedArg SplitPattern])
-&gt; [NamedArg SplitPattern] -&gt; [NamedArg SplitPattern]
forall a. Subst a =&gt; Substitution' (SubstArg a) -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#applySubst"><span class="hs-identifier hs-var">applySubst</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' SplitPattern
Substitution' (SubstArg [NamedArg SplitPattern])
</span><a href="#local-6989586621682148812"><span class="hs-identifier hs-var">rho2</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Telescope -&gt; [NamedArg SplitPattern]
forall a t. DeBruijn a =&gt; Tele (Dom t) -&gt; [NamedArg a]
</span><a href="Agda.TypeChecking.Telescope.html#teleNamedArgs"><span class="hs-identifier hs-var">teleNamedArgs</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682148802"><span class="hs-identifier hs-var">gamma</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- rho0?</span><span>
</span><span id="line-925"></span><span>      </span><span class="hs-comment">-- Compute final context and substitution</span><span>
</span><span id="line-926"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682148818"><span class="annot"><span class="annottext">rho3 :: Substitution' SplitPattern
</span><a href="#local-6989586621682148818"><span class="hs-identifier hs-var hs-var hs-var">rho3</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SplitPattern
-&gt; Substitution' SplitPattern -&gt; Substitution' SplitPattern
forall a. DeBruijn a =&gt; a -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#consS"><span class="hs-identifier hs-var">consS</span></a></span><span> </span><span class="annot"><span class="annottext">SplitPattern
</span><a href="#local-6989586621682148815"><span class="hs-identifier hs-var">defp</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' SplitPattern
</span><a href="#local-6989586621682148811"><span class="hs-identifier hs-var">rho1</span></a></span><span>            </span><span class="hs-comment">-- &#916;&#8321;' &#8866; &#961;&#8323; : &#916;&#8321;(x:D)</span><span>
</span><span id="line-927"></span><span>          </span><span id="local-6989586621682148820"><span class="annot"><span class="annottext">delta2' :: Telescope
</span><a href="#local-6989586621682148820"><span class="hs-identifier hs-var hs-var hs-var">delta2'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Substitution' SplitPattern -&gt; Telescope -&gt; Telescope
forall a. TermSubst a =&gt; Substitution' SplitPattern -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Coverage.SplitPattern.html#applySplitPSubst"><span class="hs-identifier hs-var">applySplitPSubst</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' SplitPattern
</span><a href="#local-6989586621682148818"><span class="hs-identifier hs-var">rho3</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682148784"><span class="hs-identifier hs-var">delta2</span></a></span><span>  </span><span class="hs-comment">-- &#916;&#8322;' = &#916;&#8322;&#961;&#8323;</span><span>
</span><span id="line-928"></span><span>          </span><span id="local-6989586621682148821"><span class="annot"><span class="annottext">delta' :: Telescope
</span><a href="#local-6989586621682148821"><span class="hs-identifier hs-var hs-var hs-var">delta'</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682148809"><span class="hs-identifier hs-var">delta1'</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; Telescope -&gt; Telescope
forall t. Abstract t =&gt; Telescope -&gt; t -&gt; t
</span><a href="Agda.TypeChecking.Substitute.Class.html#abstract"><span class="hs-operator hs-var">`abstract`</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682148820"><span class="hs-identifier hs-var">delta2'</span></a></span><span> </span><span class="hs-comment">-- &#916;'  = &#916;&#8321;'&#916;&#8322;'</span><span>
</span><span id="line-929"></span><span>          </span><span id="local-6989586621682148822"><span class="annot"><span class="annottext">rho :: Substitution' SplitPattern
</span><a href="#local-6989586621682148822"><span class="hs-identifier hs-var hs-var hs-var">rho</span></a></span></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Substitution' SplitPattern -&gt; Substitution' SplitPattern
forall a. Int -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#liftS"><span class="hs-identifier hs-var">liftS</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Telescope -&gt; Int
forall a. Sized a =&gt; a -&gt; Int
</span><a href="Agda.Utils.Size.html#size"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682148784"><span class="hs-identifier hs-var">delta2</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Substitution' SplitPattern
</span><a href="#local-6989586621682148818"><span class="hs-identifier hs-var">rho3</span></a></span><span>   </span><span class="hs-comment">-- &#916;' &#8866; &#961; : &#916;&#8321;(x:D)&#916;&#8322;</span><span>
</span><span id="line-930"></span><span>
</span><span id="line-931"></span><span>      </span><span class="hs-comment">-- debugTel &quot;delta'&quot; delta'</span><span>
</span><span id="line-932"></span><span>      </span><span class="hs-comment">-- debugSubst &quot;rho&quot; rho</span><span>
</span><span id="line-933"></span><span>      </span><span class="hs-comment">-- debugPs tel ps</span><span>
</span><span id="line-934"></span><span>
</span><span id="line-935"></span><span>      </span><span class="hs-comment">-- Apply the substitution</span><span>
</span><span id="line-936"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682148823"><span class="annot"><span class="annottext">ps' :: [NamedArg SplitPattern]
</span><a href="#local-6989586621682148823"><span class="hs-identifier hs-var hs-var hs-var">ps'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Substitution' (SubstArg [NamedArg SplitPattern])
-&gt; [NamedArg SplitPattern] -&gt; [NamedArg SplitPattern]
forall a. Subst a =&gt; Substitution' (SubstArg a) -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#applySubst"><span class="hs-identifier hs-var">applySubst</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' SplitPattern
Substitution' (SubstArg [NamedArg SplitPattern])
</span><a href="#local-6989586621682148822"><span class="hs-identifier hs-var">rho</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621682148790"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-937"></span><span>      </span><span class="hs-comment">-- debugPlugged delta' ps'</span><span>
</span><span id="line-938"></span><span>
</span><span id="line-939"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682148824"><span class="annot"><span class="annottext">cps' :: Map CheckpointId (Substitution' Term)
</span><a href="#local-6989586621682148824"><span class="hs-identifier hs-var hs-var">cps'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Substitution' SplitPattern
-&gt; Map CheckpointId (Substitution' Term)
-&gt; Map CheckpointId (Substitution' Term)
forall a. TermSubst a =&gt; Substitution' SplitPattern -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Coverage.SplitPattern.html#applySplitPSubst"><span class="hs-identifier hs-var">applySplitPSubst</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' SplitPattern
</span><a href="#local-6989586621682148822"><span class="hs-identifier hs-var">rho</span></a></span><span> </span><span class="annot"><span class="annottext">Map CheckpointId (Substitution' Term)
</span><a href="#local-6989586621682148791"><span class="hs-identifier hs-var">cps</span></a></span><span>
</span><span id="line-940"></span><span>
</span><span id="line-941"></span><span>      </span><span class="annot"><span class="annottext">Maybe (SplitTag, SplitClause)
-&gt; CoverM (Maybe (SplitTag, SplitClause))
forall a. a -&gt; ExceptT SplitError (TCMT IO) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Maybe (SplitTag, SplitClause)
 -&gt; CoverM (Maybe (SplitTag, SplitClause)))
-&gt; Maybe (SplitTag, SplitClause)
-&gt; CoverM (Maybe (SplitTag, SplitClause))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(SplitTag, SplitClause) -&gt; Maybe (SplitTag, SplitClause)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">((SplitTag, SplitClause) -&gt; Maybe (SplitTag, SplitClause))
-&gt; (SplitClause -&gt; (SplitTag, SplitClause))
-&gt; SplitClause
-&gt; Maybe (SplitTag, SplitClause)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">QName -&gt; SplitTag
</span><a href="Agda.TypeChecking.Coverage.SplitTree.html#SplitCon"><span class="hs-identifier hs-var">SplitCon</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621682148795"><span class="hs-identifier hs-var">hCompName</span></a></span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(SplitClause -&gt; Maybe (SplitTag, SplitClause))
-&gt; SplitClause -&gt; Maybe (SplitTag, SplitClause)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Telescope
-&gt; [NamedArg SplitPattern]
-&gt; Substitution' SplitPattern
-&gt; Map CheckpointId (Substitution' Term)
-&gt; Maybe (Dom Type)
-&gt; SplitClause
</span><a href="Agda.TypeChecking.Coverage.SplitClause.html#SClause"><span class="hs-identifier hs-var">SClause</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682148821"><span class="hs-identifier hs-var">delta'</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621682148823"><span class="hs-identifier hs-var">ps'</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' SplitPattern
</span><a href="#local-6989586621682148822"><span class="hs-identifier hs-var">rho</span></a></span><span> </span><span class="annot"><span class="annottext">Map CheckpointId (Substitution' Term)
</span><a href="#local-6989586621682148824"><span class="hs-identifier hs-var">cps'</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (Dom Type)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-comment">-- target fixed later</span><span>
</span><span id="line-942"></span><span>
</span><span id="line-943"></span><span>
</span><span id="line-944"></span><span class="hs-comment">-- | @computeNeighbourhood delta1 delta2 d pars ixs hix tel ps con@</span><span>
</span><span id="line-945"></span><span class="hs-comment">--</span><span>
</span><span id="line-946"></span><span class="hs-comment">--   @</span><span>
</span><span id="line-947"></span><span class="hs-comment">--      delta1   Telescope before split point</span><span>
</span><span id="line-948"></span><span class="hs-comment">--      n        Name of pattern variable at split point</span><span>
</span><span id="line-949"></span><span class="hs-comment">--      delta2   Telescope after split point</span><span>
</span><span id="line-950"></span><span class="hs-comment">--      d        Name of datatype to split at</span><span>
</span><span id="line-951"></span><span class="hs-comment">--      pars     Data type parameters</span><span>
</span><span id="line-952"></span><span class="hs-comment">--      ixs      Data type indices</span><span>
</span><span id="line-953"></span><span class="hs-comment">--      hix      Index of split variable</span><span>
</span><span id="line-954"></span><span class="hs-comment">--      tel      Telescope for patterns ps</span><span>
</span><span id="line-955"></span><span class="hs-comment">--      ps       Patterns before doing the split</span><span>
</span><span id="line-956"></span><span class="hs-comment">--      cps      Current module parameter checkpoints</span><span>
</span><span id="line-957"></span><span class="hs-comment">--      con      Constructor to fit into hole</span><span>
</span><span id="line-958"></span><span class="hs-comment">--   @</span><span>
</span><span id="line-959"></span><span class="hs-comment">--   @dtype == d pars ixs@</span><span>
</span><span id="line-960"></span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#computeNeighbourhood"><span class="hs-identifier hs-type">computeNeighbourhood</span></a></span><span>
</span><span id="line-961"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Telescope"><span class="hs-identifier hs-type">Telescope</span></a></span><span>                    </span><span class="annot"><span class="hs-comment">-- ^ Telescope before split point.</span></span><span>
</span><span id="line-962"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#PatVarName"><span class="hs-identifier hs-type">PatVarName</span></a></span><span>                   </span><span class="annot"><span class="hs-comment">-- ^ Name of pattern variable at split point.</span></span><span>
</span><span id="line-963"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Telescope"><span class="hs-identifier hs-type">Telescope</span></a></span><span>                    </span><span class="annot"><span class="hs-comment">-- ^ Telescope after split point.</span></span><span>
</span><span id="line-964"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Abstract.Name.html#QName"><span class="hs-identifier hs-type">QName</span></a></span><span>                        </span><span class="annot"><span class="hs-comment">-- ^ Name of datatype to split at.</span></span><span>
</span><span id="line-965"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Args"><span class="hs-identifier hs-type">Args</span></a></span><span>                         </span><span class="annot"><span class="hs-comment">-- ^ Data type parameters.</span></span><span>
</span><span id="line-966"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Args"><span class="hs-identifier hs-type">Args</span></a></span><span>                         </span><span class="annot"><span class="hs-comment">-- ^ Data type indices.</span></span><span>
</span><span id="line-967"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html#Nat"><span class="hs-identifier hs-type">Nat</span></a></span><span>                          </span><span class="annot"><span class="hs-comment">-- ^ Index of split variable.</span></span><span>
</span><span id="line-968"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Telescope"><span class="hs-identifier hs-type">Telescope</span></a></span><span>                    </span><span class="annot"><span class="hs-comment">-- ^ Telescope for the patterns.</span></span><span>
</span><span id="line-969"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.Syntax.Common.html#NamedArg"><span class="hs-identifier hs-type">NamedArg</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitPattern.html#SplitPattern"><span class="hs-identifier hs-type">SplitPattern</span></a></span><span class="hs-special">]</span><span>      </span><span class="annot"><span class="hs-comment">-- ^ Patterns before doing the split.</span></span><span>
</span><span id="line-970"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#CheckpointId"><span class="hs-identifier hs-type">CheckpointId</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Substitution"><span class="hs-identifier hs-type">Substitution</span></a></span><span> </span><span class="annot"><span class="hs-comment">-- ^ Current checkpoints</span></span><span>
</span><span id="line-971"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Abstract.Name.html#QName"><span class="hs-identifier hs-type">QName</span></a></span><span>                        </span><span class="annot"><span class="hs-comment">-- ^ Constructor to fit into hole.</span></span><span>
</span><span id="line-972"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#CoverM"><span class="hs-identifier hs-type">CoverM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitClause.html#SplitClause"><span class="hs-identifier hs-type">SplitClause</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitClause.html#IInfo"><span class="hs-identifier hs-type">IInfo</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>   </span><span class="annot"><span class="hs-comment">-- ^ New split clause if successful.</span></span><span>
</span><span id="line-973"></span><span id="computeNeighbourhood"><span class="annot"><span class="annottext">computeNeighbourhood :: Telescope
-&gt; PatVarName
-&gt; Telescope
-&gt; QName
-&gt; Args
-&gt; Args
-&gt; Int
-&gt; Telescope
-&gt; [NamedArg SplitPattern]
-&gt; Map CheckpointId (Substitution' Term)
-&gt; QName
-&gt; CoverM (Maybe (SplitClause, IInfo))
</span><a href="Agda.TypeChecking.Coverage.html#computeNeighbourhood"><span class="hs-identifier hs-var hs-var">computeNeighbourhood</span></a></span></span><span> </span><span id="local-6989586621682148826"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682148826"><span class="hs-identifier hs-var">delta1</span></a></span></span><span> </span><span id="local-6989586621682148827"><span class="annot"><span class="annottext">PatVarName
</span><a href="#local-6989586621682148827"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621682148828"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682148828"><span class="hs-identifier hs-var">delta2</span></a></span></span><span> </span><span id="local-6989586621682148829"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621682148829"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span id="local-6989586621682148830"><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621682148830"><span class="hs-identifier hs-var">pars</span></a></span></span><span> </span><span id="local-6989586621682148831"><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621682148831"><span class="hs-identifier hs-var">ixs</span></a></span></span><span> </span><span id="local-6989586621682148832"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682148832"><span class="hs-identifier hs-var">hix</span></a></span></span><span> </span><span id="local-6989586621682148833"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682148833"><span class="hs-identifier hs-var">tel</span></a></span></span><span> </span><span id="local-6989586621682148834"><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621682148834"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span id="local-6989586621682148835"><span class="annot"><span class="annottext">Map CheckpointId (Substitution' Term)
</span><a href="#local-6989586621682148835"><span class="hs-identifier hs-var">cps</span></a></span></span><span> </span><span id="local-6989586621682148836"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621682148836"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-974"></span><span>
</span><span id="line-975"></span><span>  </span><span class="hs-comment">-- Get the type of the datatype</span><span>
</span><span id="line-976"></span><span>  </span><span id="local-6989586621682148837"><span class="annot"><a href="#local-6989586621682148837"><span class="hs-identifier hs-var">dtype</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TCM Type -&gt; ExceptT SplitError (TCMT IO) Type
forall a. TCM a -&gt; ExceptT SplitError (TCMT IO) a
forall (tcm :: * -&gt; *) a. MonadTCM tcm =&gt; TCM a -&gt; tcm a
</span><a href="Agda.TypeChecking.Monad.Base.html#liftTCM"><span class="hs-identifier hs-var">liftTCM</span></a></span><span> </span><span class="annot"><span class="annottext">(TCM Type -&gt; ExceptT SplitError (TCMT IO) Type)
-&gt; TCM Type -&gt; ExceptT SplitError (TCMT IO) Type
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type -&gt; Args -&gt; Type
</span><a href="Agda.TypeChecking.Substitute.html#piApply"><span class="hs-operator hs-var">`piApply`</span></a></span><span> </span><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621682148830"><span class="hs-identifier hs-var">pars</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Type -&gt; Type) -&gt; (Definition -&gt; Type) -&gt; Definition -&gt; Type
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Definition -&gt; Type
</span><a href="Agda.TypeChecking.Monad.Base.html#defType"><span class="hs-identifier hs-var">defType</span></a></span><span> </span><span class="annot"><span class="annottext">(Definition -&gt; Type) -&gt; TCM Definition -&gt; TCM Type
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">QName -&gt; TCM Definition
forall (m :: * -&gt; *). HasConstInfo m =&gt; QName -&gt; m Definition
</span><a href="Agda.TypeChecking.Monad.Signature.html#getConstInfo"><span class="hs-identifier hs-var">getConstInfo</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621682148829"><span class="hs-identifier hs-var">d</span></a></span><span>
</span><span id="line-977"></span><span>
</span><span id="line-978"></span><span>  </span><span class="hs-comment">-- Get the real constructor name</span><span>
</span><span id="line-979"></span><span>  </span><span id="local-6989586621682148838"><span class="annot"><a href="#local-6989586621682148838"><span class="hs-identifier hs-var">con</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#liftTCM"><span class="hs-identifier hs-type">liftTCM</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Agda.Utils.Either.html#fromRight"><span class="hs-identifier hs-type">fromRight</span></a></span><span> </span><span class="annot"><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-type">__IMPOSSIBLE__</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">&lt;$&gt;</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Datatypes.html#getConForm"><span class="hs-identifier hs-type">getConForm</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148836"><span class="hs-identifier hs-type">c</span></a></span><span>
</span><span id="line-980"></span><span>  </span><span id="local-6989586621682148840"><span class="annot"><a href="#local-6989586621682148840"><span class="hs-identifier hs-var">con</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="#local-6989586621682148838"><span class="hs-identifier hs-type">con</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#conName"><span class="hs-identifier hs-var">conName</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682148836"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="hs-special">}</span><span>  </span><span class="hs-comment">-- What if we restore the current name?</span><span>
</span><span id="line-981"></span><span>                                       </span><span class="hs-comment">-- Andreas, 2013-11-29 changes nothing!</span><span>
</span><span id="line-982"></span><span>
</span><span id="line-983"></span><span>  </span><span class="hs-comment">-- Get the type of the constructor</span><span>
</span><span id="line-984"></span><span>  </span><span id="local-6989586621682148841"><span class="annot"><a href="#local-6989586621682148841"><span class="hs-identifier hs-var">ctype</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#liftTCM"><span class="hs-identifier hs-type">liftTCM</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#defType"><span class="hs-identifier hs-var">defType</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">&lt;$&gt;</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Signature.html#getConInfo"><span class="hs-identifier hs-type">getConInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148840"><span class="hs-identifier hs-type">con</span></a></span><span>
</span><span id="line-985"></span><span>
</span><span id="line-986"></span><span>  </span><span class="hs-comment">-- Lookup the type of the constructor at the given parameters</span><span>
</span><span id="line-987"></span><span>  </span><span class="hs-special">(</span><span id="local-6989586621682148843"><span class="annot"><a href="#local-6989586621682148843"><span class="hs-identifier hs-var">gamma0</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682148844"><span class="annot"><a href="#local-6989586621682148844"><span class="hs-identifier hs-var">cixs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682148845"><span class="annot"><a href="#local-6989586621682148845"><span class="hs-identifier hs-var">boundary</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-988"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Substitute.html#TelV"><span class="hs-identifier hs-type">TelV</span></a></span><span> </span><span id="local-6989586621682148846"><span class="annot"><a href="#local-6989586621682148846"><span class="hs-identifier hs-var">gamma0</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#El"><span class="hs-identifier hs-type">El</span></a></span><span> </span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682148848"><span class="annot"><a href="#local-6989586621682148848"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span id="local-6989586621682148849"><span class="annot"><a href="#local-6989586621682148849"><span class="hs-identifier hs-var">boundary</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#liftTCM"><span class="hs-identifier hs-type">liftTCM</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-type">addContext</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148826"><span class="hs-identifier hs-type">delta1</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span>
</span><span id="line-989"></span><span>      </span><span class="annot"><a href="Agda.TypeChecking.Telescope.html#telViewPathBoundary"><span class="hs-identifier hs-type">telViewPathBoundary</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682148841"><span class="hs-identifier hs-type">ctype</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Substitute.html#piApply"><span class="hs-operator hs-type">`piApply`</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148830"><span class="hs-identifier hs-type">pars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-990"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Def"><span class="hs-identifier hs-type">Def</span></a></span><span> </span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682148851"><span class="annot"><a href="#local-6989586621682148851"><span class="hs-identifier hs-var">es</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682148848"><span class="hs-identifier hs-type">d</span></a></span><span>
</span><span id="line-991"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621682148852"><span class="annot"><a href="#local-6989586621682148852"><span class="hs-identifier hs-var">cixs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.Elim.html#allApplyElims"><span class="hs-identifier hs-type">allApplyElims</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148851"><span class="hs-identifier hs-type">es</span></a></span><span>
</span><span id="line-992"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682148846"><span class="hs-identifier hs-type">gamma0</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621682148852"><span class="hs-identifier hs-type">cixs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621682148849"><span class="hs-identifier hs-type">boundary</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-993"></span><span>
</span><span id="line-994"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Dom"><span class="hs-identifier hs-type">Dom</span></a></span><span class="hs-special">{</span><span class="annot"><a href="Agda.Syntax.Internal.html#domInfo"><span class="hs-identifier hs-var">domInfo</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682148855"><span class="annot"><a href="#local-6989586621682148855"><span class="hs-identifier hs-var">info</span></a></span></span><span class="hs-special">}</span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span class="annot"><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">splitAt</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Utils.Size.html#size"><span class="hs-identifier hs-type">size</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148833"><span class="hs-identifier hs-type">tel</span></a></span><span> </span><span class="annot"><span class="hs-glyph hs-type">-</span></span><span> </span><span class="annot"><a href="#local-6989586621682148832"><span class="hs-identifier hs-type">hix</span></a></span><span> </span><span class="annot"><span class="hs-glyph hs-type">-</span></span><span> </span><span class="annot"><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#telToList"><span class="hs-identifier hs-type">telToList</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148833"><span class="hs-identifier hs-type">tel</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-995"></span><span>
</span><span id="line-996"></span><span>  </span><span class="hs-comment">-- Andreas, 2012-02-25 preserve name suggestion for recursive arguments</span><span>
</span><span id="line-997"></span><span>  </span><span class="hs-comment">-- of constructor</span><span>
</span><span id="line-998"></span><span>
</span><span id="line-999"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682148856"><span class="annot"><a href="#local-6989586621682148856"><span class="hs-identifier hs-var hs-var">preserve</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682148857"><span class="annot"><span class="annottext">PatVarName
</span><a href="#local-6989586621682148857"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682148858"><span class="annot"><span class="annottext">t :: Type
</span><a href="#local-6989586621682148858"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#El"><span class="hs-identifier hs-type">El</span></a></span><span> </span><span class="annot"><span class="annottext">Sort
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Def"><span class="hs-identifier hs-type">Def</span></a></span><span> </span><span id="local-6989586621682148859"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621682148859"><span class="hs-identifier hs-var">d'</span></a></span></span><span> </span><span class="annot"><span class="annottext">Elims
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621682148829"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="annot"><span class="annottext">QName -&gt; QName -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621682148859"><span class="hs-identifier hs-var">d'</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PatVarName
</span><a href="#local-6989586621682148827"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682148858"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1000"></span><span>      </span><span class="annot"><a href="#local-6989586621682148856"><span class="hs-identifier hs-var">preserve</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682148860"><span class="annot"><span class="annottext">PatVarName
</span><a href="#local-6989586621682148860"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682148861"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682148861"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PatVarName
</span><a href="#local-6989586621682148860"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682148861"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1001"></span><span>      </span><span id="local-6989586621682148862"><span class="annot"><a href="#local-6989586621682148862"><span class="hs-identifier hs-var hs-var">gamma</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Dom Type -&gt; Dom Type) -&gt; Telescope -&gt; Telescope
forall a b. (a -&gt; b) -&gt; Tele a -&gt; Tele b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">((Dom Type -&gt; Dom Type) -&gt; Telescope -&gt; Telescope)
-&gt; ((Modality -&gt; Modality) -&gt; Dom Type -&gt; Dom Type)
-&gt; (Modality -&gt; Modality)
-&gt; Telescope
-&gt; Telescope
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Modality -&gt; Modality) -&gt; Dom Type -&gt; Dom Type
forall a. LensModality a =&gt; (Modality -&gt; Modality) -&gt; a -&gt; a
</span><a href="Agda.Syntax.Common.html#mapModality"><span class="hs-identifier hs-var">mapModality</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Modality -&gt; Modality -&gt; Modality
</span><a href="Agda.Syntax.Common.html#composeModality"><span class="hs-identifier hs-var">composeModality</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ArgInfo -&gt; Modality
forall a. LensModality a =&gt; a -&gt; Modality
</span><a href="Agda.Syntax.Common.html#getModality"><span class="hs-identifier hs-var">getModality</span></a></span><span> </span><span class="annot"><span class="annottext">ArgInfo
</span><a href="#local-6989586621682148855"><span class="hs-identifier hs-var">info</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Telescope -&gt; Telescope) -&gt; Telescope -&gt; Telescope
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ListTel -&gt; Telescope
</span><a href="Agda.Syntax.Internal.html#telFromList"><span class="hs-identifier hs-var">telFromList</span></a></span><span> </span><span class="annot"><span class="annottext">(ListTel -&gt; Telescope)
-&gt; (Telescope -&gt; ListTel) -&gt; Telescope -&gt; Telescope
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Dom (PatVarName, Type) -&gt; Dom (PatVarName, Type))
-&gt; ListTel -&gt; ListTel
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">((PatVarName, Type) -&gt; (PatVarName, Type))
-&gt; Dom (PatVarName, Type) -&gt; Dom (PatVarName, Type)
forall a b. (a -&gt; b) -&gt; Dom' Term a -&gt; Dom' Term b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">(PatVarName, Type) -&gt; (PatVarName, Type)
</span><a href="#local-6989586621682148856"><span class="hs-identifier hs-var">preserve</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(ListTel -&gt; ListTel)
-&gt; (Telescope -&gt; ListTel) -&gt; Telescope -&gt; ListTel
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; ListTel
forall t. Tele (Dom t) -&gt; [Dom (PatVarName, t)]
</span><a href="Agda.Syntax.Internal.html#telToList"><span class="hs-identifier hs-var">telToList</span></a></span><span> </span><span class="annot"><span class="annottext">(Telescope -&gt; Telescope) -&gt; Telescope -&gt; Telescope
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682148843"><span class="hs-identifier hs-var">gamma0</span></a></span><span>
</span><span id="line-1002"></span><span>      </span><span id="local-6989586621682148865"><span class="annot"><a href="#local-6989586621682148865"><span class="hs-identifier hs-var hs-var">delta1Gamma</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682148826"><span class="hs-identifier hs-var">delta1</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; Telescope -&gt; Telescope
forall t. Abstract t =&gt; Telescope -&gt; t -&gt; t
</span><a href="Agda.TypeChecking.Substitute.Class.html#abstract"><span class="hs-operator hs-var">`abstract`</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682148862"><span class="hs-identifier hs-var">gamma</span></a></span><span>
</span><span id="line-1003"></span><span>
</span><span id="line-1004"></span><span>  </span><span class="annot"><a href="#local-6989586621682148866"><span class="hs-identifier hs-type">debugInit</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148840"><span class="hs-identifier hs-type">con</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148841"><span class="hs-identifier hs-type">ctype</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148829"><span class="hs-identifier hs-type">d</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148830"><span class="hs-identifier hs-type">pars</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148831"><span class="hs-identifier hs-type">ixs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148844"><span class="hs-identifier hs-type">cixs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148826"><span class="hs-identifier hs-type">delta1</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148828"><span class="hs-identifier hs-type">delta2</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148862"><span class="hs-identifier hs-type">gamma</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148833"><span class="hs-identifier hs-type">tel</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148834"><span class="hs-identifier hs-type">ps</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148832"><span class="hs-identifier hs-type">hix</span></a></span><span>
</span><span id="line-1005"></span><span>
</span><span id="line-1006"></span><span>  </span><span id="local-6989586621682148867"><span class="annot"><a href="#local-6989586621682148867"><span class="hs-identifier hs-var">cforced</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#defForced"><span class="hs-identifier hs-type">defForced</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">&lt;$&gt;</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Signature.html#getConstInfo"><span class="hs-identifier hs-type">getConstInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148836"><span class="hs-identifier hs-type">c</span></a></span><span>
</span><span id="line-1007"></span><span>      </span><span class="hs-comment">-- Variables in &#916;&#8321; are not forced, since the unifier takes care to not introduce forced</span><span>
</span><span id="line-1008"></span><span>      </span><span class="hs-comment">-- variables.</span><span>
</span><span id="line-1009"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682148869"><span class="annot"><a href="#local-6989586621682148869"><span class="hs-identifier hs-var hs-var">forced</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; IsForced -&gt; [IsForced]
forall a. Int -&gt; a -&gt; [a]
</span><span class="hs-identifier hs-var">replicate</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Telescope -&gt; Int
forall a. Sized a =&gt; a -&gt; Int
</span><a href="Agda.Utils.Size.html#size"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682148826"><span class="hs-identifier hs-var">delta1</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">IsForced
</span><a href="Agda.TypeChecking.Monad.Base.html#NotForced"><span class="hs-identifier hs-var">NotForced</span></a></span><span> </span><span class="annot"><span class="annottext">[IsForced] -&gt; [IsForced] -&gt; [IsForced]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[IsForced]
</span><a href="#local-6989586621682148867"><span class="hs-identifier hs-var">cforced</span></a></span><span>
</span><span id="line-1010"></span><span>      </span><span id="local-6989586621682148872"><span class="annot"><a href="#local-6989586621682148872"><span class="hs-identifier hs-var hs-var">flex</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[IsForced] -&gt; Telescope -&gt; FlexibleVars
</span><a href="Agda.TypeChecking.Rules.LHS.Problem.html#allFlexVars"><span class="hs-identifier hs-var">allFlexVars</span></a></span><span> </span><span class="annot"><span class="annottext">[IsForced]
</span><a href="#local-6989586621682148869"><span class="hs-identifier hs-var">forced</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682148865"><span class="hs-identifier hs-var">delta1Gamma</span></a></span><span> </span><span class="hs-comment">-- All variables are flexible</span><span>
</span><span id="line-1011"></span><span>
</span><span id="line-1012"></span><span>  </span><span class="hs-comment">-- Unify constructor target and given type (in &#916;&#8321;&#915;)</span><span>
</span><span id="line-1013"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682148873"><span class="annot"><a href="#local-6989586621682148873"><span class="hs-identifier hs-var hs-var">conIxs</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Args -&gt; Args
forall a. Int -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">drop</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Args -&gt; Int
forall a. Sized a =&gt; a -&gt; Int
</span><a href="Agda.Utils.Size.html#size"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621682148830"><span class="hs-identifier hs-var">pars</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621682148844"><span class="hs-identifier hs-var">cixs</span></a></span><span>
</span><span id="line-1014"></span><span>      </span><span id="local-6989586621682148874"><span class="annot"><a href="#local-6989586621682148874"><span class="hs-identifier hs-var hs-var">givenIxs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Args -&gt; Args
forall a. Subst a =&gt; Int -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#raise"><span class="hs-identifier hs-var">raise</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Telescope -&gt; Int
forall a. Sized a =&gt; a -&gt; Int
</span><a href="Agda.Utils.Size.html#size"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682148862"><span class="hs-identifier hs-var">gamma</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621682148831"><span class="hs-identifier hs-var">ixs</span></a></span><span>
</span><span id="line-1015"></span><span>
</span><span id="line-1016"></span><span>  </span><span class="hs-comment">-- Andrea 2019-07-17 propagate the Cohesion to the equation telescope</span><span>
</span><span id="line-1017"></span><span>  </span><span class="hs-comment">-- TODO: should we propagate the modality in general?</span><span>
</span><span id="line-1018"></span><span>  </span><span class="hs-comment">-- See also LHS checking.</span><span>
</span><span id="line-1019"></span><span>  </span><span id="local-6989586621682148875"><span class="annot"><a href="#local-6989586621682148875"><span class="hs-identifier hs-var">dtype</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-type">addContext</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148826"><span class="hs-identifier hs-type">delta1</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1020"></span><span>         </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682148876"><span class="annot"><a href="#local-6989586621682148876"><span class="hs-identifier hs-var hs-var">updCoh</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Cohesion -&gt; Cohesion -&gt; Cohesion
</span><a href="Agda.Syntax.Common.html#composeCohesion"><span class="hs-identifier hs-var">composeCohesion</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ArgInfo -&gt; Cohesion
forall a. LensCohesion a =&gt; a -&gt; Cohesion
</span><a href="Agda.Syntax.Common.html#getCohesion"><span class="hs-identifier hs-var">getCohesion</span></a></span><span> </span><span class="annot"><span class="annottext">ArgInfo
</span><a href="#local-6989586621682148855"><span class="hs-identifier hs-var">info</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1021"></span><span>         </span><span class="annot"><a href="Agda.TypeChecking.Substitute.html#TelV"><span class="hs-identifier hs-type">TelV</span></a></span><span> </span><span id="local-6989586621682148879"><span class="annot"><a href="#local-6989586621682148879"><span class="hs-identifier hs-var">dtel</span></a></span></span><span> </span><span id="local-6989586621682148880"><span class="annot"><a href="#local-6989586621682148880"><span class="hs-identifier hs-var">dt</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Telescope.html#telView"><span class="hs-identifier hs-type">telView</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148837"><span class="hs-identifier hs-type">dtype</span></a></span><span>
</span><span id="line-1022"></span><span>         </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#abstract"><span class="hs-identifier hs-type">abstract</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Common.html#mapCohesion"><span class="hs-identifier hs-type">mapCohesion</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148876"><span class="hs-identifier hs-type">updCoh</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">&lt;$&gt;</span></span><span> </span><span class="annot"><a href="#local-6989586621682148879"><span class="hs-identifier hs-type">dtel</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621682148880"><span class="hs-identifier hs-type">dt</span></a></span><span>
</span><span id="line-1023"></span><span>  </span><span id="local-6989586621682148882"><span class="annot"><a href="#local-6989586621682148882"><span class="hs-identifier hs-var">dsort</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-type">addContext</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148826"><span class="hs-identifier hs-type">delta1</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Reduce.html#reduce"><span class="hs-identifier hs-type">reduce</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#getSort"><span class="hs-identifier hs-type">getSort</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148875"><span class="hs-identifier hs-type">dtype</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1024"></span><span>
</span><span id="line-1025"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span class="annot"><a href="#local-6989586621682148883"><span class="hs-identifier hs-type">withKIfStrict</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621682146130"><span class="annot"><a href="#local-6989586621682146130"><span class="hs-identifier hs-type">a</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#CoverM"><span class="hs-identifier hs-type">CoverM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682146130"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#CoverM"><span class="hs-identifier hs-type">CoverM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682146130"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-1026"></span><span>      </span><span id="local-6989586621682148883"><span class="annot"><a href="#local-6989586621682148883"><span class="hs-identifier hs-var hs-var">withKIfStrict</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; (CoverM a -&gt; CoverM a) -&gt; CoverM a -&gt; CoverM a
forall b a. IsBool b =&gt; b -&gt; (a -&gt; a) -&gt; a -&gt; a
</span><a href="Agda.Utils.Function.html#applyWhen"><span class="hs-identifier hs-var">applyWhen</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Sort -&gt; Bool
forall t. Sort' t -&gt; Bool
</span><a href="Agda.Syntax.Internal.html#isStrictDataSort"><span class="hs-identifier hs-var">isStrictDataSort</span></a></span><span> </span><span class="annot"><span class="annottext">Sort
</span><a href="#local-6989586621682148882"><span class="hs-identifier hs-var">dsort</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((CoverM a -&gt; CoverM a) -&gt; CoverM a -&gt; CoverM a)
-&gt; (CoverM a -&gt; CoverM a) -&gt; CoverM a -&gt; CoverM a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Lens' TCEnv Bool -&gt; (Bool -&gt; Bool) -&gt; CoverM a -&gt; CoverM a
forall (m :: * -&gt; *) a b.
MonadTCEnv m =&gt;
Lens' TCEnv a -&gt; (a -&gt; a) -&gt; m b -&gt; m b
</span><a href="Agda.TypeChecking.Monad.Base.html#locallyTC"><span class="hs-identifier hs-var">locallyTC</span></a></span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; f Bool) -&gt; TCEnv -&gt; f TCEnv
Lens' TCEnv Bool
</span><a href="Agda.TypeChecking.Monad.Base.html#eSplitOnStrict"><span class="hs-identifier hs-var">eSplitOnStrict</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">)</span><span>
</span><span id="line-1027"></span><span>
</span><span id="line-1028"></span><span>  </span><span class="hs-comment">-- Should we attempt to compute a left inverse for this clause? When</span><span>
</span><span id="line-1029"></span><span>  </span><span class="hs-comment">-- --cubical=compatible --flat-split is given, we don't generate a</span><span>
</span><span id="line-1030"></span><span>  </span><span class="hs-comment">-- left inverse (at all). This means that, when the coverage checker</span><span>
</span><span id="line-1031"></span><span>  </span><span class="hs-comment">-- gets to the clause this was in, it won't generate a (malformed!)</span><span>
</span><span id="line-1032"></span><span>  </span><span class="hs-comment">-- transpX clause for @&#9837; matching.</span><span>
</span><span id="line-1033"></span><span>  </span><span class="hs-comment">-- TODO(Amy): properly support transpX when @&#9837; stuff is in the</span><span>
</span><span id="line-1034"></span><span>  </span><span class="hs-comment">-- context.</span><span>
</span><span id="line-1035"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682148891"><span class="annot"><a href="#local-6989586621682148891"><span class="hs-identifier hs-var hs-var">flatSplit</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; NoLeftInv -&gt; Maybe NoLeftInv
forall a. Bool -&gt; a -&gt; Maybe a
</span><a href="Agda.Utils.Maybe.html#boolToMaybe"><span class="hs-identifier hs-var">boolToMaybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ArgInfo -&gt; Cohesion
forall a. LensCohesion a =&gt; a -&gt; Cohesion
</span><a href="Agda.Syntax.Common.html#getCohesion"><span class="hs-identifier hs-var">getCohesion</span></a></span><span> </span><span class="annot"><span class="annottext">ArgInfo
</span><a href="#local-6989586621682148855"><span class="hs-identifier hs-var">info</span></a></span><span> </span><span class="annot"><span class="annottext">Cohesion -&gt; Cohesion -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Cohesion
</span><a href="Agda.Syntax.Common.html#Flat"><span class="hs-identifier hs-var">Flat</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NoLeftInv
</span><a href="Agda.TypeChecking.Rules.LHS.Unify.LeftInverse.html#SplitOnFlat"><span class="hs-identifier hs-var">SplitOnFlat</span></a></span><span>
</span><span id="line-1036"></span><span>
</span><span id="line-1037"></span><span>  </span><span id="local-6989586621682148895"><span class="annot"><a href="#local-6989586621682148895"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="#local-6989586621682148883"><span class="hs-identifier hs-type">withKIfStrict</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">lift</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span>
</span><span id="line-1038"></span><span>           </span><span class="annot"><a href="Agda.TypeChecking.Rules.LHS.Unify.html#unifyIndices%27"><span class="hs-identifier hs-type">unifyIndices'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148891"><span class="hs-identifier hs-type">flatSplit</span></a></span><span>
</span><span id="line-1039"></span><span>             </span><span class="annot"><a href="#local-6989586621682148865"><span class="hs-identifier hs-type">delta1Gamma</span></a></span><span>
</span><span id="line-1040"></span><span>             </span><span class="annot"><a href="#local-6989586621682148872"><span class="hs-identifier hs-type">flex</span></a></span><span>
</span><span id="line-1041"></span><span>             </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#raise"><span class="hs-identifier hs-type">raise</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Utils.Size.html#size"><span class="hs-identifier hs-type">size</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148862"><span class="hs-identifier hs-type">gamma</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621682148875"><span class="hs-identifier hs-type">dtype</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1042"></span><span>             </span><span class="annot"><a href="#local-6989586621682148873"><span class="hs-identifier hs-type">conIxs</span></a></span><span>
</span><span id="line-1043"></span><span>             </span><span class="annot"><a href="#local-6989586621682148874"><span class="hs-identifier hs-type">givenIxs</span></a></span><span>
</span><span id="line-1044"></span><span>
</span><span id="line-1045"></span><span>  </span><span class="annot"><a href="Agda.TypeChecking.Substitute.html#TelV"><span class="hs-identifier hs-type">TelV</span></a></span><span> </span><span id="local-6989586621682148897"><span class="annot"><a href="#local-6989586621682148897"><span class="hs-identifier hs-var">eqTel</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Telescope.html#telView"><span class="hs-identifier hs-type">telView</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#raise"><span class="hs-identifier hs-type">raise</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Utils.Size.html#size"><span class="hs-identifier hs-type">size</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148862"><span class="hs-identifier hs-type">gamma</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621682148875"><span class="hs-identifier hs-type">dtype</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1046"></span><span>
</span><span id="line-1047"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682148898"><span class="annot"><a href="#local-6989586621682148898"><span class="hs-identifier hs-var hs-var">stuck</span></a></span></span><span> </span><span id="local-6989586621682148899"><span class="annot"><span class="annottext">Maybe Blocker
</span><a href="#local-6989586621682148899"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span id="local-6989586621682148900"><span class="annot"><span class="annottext">[UnificationFailure]
</span><a href="#local-6989586621682148900"><span class="hs-identifier hs-var">errs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1048"></span><span>        </span><span class="annot"><span class="annottext">ExceptT SplitError (TCMT IO) ()
</span><a href="#local-6989586621682148901"><span class="hs-identifier hs-var">debugCantSplit</span></a></span><span>
</span><span id="line-1049"></span><span>        </span><span class="annot"><span class="annottext">SplitError -&gt; CoverM (Maybe (SplitClause, IInfo))
forall a. SplitError -&gt; ExceptT SplitError (TCMT IO) a
forall e (m :: * -&gt; *) a. MonadError e m =&gt; e -&gt; m a
</span><span class="hs-identifier hs-var">throwError</span></span><span> </span><span class="annot"><span class="annottext">(SplitError -&gt; CoverM (Maybe (SplitClause, IInfo)))
-&gt; SplitError -&gt; CoverM (Maybe (SplitClause, IInfo))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Maybe Blocker
-&gt; QName
-&gt; Telescope
-&gt; Args
-&gt; Args
-&gt; [UnificationFailure]
-&gt; SplitError
</span><a href="Agda.TypeChecking.Monad.Base.html#UnificationStuck"><span class="hs-identifier hs-var">UnificationStuck</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Blocker
</span><a href="#local-6989586621682148899"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConHead -&gt; QName
</span><a href="Agda.Syntax.Internal.html#conName"><span class="hs-identifier hs-var">conName</span></a></span><span> </span><span class="annot"><span class="annottext">ConHead
</span><a href="#local-6989586621682148840"><span class="hs-identifier hs-var">con</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682148826"><span class="hs-identifier hs-var">delta1</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; Telescope -&gt; Telescope
forall t. Abstract t =&gt; Telescope -&gt; t -&gt; t
</span><a href="Agda.TypeChecking.Substitute.Class.html#abstract"><span class="hs-operator hs-var">`abstract`</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682148862"><span class="hs-identifier hs-var">gamma</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621682148873"><span class="hs-identifier hs-var">conIxs</span></a></span><span> </span><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621682148874"><span class="hs-identifier hs-var">givenIxs</span></a></span><span> </span><span class="annot"><span class="annottext">[UnificationFailure]
</span><a href="#local-6989586621682148900"><span class="hs-identifier hs-var">errs</span></a></span><span>
</span><span id="line-1050"></span><span>
</span><span id="line-1051"></span><span>
</span><span id="line-1052"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><a href="#local-6989586621682148895"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1053"></span><span>    </span><span class="annot"><a href="Agda.TypeChecking.Rules.LHS.Unify.html#NoUnify"><span class="hs-identifier hs-type">NoUnify</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ExceptT SplitError (TCMT IO) ()
</span><a href="#local-6989586621682148904"><span class="hs-identifier hs-var">debugNoUnify</span></a></span><span> </span><span class="annot"><span class="annottext">ExceptT SplitError (TCMT IO) ()
-&gt; Maybe (SplitClause, IInfo)
-&gt; CoverM (Maybe (SplitClause, IInfo))
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; b -&gt; f b
</span><span class="hs-operator hs-var">$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Maybe (SplitClause, IInfo)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1054"></span><span>
</span><span id="line-1055"></span><span>    </span><span class="annot"><a href="Agda.TypeChecking.Rules.LHS.Unify.html#UnifyBlocked"><span class="hs-identifier hs-type">UnifyBlocked</span></a></span><span> </span><span id="local-6989586621682148906"><span class="annot"><span class="annottext">Blocker
</span><a href="#local-6989586621682148906"><span class="hs-identifier hs-var">block</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe Blocker
-&gt; [UnificationFailure] -&gt; CoverM (Maybe (SplitClause, IInfo))
</span><a href="#local-6989586621682148898"><span class="hs-identifier hs-var">stuck</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Blocker -&gt; Maybe Blocker
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Blocker
</span><a href="#local-6989586621682148906"><span class="hs-identifier hs-var">block</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-1056"></span><span>
</span><span id="line-1057"></span><span>    </span><span class="annot"><a href="Agda.TypeChecking.Rules.LHS.Unify.html#UnifyStuck"><span class="hs-identifier hs-type">UnifyStuck</span></a></span><span> </span><span id="local-6989586621682148908"><span class="annot"><span class="annottext">[UnificationFailure]
</span><a href="#local-6989586621682148908"><span class="hs-identifier hs-var">errs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe Blocker
-&gt; [UnificationFailure] -&gt; CoverM (Maybe (SplitClause, IInfo))
</span><a href="#local-6989586621682148898"><span class="hs-identifier hs-var">stuck</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Blocker
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">[UnificationFailure]
</span><a href="#local-6989586621682148908"><span class="hs-identifier hs-var">errs</span></a></span><span>
</span><span id="line-1058"></span><span>
</span><span id="line-1059"></span><span>    </span><span class="annot"><a href="Agda.TypeChecking.Rules.LHS.Unify.html#Unifies"><span class="hs-identifier hs-type">Unifies</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682148910"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682148910"><span class="hs-identifier hs-var">delta1'</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621682148911"><span class="annot"><span class="annottext">PatternSubstitution
</span><a href="#local-6989586621682148911"><span class="hs-identifier hs-var">rho0</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621682148912"><span class="annot"><span class="annottext">NAPs
</span><a href="#local-6989586621682148912"><span class="hs-identifier hs-var">eqs</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621682148913"><span class="annot"><span class="annottext">TCM (Either NoLeftInv (Substitution' Term, Substitution' Term))
</span><a href="#local-6989586621682148913"><span class="hs-identifier hs-var">getTauInv</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1060"></span><span>      </span><span id="local-6989586621682148914"><span class="annot"><a href="#local-6989586621682148914"><span class="hs-identifier hs-var">tauInv</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CoverM (Either NoLeftInv (Substitution' Term, Substitution' Term))
-&gt; CoverM
     (Either NoLeftInv (Substitution' Term, Substitution' Term))
forall a. CoverM a -&gt; CoverM a
</span><a href="#local-6989586621682148883"><span class="hs-identifier hs-var">withKIfStrict</span></a></span><span> </span><span class="annot"><span class="annottext">(CoverM (Either NoLeftInv (Substitution' Term, Substitution' Term))
 -&gt; CoverM
      (Either NoLeftInv (Substitution' Term, Substitution' Term)))
-&gt; CoverM
     (Either NoLeftInv (Substitution' Term, Substitution' Term))
-&gt; CoverM
     (Either NoLeftInv (Substitution' Term, Substitution' Term))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCM (Either NoLeftInv (Substitution' Term, Substitution' Term))
-&gt; CoverM
     (Either NoLeftInv (Substitution' Term, Substitution' Term))
forall (m :: * -&gt; *) a. Monad m =&gt; m a -&gt; ExceptT SplitError m a
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">TCM (Either NoLeftInv (Substitution' Term, Substitution' Term))
</span><a href="#local-6989586621682148913"><span class="hs-identifier hs-var">getTauInv</span></a></span><span>
</span><span id="line-1061"></span><span>
</span><span id="line-1062"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682148915"><span class="annot"><a href="#local-6989586621682148915"><span class="hs-identifier hs-var hs-var">unifyInfo</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="annot"><span class="annottext">Level
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Sort
</span><a href="#local-6989586621682148882"><span class="hs-identifier hs-var">dsort</span></a></span><span>     </span><span class="hs-comment">-- only types of sort Type l have trX constructors:</span><span>
</span><span id="line-1063"></span><span>                                          </span><span class="hs-comment">-- re #3733: update if we add transp for other sorts.</span><span>
</span><span id="line-1064"></span><span>                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; Bool) -&gt; Bool -&gt; Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Args -&gt; Bool
forall a. Null a =&gt; a -&gt; Bool
</span><a href="Agda.Utils.Null.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">(Args -&gt; Bool) -&gt; Args -&gt; Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621682148873"><span class="hs-identifier hs-var">conIxs</span></a></span><span> </span><span class="hs-comment">-- no point propagating this info if trivial?</span><span>
</span><span id="line-1065"></span><span>                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682148916"><span class="annot"><span class="annottext">Substitution' Term
</span><a href="#local-6989586621682148916"><span class="hs-identifier hs-var">tau</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621682148917"><span class="annot"><span class="annottext">Substitution' Term
</span><a href="#local-6989586621682148917"><span class="hs-identifier hs-var">leftInv</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Either NoLeftInv (Substitution' Term, Substitution' Term)
</span><a href="#local-6989586621682148914"><span class="hs-identifier hs-var">tauInv</span></a></span><span>
</span><span id="line-1066"></span><span>            </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UnifyEquiv -&gt; IInfo
</span><a href="Agda.TypeChecking.Coverage.SplitClause.html#TheInfo"><span class="hs-identifier hs-var">TheInfo</span></a></span><span> </span><span class="annot"><span class="annottext">(UnifyEquiv -&gt; IInfo) -&gt; UnifyEquiv -&gt; IInfo
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Telescope
-&gt; Telescope
-&gt; Telescope
-&gt; [Term]
-&gt; [Term]
-&gt; PatternSubstitution
-&gt; Substitution' Term
-&gt; Substitution' Term
-&gt; UnifyEquiv
</span><a href="Agda.TypeChecking.Coverage.SplitClause.html#UE"><span class="hs-identifier hs-var">UE</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682148865"><span class="hs-identifier hs-var">delta1Gamma</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682148910"><span class="hs-identifier hs-var">delta1'</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682148897"><span class="hs-identifier hs-var">eqTel</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Arg Term -&gt; Term) -&gt; Args -&gt; [Term]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">Arg Term -&gt; Term
forall e. Arg e -&gt; e
</span><a href="Agda.Syntax.Common.html#unArg"><span class="hs-identifier hs-var">unArg</span></a></span><span> </span><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621682148873"><span class="hs-identifier hs-var">conIxs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Arg Term -&gt; Term) -&gt; Args -&gt; [Term]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">Arg Term -&gt; Term
forall e. Arg e -&gt; e
</span><a href="Agda.Syntax.Common.html#unArg"><span class="hs-identifier hs-var">unArg</span></a></span><span> </span><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621682148874"><span class="hs-identifier hs-var">givenIxs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">PatternSubstitution
</span><a href="#local-6989586621682148911"><span class="hs-identifier hs-var">rho0</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' Term
</span><a href="#local-6989586621682148916"><span class="hs-identifier hs-var">tau</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' Term
</span><a href="#local-6989586621682148917"><span class="hs-identifier hs-var">leftInv</span></a></span><span>
</span><span id="line-1067"></span><span>                    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>
</span><span id="line-1068"></span><span>            </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IInfo
</span><a href="Agda.TypeChecking.Coverage.SplitClause.html#NoInfo"><span class="hs-identifier hs-var">NoInfo</span></a></span><span>
</span><span id="line-1069"></span><span>
</span><span id="line-1070"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><a href="#local-6989586621682148914"><span class="hs-identifier hs-type">tauInv</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1071"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; ExceptT SplitError (TCMT IO) ()
forall a. a -&gt; ExceptT SplitError (TCMT IO) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1072"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span class="annot"><span class="annottext">NoLeftInv
</span><a href="Agda.TypeChecking.Rules.LHS.Unify.LeftInverse.html#SplitOnStrict"><span class="hs-identifier hs-var">SplitOnStrict</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; ExceptT SplitError (TCMT IO) ()
forall a. a -&gt; ExceptT SplitError (TCMT IO) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1073"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span id="local-6989586621682148922"><span class="annot"><span class="annottext">NoLeftInv
</span><a href="#local-6989586621682148922"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1074"></span><span>          </span><span class="annot"><span class="annottext">ExceptT SplitError (TCMT IO) Bool
-&gt; ExceptT SplitError (TCMT IO) ()
-&gt; ExceptT SplitError (TCMT IO) ()
forall (m :: * -&gt; *). Monad m =&gt; m Bool -&gt; m () -&gt; m ()
</span><a href="Agda.Utils.Monad.html#whenM"><span class="hs-identifier hs-var">whenM</span></a></span><span> </span><span class="annot"><span class="annottext">ExceptT SplitError (TCMT IO) Bool
forall (m :: * -&gt; *). HasOptions m =&gt; m Bool
</span><a href="Agda.TypeChecking.Monad.Base.html#cubicalCompatibleOption"><span class="hs-identifier hs-var">cubicalCompatibleOption</span></a></span><span> </span><span class="annot"><span class="annottext">(ExceptT SplitError (TCMT IO) ()
 -&gt; ExceptT SplitError (TCMT IO) ())
-&gt; ExceptT SplitError (TCMT IO) ()
-&gt; ExceptT SplitError (TCMT IO) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1075"></span><span>            </span><span class="hs-comment">-- re #3733: TODO better error msg.</span><span>
</span><span id="line-1076"></span><span>            </span><span class="annot"><span class="annottext">TCMT IO () -&gt; ExceptT SplitError (TCMT IO) ()
forall (m :: * -&gt; *) a. Monad m =&gt; m a -&gt; ExceptT SplitError m a
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO () -&gt; ExceptT SplitError (TCMT IO) ())
-&gt; TCMT IO () -&gt; ExceptT SplitError (TCMT IO) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Warning -&gt; TCMT IO ()
forall (m :: * -&gt; *).
(HasCallStack, MonadWarning m) =&gt;
Warning -&gt; m ()
</span><a href="Agda.TypeChecking.Warnings.html#warning"><span class="hs-identifier hs-var">warning</span></a></span><span> </span><span class="annot"><span class="annottext">(Warning -&gt; TCMT IO ()) -&gt; (Doc -&gt; Warning) -&gt; Doc -&gt; TCMT IO ()
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Warning
</span><a href="Agda.TypeChecking.Monad.Base.html#UnsupportedIndexedMatch"><span class="hs-identifier hs-var">UnsupportedIndexedMatch</span></a></span><span> </span><span class="annot"><span class="annottext">(Doc -&gt; TCMT IO ()) -&gt; TCMT IO Doc -&gt; TCMT IO ()
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">=&lt;&lt;</span></span><span> </span><span class="annot"><span class="annottext">NoLeftInv -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; NoLeftInv -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">NoLeftInv
</span><a href="#local-6989586621682148922"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-1077"></span><span>
</span><span id="line-1078"></span><span>      </span><span class="annot"><a href="#local-6989586621682148924"><span class="hs-identifier hs-type">debugSubst</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;rho0&quot;</span></span><span> </span><span class="annot"><a href="#local-6989586621682148911"><span class="hs-identifier hs-type">rho0</span></a></span><span>
</span><span id="line-1079"></span><span>
</span><span id="line-1080"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682148925"><span class="annot"><a href="#local-6989586621682148925"><span class="hs-identifier hs-var hs-var">rho0'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PatternSubstitution -&gt; Substitution' SplitPattern
</span><a href="Agda.TypeChecking.Coverage.SplitPattern.html#toSplitPSubst"><span class="hs-identifier hs-var">toSplitPSubst</span></a></span><span> </span><span class="annot"><span class="annottext">PatternSubstitution
</span><a href="#local-6989586621682148911"><span class="hs-identifier hs-var">rho0</span></a></span><span>
</span><span id="line-1081"></span><span>
</span><span id="line-1082"></span><span>      </span><span class="hs-comment">-- We have &#916;&#8321;' &#8866; &#961;&#8320; : &#916;&#8321;&#915;, so split it into the part for &#916;&#8321; and the part for &#915;</span><span>
</span><span id="line-1083"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682148926"><span class="annot"><a href="#local-6989586621682148926"><span class="hs-identifier hs-var">rho1</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621682148927"><span class="annot"><a href="#local-6989586621682148927"><span class="hs-identifier hs-var">rho2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#splitS"><span class="hs-identifier hs-type">splitS</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Utils.Size.html#size"><span class="hs-identifier hs-type">size</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148862"><span class="hs-identifier hs-type">gamma</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="#local-6989586621682148925"><span class="hs-identifier hs-type">rho0'</span></a></span><span>
</span><span id="line-1084"></span><span>
</span><span id="line-1085"></span><span>      </span><span class="hs-comment">-- Andreas, 2015-05-01  I guess it is fine to use no @conPType@</span><span>
</span><span id="line-1086"></span><span>      </span><span class="hs-comment">-- as the result of splitting is never used further down the pipeline.</span><span>
</span><span id="line-1087"></span><span>      </span><span class="hs-comment">-- After splitting, Agda reloads the file.</span><span>
</span><span id="line-1088"></span><span>      </span><span class="hs-comment">-- Andreas, 2017-09-03, issue #2729: remember that pattern was generated by case split.</span><span>
</span><span id="line-1089"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682148928"><span class="annot"><a href="#local-6989586621682148928"><span class="hs-identifier hs-var hs-var">cpi</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConPatternInfo
</span><a href="Agda.Syntax.Internal.html#noConPatternInfo"><span class="hs-identifier hs-var">noConPatternInfo</span></a></span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#conPInfo"><span class="hs-identifier hs-var">conPInfo</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#PatternInfo"><span class="hs-identifier hs-type">PatternInfo</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#PatOSplit"><span class="hs-identifier hs-type">PatOSplit</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#conPRecord"><span class="hs-identifier hs-var">conPRecord</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">True</span></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1090"></span><span>          </span><span id="local-6989586621682148934"><span class="annot"><a href="#local-6989586621682148934"><span class="hs-identifier hs-var hs-var">conp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConHead
-&gt; ConPatternInfo -&gt; [NamedArg SplitPattern] -&gt; SplitPattern
forall x.
ConHead -&gt; ConPatternInfo -&gt; [NamedArg (Pattern' x)] -&gt; Pattern' x
</span><a href="Agda.Syntax.Internal.html#ConP"><span class="hs-identifier hs-var">ConP</span></a></span><span> </span><span class="annot"><span class="annottext">ConHead
</span><a href="#local-6989586621682148840"><span class="hs-identifier hs-var">con</span></a></span><span> </span><span class="annot"><span class="annottext">ConPatternInfo
</span><a href="#local-6989586621682148928"><span class="hs-identifier hs-var">cpi</span></a></span><span> </span><span class="annot"><span class="annottext">([NamedArg SplitPattern] -&gt; SplitPattern)
-&gt; [NamedArg SplitPattern] -&gt; SplitPattern
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Substitution' (SubstArg [NamedArg SplitPattern])
-&gt; [NamedArg SplitPattern] -&gt; [NamedArg SplitPattern]
forall a. Subst a =&gt; Substitution' (SubstArg a) -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#applySubst"><span class="hs-identifier hs-var">applySubst</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' SplitPattern
Substitution' (SubstArg [NamedArg SplitPattern])
</span><a href="#local-6989586621682148925"><span class="hs-identifier hs-var">rho0'</span></a></span><span> </span><span class="annot"><span class="annottext">([NamedArg SplitPattern] -&gt; [NamedArg SplitPattern])
-&gt; [NamedArg SplitPattern] -&gt; [NamedArg SplitPattern]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1091"></span><span>                   </span><span class="annot"><span class="annottext">(NamedArg SplitPattern -&gt; NamedArg SplitPattern)
-&gt; [NamedArg SplitPattern] -&gt; [NamedArg SplitPattern]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(ArgInfo -&gt; ArgInfo)
-&gt; NamedArg SplitPattern -&gt; NamedArg SplitPattern
forall a. LensArgInfo a =&gt; (ArgInfo -&gt; ArgInfo) -&gt; a -&gt; a
</span><a href="Agda.Syntax.Common.html#mapArgInfo"><span class="hs-identifier hs-var">mapArgInfo</span></a></span><span> </span><span class="annot"><span class="annottext">ArgInfo -&gt; ArgInfo
</span><a href="Agda.TypeChecking.Coverage.html#hiddenInserted"><span class="hs-identifier hs-var">hiddenInserted</span></a></span><span> </span><span class="annot"><span class="annottext">(NamedArg SplitPattern -&gt; NamedArg SplitPattern)
-&gt; (NamedArg SplitPattern -&gt; NamedArg SplitPattern)
-&gt; NamedArg SplitPattern
-&gt; NamedArg SplitPattern
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Named NamedName SplitPattern -&gt; Named NamedName SplitPattern)
-&gt; NamedArg SplitPattern -&gt; NamedArg SplitPattern
forall a b. (a -&gt; b) -&gt; Arg a -&gt; Arg b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(SplitPattern -&gt; SplitPattern)
-&gt; Named NamedName SplitPattern -&gt; Named NamedName SplitPattern
forall a b. (a -&gt; b) -&gt; Named NamedName a -&gt; Named NamedName b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">SplitPattern -&gt; SplitPattern
</span><a href="#local-6989586621682148935"><span class="hs-identifier hs-var">setSplitArgOrigin</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([NamedArg SplitPattern] -&gt; [NamedArg SplitPattern])
-&gt; [NamedArg SplitPattern] -&gt; [NamedArg SplitPattern]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1092"></span><span>                   </span><span class="annot"><span class="annottext">(forall a1. DeBruijn a1 =&gt; Telescope -&gt; [NamedArg a1])
-&gt; Telescope -&gt; Boundary -&gt; [NamedArg SplitPattern]
forall a.
DeBruijn a =&gt;
(forall a1. DeBruijn a1 =&gt; Telescope -&gt; [NamedArg a1])
-&gt; Telescope -&gt; Boundary -&gt; [NamedArg (Pattern' a)]
</span><a href="Agda.TypeChecking.Telescope.html#telePatterns%27"><span class="hs-identifier hs-var">telePatterns'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Telescope -&gt; Telescope -&gt; [NamedArg a1]
forall a. DeBruijn a =&gt; Telescope -&gt; Telescope -&gt; [NamedArg a]
</span><a href="Agda.TypeChecking.Telescope.html#tele2NamedArgs"><span class="hs-identifier hs-var">tele2NamedArgs</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682148843"><span class="hs-identifier hs-var">gamma0</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682148862"><span class="hs-identifier hs-var">gamma</span></a></span><span> </span><span class="annot"><span class="annottext">Boundary
</span><a href="#local-6989586621682148845"><span class="hs-identifier hs-var">boundary</span></a></span><span>
</span><span id="line-1093"></span><span>          </span><span class="hs-comment">-- Andreas, 2016-09-08, issue #2166: use gamma0 for correct argument names</span><span>
</span><span id="line-1094"></span><span>
</span><span id="line-1095"></span><span>      </span><span class="hs-comment">-- Compute final context and substitution</span><span>
</span><span id="line-1096"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682148940"><span class="annot"><a href="#local-6989586621682148940"><span class="hs-identifier hs-var hs-var">rho3</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SplitPattern
-&gt; Substitution' SplitPattern -&gt; Substitution' SplitPattern
forall a. DeBruijn a =&gt; a -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#consS"><span class="hs-identifier hs-var">consS</span></a></span><span> </span><span class="annot"><span class="annottext">SplitPattern
</span><a href="#local-6989586621682148934"><span class="hs-identifier hs-var">conp</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' SplitPattern
</span><a href="#local-6989586621682148926"><span class="hs-identifier hs-var">rho1</span></a></span><span>            </span><span class="hs-comment">-- &#916;&#8321;' &#8866; &#961;&#8323; : &#916;&#8321;(x:D)</span><span>
</span><span id="line-1097"></span><span>          </span><span id="local-6989586621682148941"><span class="annot"><a href="#local-6989586621682148941"><span class="hs-identifier hs-var hs-var">delta2'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Substitution' SplitPattern -&gt; Telescope -&gt; Telescope
forall a. TermSubst a =&gt; Substitution' SplitPattern -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Coverage.SplitPattern.html#applySplitPSubst"><span class="hs-identifier hs-var">applySplitPSubst</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' SplitPattern
</span><a href="#local-6989586621682148940"><span class="hs-identifier hs-var">rho3</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682148828"><span class="hs-identifier hs-var">delta2</span></a></span><span>  </span><span class="hs-comment">-- &#916;&#8322;' = &#916;&#8322;&#961;&#8323;</span><span>
</span><span id="line-1098"></span><span>          </span><span id="local-6989586621682148942"><span class="annot"><a href="#local-6989586621682148942"><span class="hs-identifier hs-var hs-var">delta'</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682148910"><span class="hs-identifier hs-var">delta1'</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; Telescope -&gt; Telescope
forall t. Abstract t =&gt; Telescope -&gt; t -&gt; t
</span><a href="Agda.TypeChecking.Substitute.Class.html#abstract"><span class="hs-operator hs-var">`abstract`</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682148941"><span class="hs-identifier hs-var">delta2'</span></a></span><span> </span><span class="hs-comment">-- &#916;'  = &#916;&#8321;'&#916;&#8322;'</span><span>
</span><span id="line-1099"></span><span>          </span><span id="local-6989586621682148943"><span class="annot"><a href="#local-6989586621682148943"><span class="hs-identifier hs-var hs-var">rho</span></a></span></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Substitution' SplitPattern -&gt; Substitution' SplitPattern
forall a. Int -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#liftS"><span class="hs-identifier hs-var">liftS</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Telescope -&gt; Int
forall a. Sized a =&gt; a -&gt; Int
</span><a href="Agda.Utils.Size.html#size"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682148828"><span class="hs-identifier hs-var">delta2</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Substitution' SplitPattern
</span><a href="#local-6989586621682148940"><span class="hs-identifier hs-var">rho3</span></a></span><span>   </span><span class="hs-comment">-- &#916;' &#8866; &#961; : &#916;&#8321;(x:D)&#916;&#8322;</span><span>
</span><span id="line-1100"></span><span>
</span><span id="line-1101"></span><span>      </span><span class="annot"><a href="#local-6989586621682148944"><span class="hs-identifier hs-type">debugTel</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;delta'&quot;</span></span><span> </span><span class="annot"><a href="#local-6989586621682148942"><span class="hs-identifier hs-type">delta'</span></a></span><span>
</span><span id="line-1102"></span><span>      </span><span class="annot"><a href="#local-6989586621682148924"><span class="hs-identifier hs-type">debugSubst</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;rho&quot;</span></span><span> </span><span class="annot"><a href="#local-6989586621682148943"><span class="hs-identifier hs-type">rho</span></a></span><span>
</span><span id="line-1103"></span><span>      </span><span class="annot"><a href="#local-6989586621682148945"><span class="hs-identifier hs-type">debugPs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148833"><span class="hs-identifier hs-type">tel</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148834"><span class="hs-identifier hs-type">ps</span></a></span><span>
</span><span id="line-1104"></span><span>
</span><span id="line-1105"></span><span>      </span><span class="hs-comment">-- Apply the substitution</span><span>
</span><span id="line-1106"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682148946"><span class="annot"><a href="#local-6989586621682148946"><span class="hs-identifier hs-var hs-var">ps'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Substitution' (SubstArg [NamedArg SplitPattern])
-&gt; [NamedArg SplitPattern] -&gt; [NamedArg SplitPattern]
forall a. Subst a =&gt; Substitution' (SubstArg a) -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#applySubst"><span class="hs-identifier hs-var">applySubst</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' SplitPattern
Substitution' (SubstArg [NamedArg SplitPattern])
</span><a href="#local-6989586621682148943"><span class="hs-identifier hs-var">rho</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621682148834"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-1107"></span><span>      </span><span class="annot"><a href="#local-6989586621682148947"><span class="hs-identifier hs-type">debugPlugged</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148942"><span class="hs-identifier hs-type">delta'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148946"><span class="hs-identifier hs-type">ps'</span></a></span><span>
</span><span id="line-1108"></span><span>
</span><span id="line-1109"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682148948"><span class="annot"><a href="#local-6989586621682148948"><span class="hs-identifier hs-var hs-var">cps'</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Substitution' SplitPattern
-&gt; Map CheckpointId (Substitution' Term)
-&gt; Map CheckpointId (Substitution' Term)
forall a. TermSubst a =&gt; Substitution' SplitPattern -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Coverage.SplitPattern.html#applySplitPSubst"><span class="hs-identifier hs-var">applySplitPSubst</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' SplitPattern
</span><a href="#local-6989586621682148943"><span class="hs-identifier hs-var">rho</span></a></span><span> </span><span class="annot"><span class="annottext">Map CheckpointId (Substitution' Term)
</span><a href="#local-6989586621682148835"><span class="hs-identifier hs-var">cps</span></a></span><span>
</span><span id="line-1110"></span><span>
</span><span id="line-1111"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">.</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">,</span><span class="annot"><a href="#local-6989586621682148915"><span class="hs-identifier hs-type">unifyInfo</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitClause.html#SClause"><span class="hs-identifier hs-type">SClause</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148942"><span class="hs-identifier hs-type">delta'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148946"><span class="hs-identifier hs-type">ps'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148943"><span class="hs-identifier hs-type">rho</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148948"><span class="hs-identifier hs-type">cps'</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Nothing</span></span><span> </span><span class="hs-comment">-- target fixed later</span><span>
</span><span id="line-1112"></span><span>
</span><span id="line-1113"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1114"></span><span>    </span><span class="annot"><a href="#local-6989586621682148935"><span class="hs-identifier hs-type">setSplitArgOrigin</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitPattern.html#SplitPattern"><span class="hs-identifier hs-type">SplitPattern</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitPattern.html#SplitPattern"><span class="hs-identifier hs-type">SplitPattern</span></a></span><span>
</span><span id="line-1115"></span><span>    </span><span id="local-6989586621682148935"><span class="annot"><span class="annottext">setSplitArgOrigin :: SplitPattern -&gt; SplitPattern
</span><a href="#local-6989586621682148935"><span class="hs-identifier hs-var hs-var">setSplitArgOrigin</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#VarP"><span class="hs-identifier hs-type">VarP</span></a></span><span> </span><span id="local-6989586621682148949"><span class="annot"><span class="annottext">PatternInfo
</span><a href="#local-6989586621682148949"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621682148950"><span class="annot"><span class="annottext">SplitPatVar
</span><a href="#local-6989586621682148950"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PatternInfo -&gt; SplitPatVar -&gt; SplitPattern
forall x. PatternInfo -&gt; x -&gt; Pattern' x
</span><a href="Agda.Syntax.Internal.html#VarP"><span class="hs-identifier hs-var">VarP</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PatternInfo
</span><a href="#local-6989586621682148949"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#patOrigin"><span class="hs-identifier hs-var">patOrigin</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#PatOSplitArg"><span class="hs-identifier hs-type">PatOSplitArg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitPattern.html#splitPatVarName"><span class="hs-identifier hs-var">splitPatVarName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148950"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SplitPatVar
</span><a href="#local-6989586621682148950"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-1116"></span><span>    </span><span class="annot"><a href="#local-6989586621682148935"><span class="hs-identifier hs-var">setSplitArgOrigin</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#IApplyP"><span class="hs-identifier hs-type">IApplyP</span></a></span><span> </span><span id="local-6989586621682148954"><span class="annot"><span class="annottext">PatternInfo
</span><a href="#local-6989586621682148954"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621682148955"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621682148955"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span id="local-6989586621682148956"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621682148956"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span id="local-6989586621682148957"><span class="annot"><span class="annottext">SplitPatVar
</span><a href="#local-6989586621682148957"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PatternInfo -&gt; Term -&gt; Term -&gt; SplitPatVar -&gt; SplitPattern
forall x. PatternInfo -&gt; Term -&gt; Term -&gt; x -&gt; Pattern' x
</span><a href="Agda.Syntax.Internal.html#IApplyP"><span class="hs-identifier hs-var">IApplyP</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PatternInfo
</span><a href="#local-6989586621682148954"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#patOrigin"><span class="hs-identifier hs-var">patOrigin</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#PatOSplitArg"><span class="hs-identifier hs-type">PatOSplitArg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitPattern.html#splitPatVarName"><span class="hs-identifier hs-var">splitPatVarName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682148957"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621682148955"><span class="hs-identifier hs-var">u</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621682148956"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">SplitPatVar
</span><a href="#local-6989586621682148957"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-1117"></span><span>    </span><span class="annot"><a href="#local-6989586621682148935"><span class="hs-identifier hs-var">setSplitArgOrigin</span></a></span><span> </span><span id="local-6989586621682148958"><span class="annot"><span class="annottext">SplitPattern
</span><a href="#local-6989586621682148958"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SplitPattern
</span><a href="#local-6989586621682148958"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-1118"></span><span>
</span><span id="line-1119"></span><span>    </span><span id="local-6989586621682148866"><span class="annot"><span class="annottext">debugInit :: ConHead
-&gt; Type
-&gt; QName
-&gt; Args
-&gt; Args
-&gt; Args
-&gt; Telescope
-&gt; Telescope
-&gt; Telescope
-&gt; Telescope
-&gt; [NamedArg SplitPattern]
-&gt; Int
-&gt; ExceptT SplitError (TCMT IO) ()
</span><a href="#local-6989586621682148866"><span class="hs-identifier hs-var hs-var">debugInit</span></a></span></span><span> </span><span id="local-6989586621682148959"><span class="annot"><span class="annottext">ConHead
</span><a href="#local-6989586621682148959"><span class="hs-identifier hs-var">con</span></a></span></span><span> </span><span id="local-6989586621682148960"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682148960"><span class="hs-identifier hs-var">ctype</span></a></span></span><span> </span><span id="local-6989586621682148961"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621682148961"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span id="local-6989586621682148962"><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621682148962"><span class="hs-identifier hs-var">pars</span></a></span></span><span> </span><span id="local-6989586621682148963"><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621682148963"><span class="hs-identifier hs-var">ixs</span></a></span></span><span> </span><span id="local-6989586621682148964"><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621682148964"><span class="hs-identifier hs-var">cixs</span></a></span></span><span> </span><span id="local-6989586621682148965"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682148965"><span class="hs-identifier hs-var">delta1</span></a></span></span><span> </span><span id="local-6989586621682148966"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682148966"><span class="hs-identifier hs-var">delta2</span></a></span></span><span> </span><span id="local-6989586621682148967"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682148967"><span class="hs-identifier hs-var">gamma</span></a></span></span><span> </span><span id="local-6989586621682148968"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682148968"><span class="hs-identifier hs-var">tel</span></a></span></span><span> </span><span id="local-6989586621682148969"><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621682148969"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span id="local-6989586621682148970"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682148970"><span class="hs-identifier hs-var">hix</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TCMT IO () -&gt; ExceptT SplitError (TCMT IO) ()
forall a. TCM a -&gt; ExceptT SplitError (TCMT IO) a
forall (tcm :: * -&gt; *) a. MonadTCM tcm =&gt; TCM a -&gt; tcm a
</span><a href="Agda.TypeChecking.Monad.Base.html#liftTCM"><span class="hs-identifier hs-var">liftTCM</span></a></span><span> </span><span class="annot"><span class="annottext">(TCMT IO () -&gt; ExceptT SplitError (TCMT IO) ())
-&gt; TCMT IO () -&gt; ExceptT SplitError (TCMT IO) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1120"></span><span>      </span><span class="annot"><span class="annottext">PatVarName -&gt; Int -&gt; TCMT IO Doc -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
PatVarName -&gt; Int -&gt; TCMT IO Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">PatVarName
</span><span class="hs-string">&quot;tc.cover.split.con&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">20</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; TCMT IO ()) -&gt; TCMT IO Doc -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[TCMT IO Doc] -&gt; TCMT IO Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span>
</span><span id="line-1121"></span><span>        </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;computeNeighbourhood&quot;</span></span><span>
</span><span id="line-1122"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Functor m =&gt; Int -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; TCMT IO Doc) -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[TCMT IO Doc] -&gt; TCMT IO Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span>
</span><span id="line-1123"></span><span>          </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;context=&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc
forall (tcm :: * -&gt; *) a.
(MonadTCEnv tcm, ReadTCState tcm) =&gt;
tcm a -&gt; tcm a
</span><a href="Agda.TypeChecking.Monad.Context.html#inTopContext"><span class="hs-identifier hs-var">inTopContext</span></a></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; TCMT IO Doc)
-&gt; (Telescope -&gt; TCMT IO Doc) -&gt; Telescope -&gt; TCMT IO Doc
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; Telescope -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">(Telescope -&gt; TCMT IO Doc) -&gt; TCMT IO Telescope -&gt; TCMT IO Doc
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">=&lt;&lt;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Telescope
forall (m :: * -&gt; *). MonadTCEnv m =&gt; m Telescope
</span><a href="Agda.TypeChecking.Monad.Context.html#getContextTelescope"><span class="hs-identifier hs-var">getContextTelescope</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1124"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;con    =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">ConHead -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; ConHead -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">ConHead
</span><a href="#local-6989586621682148959"><span class="hs-identifier hs-var">con</span></a></span><span>
</span><span id="line-1125"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;ctype  =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Type -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; Type -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682148960"><span class="hs-identifier hs-var">ctype</span></a></span><span>
</span><span id="line-1126"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;ps     =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="hs-keyword">do</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc
forall (tcm :: * -&gt; *) a.
(MonadTCEnv tcm, ReadTCState tcm) =&gt;
tcm a -&gt; tcm a
</span><a href="Agda.TypeChecking.Monad.Context.html#inTopContext"><span class="hs-identifier hs-var">inTopContext</span></a></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; TCMT IO Doc) -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a.
MonadAddContext m =&gt;
Telescope -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682148968"><span class="hs-identifier hs-var">tel</span></a></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; TCMT IO Doc) -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">NAPs -&gt; TCMT IO Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; NAPs -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCMPatternList"><span class="hs-identifier hs-var">prettyTCMPatternList</span></a></span><span> </span><span class="annot"><span class="annottext">(NAPs -&gt; TCMT IO Doc) -&gt; NAPs -&gt; TCMT IO Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern] -&gt; NAPs
</span><a href="Agda.TypeChecking.Coverage.SplitPattern.html#fromSplitPatterns"><span class="hs-identifier hs-var">fromSplitPatterns</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621682148969"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-1127"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;d      =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">QName -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; QName -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621682148961"><span class="hs-identifier hs-var">d</span></a></span><span>
</span><span id="line-1128"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;pars   =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="hs-keyword">do</span><span> </span><span class="annot"><span class="annottext">[TCMT IO Doc] -&gt; TCMT IO Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyList"><span class="hs-identifier hs-var">prettyList</span></a></span><span> </span><span class="annot"><span class="annottext">([TCMT IO Doc] -&gt; TCMT IO Doc) -&gt; [TCMT IO Doc] -&gt; TCMT IO Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Arg Term -&gt; TCMT IO Doc) -&gt; Args -&gt; [TCMT IO Doc]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">Arg Term -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; Arg Term -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621682148962"><span class="hs-identifier hs-var">pars</span></a></span><span>
</span><span id="line-1129"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;ixs    =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="hs-keyword">do</span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a.
MonadAddContext m =&gt;
Telescope -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682148965"><span class="hs-identifier hs-var">delta1</span></a></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; TCMT IO Doc) -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[TCMT IO Doc] -&gt; TCMT IO Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyList"><span class="hs-identifier hs-var">prettyList</span></a></span><span> </span><span class="annot"><span class="annottext">([TCMT IO Doc] -&gt; TCMT IO Doc) -&gt; [TCMT IO Doc] -&gt; TCMT IO Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Arg Term -&gt; TCMT IO Doc) -&gt; Args -&gt; [TCMT IO Doc]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">Arg Term -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; Arg Term -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621682148963"><span class="hs-identifier hs-var">ixs</span></a></span><span>
</span><span id="line-1130"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;cixs   =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="hs-keyword">do</span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a.
MonadAddContext m =&gt;
Telescope -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682148967"><span class="hs-identifier hs-var">gamma</span></a></span><span>  </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; TCMT IO Doc) -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[TCMT IO Doc] -&gt; TCMT IO Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyList"><span class="hs-identifier hs-var">prettyList</span></a></span><span> </span><span class="annot"><span class="annottext">([TCMT IO Doc] -&gt; TCMT IO Doc) -&gt; [TCMT IO Doc] -&gt; TCMT IO Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Arg Term -&gt; TCMT IO Doc) -&gt; Args -&gt; [TCMT IO Doc]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">Arg Term -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; Arg Term -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621682148964"><span class="hs-identifier hs-var">cixs</span></a></span><span>
</span><span id="line-1131"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;delta1 =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="hs-keyword">do</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc
forall (tcm :: * -&gt; *) a.
(MonadTCEnv tcm, ReadTCState tcm) =&gt;
tcm a -&gt; tcm a
</span><a href="Agda.TypeChecking.Monad.Context.html#inTopContext"><span class="hs-identifier hs-var">inTopContext</span></a></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; TCMT IO Doc) -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; Telescope -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682148965"><span class="hs-identifier hs-var">delta1</span></a></span><span>
</span><span id="line-1132"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;delta2 =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="hs-keyword">do</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc
forall (tcm :: * -&gt; *) a.
(MonadTCEnv tcm, ReadTCState tcm) =&gt;
tcm a -&gt; tcm a
</span><a href="Agda.TypeChecking.Monad.Context.html#inTopContext"><span class="hs-identifier hs-var">inTopContext</span></a></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; TCMT IO Doc) -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a.
MonadAddContext m =&gt;
Telescope -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682148965"><span class="hs-identifier hs-var">delta1</span></a></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; TCMT IO Doc) -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PatVarName -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a.
MonadAddContext m =&gt;
PatVarName -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">PatVarName
</span><a href="#local-6989586621682148827"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; TCMT IO Doc) -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; Telescope -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682148966"><span class="hs-identifier hs-var">delta2</span></a></span><span>
</span><span id="line-1133"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;gamma  =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="hs-keyword">do</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc
forall (tcm :: * -&gt; *) a.
(MonadTCEnv tcm, ReadTCState tcm) =&gt;
tcm a -&gt; tcm a
</span><a href="Agda.TypeChecking.Monad.Context.html#inTopContext"><span class="hs-identifier hs-var">inTopContext</span></a></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; TCMT IO Doc) -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a.
MonadAddContext m =&gt;
Telescope -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682148965"><span class="hs-identifier hs-var">delta1</span></a></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; TCMT IO Doc) -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; Telescope -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682148967"><span class="hs-identifier hs-var">gamma</span></a></span><span>
</span><span id="line-1134"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;tel  =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="hs-keyword">do</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc
forall (tcm :: * -&gt; *) a.
(MonadTCEnv tcm, ReadTCState tcm) =&gt;
tcm a -&gt; tcm a
</span><a href="Agda.TypeChecking.Monad.Context.html#inTopContext"><span class="hs-identifier hs-var">inTopContext</span></a></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; TCMT IO Doc) -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; Telescope -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682148968"><span class="hs-identifier hs-var">tel</span></a></span><span>
</span><span id="line-1135"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;hix    =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">PatVarName -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; PatVarName -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; PatVarName
forall a. Show a =&gt; a -&gt; PatVarName
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682148970"><span class="hs-identifier hs-var">hix</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1136"></span><span>          </span><span class="hs-special">]</span><span>
</span><span id="line-1137"></span><span>        </span><span class="hs-special">]</span><span>
</span><span id="line-1138"></span><span>      </span><span class="annot"><span class="annottext">PatVarName -&gt; Int -&gt; TCMT IO Doc -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
PatVarName -&gt; Int -&gt; TCMT IO Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">PatVarName
</span><span class="hs-string">&quot;tc.cover.split.con&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">70</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; TCMT IO ()) -&gt; TCMT IO Doc -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[TCMT IO Doc] -&gt; TCMT IO Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span>
</span><span id="line-1139"></span><span>        </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;computeNeighbourhood&quot;</span></span><span>
</span><span id="line-1140"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Functor m =&gt; Int -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; TCMT IO Doc) -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[TCMT IO Doc] -&gt; TCMT IO Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span>
</span><span id="line-1141"></span><span>          </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;context=&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc
forall (tcm :: * -&gt; *) a.
(MonadTCEnv tcm, ReadTCState tcm) =&gt;
tcm a -&gt; tcm a
</span><a href="Agda.TypeChecking.Monad.Context.html#inTopContext"><span class="hs-identifier hs-var">inTopContext</span></a></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; TCMT IO Doc)
-&gt; (Telescope -&gt; TCMT IO Doc) -&gt; Telescope -&gt; TCMT IO Doc
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PatVarName -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; PatVarName -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">(PatVarName -&gt; TCMT IO Doc)
-&gt; (Telescope -&gt; PatVarName) -&gt; Telescope -&gt; TCMT IO Doc
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; PatVarName
forall a. Show a =&gt; a -&gt; PatVarName
</span><span class="hs-identifier hs-var">show</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Telescope -&gt; TCMT IO Doc) -&gt; TCMT IO Telescope -&gt; TCMT IO Doc
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">=&lt;&lt;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Telescope
forall (m :: * -&gt; *). MonadTCEnv m =&gt; m Telescope
</span><a href="Agda.TypeChecking.Monad.Context.html#getContextTelescope"><span class="hs-identifier hs-var">getContextTelescope</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1142"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;con    =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PatVarName -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; PatVarName -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">(PatVarName -&gt; TCMT IO Doc)
-&gt; (ConHead -&gt; PatVarName) -&gt; ConHead -&gt; TCMT IO Doc
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ConHead -&gt; PatVarName
forall a. Show a =&gt; a -&gt; PatVarName
</span><span class="hs-identifier hs-var">show</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ConHead
</span><a href="#local-6989586621682148959"><span class="hs-identifier hs-var">con</span></a></span><span>
</span><span id="line-1143"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;ctype  =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PatVarName -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; PatVarName -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">(PatVarName -&gt; TCMT IO Doc)
-&gt; (Type -&gt; PatVarName) -&gt; Type -&gt; TCMT IO Doc
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; PatVarName
forall a. Show a =&gt; a -&gt; PatVarName
</span><span class="hs-identifier hs-var">show</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682148960"><span class="hs-identifier hs-var">ctype</span></a></span><span>
</span><span id="line-1144"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;ps     =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PatVarName -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; PatVarName -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">(PatVarName -&gt; TCMT IO Doc)
-&gt; ([NamedArg SplitPattern] -&gt; PatVarName)
-&gt; [NamedArg SplitPattern]
-&gt; TCMT IO Doc
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern] -&gt; PatVarName
forall a. Show a =&gt; a -&gt; PatVarName
</span><span class="hs-identifier hs-var">show</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621682148969"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-1145"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;d      =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PatVarName -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; PatVarName -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">(PatVarName -&gt; TCMT IO Doc)
-&gt; (QName -&gt; PatVarName) -&gt; QName -&gt; TCMT IO Doc
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">QName -&gt; PatVarName
forall a. Show a =&gt; a -&gt; PatVarName
</span><span class="hs-identifier hs-var">show</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621682148961"><span class="hs-identifier hs-var">d</span></a></span><span>
</span><span id="line-1146"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;pars   =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PatVarName -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; PatVarName -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">(PatVarName -&gt; TCMT IO Doc)
-&gt; (Args -&gt; PatVarName) -&gt; Args -&gt; TCMT IO Doc
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Args -&gt; PatVarName
forall a. Show a =&gt; a -&gt; PatVarName
</span><span class="hs-identifier hs-var">show</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621682148962"><span class="hs-identifier hs-var">pars</span></a></span><span>
</span><span id="line-1147"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;ixs    =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PatVarName -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; PatVarName -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">(PatVarName -&gt; TCMT IO Doc)
-&gt; (Args -&gt; PatVarName) -&gt; Args -&gt; TCMT IO Doc
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Args -&gt; PatVarName
forall a. Show a =&gt; a -&gt; PatVarName
</span><span class="hs-identifier hs-var">show</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621682148963"><span class="hs-identifier hs-var">ixs</span></a></span><span>
</span><span id="line-1148"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;cixs   =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PatVarName -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; PatVarName -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">(PatVarName -&gt; TCMT IO Doc)
-&gt; (Args -&gt; PatVarName) -&gt; Args -&gt; TCMT IO Doc
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Args -&gt; PatVarName
forall a. Show a =&gt; a -&gt; PatVarName
</span><span class="hs-identifier hs-var">show</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621682148964"><span class="hs-identifier hs-var">cixs</span></a></span><span>
</span><span id="line-1149"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;delta1 =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PatVarName -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; PatVarName -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">(PatVarName -&gt; TCMT IO Doc)
-&gt; (Telescope -&gt; PatVarName) -&gt; Telescope -&gt; TCMT IO Doc
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; PatVarName
forall a. Show a =&gt; a -&gt; PatVarName
</span><span class="hs-identifier hs-var">show</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682148965"><span class="hs-identifier hs-var">delta1</span></a></span><span>
</span><span id="line-1150"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;delta2 =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PatVarName -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; PatVarName -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">(PatVarName -&gt; TCMT IO Doc)
-&gt; (Telescope -&gt; PatVarName) -&gt; Telescope -&gt; TCMT IO Doc
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; PatVarName
forall a. Show a =&gt; a -&gt; PatVarName
</span><span class="hs-identifier hs-var">show</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682148966"><span class="hs-identifier hs-var">delta2</span></a></span><span>
</span><span id="line-1151"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;gamma  =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PatVarName -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; PatVarName -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">(PatVarName -&gt; TCMT IO Doc)
-&gt; (Telescope -&gt; PatVarName) -&gt; Telescope -&gt; TCMT IO Doc
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; PatVarName
forall a. Show a =&gt; a -&gt; PatVarName
</span><span class="hs-identifier hs-var">show</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682148967"><span class="hs-identifier hs-var">gamma</span></a></span><span>
</span><span id="line-1152"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;hix    =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">PatVarName -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; PatVarName -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; PatVarName
forall a. Show a =&gt; a -&gt; PatVarName
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682148970"><span class="hs-identifier hs-var">hix</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1153"></span><span>          </span><span class="hs-special">]</span><span>
</span><span id="line-1154"></span><span>        </span><span class="hs-special">]</span><span>
</span><span id="line-1155"></span><span>
</span><span id="line-1156"></span><span>    </span><span id="local-6989586621682148904"><span class="annot"><span class="annottext">debugNoUnify :: ExceptT SplitError (TCMT IO) ()
</span><a href="#local-6989586621682148904"><span class="hs-identifier hs-var hs-var">debugNoUnify</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1157"></span><span>      </span><span class="annot"><span class="annottext">TCMT IO () -&gt; ExceptT SplitError (TCMT IO) ()
forall a. TCM a -&gt; ExceptT SplitError (TCMT IO) a
forall (tcm :: * -&gt; *) a. MonadTCM tcm =&gt; TCM a -&gt; tcm a
</span><a href="Agda.TypeChecking.Monad.Base.html#liftTCM"><span class="hs-identifier hs-var">liftTCM</span></a></span><span> </span><span class="annot"><span class="annottext">(TCMT IO () -&gt; ExceptT SplitError (TCMT IO) ())
-&gt; TCMT IO () -&gt; ExceptT SplitError (TCMT IO) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PatVarName -&gt; Int -&gt; PatVarName -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
PatVarName -&gt; Int -&gt; PatVarName -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSLn"><span class="hs-identifier hs-var">reportSLn</span></a></span><span> </span><span class="annot"><span class="annottext">PatVarName
</span><span class="hs-string">&quot;tc.cover.split.con&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">20</span></span><span> </span><span class="annot"><span class="annottext">PatVarName
</span><span class="hs-string">&quot;  Constructor impossible!&quot;</span></span><span>
</span><span id="line-1158"></span><span>
</span><span id="line-1159"></span><span>    </span><span id="local-6989586621682148901"><span class="annot"><span class="annottext">debugCantSplit :: ExceptT SplitError (TCMT IO) ()
</span><a href="#local-6989586621682148901"><span class="hs-identifier hs-var hs-var">debugCantSplit</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1160"></span><span>      </span><span class="annot"><span class="annottext">TCMT IO () -&gt; ExceptT SplitError (TCMT IO) ()
forall a. TCM a -&gt; ExceptT SplitError (TCMT IO) a
forall (tcm :: * -&gt; *) a. MonadTCM tcm =&gt; TCM a -&gt; tcm a
</span><a href="Agda.TypeChecking.Monad.Base.html#liftTCM"><span class="hs-identifier hs-var">liftTCM</span></a></span><span> </span><span class="annot"><span class="annottext">(TCMT IO () -&gt; ExceptT SplitError (TCMT IO) ())
-&gt; TCMT IO () -&gt; ExceptT SplitError (TCMT IO) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PatVarName -&gt; Int -&gt; PatVarName -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
PatVarName -&gt; Int -&gt; PatVarName -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSLn"><span class="hs-identifier hs-var">reportSLn</span></a></span><span> </span><span class="annot"><span class="annottext">PatVarName
</span><span class="hs-string">&quot;tc.cover.split.con&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">20</span></span><span> </span><span class="annot"><span class="annottext">PatVarName
</span><span class="hs-string">&quot;  Bad split!&quot;</span></span><span>
</span><span id="line-1161"></span><span>
</span><span id="line-1162"></span><span>    </span><span id="local-6989586621682148924"><span class="annot"><span class="annottext">debugSubst :: PatVarName -&gt; a -&gt; tcm ()
</span><a href="#local-6989586621682148924"><span class="hs-identifier hs-var hs-var">debugSubst</span></a></span></span><span> </span><span id="local-6989586621682149086"><span class="annot"><span class="annottext">PatVarName
</span><a href="#local-6989586621682149086"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span id="local-6989586621682149087"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682149087"><span class="hs-identifier hs-var">sub</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1163"></span><span>      </span><span class="annot"><span class="annottext">TCMT IO () -&gt; tcm ()
forall a. TCM a -&gt; tcm a
forall (tcm :: * -&gt; *) a. MonadTCM tcm =&gt; TCM a -&gt; tcm a
</span><a href="Agda.TypeChecking.Monad.Base.html#liftTCM"><span class="hs-identifier hs-var">liftTCM</span></a></span><span> </span><span class="annot"><span class="annottext">(TCMT IO () -&gt; tcm ()) -&gt; TCMT IO () -&gt; tcm ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PatVarName -&gt; Int -&gt; TCMT IO Doc -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
PatVarName -&gt; Int -&gt; TCMT IO Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">PatVarName
</span><span class="hs-string">&quot;tc.cover.split.con&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">20</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; TCMT IO ()) -&gt; TCMT IO Doc -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Functor m =&gt; Int -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; TCMT IO Doc) -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[TCMT IO Doc] -&gt; TCMT IO Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span>
</span><span id="line-1164"></span><span>        </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">PatVarName -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; PatVarName -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PatVarName
</span><a href="#local-6989586621682149086"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">PatVarName -&gt; PatVarName -&gt; PatVarName
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">PatVarName
</span><span class="hs-string">&quot; =&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682149087"><span class="hs-identifier hs-var">sub</span></a></span><span>
</span><span id="line-1165"></span><span>        </span><span class="hs-special">]</span><span>
</span><span id="line-1166"></span><span>
</span><span id="line-1167"></span><span>    </span><span id="local-6989586621682148944"><span class="annot"><span class="annottext">debugTel :: PatVarName -&gt; a -&gt; tcm ()
</span><a href="#local-6989586621682148944"><span class="hs-identifier hs-var hs-var">debugTel</span></a></span></span><span> </span><span id="local-6989586621682149143"><span class="annot"><span class="annottext">PatVarName
</span><a href="#local-6989586621682149143"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span id="local-6989586621682149144"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682149144"><span class="hs-identifier hs-var">tel</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1168"></span><span>      </span><span class="annot"><span class="annottext">TCMT IO () -&gt; tcm ()
forall a. TCM a -&gt; tcm a
forall (tcm :: * -&gt; *) a. MonadTCM tcm =&gt; TCM a -&gt; tcm a
</span><a href="Agda.TypeChecking.Monad.Base.html#liftTCM"><span class="hs-identifier hs-var">liftTCM</span></a></span><span> </span><span class="annot"><span class="annottext">(TCMT IO () -&gt; tcm ()) -&gt; TCMT IO () -&gt; tcm ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PatVarName -&gt; Int -&gt; TCMT IO Doc -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
PatVarName -&gt; Int -&gt; TCMT IO Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">PatVarName
</span><span class="hs-string">&quot;tc.cover.split.con&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">20</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; TCMT IO ()) -&gt; TCMT IO Doc -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Functor m =&gt; Int -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; TCMT IO Doc) -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[TCMT IO Doc] -&gt; TCMT IO Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span>
</span><span id="line-1169"></span><span>        </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">PatVarName -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; PatVarName -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PatVarName
</span><a href="#local-6989586621682149143"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">PatVarName -&gt; PatVarName -&gt; PatVarName
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">PatVarName
</span><span class="hs-string">&quot; =&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682149144"><span class="hs-identifier hs-var">tel</span></a></span><span>
</span><span id="line-1170"></span><span>        </span><span class="hs-special">]</span><span>
</span><span id="line-1171"></span><span>
</span><span id="line-1172"></span><span>    </span><span id="local-6989586621682148945"><span class="annot"><span class="annottext">debugPs :: b -&gt; [NamedArg SplitPattern] -&gt; tcm ()
</span><a href="#local-6989586621682148945"><span class="hs-identifier hs-var hs-var">debugPs</span></a></span></span><span> </span><span id="local-6989586621682149200"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621682149200"><span class="hs-identifier hs-var">tel</span></a></span></span><span> </span><span id="local-6989586621682149201"><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621682149201"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1173"></span><span>      </span><span class="annot"><span class="annottext">TCMT IO () -&gt; tcm ()
forall a. TCM a -&gt; tcm a
forall (tcm :: * -&gt; *) a. MonadTCM tcm =&gt; TCM a -&gt; tcm a
</span><a href="Agda.TypeChecking.Monad.Base.html#liftTCM"><span class="hs-identifier hs-var">liftTCM</span></a></span><span> </span><span class="annot"><span class="annottext">(TCMT IO () -&gt; tcm ()) -&gt; TCMT IO () -&gt; tcm ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PatVarName -&gt; Int -&gt; TCMT IO Doc -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
PatVarName -&gt; Int -&gt; TCMT IO Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">PatVarName
</span><span class="hs-string">&quot;tc.cover.split.con&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">20</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; TCMT IO ()) -&gt; TCMT IO Doc -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1174"></span><span>        </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc
forall (tcm :: * -&gt; *) a.
(MonadTCEnv tcm, ReadTCState tcm) =&gt;
tcm a -&gt; tcm a
</span><a href="Agda.TypeChecking.Monad.Context.html#inTopContext"><span class="hs-identifier hs-var">inTopContext</span></a></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; TCMT IO Doc) -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">b -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a. MonadAddContext m =&gt; b -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621682149200"><span class="hs-identifier hs-var">tel</span></a></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; TCMT IO Doc) -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Functor m =&gt; Int -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; TCMT IO Doc) -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[TCMT IO Doc] -&gt; TCMT IO Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span>
</span><span id="line-1175"></span><span>          </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;ps     =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">NAPs -&gt; TCMT IO Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; NAPs -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCMPatternList"><span class="hs-identifier hs-var">prettyTCMPatternList</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[NamedArg SplitPattern] -&gt; NAPs
</span><a href="Agda.TypeChecking.Coverage.SplitPattern.html#fromSplitPatterns"><span class="hs-identifier hs-var">fromSplitPatterns</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621682149201"><span class="hs-identifier hs-var">ps</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1176"></span><span>          </span><span class="hs-special">]</span><span>
</span><span id="line-1177"></span><span>
</span><span id="line-1178"></span><span>    </span><span id="local-6989586621682148947"><span class="annot"><span class="annottext">debugPlugged :: b -&gt; [NamedArg SplitPattern] -&gt; tcm ()
</span><a href="#local-6989586621682148947"><span class="hs-identifier hs-var hs-var">debugPlugged</span></a></span></span><span> </span><span id="local-6989586621682149257"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621682149257"><span class="hs-identifier hs-var">delta'</span></a></span></span><span> </span><span id="local-6989586621682149258"><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621682149258"><span class="hs-identifier hs-var">ps'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1179"></span><span>      </span><span class="annot"><span class="annottext">TCMT IO () -&gt; tcm ()
forall a. TCM a -&gt; tcm a
forall (tcm :: * -&gt; *) a. MonadTCM tcm =&gt; TCM a -&gt; tcm a
</span><a href="Agda.TypeChecking.Monad.Base.html#liftTCM"><span class="hs-identifier hs-var">liftTCM</span></a></span><span> </span><span class="annot"><span class="annottext">(TCMT IO () -&gt; tcm ()) -&gt; TCMT IO () -&gt; tcm ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PatVarName -&gt; Int -&gt; TCMT IO Doc -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
PatVarName -&gt; Int -&gt; TCMT IO Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">PatVarName
</span><span class="hs-string">&quot;tc.cover.split.con&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">20</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; TCMT IO ()) -&gt; TCMT IO Doc -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1180"></span><span>        </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc
forall (tcm :: * -&gt; *) a.
(MonadTCEnv tcm, ReadTCState tcm) =&gt;
tcm a -&gt; tcm a
</span><a href="Agda.TypeChecking.Monad.Context.html#inTopContext"><span class="hs-identifier hs-var">inTopContext</span></a></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; TCMT IO Doc) -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">b -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a. MonadAddContext m =&gt; b -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621682149257"><span class="hs-identifier hs-var">delta'</span></a></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; TCMT IO Doc) -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Functor m =&gt; Int -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; TCMT IO Doc) -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[TCMT IO Doc] -&gt; TCMT IO Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span>
</span><span id="line-1181"></span><span>          </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;ps'    =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="hs-keyword">do</span><span> </span><span class="annot"><span class="annottext">NAPs -&gt; TCMT IO Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; NAPs -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCMPatternList"><span class="hs-identifier hs-var">prettyTCMPatternList</span></a></span><span> </span><span class="annot"><span class="annottext">(NAPs -&gt; TCMT IO Doc) -&gt; NAPs -&gt; TCMT IO Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern] -&gt; NAPs
</span><a href="Agda.TypeChecking.Coverage.SplitPattern.html#fromSplitPatterns"><span class="hs-identifier hs-var">fromSplitPatterns</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621682149258"><span class="hs-identifier hs-var">ps'</span></a></span><span>
</span><span id="line-1182"></span><span>          </span><span class="hs-special">]</span><span>
</span><span id="line-1183"></span><span>
</span><span id="line-1184"></span><span class="annot"><span class="hs-comment">-- | Introduce trailing pattern variables?</span></span><span>
</span><span id="line-1185"></span><span class="hs-keyword">data</span><span> </span><span id="InsertTrailing"><span class="annot"><a href="Agda.TypeChecking.Coverage.html#InsertTrailing"><span class="hs-identifier hs-var">InsertTrailing</span></a></span></span><span>
</span><span id="line-1186"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="DoInsertTrailing"><span class="annot"><a href="Agda.TypeChecking.Coverage.html#DoInsertTrailing"><span class="hs-identifier hs-var">DoInsertTrailing</span></a></span></span><span>
</span><span id="line-1187"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="DontInsertTrailing"><span class="annot"><a href="Agda.TypeChecking.Coverage.html#DontInsertTrailing"><span class="hs-identifier hs-var">DontInsertTrailing</span></a></span></span><span>
</span><span id="line-1188"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682149262"><span id="local-6989586621682149266"><span class="annot"><span class="annottext">InsertTrailing -&gt; InsertTrailing -&gt; Bool
(InsertTrailing -&gt; InsertTrailing -&gt; Bool)
-&gt; (InsertTrailing -&gt; InsertTrailing -&gt; Bool) -&gt; Eq InsertTrailing
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: InsertTrailing -&gt; InsertTrailing -&gt; Bool
== :: InsertTrailing -&gt; InsertTrailing -&gt; Bool
$c/= :: InsertTrailing -&gt; InsertTrailing -&gt; Bool
/= :: InsertTrailing -&gt; InsertTrailing -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682149269"><span id="local-6989586621682149271"><span id="local-6989586621682149275"><span class="annot"><span class="annottext">Int -&gt; InsertTrailing -&gt; PatVarName -&gt; PatVarName
[InsertTrailing] -&gt; PatVarName -&gt; PatVarName
InsertTrailing -&gt; PatVarName
(Int -&gt; InsertTrailing -&gt; PatVarName -&gt; PatVarName)
-&gt; (InsertTrailing -&gt; PatVarName)
-&gt; ([InsertTrailing] -&gt; PatVarName -&gt; PatVarName)
-&gt; Show InsertTrailing
forall a.
(Int -&gt; a -&gt; PatVarName -&gt; PatVarName)
-&gt; (a -&gt; PatVarName) -&gt; ([a] -&gt; PatVarName -&gt; PatVarName) -&gt; Show a
$cshowsPrec :: Int -&gt; InsertTrailing -&gt; PatVarName -&gt; PatVarName
showsPrec :: Int -&gt; InsertTrailing -&gt; PatVarName -&gt; PatVarName
$cshow :: InsertTrailing -&gt; PatVarName
show :: InsertTrailing -&gt; PatVarName
$cshowList :: [InsertTrailing] -&gt; PatVarName -&gt; PatVarName
showList :: [InsertTrailing] -&gt; PatVarName -&gt; PatVarName
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-1189"></span><span>
</span><span id="line-1190"></span><span class="annot"><span class="hs-comment">-- | Allow partial covering for split?</span></span><span>
</span><span id="line-1191"></span><span class="hs-keyword">data</span><span> </span><span id="AllowPartialCover"><span class="annot"><a href="Agda.TypeChecking.Coverage.html#AllowPartialCover"><span class="hs-identifier hs-var">AllowPartialCover</span></a></span></span><span>
</span><span id="line-1192"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="YesAllowPartialCover"><span class="annot"><a href="Agda.TypeChecking.Coverage.html#YesAllowPartialCover"><span class="hs-identifier hs-var">YesAllowPartialCover</span></a></span></span><span>  </span><span class="hs-comment">-- To try to coverage-check incomplete splits.</span><span>
</span><span id="line-1193"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="NoAllowPartialCover"><span class="annot"><a href="Agda.TypeChecking.Coverage.html#NoAllowPartialCover"><span class="hs-identifier hs-var">NoAllowPartialCover</span></a></span></span><span>   </span><span class="hs-comment">-- Default.</span><span>
</span><span id="line-1194"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682149278"><span id="local-6989586621682149282"><span class="annot"><span class="annottext">AllowPartialCover -&gt; AllowPartialCover -&gt; Bool
(AllowPartialCover -&gt; AllowPartialCover -&gt; Bool)
-&gt; (AllowPartialCover -&gt; AllowPartialCover -&gt; Bool)
-&gt; Eq AllowPartialCover
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: AllowPartialCover -&gt; AllowPartialCover -&gt; Bool
== :: AllowPartialCover -&gt; AllowPartialCover -&gt; Bool
$c/= :: AllowPartialCover -&gt; AllowPartialCover -&gt; Bool
/= :: AllowPartialCover -&gt; AllowPartialCover -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682149285"><span id="local-6989586621682149287"><span id="local-6989586621682149291"><span class="annot"><span class="annottext">Int -&gt; AllowPartialCover -&gt; PatVarName -&gt; PatVarName
[AllowPartialCover] -&gt; PatVarName -&gt; PatVarName
AllowPartialCover -&gt; PatVarName
(Int -&gt; AllowPartialCover -&gt; PatVarName -&gt; PatVarName)
-&gt; (AllowPartialCover -&gt; PatVarName)
-&gt; ([AllowPartialCover] -&gt; PatVarName -&gt; PatVarName)
-&gt; Show AllowPartialCover
forall a.
(Int -&gt; a -&gt; PatVarName -&gt; PatVarName)
-&gt; (a -&gt; PatVarName) -&gt; ([a] -&gt; PatVarName -&gt; PatVarName) -&gt; Show a
$cshowsPrec :: Int -&gt; AllowPartialCover -&gt; PatVarName -&gt; PatVarName
showsPrec :: Int -&gt; AllowPartialCover -&gt; PatVarName -&gt; PatVarName
$cshow :: AllowPartialCover -&gt; PatVarName
show :: AllowPartialCover -&gt; PatVarName
$cshowList :: [AllowPartialCover] -&gt; PatVarName -&gt; PatVarName
showList :: [AllowPartialCover] -&gt; PatVarName -&gt; PatVarName
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-1195"></span><span>
</span><span id="line-1196"></span><span class="annot"><span class="hs-comment">-- | Entry point from @Interaction.MakeCase@.</span></span><span>
</span><span id="line-1197"></span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#splitClauseWithAbsurd"><span class="hs-identifier hs-type">splitClauseWithAbsurd</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitClause.html#SplitClause"><span class="hs-identifier hs-type">SplitClause</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html#Nat"><span class="hs-identifier hs-type">Nat</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">TCM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#SplitError"><span class="hs-identifier hs-type">SplitError</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitClause.html#SplitClause"><span class="hs-identifier hs-type">SplitClause</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitClause.html#Covering"><span class="hs-identifier hs-type">Covering</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1198"></span><span id="splitClauseWithAbsurd"><span class="annot"><span class="annottext">splitClauseWithAbsurd :: SplitClause
-&gt; Int -&gt; TCM (Either SplitError (Either SplitClause Covering))
</span><a href="Agda.TypeChecking.Coverage.html#splitClauseWithAbsurd"><span class="hs-identifier hs-var hs-var">splitClauseWithAbsurd</span></a></span></span><span> </span><span id="local-6989586621682149293"><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621682149293"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span id="local-6989586621682149294"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682149294"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1199"></span><span>  </span><span class="annot"><span class="annottext">CheckEmpty
-&gt; Induction
-&gt; AllowPartialCover
-&gt; InsertTrailing
-&gt; SplitClause
-&gt; BlockingVar
-&gt; TCM (Either SplitError (Either SplitClause Covering))
</span><a href="Agda.TypeChecking.Coverage.html#split%27"><span class="hs-identifier hs-var">split'</span></a></span><span> </span><span class="annot"><span class="annottext">CheckEmpty
</span><a href="Agda.TypeChecking.Coverage.html#CheckEmpty"><span class="hs-identifier hs-var">CheckEmpty</span></a></span><span> </span><span class="annot"><span class="annottext">Induction
</span><a href="Agda.Syntax.Common.Aspect.html#Inductive"><span class="hs-identifier hs-var">Inductive</span></a></span><span> </span><span class="annot"><span class="annottext">AllowPartialCover
</span><a href="Agda.TypeChecking.Coverage.html#NoAllowPartialCover"><span class="hs-identifier hs-var">NoAllowPartialCover</span></a></span><span> </span><span class="annot"><span class="annottext">InsertTrailing
</span><a href="Agda.TypeChecking.Coverage.html#DontInsertTrailing"><span class="hs-identifier hs-var">DontInsertTrailing</span></a></span><span> </span><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621682149293"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; [ConHead] -&gt; [Literal] -&gt; Bool -&gt; Bool -&gt; BlockingVar
</span><a href="Agda.TypeChecking.Coverage.Match.html#BlockingVar"><span class="hs-identifier hs-var">BlockingVar</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682149294"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span>
</span><span id="line-1200"></span><span>  </span><span class="hs-comment">-- Andreas, 2016-05-03, issue 1950:</span><span>
</span><span id="line-1201"></span><span>  </span><span class="hs-comment">-- Do not introduce trailing pattern vars after split,</span><span>
</span><span id="line-1202"></span><span>  </span><span class="hs-comment">-- because this does not work for with-clauses.</span><span>
</span><span id="line-1203"></span><span>
</span><span id="line-1204"></span><span class="hs-comment">-- | Entry point from @TypeChecking.Empty@ and @Interaction.BasicOps@.</span><span>
</span><span id="line-1205"></span><span class="hs-comment">--   @splitLast CoInductive@ is used in the @refine@ tactics.</span><span>
</span><span id="line-1206"></span><span>
</span><span id="line-1207"></span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#splitLast"><span class="hs-identifier hs-type">splitLast</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Common.Aspect.html#Induction"><span class="hs-identifier hs-type">Induction</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Telescope"><span class="hs-identifier hs-type">Telescope</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.Syntax.Common.html#NamedArg"><span class="hs-identifier hs-type">NamedArg</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#DeBruijnPattern"><span class="hs-identifier hs-type">DeBruijnPattern</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">TCM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#SplitError"><span class="hs-identifier hs-type">SplitError</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitClause.html#Covering"><span class="hs-identifier hs-type">Covering</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1208"></span><span id="splitLast"><span class="annot"><span class="annottext">splitLast :: Induction
-&gt; Telescope -&gt; NAPs -&gt; TCMT IO (Either SplitError Covering)
</span><a href="Agda.TypeChecking.Coverage.html#splitLast"><span class="hs-identifier hs-var hs-var">splitLast</span></a></span></span><span> </span><span id="local-6989586621682149298"><span class="annot"><span class="annottext">Induction
</span><a href="#local-6989586621682149298"><span class="hs-identifier hs-var">ind</span></a></span></span><span> </span><span id="local-6989586621682149299"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682149299"><span class="hs-identifier hs-var">tel</span></a></span></span><span> </span><span id="local-6989586621682149300"><span class="annot"><span class="annottext">NAPs
</span><a href="#local-6989586621682149300"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Induction
-&gt; AllowPartialCover
-&gt; SplitClause
-&gt; BlockingVar
-&gt; TCMT IO (Either SplitError Covering)
</span><a href="Agda.TypeChecking.Coverage.html#split"><span class="hs-identifier hs-var">split</span></a></span><span> </span><span class="annot"><span class="annottext">Induction
</span><a href="#local-6989586621682149298"><span class="hs-identifier hs-var">ind</span></a></span><span> </span><span class="annot"><span class="annottext">AllowPartialCover
</span><a href="Agda.TypeChecking.Coverage.html#NoAllowPartialCover"><span class="hs-identifier hs-var">NoAllowPartialCover</span></a></span><span> </span><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621682149301"><span class="hs-identifier hs-var">sc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; [ConHead] -&gt; [Literal] -&gt; Bool -&gt; Bool -&gt; BlockingVar
</span><a href="Agda.TypeChecking.Coverage.Match.html#BlockingVar"><span class="hs-identifier hs-var">BlockingVar</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span>
</span><span id="line-1209"></span><span>  </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621682149301"><span class="annot"><span class="annottext">sc :: SplitClause
</span><a href="#local-6989586621682149301"><span class="hs-identifier hs-var hs-var">sc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Telescope
-&gt; [NamedArg SplitPattern]
-&gt; Substitution' SplitPattern
-&gt; Map CheckpointId (Substitution' Term)
-&gt; Maybe (Dom Type)
-&gt; SplitClause
</span><a href="Agda.TypeChecking.Coverage.SplitClause.html#SClause"><span class="hs-identifier hs-var">SClause</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682149299"><span class="hs-identifier hs-var">tel</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NAPs -&gt; [NamedArg SplitPattern]
</span><a href="Agda.TypeChecking.Coverage.SplitPattern.html#toSplitPatterns"><span class="hs-identifier hs-var">toSplitPatterns</span></a></span><span> </span><span class="annot"><span class="annottext">NAPs
</span><a href="#local-6989586621682149300"><span class="hs-identifier hs-var">ps</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Substitution' SplitPattern
forall a. Null a =&gt; a
</span><a href="Agda.Utils.Null.html#empty"><span class="hs-identifier hs-var">empty</span></a></span><span> </span><span class="annot"><span class="annottext">Map CheckpointId (Substitution' Term)
forall a. Null a =&gt; a
</span><a href="Agda.Utils.Null.html#empty"><span class="hs-identifier hs-var">empty</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (Dom Type)
</span><a href="#local-6989586621682149303"><span class="hs-identifier hs-var">target</span></a></span><span>
</span><span id="line-1210"></span><span>        </span><span class="hs-comment">-- TODO 2ltt: allows (Empty_fib -&gt; Empty_strict) which is not conservative</span><span>
</span><span id="line-1211"></span><span>        </span><span id="local-6989586621682149303"><span class="annot"><span class="annottext">target :: Maybe (Dom Type)
</span><a href="#local-6989586621682149303"><span class="hs-identifier hs-var hs-var">target</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Dom Type -&gt; Maybe (Dom Type)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(Dom Type -&gt; Maybe (Dom Type)) -&gt; Dom Type -&gt; Maybe (Dom Type)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; Dom Type
forall a. a -&gt; Dom a
</span><a href="Agda.Syntax.Internal.html#defaultDom"><span class="hs-identifier hs-var">defaultDom</span></a></span><span> </span><span class="annot"><span class="annottext">(Type -&gt; Dom Type) -&gt; Type -&gt; Dom Type
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Sort -&gt; Term -&gt; Type
forall t a. Sort' t -&gt; a -&gt; Type'' t a
</span><a href="Agda.Syntax.Internal.html#El"><span class="hs-identifier hs-var">El</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; Sort
</span><a href="Agda.Syntax.Internal.html#mkProp"><span class="hs-identifier hs-var">mkProp</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Term -&gt; Type) -&gt; Term -&gt; Type
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">HasCallStack =&gt; PatVarName -&gt; Term
PatVarName -&gt; Term
</span><a href="Agda.Syntax.Internal.html#__DUMMY_TERM_WITH__"><span class="hs-identifier hs-var">__DUMMY_TERM_WITH__</span></a></span><span> </span><span class="annot"><span class="annottext">PatVarName
</span><span class="hs-string">&quot;splitLastTarget&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1212"></span><span>
</span><span id="line-1213"></span><span class="hs-comment">-- | @split ind splitClause x = return res@</span><span>
</span><span id="line-1214"></span><span class="hs-comment">--   splits @splitClause@ at pattern var @x@ (de Bruijn index).</span><span>
</span><span id="line-1215"></span><span class="hs-comment">--</span><span>
</span><span id="line-1216"></span><span class="hs-comment">--   Possible results @res@ are:</span><span>
</span><span id="line-1217"></span><span class="hs-comment">--</span><span>
</span><span id="line-1218"></span><span class="hs-comment">--   1. @Left err@:</span><span>
</span><span id="line-1219"></span><span class="hs-comment">--      Splitting failed.</span><span>
</span><span id="line-1220"></span><span class="hs-comment">--</span><span>
</span><span id="line-1221"></span><span class="hs-comment">--   2. @Right covering@:</span><span>
</span><span id="line-1222"></span><span class="hs-comment">--      A covering set of split clauses, one for each valid constructor.</span><span>
</span><span id="line-1223"></span><span class="hs-comment">--      This could be the empty set (denoting an absurd clause).</span><span>
</span><span id="line-1224"></span><span>
</span><span id="line-1225"></span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#split"><span class="hs-identifier hs-type">split</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Common.Aspect.html#Induction"><span class="hs-identifier hs-type">Induction</span></a></span><span>
</span><span id="line-1226"></span><span>         </span><span class="hs-comment">-- ^ Coinductive constructors are allowed if this argument is</span><span>
</span><span id="line-1227"></span><span>         </span><span class="hs-comment">-- 'CoInductive'.</span><span>
</span><span id="line-1228"></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#AllowPartialCover"><span class="hs-identifier hs-type">AllowPartialCover</span></a></span><span>
</span><span id="line-1229"></span><span>         </span><span class="annot"><span class="hs-comment">-- ^ Don't fail if computed 'Covering' does not cover all constructors.</span></span><span>
</span><span id="line-1230"></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitClause.html#SplitClause"><span class="hs-identifier hs-type">SplitClause</span></a></span><span>
</span><span id="line-1231"></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.Match.html#BlockingVar"><span class="hs-identifier hs-type">BlockingVar</span></a></span><span>
</span><span id="line-1232"></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">TCM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#SplitError"><span class="hs-identifier hs-type">SplitError</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitClause.html#Covering"><span class="hs-identifier hs-type">Covering</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1233"></span><span id="split"><span class="annot"><span class="annottext">split :: Induction
-&gt; AllowPartialCover
-&gt; SplitClause
-&gt; BlockingVar
-&gt; TCMT IO (Either SplitError Covering)
</span><a href="Agda.TypeChecking.Coverage.html#split"><span class="hs-identifier hs-var hs-var">split</span></a></span></span><span> </span><span id="local-6989586621682149308"><span class="annot"><span class="annottext">Induction
</span><a href="#local-6989586621682149308"><span class="hs-identifier hs-var">ind</span></a></span></span><span> </span><span id="local-6989586621682149309"><span class="annot"><span class="annottext">AllowPartialCover
</span><a href="#local-6989586621682149309"><span class="hs-identifier hs-var">allowPartialCover</span></a></span></span><span> </span><span id="local-6989586621682149310"><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621682149310"><span class="hs-identifier hs-var">sc</span></a></span></span><span> </span><span id="local-6989586621682149311"><span class="annot"><span class="annottext">BlockingVar
</span><a href="#local-6989586621682149311"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1234"></span><span>  </span><span class="annot"><span class="annottext">(Either SplitClause Covering -&gt; Covering)
-&gt; Either SplitError (Either SplitClause Covering)
-&gt; Either SplitError Covering
forall a b. (a -&gt; b) -&gt; Either SplitError a -&gt; Either SplitError b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">Either SplitClause Covering -&gt; Covering
</span><a href="#local-6989586621682149312"><span class="hs-identifier hs-var">blendInAbsurdClause</span></a></span><span> </span><span class="annot"><span class="annottext">(Either SplitError (Either SplitClause Covering)
 -&gt; Either SplitError Covering)
-&gt; TCM (Either SplitError (Either SplitClause Covering))
-&gt; TCMT IO (Either SplitError Covering)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">CheckEmpty
-&gt; Induction
-&gt; AllowPartialCover
-&gt; InsertTrailing
-&gt; SplitClause
-&gt; BlockingVar
-&gt; TCM (Either SplitError (Either SplitClause Covering))
</span><a href="Agda.TypeChecking.Coverage.html#split%27"><span class="hs-identifier hs-var">split'</span></a></span><span> </span><span class="annot"><span class="annottext">CheckEmpty
</span><a href="Agda.TypeChecking.Coverage.html#NoCheckEmpty"><span class="hs-identifier hs-var">NoCheckEmpty</span></a></span><span> </span><span class="annot"><span class="annottext">Induction
</span><a href="#local-6989586621682149308"><span class="hs-identifier hs-var">ind</span></a></span><span> </span><span class="annot"><span class="annottext">AllowPartialCover
</span><a href="#local-6989586621682149309"><span class="hs-identifier hs-var">allowPartialCover</span></a></span><span> </span><span class="annot"><span class="annottext">InsertTrailing
</span><a href="Agda.TypeChecking.Coverage.html#DoInsertTrailing"><span class="hs-identifier hs-var">DoInsertTrailing</span></a></span><span> </span><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621682149310"><span class="hs-identifier hs-var">sc</span></a></span><span> </span><span class="annot"><span class="annottext">BlockingVar
</span><a href="#local-6989586621682149311"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-1235"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1236"></span><span>    </span><span id="local-6989586621682149314"><span class="annot"><span class="annottext">n :: Arg Int
</span><a href="#local-6989586621682149314"><span class="hs-identifier hs-var hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SplitClause -&gt; Int -&gt; Arg Int
</span><a href="Agda.TypeChecking.Coverage.html#lookupPatternVar"><span class="hs-identifier hs-var">lookupPatternVar</span></a></span><span> </span><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621682149310"><span class="hs-identifier hs-var">sc</span></a></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; Arg Int) -&gt; Int -&gt; Arg Int
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">BlockingVar -&gt; Int
</span><a href="Agda.TypeChecking.Coverage.Match.html#blockingVarNo"><span class="hs-identifier hs-var">blockingVarNo</span></a></span><span> </span><span class="annot"><span class="annottext">BlockingVar
</span><a href="#local-6989586621682149311"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-1237"></span><span>    </span><span class="annot"><a href="#local-6989586621682149312"><span class="hs-identifier hs-type">blendInAbsurdClause</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitClause.html#SplitClause"><span class="hs-identifier hs-type">SplitClause</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitClause.html#Covering"><span class="hs-identifier hs-type">Covering</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitClause.html#Covering"><span class="hs-identifier hs-type">Covering</span></a></span><span>
</span><span id="line-1238"></span><span>    </span><span id="local-6989586621682149312"><span class="annot"><span class="annottext">blendInAbsurdClause :: Either SplitClause Covering -&gt; Covering
</span><a href="#local-6989586621682149312"><span class="hs-identifier hs-var hs-var">blendInAbsurdClause</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(SplitClause -&gt; Covering)
-&gt; Either SplitClause Covering -&gt; Covering
forall a b. (a -&gt; b) -&gt; Either a b -&gt; b
</span><a href="Agda.Utils.Either.html#fromRight"><span class="hs-identifier hs-var">fromRight</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Covering -&gt; SplitClause -&gt; Covering
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="annot"><span class="annottext">(Covering -&gt; SplitClause -&gt; Covering)
-&gt; Covering -&gt; SplitClause -&gt; Covering
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Arg Int -&gt; [(SplitTag, (SplitClause, IInfo))] -&gt; Covering
</span><a href="Agda.TypeChecking.Coverage.SplitClause.html#Covering"><span class="hs-identifier hs-var">Covering</span></a></span><span> </span><span class="annot"><span class="annottext">Arg Int
</span><a href="#local-6989586621682149314"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1239"></span><span>
</span><span id="line-1240"></span><span class="hs-comment">-- | Convert a de Bruijn index relative to the clause telescope to a de Bruijn</span><span>
</span><span id="line-1241"></span><span class="hs-comment">--   level. The result should be the argument position (counted from left,</span><span>
</span><span id="line-1242"></span><span class="hs-comment">--   starting with 0) to split at (dot patterns included!).</span><span>
</span><span id="line-1243"></span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#lookupPatternVar"><span class="hs-identifier hs-type">lookupPatternVar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitClause.html#SplitClause"><span class="hs-identifier hs-type">SplitClause</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html#Arg"><span class="hs-identifier hs-type">Arg</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html#Nat"><span class="hs-identifier hs-type">Nat</span></a></span><span>
</span><span id="line-1244"></span><span id="lookupPatternVar"><span class="annot"><span class="annottext">lookupPatternVar :: SplitClause -&gt; Int -&gt; Arg Int
</span><a href="Agda.TypeChecking.Coverage.html#lookupPatternVar"><span class="hs-identifier hs-var hs-var">lookupPatternVar</span></a></span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitClause.html#SClause"><span class="hs-identifier hs-type">SClause</span></a></span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">scTel :: SplitClause -&gt; Telescope
</span><a href="Agda.TypeChecking.Coverage.SplitClause.html#scTel"><span class="hs-identifier hs-var">scTel</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682149317"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682149317"><span class="hs-identifier hs-var">tel</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">scPats :: SplitClause -&gt; [NamedArg SplitPattern]
</span><a href="Agda.TypeChecking.Coverage.SplitClause.html#scPats"><span class="hs-identifier hs-var">scPats</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682149318"><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621682149318"><span class="hs-identifier hs-var">pats</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span id="local-6989586621682149319"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682149319"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Arg DeBruijnPattern
</span><a href="#local-6989586621682149320"><span class="hs-identifier hs-var">arg</span></a></span><span> </span><span class="annot"><span class="annottext">Arg DeBruijnPattern -&gt; Int -&gt; Arg Int
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; b -&gt; f b
</span><span class="hs-operator hs-var">$&gt;</span></span><span>
</span><span id="line-1245"></span><span>    </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682149321"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Int
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682149321"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-1246"></span><span>  </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621682149321"><span class="annot"><span class="annottext">n :: Int
</span><a href="#local-6989586621682149321"><span class="hs-identifier hs-var hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682149322"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>
</span><span id="line-1247"></span><span>            </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Int
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span>
</span><span id="line-1248"></span><span>            </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Maybe Int -&gt; Int
forall a. a -&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromMaybe</span></span><span> </span><span class="annot"><span class="annottext">Int
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe Int -&gt; Int) -&gt; Maybe Int -&gt; Int
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Permutation -&gt; [Int]
</span><a href="Agda.Utils.Permutation.html#permPicks"><span class="hs-identifier hs-var">permPicks</span></a></span><span> </span><span class="annot"><span class="annottext">Permutation
</span><a href="#local-6989586621682149324"><span class="hs-identifier hs-var">perm</span></a></span><span> </span><span class="annot"><span class="annottext">[Int] -&gt; Int -&gt; Maybe Int
forall a. [a] -&gt; Int -&gt; Maybe a
</span><a href="Agda.Utils.List.html#%21%21%21"><span class="hs-operator hs-var">!!!</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682149322"><span class="hs-identifier hs-var">k</span></a></span><span>
</span><span id="line-1249"></span><span>        </span><span id="local-6989586621682149324"><span class="annot"><span class="annottext">perm :: Permutation
</span><a href="#local-6989586621682149324"><span class="hs-identifier hs-var hs-var">perm</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Permutation -&gt; Maybe Permutation -&gt; Permutation
forall a. a -&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromMaybe</span></span><span> </span><span class="annot"><span class="annottext">Permutation
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe Permutation -&gt; Permutation)
-&gt; Maybe Permutation -&gt; Permutation
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">NAPs -&gt; Maybe Permutation
</span><a href="Agda.Syntax.Internal.Pattern.html#dbPatPerm"><span class="hs-identifier hs-var">dbPatPerm</span></a></span><span> </span><span class="annot"><span class="annottext">(NAPs -&gt; Maybe Permutation) -&gt; NAPs -&gt; Maybe Permutation
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern] -&gt; NAPs
</span><a href="Agda.TypeChecking.Coverage.SplitPattern.html#fromSplitPatterns"><span class="hs-identifier hs-var">fromSplitPatterns</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621682149318"><span class="hs-identifier hs-var">pats</span></a></span><span>
</span><span id="line-1250"></span><span>        </span><span id="local-6989586621682149322"><span class="annot"><span class="annottext">k :: Int
</span><a href="#local-6989586621682149322"><span class="hs-identifier hs-var hs-var">k</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; Int
forall a. Sized a =&gt; a -&gt; Int
</span><a href="Agda.Utils.Size.html#size"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682149317"><span class="hs-identifier hs-var">tel</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682149319"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span>
</span><span id="line-1251"></span><span>        </span><span id="local-6989586621682149320"><span class="annot"><span class="annottext">arg :: Arg DeBruijnPattern
</span><a href="#local-6989586621682149320"><span class="hs-identifier hs-var hs-var">arg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Arg DeBruijnPattern
-&gt; [Arg DeBruijnPattern] -&gt; Int -&gt; Arg DeBruijnPattern
forall a. a -&gt; [a] -&gt; Int -&gt; a
</span><a href="Agda.Utils.List.html#indexWithDefault"><span class="hs-identifier hs-var">indexWithDefault</span></a></span><span> </span><span class="annot"><span class="annottext">Arg DeBruijnPattern
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Telescope -&gt; [Arg DeBruijnPattern]
</span><a href="Agda.TypeChecking.Substitute.html#telVars"><span class="hs-identifier hs-var">telVars</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Telescope -&gt; Int
forall a. Sized a =&gt; a -&gt; Int
</span><a href="Agda.Utils.Size.html#size"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682149317"><span class="hs-identifier hs-var">tel</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682149317"><span class="hs-identifier hs-var">tel</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682149322"><span class="hs-identifier hs-var">k</span></a></span><span>
</span><span id="line-1252"></span><span>
</span><span id="line-1253"></span><span>
</span><span id="line-1254"></span><span class="hs-keyword">data</span><span> </span><span id="CheckEmpty"><span class="annot"><a href="Agda.TypeChecking.Coverage.html#CheckEmpty"><span class="hs-identifier hs-var">CheckEmpty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="CheckEmpty"><span class="annot"><a href="Agda.TypeChecking.Coverage.html#CheckEmpty"><span class="hs-identifier hs-var">CheckEmpty</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="NoCheckEmpty"><span class="annot"><a href="Agda.TypeChecking.Coverage.html#NoCheckEmpty"><span class="hs-identifier hs-var">NoCheckEmpty</span></a></span></span><span>
</span><span id="line-1255"></span><span>
</span><span id="line-1256"></span><span class="hs-comment">-- | @split' ind pc ft splitClause x = return res@</span><span>
</span><span id="line-1257"></span><span class="hs-comment">--   splits @splitClause@ at pattern var @x@ (de Bruijn index).</span><span>
</span><span id="line-1258"></span><span class="hs-comment">--</span><span>
</span><span id="line-1259"></span><span class="hs-comment">--   Possible results @res@ are:</span><span>
</span><span id="line-1260"></span><span class="hs-comment">--</span><span>
</span><span id="line-1261"></span><span class="hs-comment">--   1. @Left err@:</span><span>
</span><span id="line-1262"></span><span class="hs-comment">--      Splitting failed.</span><span>
</span><span id="line-1263"></span><span class="hs-comment">--</span><span>
</span><span id="line-1264"></span><span class="hs-comment">--   2. @Right (Left splitClause')@:</span><span>
</span><span id="line-1265"></span><span class="hs-comment">--      Absurd clause (type of @x@ has 0 valid constructors).</span><span>
</span><span id="line-1266"></span><span class="hs-comment">--</span><span>
</span><span id="line-1267"></span><span class="hs-comment">--   3. @Right (Right covering)@:</span><span>
</span><span id="line-1268"></span><span class="hs-comment">--      A covering set of split clauses, one for each valid constructor.</span><span>
</span><span id="line-1269"></span><span>
</span><span id="line-1270"></span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#split%27"><span class="hs-identifier hs-type">split'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#CheckEmpty"><span class="hs-identifier hs-type">CheckEmpty</span></a></span><span>
</span><span id="line-1271"></span><span>          </span><span class="hs-comment">-- ^ Use isEmptyType to check whether the type of the variable to</span><span>
</span><span id="line-1272"></span><span>          </span><span class="hs-comment">-- split on is empty. This switch is necessary to break the cycle</span><span>
</span><span id="line-1273"></span><span>          </span><span class="hs-comment">-- between split' and isEmptyType.</span><span>
</span><span id="line-1274"></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Common.Aspect.html#Induction"><span class="hs-identifier hs-type">Induction</span></a></span><span>
</span><span id="line-1275"></span><span>          </span><span class="hs-comment">-- ^ Coinductive constructors are allowed if this argument is</span><span>
</span><span id="line-1276"></span><span>          </span><span class="hs-comment">-- 'CoInductive'.</span><span>
</span><span id="line-1277"></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#AllowPartialCover"><span class="hs-identifier hs-type">AllowPartialCover</span></a></span><span>
</span><span id="line-1278"></span><span>          </span><span class="annot"><span class="hs-comment">-- ^ Don't fail if computed 'Covering' does not cover all constructors.</span></span><span>
</span><span id="line-1279"></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#InsertTrailing"><span class="hs-identifier hs-type">InsertTrailing</span></a></span><span>
</span><span id="line-1280"></span><span>          </span><span class="annot"><span class="hs-comment">-- ^ If 'DoInsertTrailing', introduce new trailing variable patterns.</span></span><span>
</span><span id="line-1281"></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitClause.html#SplitClause"><span class="hs-identifier hs-type">SplitClause</span></a></span><span>
</span><span id="line-1282"></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.Match.html#BlockingVar"><span class="hs-identifier hs-type">BlockingVar</span></a></span><span>
</span><span id="line-1283"></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">TCM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#SplitError"><span class="hs-identifier hs-type">SplitError</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitClause.html#SplitClause"><span class="hs-identifier hs-type">SplitClause</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitClause.html#Covering"><span class="hs-identifier hs-type">Covering</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1284"></span><span id="split%27"><span class="annot"><span class="annottext">split' :: CheckEmpty
-&gt; Induction
-&gt; AllowPartialCover
-&gt; InsertTrailing
-&gt; SplitClause
-&gt; BlockingVar
-&gt; TCM (Either SplitError (Either SplitClause Covering))
</span><a href="Agda.TypeChecking.Coverage.html#split%27"><span class="hs-identifier hs-var hs-var">split'</span></a></span></span><span> </span><span id="local-6989586621682149328"><span class="annot"><span class="annottext">CheckEmpty
</span><a href="#local-6989586621682149328"><span class="hs-identifier hs-var">checkEmpty</span></a></span></span><span> </span><span id="local-6989586621682149329"><span class="annot"><span class="annottext">Induction
</span><a href="#local-6989586621682149329"><span class="hs-identifier hs-var">ind</span></a></span></span><span> </span><span id="local-6989586621682149330"><span class="annot"><span class="annottext">AllowPartialCover
</span><a href="#local-6989586621682149330"><span class="hs-identifier hs-var">allowPartialCover</span></a></span></span><span> </span><span id="local-6989586621682149331"><span class="annot"><span class="annottext">InsertTrailing
</span><a href="#local-6989586621682149331"><span class="hs-identifier hs-var">inserttrailing</span></a></span></span><span>
</span><span id="line-1285"></span><span>       </span><span id="local-6989586621682149332"><span class="annot"><span class="annottext">sc :: SplitClause
</span><a href="#local-6989586621682149332"><span class="hs-identifier hs-var">sc</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitClause.html#SClause"><span class="hs-identifier hs-type">SClause</span></a></span><span> </span><span id="local-6989586621682149333"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682149333"><span class="hs-identifier hs-var">tel</span></a></span></span><span> </span><span id="local-6989586621682149334"><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621682149334"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span class="annot"><span class="annottext">Substitution' SplitPattern
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682149335"><span class="annot"><span class="annottext">Map CheckpointId (Substitution' Term)
</span><a href="#local-6989586621682149335"><span class="hs-identifier hs-var">cps</span></a></span></span><span> </span><span id="local-6989586621682149336"><span class="annot"><span class="annottext">Maybe (Dom Type)
</span><a href="#local-6989586621682149336"><span class="hs-identifier hs-var">target</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Coverage.Match.html#BlockingVar"><span class="hs-identifier hs-type">BlockingVar</span></a></span><span> </span><span id="local-6989586621682149337"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682149337"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621682149338"><span class="annot"><span class="annottext">[ConHead]
</span><a href="#local-6989586621682149338"><span class="hs-identifier hs-var">pcons'</span></a></span></span><span> </span><span id="local-6989586621682149339"><span class="annot"><span class="annottext">[Literal]
</span><a href="#local-6989586621682149339"><span class="hs-identifier hs-var">plits</span></a></span></span><span> </span><span id="local-6989586621682149340"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682149340"><span class="hs-identifier hs-var">overlap</span></a></span></span><span> </span><span id="local-6989586621682149341"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682149341"><span class="hs-identifier hs-var">lazy</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1286"></span><span> </span><span class="annot"><span class="annottext">TCM (Either SplitError (Either SplitClause Covering))
-&gt; TCM (Either SplitError (Either SplitClause Covering))
forall a. TCM a -&gt; TCM a
forall (tcm :: * -&gt; *) a. MonadTCM tcm =&gt; TCM a -&gt; tcm a
</span><a href="Agda.TypeChecking.Monad.Base.html#liftTCM"><span class="hs-identifier hs-var">liftTCM</span></a></span><span> </span><span class="annot"><span class="annottext">(TCM (Either SplitError (Either SplitClause Covering))
 -&gt; TCM (Either SplitError (Either SplitClause Covering)))
-&gt; TCM (Either SplitError (Either SplitClause Covering))
-&gt; TCM (Either SplitError (Either SplitClause Covering))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ExceptT SplitError (TCMT IO) (Either SplitClause Covering)
-&gt; TCM (Either SplitError (Either SplitClause Covering))
forall e (m :: * -&gt; *) a. ExceptT e m a -&gt; m (Either e a)
</span><span class="hs-identifier hs-var">runExceptT</span></span><span> </span><span class="annot"><span class="annottext">(ExceptT SplitError (TCMT IO) (Either SplitClause Covering)
 -&gt; TCM (Either SplitError (Either SplitClause Covering)))
-&gt; ExceptT SplitError (TCMT IO) (Either SplitClause Covering)
-&gt; TCM (Either SplitError (Either SplitClause Covering))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1287"></span><span>  </span><span class="annot"><span class="annottext">Telescope
-&gt; Int
-&gt; [NamedArg SplitPattern]
-&gt; Map CheckpointId (Substitution' Term)
-&gt; ExceptT SplitError (TCMT IO) ()
forall {tcm :: * -&gt; *} {a} {a} {a}.
(MonadTCM tcm, AddContext a, PrettyTCM a, PrettyTCM a, PrettyTCM a,
 Show a, Show a, Show a) =&gt;
a -&gt; a -&gt; [NamedArg SplitPattern] -&gt; a -&gt; tcm ()
</span><a href="#local-6989586621682149342"><span class="hs-identifier hs-var">debugInit</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682149333"><span class="hs-identifier hs-var">tel</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682149337"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621682149334"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="annot"><span class="annottext">Map CheckpointId (Substitution' Term)
</span><a href="#local-6989586621682149335"><span class="hs-identifier hs-var">cps</span></a></span><span>
</span><span id="line-1288"></span><span>
</span><span id="line-1289"></span><span>  </span><span class="hs-comment">-- Split the telescope at the variable</span><span>
</span><span id="line-1290"></span><span>  </span><span class="hs-comment">-- t = type of the variable,  &#916;&#8321; &#8866; t</span><span>
</span><span id="line-1291"></span><span>  </span><span class="hs-special">(</span><span id="local-6989586621682149343"><span class="annot"><a href="#local-6989586621682149343"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682149344"><span class="annot"><a href="#local-6989586621682149344"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682149345"><span class="annot"><a href="#local-6989586621682149345"><span class="hs-identifier hs-var">delta1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682149346"><span class="annot"><a href="#local-6989586621682149346"><span class="hs-identifier hs-var">delta2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1292"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682149347"><span class="annot"><span class="annottext">ListTel
</span><a href="#local-6989586621682149347"><span class="hs-identifier hs-var">tel1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682149348"><span class="annot"><span class="annottext">Dom (PatVarName, Type)
</span><a href="#local-6989586621682149348"><span class="hs-identifier hs-var">dom</span></a></span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621682149349"><span class="annot"><span class="annottext">ListTel
</span><a href="#local-6989586621682149349"><span class="hs-identifier hs-var">tel2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; ListTel -&gt; (ListTel, ListTel)
forall a. Int -&gt; [a] -&gt; ([a], [a])
</span><span class="hs-identifier hs-var">splitAt</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Telescope -&gt; Int
forall a. Sized a =&gt; a -&gt; Int
</span><a href="Agda.Utils.Size.html#size"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682149333"><span class="hs-identifier hs-var">tel</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682149337"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(ListTel -&gt; (ListTel, ListTel)) -&gt; ListTel -&gt; (ListTel, ListTel)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; ListTel
forall t. Tele (Dom t) -&gt; [Dom (PatVarName, t)]
</span><a href="Agda.Syntax.Internal.html#telToList"><span class="hs-identifier hs-var">telToList</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682149333"><span class="hs-identifier hs-var">tel</span></a></span><span>
</span><span id="line-1293"></span><span>    </span><span class="annot"><span class="annottext">(PatVarName, Dom Type, Telescope, Telescope)
-&gt; ExceptT
     SplitError (TCMT IO) (PatVarName, Dom Type, Telescope, Telescope)
forall a. a -&gt; ExceptT SplitError (TCMT IO) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(PatVarName, Type) -&gt; PatVarName
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span> </span><span class="annot"><span class="annottext">((PatVarName, Type) -&gt; PatVarName)
-&gt; (PatVarName, Type) -&gt; PatVarName
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Dom (PatVarName, Type) -&gt; (PatVarName, Type)
forall t e. Dom' t e -&gt; e
</span><a href="Agda.Syntax.Internal.html#unDom"><span class="hs-identifier hs-var">unDom</span></a></span><span> </span><span class="annot"><span class="annottext">Dom (PatVarName, Type)
</span><a href="#local-6989586621682149348"><span class="hs-identifier hs-var">dom</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(PatVarName, Type) -&gt; Type
forall a b. (a, b) -&gt; b
</span><span class="hs-identifier hs-var">snd</span></span><span> </span><span class="annot"><span class="annottext">((PatVarName, Type) -&gt; Type) -&gt; Dom (PatVarName, Type) -&gt; Dom Type
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Dom (PatVarName, Type)
</span><a href="#local-6989586621682149348"><span class="hs-identifier hs-var">dom</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ListTel -&gt; Telescope
</span><a href="Agda.Syntax.Internal.html#telFromList"><span class="hs-identifier hs-var">telFromList</span></a></span><span> </span><span class="annot"><span class="annottext">ListTel
</span><a href="#local-6989586621682149347"><span class="hs-identifier hs-var">tel1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ListTel -&gt; Telescope
</span><a href="Agda.Syntax.Internal.html#telFromList"><span class="hs-identifier hs-var">telFromList</span></a></span><span> </span><span class="annot"><span class="annottext">ListTel
</span><a href="#local-6989586621682149349"><span class="hs-identifier hs-var">tel2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1294"></span><span>
</span><span id="line-1295"></span><span>  </span><span class="hs-comment">-- Compute the neighbourhoods for the constructors</span><span>
</span><span id="line-1296"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682149350"><span class="annot"><a href="#local-6989586621682149350"><span class="hs-identifier hs-var hs-var">computeNeighborhoods</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1297"></span><span>        </span><span class="hs-comment">-- Check that t is a datatype or a record</span><span>
</span><span id="line-1298"></span><span>        </span><span class="hs-comment">-- Andreas, 2010-09-21, isDatatype now directly throws an exception if it fails</span><span>
</span><span id="line-1299"></span><span>        </span><span class="hs-comment">-- cons = constructors of this datatype</span><span>
</span><span id="line-1300"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621682149351"><span class="annot"><a href="#local-6989586621682149351"><span class="hs-identifier hs-var">dr</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682149352"><span class="annot"><a href="#local-6989586621682149352"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682149353"><span class="annot"><a href="#local-6989586621682149353"><span class="hs-identifier hs-var">s</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682149354"><span class="annot"><a href="#local-6989586621682149354"><span class="hs-identifier hs-var">pars</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682149355"><span class="annot"><a href="#local-6989586621682149355"><span class="hs-identifier hs-var">ixs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682149356"><span class="annot"><a href="#local-6989586621682149356"><span class="hs-identifier hs-var">cons'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682149357"><span class="annot"><a href="#local-6989586621682149357"><span class="hs-identifier hs-var">isHIT</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ExceptT
  SplitError
  (TCMT IO)
  (DataOrRecord, QName, Sort, Args, Args, [QName], Bool)
-&gt; ExceptT
     SplitError
     (TCMT IO)
     (DataOrRecord, QName, Sort, Args, Args, [QName], Bool)
forall (tcm :: * -&gt; *) a.
(MonadTCM tcm, MonadAddContext tcm, MonadDebug tcm) =&gt;
tcm a -&gt; tcm a
</span><a href="#local-6989586621682149358"><span class="hs-identifier hs-var">inContextOfT</span></a></span><span> </span><span class="annot"><span class="annottext">(ExceptT
   SplitError
   (TCMT IO)
   (DataOrRecord, QName, Sort, Args, Args, [QName], Bool)
 -&gt; ExceptT
      SplitError
      (TCMT IO)
      (DataOrRecord, QName, Sort, Args, Args, [QName], Bool))
-&gt; ExceptT
     SplitError
     (TCMT IO)
     (DataOrRecord, QName, Sort, Args, Args, [QName], Bool)
-&gt; ExceptT
     SplitError
     (TCMT IO)
     (DataOrRecord, QName, Sort, Args, Args, [QName], Bool)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Induction
-&gt; Dom Type
-&gt; ExceptT
     SplitError
     (TCMT IO)
     (DataOrRecord, QName, Sort, Args, Args, [QName], Bool)
forall (tcm :: * -&gt; *).
(MonadTCM tcm, MonadError SplitError tcm) =&gt;
Induction
-&gt; Dom Type
-&gt; tcm (DataOrRecord, QName, Sort, Args, Args, [QName], Bool)
</span><a href="Agda.TypeChecking.Coverage.html#isDatatype"><span class="hs-identifier hs-var">isDatatype</span></a></span><span> </span><span class="annot"><span class="annottext">Induction
</span><a href="#local-6989586621682149329"><span class="hs-identifier hs-var">ind</span></a></span><span> </span><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621682149344"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-1301"></span><span>        </span><span id="local-6989586621682149359"><span class="annot"><a href="#local-6989586621682149359"><span class="hs-identifier hs-var">isFib</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="Agda.Utils.Either.html#fromRight"><span class="hs-identifier hs-type">fromRight</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">const</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">False</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">lift</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Irrelevance.html#isFibrant%27"><span class="hs-identifier hs-type">isFibrant'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682149344"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1302"></span><span>        </span><span id="local-6989586621682149361"><span class="annot"><a href="#local-6989586621682149361"><span class="hs-identifier hs-var">cons</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><a href="#local-6989586621682149328"><span class="hs-identifier hs-type">checkEmpty</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1303"></span><span>          </span><span class="annot"><span class="annottext">CheckEmpty
</span><a href="Agda.TypeChecking.Coverage.html#CheckEmpty"><span class="hs-identifier hs-var">CheckEmpty</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ExceptT SplitError (TCMT IO) Bool
-&gt; ExceptT SplitError (TCMT IO) [QName]
-&gt; ExceptT SplitError (TCMT IO) [QName]
-&gt; ExceptT SplitError (TCMT IO) [QName]
forall (m :: * -&gt; *) a. Monad m =&gt; m Bool -&gt; m a -&gt; m a -&gt; m a
</span><a href="Agda.Utils.Monad.html#ifM"><span class="hs-identifier hs-var">ifM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TCMT IO Bool -&gt; ExceptT SplitError (TCMT IO) Bool
forall a. TCM a -&gt; ExceptT SplitError (TCMT IO) a
forall (tcm :: * -&gt; *) a. MonadTCM tcm =&gt; TCM a -&gt; tcm a
</span><a href="Agda.TypeChecking.Monad.Base.html#liftTCM"><span class="hs-identifier hs-var">liftTCM</span></a></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Bool -&gt; ExceptT SplitError (TCMT IO) Bool)
-&gt; TCMT IO Bool -&gt; ExceptT SplitError (TCMT IO) Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Bool -&gt; TCMT IO Bool
forall (tcm :: * -&gt; *) a.
(MonadTCM tcm, MonadAddContext tcm, MonadDebug tcm) =&gt;
tcm a -&gt; tcm a
</span><a href="#local-6989586621682149358"><span class="hs-identifier hs-var">inContextOfT</span></a></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Bool -&gt; TCMT IO Bool) -&gt; TCMT IO Bool -&gt; TCMT IO Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; TCMT IO Bool
forall (tcm :: * -&gt; *). MonadTCM tcm =&gt; Type -&gt; tcm Bool
</span><a href="Agda.TypeChecking.Empty.html#isEmptyType"><span class="hs-identifier hs-var">isEmptyType</span></a></span><span> </span><span class="annot"><span class="annottext">(Type -&gt; TCMT IO Bool) -&gt; Type -&gt; TCMT IO Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Dom Type -&gt; Type
forall t e. Dom' t e -&gt; e
</span><a href="Agda.Syntax.Internal.html#unDom"><span class="hs-identifier hs-var">unDom</span></a></span><span> </span><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621682149344"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[QName] -&gt; ExceptT SplitError (TCMT IO) [QName]
forall a. a -&gt; ExceptT SplitError (TCMT IO) a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[QName] -&gt; ExceptT SplitError (TCMT IO) [QName]
forall a. a -&gt; ExceptT SplitError (TCMT IO) a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">[QName]
</span><a href="#local-6989586621682149356"><span class="hs-identifier hs-var">cons'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1304"></span><span>          </span><span class="annot"><span class="annottext">CheckEmpty
</span><a href="Agda.TypeChecking.Coverage.html#NoCheckEmpty"><span class="hs-identifier hs-var">NoCheckEmpty</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[QName] -&gt; ExceptT SplitError (TCMT IO) [QName]
forall a. a -&gt; ExceptT SplitError (TCMT IO) a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">[QName]
</span><a href="#local-6989586621682149356"><span class="hs-identifier hs-var">cons'</span></a></span><span>
</span><span id="line-1305"></span><span>        </span><span id="local-6989586621682149363"><span class="annot"><a href="#local-6989586621682149363"><span class="hs-identifier hs-var">mns</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="hs-identifier hs-type">forM</span></span><span> </span><span class="annot"><a href="#local-6989586621682149361"><span class="hs-identifier hs-type">cons</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621682149365"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621682149365"><span class="hs-identifier hs-var">con</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">((SplitClause, IInfo) -&gt; (SplitTag, (SplitClause, IInfo)))
-&gt; Maybe (SplitClause, IInfo)
-&gt; Maybe (SplitTag, (SplitClause, IInfo))
forall a b. (a -&gt; b) -&gt; Maybe a -&gt; Maybe b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">QName -&gt; SplitTag
</span><a href="Agda.TypeChecking.Coverage.SplitTree.html#SplitCon"><span class="hs-identifier hs-var">SplitCon</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621682149365"><span class="hs-identifier hs-var">con</span></a></span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Maybe (SplitClause, IInfo)
 -&gt; Maybe (SplitTag, (SplitClause, IInfo)))
-&gt; CoverM (Maybe (SplitClause, IInfo))
-&gt; ExceptT
     SplitError (TCMT IO) (Maybe (SplitTag, (SplitClause, IInfo)))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span>
</span><span id="line-1306"></span><span>          </span><span class="annot"><span class="annottext">Telescope
-&gt; PatVarName
-&gt; Telescope
-&gt; QName
-&gt; Args
-&gt; Args
-&gt; Int
-&gt; Telescope
-&gt; [NamedArg SplitPattern]
-&gt; Map CheckpointId (Substitution' Term)
-&gt; QName
-&gt; CoverM (Maybe (SplitClause, IInfo))
</span><a href="Agda.TypeChecking.Coverage.html#computeNeighbourhood"><span class="hs-identifier hs-var">computeNeighbourhood</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682149345"><span class="hs-identifier hs-var">delta1</span></a></span><span> </span><span class="annot"><span class="annottext">PatVarName
</span><a href="#local-6989586621682149343"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682149346"><span class="hs-identifier hs-var">delta2</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621682149352"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621682149354"><span class="hs-identifier hs-var">pars</span></a></span><span> </span><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621682149355"><span class="hs-identifier hs-var">ixs</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682149337"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682149333"><span class="hs-identifier hs-var">tel</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621682149334"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="annot"><span class="annottext">Map CheckpointId (Substitution' Term)
</span><a href="#local-6989586621682149335"><span class="hs-identifier hs-var">cps</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621682149365"><span class="hs-identifier hs-var">con</span></a></span><span>
</span><span id="line-1307"></span><span>        </span><span id="local-6989586621682149366"><span class="annot"><a href="#local-6989586621682149366"><span class="hs-identifier hs-var">hcompsc</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><a href="#local-6989586621682149359"><span class="hs-identifier hs-type">isFib</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">&amp;&amp;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682149357"><span class="hs-identifier hs-type">isHIT</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">||</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Utils.Null.html#null"><span class="hs-identifier hs-type">null</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682149355"><span class="hs-identifier hs-type">ixs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">&amp;&amp;</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Utils.Null.html#null"><span class="hs-identifier hs-type">null</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682149363"><span class="hs-identifier hs-type">mns</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">&amp;&amp;</span></span><span> </span><span class="annot"><a href="#local-6989586621682149331"><span class="hs-identifier hs-type">inserttrailing</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">==</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#DoInsertTrailing"><span class="hs-identifier hs-type">DoInsertTrailing</span></a></span><span>
</span><span id="line-1308"></span><span>                   </span><span class="hs-keyword">then</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#computeHCompSplit"><span class="hs-identifier hs-type">computeHCompSplit</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682149345"><span class="hs-identifier hs-type">delta1</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682149343"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682149346"><span class="hs-identifier hs-type">delta2</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682149352"><span class="hs-identifier hs-type">d</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682149354"><span class="hs-identifier hs-type">pars</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682149355"><span class="hs-identifier hs-type">ixs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682149337"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682149333"><span class="hs-identifier hs-type">tel</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682149334"><span class="hs-identifier hs-type">ps</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682149335"><span class="hs-identifier hs-type">cps</span></a></span><span>
</span><span id="line-1309"></span><span>                   </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Nothing</span></span><span>
</span><span id="line-1310"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682149367"><span class="annot"><a href="#local-6989586621682149367"><span class="hs-identifier hs-var hs-var">ns</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Maybe (SplitTag, (SplitClause, IInfo))]
-&gt; [(SplitTag, (SplitClause, IInfo))]
forall a. [Maybe a] -&gt; [a]
</span><span class="hs-identifier hs-var">catMaybes</span></span><span> </span><span class="annot"><span class="annottext">[Maybe (SplitTag, (SplitClause, IInfo))]
</span><a href="#local-6989586621682149363"><span class="hs-identifier hs-var">mns</span></a></span><span>
</span><span id="line-1311"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="#local-6989586621682149351"><span class="hs-identifier hs-type">dr</span></a></span><span>
</span><span id="line-1312"></span><span>               </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621682149353"><span class="hs-identifier hs-type">s</span></a></span><span>
</span><span id="line-1313"></span><span>               </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Utils.Null.html#null"><span class="hs-identifier hs-type">null</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682149355"><span class="hs-identifier hs-type">ixs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- Is &quot;d&quot; indexed?</span><span>
</span><span id="line-1314"></span><span>               </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">length</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="#local-6989586621682149367"><span class="hs-identifier hs-type">ns</span></a></span><span>
</span><span id="line-1315"></span><span>               </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621682149367"><span class="hs-identifier hs-type">ns</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">++</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">catMaybes</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">fmap</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">,</span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitClause.html#NoInfo"><span class="hs-identifier hs-type">NoInfo</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621682149366"><span class="hs-identifier hs-type">hcompsc</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">not</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Agda.Utils.Null.html#null"><span class="hs-identifier hs-type">null</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="#local-6989586621682149367"><span class="hs-identifier hs-type">ns</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1316"></span><span>               </span><span class="hs-special">)</span><span>
</span><span id="line-1317"></span><span>
</span><span id="line-1318"></span><span>      </span><span id="local-6989586621682149369"><span class="annot"><a href="#local-6989586621682149369"><span class="hs-identifier hs-var hs-var">computeLitNeighborhoods</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1319"></span><span>        </span><span id="local-6989586621682149370"><span class="annot"><a href="#local-6989586621682149370"><span class="hs-identifier hs-var">typeOk</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TCMT IO Bool -&gt; ExceptT SplitError (TCMT IO) Bool
forall a. TCM a -&gt; ExceptT SplitError (TCMT IO) a
forall (tcm :: * -&gt; *) a. MonadTCM tcm =&gt; TCM a -&gt; tcm a
</span><a href="Agda.TypeChecking.Monad.Base.html#liftTCM"><span class="hs-identifier hs-var">liftTCM</span></a></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Bool -&gt; ExceptT SplitError (TCMT IO) Bool)
-&gt; TCMT IO Bool -&gt; ExceptT SplitError (TCMT IO) Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1320"></span><span>          </span><span id="local-6989586621682149371"><span class="annot"><a href="#local-6989586621682149371"><span class="hs-identifier hs-var">t'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Literal -&gt; TCM Type
forall (m :: * -&gt; *).
(HasBuiltins m, MonadError TCErr m, MonadTCEnv m, ReadTCState m) =&gt;
Literal -&gt; m Type
</span><a href="Agda.TypeChecking.Monad.Builtin.html#litType"><span class="hs-identifier hs-var">litType</span></a></span><span> </span><span class="annot"><span class="annottext">(Literal -&gt; TCM Type) -&gt; Literal -&gt; TCM Type
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Literal -&gt; [Literal] -&gt; Literal
forall a. a -&gt; [a] -&gt; a
</span><a href="Agda.Utils.List.html#headWithDefault"><span class="hs-identifier hs-var">headWithDefault</span></a></span><span> </span><span class="hs-comment">{-'-}</span><span> </span><span class="annot"><span class="annottext">Literal
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span> </span><span class="annot"><span class="annottext">[Literal]
</span><a href="#local-6989586621682149339"><span class="hs-identifier hs-var">plits</span></a></span><span>
</span><span id="line-1321"></span><span>          </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#liftTCM"><span class="hs-identifier hs-type">liftTCM</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.MetaVars.html#dontAssignMetas"><span class="hs-identifier hs-type">dontAssignMetas</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Conversion.html#tryConversion"><span class="hs-identifier hs-type">tryConversion</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Conversion.html#equalType"><span class="hs-identifier hs-type">equalType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#unDom"><span class="hs-identifier hs-var">unDom</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682149344"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621682149371"><span class="hs-identifier hs-type">t'</span></a></span><span>
</span><span id="line-1322"></span><span>        </span><span class="annot"><a href="Agda.Utils.Monad.html#unless"><span class="hs-identifier hs-type">unless</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682149370"><span class="hs-identifier hs-type">typeOk</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">throwError</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">.</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#NotADatatype"><span class="hs-identifier hs-type">NotADatatype</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">=&lt;&lt;</span></span><span> </span><span class="hs-keyword">do</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#liftTCM"><span class="hs-identifier hs-type">liftTCM</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#buildClosure"><span class="hs-identifier hs-type">buildClosure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#unDom"><span class="hs-identifier hs-var">unDom</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682149344"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1323"></span><span>        </span><span id="local-6989586621682149376"><span class="annot"><a href="#local-6989586621682149376"><span class="hs-identifier hs-var">ns</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="hs-identifier hs-type">forM</span></span><span> </span><span class="annot"><a href="#local-6989586621682149339"><span class="hs-identifier hs-type">plits</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621682149377"><span class="annot"><span class="annottext">Literal
</span><a href="#local-6989586621682149377"><span class="hs-identifier hs-var">lit</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1324"></span><span>          </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682149378"><span class="annot"><span class="annottext">delta2' :: Telescope
</span><a href="#local-6989586621682149378"><span class="hs-identifier hs-var hs-var">delta2'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; SubstArg Telescope -&gt; Telescope -&gt; Telescope
forall a. Subst a =&gt; Int -&gt; SubstArg a -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#subst"><span class="hs-identifier hs-var">subst</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Literal -&gt; Term
</span><a href="Agda.Syntax.Internal.html#Lit"><span class="hs-identifier hs-var">Lit</span></a></span><span> </span><span class="annot"><span class="annottext">Literal
</span><a href="#local-6989586621682149377"><span class="hs-identifier hs-var">lit</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682149346"><span class="hs-identifier hs-var">delta2</span></a></span><span>
</span><span id="line-1325"></span><span>              </span><span id="local-6989586621682149381"><span class="annot"><span class="annottext">delta' :: Telescope
</span><a href="#local-6989586621682149381"><span class="hs-identifier hs-var hs-var">delta'</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682149345"><span class="hs-identifier hs-var">delta1</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; Telescope -&gt; Telescope
forall t. Abstract t =&gt; Telescope -&gt; t -&gt; t
</span><a href="Agda.TypeChecking.Substitute.Class.html#abstract"><span class="hs-operator hs-var">`abstract`</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682149378"><span class="hs-identifier hs-var">delta2'</span></a></span><span>
</span><span id="line-1326"></span><span>              </span><span id="local-6989586621682149382"><span class="annot"><span class="annottext">rho :: Substitution' SplitPattern
</span><a href="#local-6989586621682149382"><span class="hs-identifier hs-var hs-var">rho</span></a></span></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Substitution' SplitPattern -&gt; Substitution' SplitPattern
forall a. Int -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#liftS"><span class="hs-identifier hs-var">liftS</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682149337"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">(Substitution' SplitPattern -&gt; Substitution' SplitPattern)
-&gt; Substitution' SplitPattern -&gt; Substitution' SplitPattern
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SplitPattern
-&gt; Substitution' SplitPattern -&gt; Substitution' SplitPattern
forall a. DeBruijn a =&gt; a -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#consS"><span class="hs-identifier hs-var">consS</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Literal -&gt; SplitPattern
forall a. Literal -&gt; Pattern' a
</span><a href="Agda.Syntax.Internal.html#litP"><span class="hs-identifier hs-var">litP</span></a></span><span> </span><span class="annot"><span class="annottext">Literal
</span><a href="#local-6989586621682149377"><span class="hs-identifier hs-var">lit</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Substitution' SplitPattern
forall a. Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#idS"><span class="hs-identifier hs-var">idS</span></a></span><span>
</span><span id="line-1327"></span><span>              </span><span id="local-6989586621682149384"><span class="annot"><span class="annottext">ps' :: [NamedArg SplitPattern]
</span><a href="#local-6989586621682149384"><span class="hs-identifier hs-var hs-var">ps'</span></a></span></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Substitution' (SubstArg [NamedArg SplitPattern])
-&gt; [NamedArg SplitPattern] -&gt; [NamedArg SplitPattern]
forall a. Subst a =&gt; Substitution' (SubstArg a) -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#applySubst"><span class="hs-identifier hs-var">applySubst</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' SplitPattern
Substitution' (SubstArg [NamedArg SplitPattern])
</span><a href="#local-6989586621682149382"><span class="hs-identifier hs-var">rho</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621682149334"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-1328"></span><span>              </span><span id="local-6989586621682149385"><span class="annot"><span class="annottext">cps' :: Map CheckpointId (Substitution' Term)
</span><a href="#local-6989586621682149385"><span class="hs-identifier hs-var hs-var">cps'</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Substitution' SplitPattern
-&gt; Map CheckpointId (Substitution' Term)
-&gt; Map CheckpointId (Substitution' Term)
forall a. TermSubst a =&gt; Substitution' SplitPattern -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Coverage.SplitPattern.html#applySplitPSubst"><span class="hs-identifier hs-var">applySplitPSubst</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' SplitPattern
</span><a href="#local-6989586621682149382"><span class="hs-identifier hs-var">rho</span></a></span><span> </span><span class="annot"><span class="annottext">Map CheckpointId (Substitution' Term)
</span><a href="#local-6989586621682149335"><span class="hs-identifier hs-var">cps</span></a></span><span>
</span><span id="line-1329"></span><span>          </span><span class="annot"><span class="annottext">(SplitTag, SplitClause)
-&gt; ExceptT SplitError (TCMT IO) (SplitTag, SplitClause)
forall a. a -&gt; ExceptT SplitError (TCMT IO) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Literal -&gt; SplitTag
</span><a href="Agda.TypeChecking.Coverage.SplitTree.html#SplitLit"><span class="hs-identifier hs-var">SplitLit</span></a></span><span> </span><span class="annot"><span class="annottext">Literal
</span><a href="#local-6989586621682149377"><span class="hs-identifier hs-var">lit</span></a></span><span> </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Telescope
-&gt; [NamedArg SplitPattern]
-&gt; Substitution' SplitPattern
-&gt; Map CheckpointId (Substitution' Term)
-&gt; Maybe (Dom Type)
-&gt; SplitClause
</span><a href="Agda.TypeChecking.Coverage.SplitClause.html#SClause"><span class="hs-identifier hs-var">SClause</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682149381"><span class="hs-identifier hs-var">delta'</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621682149384"><span class="hs-identifier hs-var">ps'</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' SplitPattern
</span><a href="#local-6989586621682149382"><span class="hs-identifier hs-var">rho</span></a></span><span> </span><span class="annot"><span class="annottext">Map CheckpointId (Substitution' Term)
</span><a href="#local-6989586621682149385"><span class="hs-identifier hs-var">cps'</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (Dom Type)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">)</span><span>
</span><span id="line-1330"></span><span>        </span><span id="local-6989586621682149386"><span class="annot"><a href="#local-6989586621682149386"><span class="hs-identifier hs-var">ca</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1331"></span><span>          </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682149387"><span class="annot"><a href="#local-6989586621682149387"><span class="hs-identifier hs-var hs-var">delta'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682149333"><span class="hs-identifier hs-var">tel</span></a></span><span> </span><span class="hs-comment">-- telescope is unchanged for catchall branch</span><span>
</span><span id="line-1332"></span><span>              </span><span id="local-6989586621682149388"><span class="annot"><a href="#local-6989586621682149388"><span class="hs-identifier hs-var hs-var">varp</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PatternInfo -&gt; SplitPatVar -&gt; SplitPattern
forall x. PatternInfo -&gt; x -&gt; Pattern' x
</span><a href="Agda.Syntax.Internal.html#VarP"><span class="hs-identifier hs-var">VarP</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PatOrigin -&gt; [Name] -&gt; PatternInfo
</span><a href="Agda.Syntax.Internal.html#PatternInfo"><span class="hs-identifier hs-var">PatternInfo</span></a></span><span> </span><span class="annot"><span class="annottext">PatOrigin
</span><a href="Agda.Syntax.Internal.html#PatOSplit"><span class="hs-identifier hs-var">PatOSplit</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(SplitPatVar -&gt; SplitPattern) -&gt; SplitPatVar -&gt; SplitPattern
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitPattern.html#SplitPatVar"><span class="hs-identifier hs-type">SplitPatVar</span></a></span><span>
</span><span id="line-1333"></span><span>                         </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">splitPatVarName :: PatVarName
</span><a href="Agda.TypeChecking.Coverage.SplitPattern.html#splitPatVarName"><span class="hs-identifier hs-var">splitPatVarName</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PatVarName
forall a. Underscore a =&gt; a
</span><a href="Agda.Syntax.Common.html#underscore"><span class="hs-identifier hs-var">underscore</span></a></span><span>
</span><span id="line-1334"></span><span>                         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">splitPatVarIndex :: Int
</span><a href="Agda.TypeChecking.Coverage.SplitPattern.html#splitPatVarIndex"><span class="hs-identifier hs-var">splitPatVarIndex</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>
</span><span id="line-1335"></span><span>                         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">splitExcludedLits :: [Literal]
</span><a href="Agda.TypeChecking.Coverage.SplitPattern.html#splitExcludedLits"><span class="hs-identifier hs-var">splitExcludedLits</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Literal]
</span><a href="#local-6989586621682149339"><span class="hs-identifier hs-var">plits</span></a></span><span>
</span><span id="line-1336"></span><span>                         </span><span class="hs-special">}</span><span>
</span><span id="line-1337"></span><span>              </span><span id="local-6989586621682149392"><span class="annot"><a href="#local-6989586621682149392"><span class="hs-identifier hs-var hs-var">rho</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Substitution' SplitPattern -&gt; Substitution' SplitPattern
forall a. Int -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#liftS"><span class="hs-identifier hs-var">liftS</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682149337"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">(Substitution' SplitPattern -&gt; Substitution' SplitPattern)
-&gt; Substitution' SplitPattern -&gt; Substitution' SplitPattern
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SplitPattern
-&gt; Substitution' SplitPattern -&gt; Substitution' SplitPattern
forall a. DeBruijn a =&gt; a -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#consS"><span class="hs-identifier hs-var">consS</span></a></span><span> </span><span class="annot"><span class="annottext">SplitPattern
</span><a href="#local-6989586621682149388"><span class="hs-identifier hs-var">varp</span></a></span><span> </span><span class="annot"><span class="annottext">(Substitution' SplitPattern -&gt; Substitution' SplitPattern)
-&gt; Substitution' SplitPattern -&gt; Substitution' SplitPattern
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Substitution' SplitPattern
forall a. Int -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#raiseS"><span class="hs-identifier hs-var">raiseS</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span>
</span><span id="line-1338"></span><span>              </span><span id="local-6989586621682149393"><span class="annot"><a href="#local-6989586621682149393"><span class="hs-identifier hs-var hs-var">ps'</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Substitution' (SubstArg [NamedArg SplitPattern])
-&gt; [NamedArg SplitPattern] -&gt; [NamedArg SplitPattern]
forall a. Subst a =&gt; Substitution' (SubstArg a) -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#applySubst"><span class="hs-identifier hs-var">applySubst</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' SplitPattern
Substitution' (SubstArg [NamedArg SplitPattern])
</span><a href="#local-6989586621682149392"><span class="hs-identifier hs-var">rho</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621682149334"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-1339"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitTree.html#SplitCatchall"><span class="hs-identifier hs-type">SplitCatchall</span></a></span><span> </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitClause.html#SClause"><span class="hs-identifier hs-type">SClause</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682149387"><span class="hs-identifier hs-type">delta'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682149393"><span class="hs-identifier hs-type">ps'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682149392"><span class="hs-identifier hs-type">rho</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682149335"><span class="hs-identifier hs-type">cps</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Nothing</span></span><span class="hs-special">)</span><span>
</span><span id="line-1340"></span><span>
</span><span id="line-1341"></span><span>        </span><span class="hs-comment">-- If Agda is changed so that the type of a literal can belong</span><span>
</span><span id="line-1342"></span><span>        </span><span class="hs-comment">-- to an inductive family (with at least one index), then the</span><span>
</span><span id="line-1343"></span><span>        </span><span class="hs-comment">-- following code should be changed (the constructor False</span><span>
</span><span id="line-1344"></span><span>        </span><span class="hs-comment">-- stands for &quot;not indexed&quot;).</span><span>
</span><span id="line-1345"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682149394"><span class="annot"><a href="#local-6989586621682149394"><span class="hs-identifier hs-var hs-var">ns'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((SplitTag, SplitClause) -&gt; (SplitTag, (SplitClause, IInfo)))
-&gt; [(SplitTag, SplitClause)] -&gt; [(SplitTag, (SplitClause, IInfo))]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">(SplitClause -&gt; (SplitClause, IInfo))
-&gt; (SplitTag, SplitClause) -&gt; (SplitTag, (SplitClause, IInfo))
forall a b. (a -&gt; b) -&gt; (SplitTag, a) -&gt; (SplitTag, b)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">,</span><span class="annot"><span class="annottext">IInfo
</span><a href="Agda.TypeChecking.Coverage.SplitClause.html#NoInfo"><span class="hs-identifier hs-var">NoInfo</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([(SplitTag, SplitClause)] -&gt; [(SplitTag, (SplitClause, IInfo))])
-&gt; [(SplitTag, SplitClause)] -&gt; [(SplitTag, (SplitClause, IInfo))]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[(SplitTag, SplitClause)]
</span><a href="#local-6989586621682149376"><span class="hs-identifier hs-var">ns</span></a></span><span> </span><span class="annot"><span class="annottext">[(SplitTag, SplitClause)]
-&gt; [(SplitTag, SplitClause)] -&gt; [(SplitTag, SplitClause)]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">(SplitTag, SplitClause)
</span><a href="#local-6989586621682149386"><span class="hs-identifier hs-var">ca</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-1346"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#IsData"><span class="hs-identifier hs-type">IsData</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#mkType"><span class="hs-identifier hs-type">mkType</span></a></span><span> </span><span class="annot"><span class="hs-number">0</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">False</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">length</span></span><span> </span><span class="annot"><a href="#local-6989586621682149394"><span class="hs-identifier hs-type">ns'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621682149394"><span class="hs-identifier hs-type">ns'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1347"></span><span>
</span><span id="line-1348"></span><span>  </span><span class="hs-comment">-- numMatching is the number of proper constructors matching, excluding hcomp.</span><span>
</span><span id="line-1349"></span><span>  </span><span class="hs-comment">-- for literals this considers the catchall clause as 1 extra constructor.</span><span>
</span><span id="line-1350"></span><span>  </span><span class="hs-special">(</span><span id="local-6989586621682149396"><span class="annot"><a href="#local-6989586621682149396"><span class="hs-identifier hs-var">dr</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682149397"><span class="annot"><a href="#local-6989586621682149397"><span class="hs-identifier hs-var">s</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682149398"><span class="annot"><a href="#local-6989586621682149398"><span class="hs-identifier hs-var">isIndexed</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682149399"><span class="annot"><a href="#local-6989586621682149399"><span class="hs-identifier hs-var">numMatching</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682149400"><span class="annot"><a href="#local-6989586621682149400"><span class="hs-identifier hs-var">ns</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><a href="Agda.Utils.Null.html#null"><span class="hs-identifier hs-type">null</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682149338"><span class="hs-identifier hs-type">pcons'</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">&amp;&amp;</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Utils.Null.html#null"><span class="hs-identifier hs-type">null</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682149339"><span class="hs-identifier hs-type">plits</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1351"></span><span>        </span><span class="hs-keyword">then</span><span> </span><span class="annot"><a href="#local-6989586621682149369"><span class="hs-identifier hs-type">computeLitNeighborhoods</span></a></span><span>
</span><span id="line-1352"></span><span>        </span><span class="hs-keyword">else</span><span> </span><span class="annot"><a href="#local-6989586621682149350"><span class="hs-identifier hs-type">computeNeighborhoods</span></a></span><span>
</span><span id="line-1353"></span><span>
</span><span id="line-1354"></span><span>  </span><span id="local-6989586621682149401"><span class="annot"><a href="#local-6989586621682149401"><span class="hs-identifier hs-var">ns</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><a href="#local-6989586621682149336"><span class="hs-identifier hs-type">target</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1355"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621682149402"><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621682149402"><span class="hs-identifier hs-var">a</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[(SplitTag, (SplitClause, IInfo))]
-&gt; ((SplitTag, (SplitClause, IInfo))
    -&gt; ExceptT SplitError (TCMT IO) (SplitTag, (SplitClause, IInfo)))
-&gt; ExceptT SplitError (TCMT IO) [(SplitTag, (SplitClause, IInfo))]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
t a -&gt; (a -&gt; m b) -&gt; m (t b)
</span><span class="hs-identifier hs-var">forM</span></span><span> </span><span class="annot"><span class="annottext">[(SplitTag, (SplitClause, IInfo))]
</span><a href="#local-6989586621682149400"><span class="hs-identifier hs-var">ns</span></a></span><span> </span><span class="annot"><span class="annottext">(((SplitTag, (SplitClause, IInfo))
  -&gt; ExceptT SplitError (TCMT IO) (SplitTag, (SplitClause, IInfo)))
 -&gt; ExceptT SplitError (TCMT IO) [(SplitTag, (SplitClause, IInfo))])
-&gt; ((SplitTag, (SplitClause, IInfo))
    -&gt; ExceptT SplitError (TCMT IO) (SplitTag, (SplitClause, IInfo)))
-&gt; ExceptT SplitError (TCMT IO) [(SplitTag, (SplitClause, IInfo))]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682149403"><span class="annot"><span class="annottext">SplitTag
</span><a href="#local-6989586621682149403"><span class="hs-identifier hs-var">con</span></a></span></span><span class="hs-special">,</span><span class="hs-special">(</span><span id="local-6989586621682149404"><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621682149404"><span class="hs-identifier hs-var">sc</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621682149405"><span class="annot"><span class="annottext">IInfo
</span><a href="#local-6989586621682149405"><span class="hs-identifier hs-var">info</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TCMT IO (SplitTag, (SplitClause, IInfo))
-&gt; ExceptT SplitError (TCMT IO) (SplitTag, (SplitClause, IInfo))
forall (m :: * -&gt; *) a. Monad m =&gt; m a -&gt; ExceptT SplitError m a
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO (SplitTag, (SplitClause, IInfo))
 -&gt; ExceptT SplitError (TCMT IO) (SplitTag, (SplitClause, IInfo)))
-&gt; TCMT IO (SplitTag, (SplitClause, IInfo))
-&gt; ExceptT SplitError (TCMT IO) (SplitTag, (SplitClause, IInfo))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SplitTag
</span><a href="#local-6989586621682149403"><span class="hs-identifier hs-var">con</span></a></span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((SplitClause, IInfo) -&gt; (SplitTag, (SplitClause, IInfo)))
-&gt; (SplitClause -&gt; (SplitClause, IInfo))
-&gt; SplitClause
-&gt; (SplitTag, (SplitClause, IInfo))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">,</span><span class="annot"><span class="annottext">IInfo
</span><a href="#local-6989586621682149405"><span class="hs-identifier hs-var">info</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(SplitClause -&gt; (SplitTag, (SplitClause, IInfo)))
-&gt; TCMT IO SplitClause -&gt; TCMT IO (SplitTag, (SplitClause, IInfo))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span>
</span><span id="line-1356"></span><span>                 </span><span class="annot"><span class="annottext">Quantity
-&gt; SplitTag -&gt; SplitClause -&gt; Dom Type -&gt; TCMT IO SplitClause
</span><a href="Agda.TypeChecking.Coverage.html#fixTargetType"><span class="hs-identifier hs-var">fixTargetType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Dom Type -&gt; Quantity
forall a. LensQuantity a =&gt; a -&gt; Quantity
</span><a href="Agda.Syntax.Common.html#getQuantity"><span class="hs-identifier hs-var">getQuantity</span></a></span><span> </span><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621682149344"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SplitTag
</span><a href="#local-6989586621682149403"><span class="hs-identifier hs-var">con</span></a></span><span> </span><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621682149404"><span class="hs-identifier hs-var">sc</span></a></span><span> </span><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621682149402"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-1357"></span><span>    </span><span class="annot"><span class="annottext">Maybe (Dom Type)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[(SplitTag, (SplitClause, IInfo))]
-&gt; ExceptT SplitError (TCMT IO) [(SplitTag, (SplitClause, IInfo))]
forall a. a -&gt; ExceptT SplitError (TCMT IO) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">[(SplitTag, (SplitClause, IInfo))]
</span><a href="#local-6989586621682149400"><span class="hs-identifier hs-var">ns</span></a></span><span>
</span><span id="line-1358"></span><span>
</span><span id="line-1359"></span><span>  </span><span id="local-6989586621682149406"><span class="annot"><a href="#local-6989586621682149406"><span class="hs-identifier hs-var">ns</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><a href="#local-6989586621682149331"><span class="hs-identifier hs-type">inserttrailing</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1360"></span><span>    </span><span class="annot"><span class="annottext">InsertTrailing
</span><a href="Agda.TypeChecking.Coverage.html#DontInsertTrailing"><span class="hs-identifier hs-var">DontInsertTrailing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[(SplitTag, (SplitClause, IInfo))]
-&gt; ExceptT SplitError (TCMT IO) [(SplitTag, (SplitClause, IInfo))]
forall a. a -&gt; ExceptT SplitError (TCMT IO) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">[(SplitTag, (SplitClause, IInfo))]
</span><a href="#local-6989586621682149401"><span class="hs-identifier hs-var">ns</span></a></span><span>
</span><span id="line-1361"></span><span>    </span><span class="annot"><span class="annottext">InsertTrailing
</span><a href="Agda.TypeChecking.Coverage.html#DoInsertTrailing"><span class="hs-identifier hs-var">DoInsertTrailing</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TCMT IO [(SplitTag, (SplitClause, IInfo))]
-&gt; ExceptT SplitError (TCMT IO) [(SplitTag, (SplitClause, IInfo))]
forall (m :: * -&gt; *) a. Monad m =&gt; m a -&gt; ExceptT SplitError m a
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO [(SplitTag, (SplitClause, IInfo))]
 -&gt; ExceptT SplitError (TCMT IO) [(SplitTag, (SplitClause, IInfo))])
-&gt; TCMT IO [(SplitTag, (SplitClause, IInfo))]
-&gt; ExceptT SplitError (TCMT IO) [(SplitTag, (SplitClause, IInfo))]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[(SplitTag, (SplitClause, IInfo))]
-&gt; ((SplitTag, (SplitClause, IInfo))
    -&gt; TCMT IO (SplitTag, (SplitClause, IInfo)))
-&gt; TCMT IO [(SplitTag, (SplitClause, IInfo))]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
t a -&gt; (a -&gt; m b) -&gt; m (t b)
</span><span class="hs-identifier hs-var">forM</span></span><span> </span><span class="annot"><span class="annottext">[(SplitTag, (SplitClause, IInfo))]
</span><a href="#local-6989586621682149401"><span class="hs-identifier hs-var">ns</span></a></span><span> </span><span class="annot"><span class="annottext">(((SplitTag, (SplitClause, IInfo))
  -&gt; TCMT IO (SplitTag, (SplitClause, IInfo)))
 -&gt; TCMT IO [(SplitTag, (SplitClause, IInfo))])
-&gt; ((SplitTag, (SplitClause, IInfo))
    -&gt; TCMT IO (SplitTag, (SplitClause, IInfo)))
-&gt; TCMT IO [(SplitTag, (SplitClause, IInfo))]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621682149407"><span class="annot"><span class="annottext">SplitTag
</span><a href="#local-6989586621682149407"><span class="hs-identifier hs-var">con</span></a></span></span><span class="hs-special">,</span><span class="hs-special">(</span><span id="local-6989586621682149408"><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621682149408"><span class="hs-identifier hs-var">sc</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621682149409"><span class="annot"><span class="annottext">IInfo
</span><a href="#local-6989586621682149409"><span class="hs-identifier hs-var">info</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1362"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SplitTag
</span><a href="#local-6989586621682149407"><span class="hs-identifier hs-var">con</span></a></span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((SplitClause, IInfo) -&gt; (SplitTag, (SplitClause, IInfo)))
-&gt; ((Telescope, SplitClause) -&gt; (SplitClause, IInfo))
-&gt; (Telescope, SplitClause)
-&gt; (SplitTag, (SplitClause, IInfo))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">,</span><span class="annot"><span class="annottext">IInfo
</span><a href="#local-6989586621682149409"><span class="hs-identifier hs-var">info</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(SplitClause -&gt; (SplitClause, IInfo))
-&gt; ((Telescope, SplitClause) -&gt; SplitClause)
-&gt; (Telescope, SplitClause)
-&gt; (SplitClause, IInfo)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Telescope, SplitClause) -&gt; SplitClause
forall a b. (a, b) -&gt; b
</span><span class="hs-identifier hs-var">snd</span></span><span> </span><span class="annot"><span class="annottext">((Telescope, SplitClause) -&gt; (SplitTag, (SplitClause, IInfo)))
-&gt; TCM (Telescope, SplitClause)
-&gt; TCMT IO (SplitTag, (SplitClause, IInfo))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SplitClause -&gt; TCM (Telescope, SplitClause)
</span><a href="Agda.TypeChecking.Coverage.html#insertTrailingArgs"><span class="hs-identifier hs-var">insertTrailingArgs</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621682149408"><span class="hs-identifier hs-var">sc</span></a></span><span>
</span><span id="line-1363"></span><span>
</span><span id="line-1364"></span><span>  </span><span id="local-6989586621682149410"><span class="annot"><a href="#local-6989586621682149410"><span class="hs-identifier hs-var">mHCompName</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Builtin.html#getPrimitiveName%27"><span class="hs-identifier hs-type">getPrimitiveName'</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Builtin.html#builtinHComp"><span class="hs-identifier hs-type">builtinHComp</span></a></span><span>
</span><span id="line-1365"></span><span>  </span><span id="local-6989586621682149411"><span class="annot"><a href="#local-6989586621682149411"><span class="hs-identifier hs-var">opts</span></a></span></span><span>       </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="Agda.Interaction.Options.HasOptions.html#pragmaOptions"><span class="hs-identifier hs-type">pragmaOptions</span></a></span><span>
</span><span id="line-1366"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682149412"><span class="annot"><a href="#local-6989586621682149412"><span class="hs-identifier hs-var hs-var">withoutK</span></a></span></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PragmaOptions -&gt; Bool
</span><a href="Agda.Interaction.Options.Base.html#optWithoutK"><span class="hs-identifier hs-var">optWithoutK</span></a></span><span> </span><span class="annot"><span class="annottext">PragmaOptions
</span><a href="#local-6989586621682149411"><span class="hs-identifier hs-var">opts</span></a></span><span>
</span><span id="line-1367"></span><span>      </span><span id="local-6989586621682149414"><span class="annot"><a href="#local-6989586621682149414"><span class="hs-identifier hs-var hs-var">erasedMatches</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PragmaOptions -&gt; Bool
</span><a href="Agda.Interaction.Options.Base.html#optErasedMatches"><span class="hs-identifier hs-var">optErasedMatches</span></a></span><span> </span><span class="annot"><span class="annottext">PragmaOptions
</span><a href="#local-6989586621682149411"><span class="hs-identifier hs-var">opts</span></a></span><span>
</span><span id="line-1368"></span><span>      </span><span id="local-6989586621682149416"><span class="annot"><a href="#local-6989586621682149416"><span class="hs-identifier hs-var hs-var">isRecordWithEta</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">DataOrRecord
</span><a href="#local-6989586621682149396"><span class="hs-identifier hs-var">dr</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1369"></span><span>        </span><span class="annot"><span class="annottext">DataOrRecord
</span><a href="Agda.Syntax.Internal.html#IsData"><span class="hs-identifier hs-var">IsData</span></a></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1370"></span><span>        </span><span class="annot"><a href="Agda.Syntax.Internal.html#IsRecord"><span class="hs-identifier hs-type">IsRecord</span></a></span><span> </span><span id="local-6989586621682149417"><span class="annot"><span class="annottext">InductionAndEta
</span><a href="#local-6989586621682149417"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1371"></span><span>          </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">EtaEquality -&gt; HasEta
</span><a href="Agda.TypeChecking.Monad.Base.html#theEtaEquality"><span class="hs-identifier hs-var">theEtaEquality</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">InductionAndEta -&gt; EtaEquality
</span><a href="Agda.TypeChecking.Monad.Base.html#recordEtaEquality"><span class="hs-identifier hs-var">recordEtaEquality</span></a></span><span> </span><span class="annot"><span class="annottext">InductionAndEta
</span><a href="#local-6989586621682149417"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1372"></span><span>            </span><span class="annot"><a href="Agda.Syntax.Common.html#YesEta"><span class="hs-identifier hs-type">YesEta</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1373"></span><span>            </span><span class="annot"><a href="Agda.Syntax.Common.html#NoEta"><span class="hs-identifier hs-type">NoEta</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1374"></span><span>
</span><span id="line-1375"></span><span>  </span><span id="local-6989586621682149421"><span class="annot"><a href="#local-6989586621682149421"><span class="hs-identifier hs-var">erased</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html#hasQuantity0"><span class="hs-identifier hs-type">hasQuantity0</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">&lt;$&gt;</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#viewTC"><span class="hs-identifier hs-type">viewTC</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#eQuantity"><span class="hs-identifier hs-type">eQuantity</span></a></span><span>
</span><span id="line-1376"></span><span>  </span><span class="annot"><a href="Agda.TypeChecking.Monad.Debug.html#reportSLn"><span class="hs-identifier hs-type">reportSLn</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;tc.cover.split&quot;</span></span><span> </span><span class="annot"><span class="hs-number">60</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><span class="hs-string">&quot;We are in erased context = &quot;</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">++</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">show</span></span><span> </span><span class="annot"><a href="#local-6989586621682149421"><span class="hs-identifier hs-type">erased</span></a></span><span>
</span><span id="line-1377"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682149426"><span class="annot"><a href="#local-6989586621682149426"><span class="hs-identifier hs-var hs-var">erasedError</span></a></span></span><span> </span><span id="local-6989586621682149427"><span class="annot"><span class="annottext">ErasedDatatypeReason
</span><a href="#local-6989586621682149427"><span class="hs-identifier hs-var">reason</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1378"></span><span>        </span><span class="annot"><span class="annottext">SplitError
-&gt; ExceptT SplitError (TCMT IO) (Either SplitClause Covering)
forall a. SplitError -&gt; ExceptT SplitError (TCMT IO) a
forall e (m :: * -&gt; *) a. MonadError e m =&gt; e -&gt; m a
</span><span class="hs-identifier hs-var">throwError</span></span><span> </span><span class="annot"><span class="annottext">(SplitError
 -&gt; ExceptT SplitError (TCMT IO) (Either SplitClause Covering))
-&gt; (Closure Type -&gt; SplitError)
-&gt; Closure Type
-&gt; ExceptT SplitError (TCMT IO) (Either SplitClause Covering)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ErasedDatatypeReason -&gt; Closure Type -&gt; SplitError
</span><a href="Agda.TypeChecking.Monad.Base.html#ErasedDatatype"><span class="hs-identifier hs-var">ErasedDatatype</span></a></span><span> </span><span class="annot"><span class="annottext">ErasedDatatypeReason
</span><a href="#local-6989586621682149427"><span class="hs-identifier hs-var">reason</span></a></span><span> </span><span class="annot"><span class="annottext">(Closure Type
 -&gt; ExceptT SplitError (TCMT IO) (Either SplitClause Covering))
-&gt; ExceptT SplitError (TCMT IO) (Closure Type)
-&gt; ExceptT SplitError (TCMT IO) (Either SplitClause Covering)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">=&lt;&lt;</span></span><span>
</span><span id="line-1379"></span><span>          </span><span class="hs-keyword">do</span><span> </span><span class="annot"><span class="annottext">TCM (Closure Type) -&gt; ExceptT SplitError (TCMT IO) (Closure Type)
forall a. TCM a -&gt; ExceptT SplitError (TCMT IO) a
forall (tcm :: * -&gt; *) a. MonadTCM tcm =&gt; TCM a -&gt; tcm a
</span><a href="Agda.TypeChecking.Monad.Base.html#liftTCM"><span class="hs-identifier hs-var">liftTCM</span></a></span><span> </span><span class="annot"><span class="annottext">(TCM (Closure Type) -&gt; ExceptT SplitError (TCMT IO) (Closure Type))
-&gt; TCM (Closure Type)
-&gt; ExceptT SplitError (TCMT IO) (Closure Type)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCM (Closure Type) -&gt; TCM (Closure Type)
forall (tcm :: * -&gt; *) a.
(MonadTCM tcm, MonadAddContext tcm, MonadDebug tcm) =&gt;
tcm a -&gt; tcm a
</span><a href="#local-6989586621682149358"><span class="hs-identifier hs-var">inContextOfT</span></a></span><span> </span><span class="annot"><span class="annottext">(TCM (Closure Type) -&gt; TCM (Closure Type))
-&gt; TCM (Closure Type) -&gt; TCM (Closure Type)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; TCM (Closure Type)
forall (m :: * -&gt; *) a.
(MonadTCEnv m, ReadTCState m) =&gt;
a -&gt; m (Closure a)
</span><a href="Agda.TypeChecking.Monad.Base.html#buildClosure"><span class="hs-identifier hs-var">buildClosure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Dom Type -&gt; Type
forall t e. Dom' t e -&gt; e
</span><a href="Agda.Syntax.Internal.html#unDom"><span class="hs-identifier hs-var">unDom</span></a></span><span> </span><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621682149344"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1380"></span><span>
</span><span id="line-1381"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><a href="#local-6989586621682149399"><span class="hs-identifier hs-type">numMatching</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1382"></span><span>    </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1383"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682149430"><span class="annot"><span class="annottext">absurdp :: SplitPattern
</span><a href="#local-6989586621682149430"><span class="hs-identifier hs-var hs-var">absurdp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PatternInfo -&gt; SplitPatVar -&gt; SplitPattern
forall x. PatternInfo -&gt; x -&gt; Pattern' x
</span><a href="Agda.Syntax.Internal.html#VarP"><span class="hs-identifier hs-var">VarP</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PatOrigin -&gt; [Name] -&gt; PatternInfo
</span><a href="Agda.Syntax.Internal.html#PatternInfo"><span class="hs-identifier hs-var">PatternInfo</span></a></span><span> </span><span class="annot"><span class="annottext">PatOrigin
</span><a href="Agda.Syntax.Internal.html#PatOAbsurd"><span class="hs-identifier hs-var">PatOAbsurd</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(SplitPatVar -&gt; SplitPattern) -&gt; SplitPatVar -&gt; SplitPattern
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PatVarName -&gt; Int -&gt; [Literal] -&gt; SplitPatVar
</span><a href="Agda.TypeChecking.Coverage.SplitPattern.html#SplitPatVar"><span class="hs-identifier hs-var">SplitPatVar</span></a></span><span> </span><span class="annot"><span class="annottext">PatVarName
forall a. Underscore a =&gt; a
</span><a href="Agda.Syntax.Common.html#underscore"><span class="hs-identifier hs-var">underscore</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-1384"></span><span>          </span><span id="local-6989586621682149432"><span class="annot"><span class="annottext">rho :: Substitution' SplitPattern
</span><a href="#local-6989586621682149432"><span class="hs-identifier hs-var hs-var">rho</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Substitution' SplitPattern -&gt; Substitution' SplitPattern
forall a. Int -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#liftS"><span class="hs-identifier hs-var">liftS</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682149337"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">(Substitution' SplitPattern -&gt; Substitution' SplitPattern)
-&gt; Substitution' SplitPattern -&gt; Substitution' SplitPattern
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SplitPattern
-&gt; Substitution' SplitPattern -&gt; Substitution' SplitPattern
forall a. DeBruijn a =&gt; a -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#consS"><span class="hs-identifier hs-var">consS</span></a></span><span> </span><span class="annot"><span class="annottext">SplitPattern
</span><a href="#local-6989586621682149430"><span class="hs-identifier hs-var">absurdp</span></a></span><span> </span><span class="annot"><span class="annottext">(Substitution' SplitPattern -&gt; Substitution' SplitPattern)
-&gt; Substitution' SplitPattern -&gt; Substitution' SplitPattern
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Substitution' SplitPattern
forall a. Int -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#raiseS"><span class="hs-identifier hs-var">raiseS</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span>
</span><span id="line-1385"></span><span>          </span><span id="local-6989586621682149433"><span class="annot"><span class="annottext">ps' :: [NamedArg SplitPattern]
</span><a href="#local-6989586621682149433"><span class="hs-identifier hs-var hs-var">ps'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Substitution' (SubstArg [NamedArg SplitPattern])
-&gt; [NamedArg SplitPattern] -&gt; [NamedArg SplitPattern]
forall a. Subst a =&gt; Substitution' (SubstArg a) -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#applySubst"><span class="hs-identifier hs-var">applySubst</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' SplitPattern
Substitution' (SubstArg [NamedArg SplitPattern])
</span><a href="#local-6989586621682149432"><span class="hs-identifier hs-var">rho</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621682149334"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-1386"></span><span>      </span><span class="annot"><span class="annottext">Either SplitClause Covering
-&gt; ExceptT SplitError (TCMT IO) (Either SplitClause Covering)
forall a. a -&gt; ExceptT SplitError (TCMT IO) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Either SplitClause Covering
 -&gt; ExceptT SplitError (TCMT IO) (Either SplitClause Covering))
-&gt; Either SplitClause Covering
-&gt; ExceptT SplitError (TCMT IO) (Either SplitClause Covering)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SplitClause -&gt; Either SplitClause Covering
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">(SplitClause -&gt; Either SplitClause Covering)
-&gt; SplitClause -&gt; Either SplitClause Covering
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitClause.html#SClause"><span class="hs-identifier hs-type">SClause</span></a></span><span>
</span><span id="line-1387"></span><span>               </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">scTel :: Telescope
</span><a href="Agda.TypeChecking.Coverage.SplitClause.html#scTel"><span class="hs-identifier hs-var">scTel</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682149333"><span class="hs-identifier hs-var">tel</span></a></span><span>
</span><span id="line-1388"></span><span>               </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">scPats :: [NamedArg SplitPattern]
</span><a href="Agda.TypeChecking.Coverage.SplitClause.html#scPats"><span class="hs-identifier hs-var">scPats</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621682149433"><span class="hs-identifier hs-var">ps'</span></a></span><span>
</span><span id="line-1389"></span><span>               </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">scSubst :: Substitution' SplitPattern
</span><a href="Agda.TypeChecking.Coverage.SplitClause.html#scSubst"><span class="hs-identifier hs-var">scSubst</span></a></span><span>              </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Substitution' SplitPattern
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span> </span><span class="hs-comment">-- not used</span><span>
</span><span id="line-1390"></span><span>               </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">scCheckpoints :: Map CheckpointId (Substitution' Term)
</span><a href="Agda.TypeChecking.Coverage.SplitClause.html#scCheckpoints"><span class="hs-identifier hs-var">scCheckpoints</span></a></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map CheckpointId (Substitution' Term)
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span> </span><span class="hs-comment">-- not used</span><span>
</span><span id="line-1391"></span><span>               </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">scTarget :: Maybe (Dom Type)
</span><a href="Agda.TypeChecking.Coverage.SplitClause.html#scTarget"><span class="hs-identifier hs-var">scTarget</span></a></span><span>             </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (Dom Type)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1392"></span><span>               </span><span class="hs-special">}</span><span>
</span><span id="line-1393"></span><span>
</span><span id="line-1394"></span><span>    </span><span class="hs-comment">-- Andreas, 2018-10-17: If more than one constructor matches, we cannot erase.</span><span>
</span><span id="line-1395"></span><span>    </span><span id="local-6989586621682149434"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682149434"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682149434"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682149421"><span class="hs-identifier hs-var">erased</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Dom Type -&gt; Bool
forall a. LensQuantity a =&gt; a -&gt; Bool
</span><a href="Agda.Syntax.Common.html#usableQuantity"><span class="hs-identifier hs-var">usableQuantity</span></a></span><span> </span><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621682149344"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1396"></span><span>      </span><span class="annot"><span class="annottext">ErasedDatatypeReason
-&gt; ExceptT SplitError (TCMT IO) (Either SplitClause Covering)
</span><a href="#local-6989586621682149426"><span class="hs-identifier hs-var">erasedError</span></a></span><span> </span><span class="annot"><span class="annottext">ErasedDatatypeReason
</span><a href="Agda.Interaction.Options.Errors.html#SeveralConstructors"><span class="hs-identifier hs-var">SeveralConstructors</span></a></span><span>
</span><span id="line-1397"></span><span>
</span><span id="line-1398"></span><span>    </span><span class="hs-comment">-- If exactly one constructor matches and the K rule is turned</span><span>
</span><span id="line-1399"></span><span>    </span><span class="hs-comment">-- off, then we only allow erasure for non-indexed data/record</span><span>
</span><span id="line-1400"></span><span>    </span><span class="hs-comment">-- types (#4172). If the type is not a record type with</span><span>
</span><span id="line-1401"></span><span>    </span><span class="hs-comment">-- &#951;-equality, then the flag --erased-matches must be active.</span><span>
</span><span id="line-1402"></span><span>    </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682149421"><span class="hs-identifier hs-var">erased</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Dom Type -&gt; Bool
forall a. LensQuantity a =&gt; a -&gt; Bool
</span><a href="Agda.Syntax.Common.html#usableQuantity"><span class="hs-identifier hs-var">usableQuantity</span></a></span><span> </span><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621682149344"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682149412"><span class="hs-identifier hs-var">withoutK</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span>
</span><span id="line-1403"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682149398"><span class="hs-identifier hs-var">isIndexed</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682149416"><span class="hs-identifier hs-var">isRecordWithEta</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682149414"><span class="hs-identifier hs-var">erasedMatches</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1404"></span><span>      </span><span class="annot"><span class="annottext">ErasedDatatypeReason
-&gt; ExceptT SplitError (TCMT IO) (Either SplitClause Covering)
</span><a href="#local-6989586621682149426"><span class="hs-identifier hs-var">erasedError</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682149398"><span class="hs-identifier hs-var">isIndexed</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">ErasedDatatypeReason
</span><a href="Agda.Interaction.Options.Errors.html#NoK"><span class="hs-identifier hs-var">NoK</span></a></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">ErasedDatatypeReason
</span><a href="Agda.Interaction.Options.Errors.html#NoErasedMatches"><span class="hs-identifier hs-var">NoErasedMatches</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1405"></span><span>
</span><span id="line-1406"></span><span>    </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1407"></span><span>
</span><span id="line-1408"></span><span>      </span><span class="hs-comment">-- Andreas, 2012-10-10 fail if precomputed constructor set does not cover</span><span>
</span><span id="line-1409"></span><span>      </span><span class="hs-comment">-- all the data type constructors</span><span>
</span><span id="line-1410"></span><span>      </span><span class="hs-comment">-- Andreas, 2017-10-08 ... unless partial covering is explicitly allowed.</span><span>
</span><span id="line-1411"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682149440"><span class="annot"><span class="annottext">ptags :: [SplitTag]
</span><a href="#local-6989586621682149440"><span class="hs-identifier hs-var hs-var hs-var">ptags</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ConHead -&gt; SplitTag) -&gt; [ConHead] -&gt; [SplitTag]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">QName -&gt; SplitTag
</span><a href="Agda.TypeChecking.Coverage.SplitTree.html#SplitCon"><span class="hs-identifier hs-var">SplitCon</span></a></span><span> </span><span class="annot"><span class="annottext">(QName -&gt; SplitTag) -&gt; (ConHead -&gt; QName) -&gt; ConHead -&gt; SplitTag
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ConHead -&gt; QName
</span><a href="Agda.Syntax.Internal.html#conName"><span class="hs-identifier hs-var">conName</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[ConHead]
</span><a href="#local-6989586621682149338"><span class="hs-identifier hs-var">pcons'</span></a></span><span> </span><span class="annot"><span class="annottext">[SplitTag] -&gt; [SplitTag] -&gt; [SplitTag]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">(Literal -&gt; SplitTag) -&gt; [Literal] -&gt; [SplitTag]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">Literal -&gt; SplitTag
</span><a href="Agda.TypeChecking.Coverage.SplitTree.html#SplitLit"><span class="hs-identifier hs-var">SplitLit</span></a></span><span> </span><span class="annot"><span class="annottext">[Literal]
</span><a href="#local-6989586621682149339"><span class="hs-identifier hs-var">plits</span></a></span><span>
</span><span id="line-1412"></span><span>      </span><span class="hs-comment">-- clauses for hcomp will be automatically generated.</span><span>
</span><span id="line-1413"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682149441"><span class="annot"><span class="annottext">inferred_tags :: Set SplitTag
</span><a href="#local-6989586621682149441"><span class="hs-identifier hs-var hs-var hs-var">inferred_tags</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set SplitTag
-&gt; (QName -&gt; Set SplitTag) -&gt; Maybe QName -&gt; Set SplitTag
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><span class="hs-identifier hs-var">maybe</span></span><span> </span><span class="annot"><span class="annottext">Set SplitTag
forall a. Set a
</span><span class="hs-identifier hs-var">Set.empty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SplitTag -&gt; Set SplitTag
forall a. a -&gt; Set a
</span><span class="hs-identifier hs-var">Set.singleton</span></span><span> </span><span class="annot"><span class="annottext">(SplitTag -&gt; Set SplitTag)
-&gt; (QName -&gt; SplitTag) -&gt; QName -&gt; Set SplitTag
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">QName -&gt; SplitTag
</span><a href="Agda.TypeChecking.Coverage.SplitTree.html#SplitCon"><span class="hs-identifier hs-var">SplitCon</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe QName
</span><a href="#local-6989586621682149410"><span class="hs-identifier hs-var">mHCompName</span></a></span><span>
</span><span id="line-1414"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682149444"><span class="annot"><span class="annottext">all_tags :: Set SplitTag
</span><a href="#local-6989586621682149444"><span class="hs-identifier hs-var hs-var hs-var">all_tags</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[SplitTag] -&gt; Set SplitTag
forall a. Ord a =&gt; [a] -&gt; Set a
</span><span class="hs-identifier hs-var">Set.fromList</span></span><span> </span><span class="annot"><span class="annottext">[SplitTag]
</span><a href="#local-6989586621682149440"><span class="hs-identifier hs-var">ptags</span></a></span><span> </span><span class="annot"><span class="annottext">Set SplitTag -&gt; Set SplitTag -&gt; Set SplitTag
forall a. Ord a =&gt; Set a -&gt; Set a -&gt; Set a
</span><span class="hs-operator hs-var">`Set.union`</span></span><span> </span><span class="annot"><span class="annottext">Set SplitTag
</span><a href="#local-6989586621682149441"><span class="hs-identifier hs-var">inferred_tags</span></a></span><span>
</span><span id="line-1415"></span><span>
</span><span id="line-1416"></span><span>      </span><span class="annot"><span class="annottext">Bool
-&gt; ExceptT SplitError (TCMT IO) ()
-&gt; ExceptT SplitError (TCMT IO) ()
forall b (m :: * -&gt; *). (IsBool b, Monad m) =&gt; b -&gt; m () -&gt; m ()
</span><a href="Agda.Utils.Monad.html#when"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AllowPartialCover
</span><a href="#local-6989586621682149330"><span class="hs-identifier hs-var">allowPartialCover</span></a></span><span> </span><span class="annot"><span class="annottext">AllowPartialCover -&gt; AllowPartialCover -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">AllowPartialCover
</span><a href="Agda.TypeChecking.Coverage.html#NoAllowPartialCover"><span class="hs-identifier hs-var">NoAllowPartialCover</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682149340"><span class="hs-identifier hs-var">overlap</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(ExceptT SplitError (TCMT IO) ()
 -&gt; ExceptT SplitError (TCMT IO) ())
-&gt; ExceptT SplitError (TCMT IO) ()
-&gt; ExceptT SplitError (TCMT IO) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1417"></span><span>        </span><span class="annot"><span class="annottext">[(SplitTag, (SplitClause, IInfo))]
-&gt; ((SplitTag, (SplitClause, IInfo))
    -&gt; ExceptT SplitError (TCMT IO) ())
-&gt; ExceptT SplitError (TCMT IO) ()
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Foldable t, Applicative f) =&gt;
t a -&gt; (a -&gt; f b) -&gt; f ()
</span><span class="hs-identifier hs-var">for_</span></span><span> </span><span class="annot"><span class="annottext">[(SplitTag, (SplitClause, IInfo))]
</span><a href="#local-6989586621682149406"><span class="hs-identifier hs-var">ns</span></a></span><span> </span><span class="annot"><span class="annottext">(((SplitTag, (SplitClause, IInfo))
  -&gt; ExceptT SplitError (TCMT IO) ())
 -&gt; ExceptT SplitError (TCMT IO) ())
-&gt; ((SplitTag, (SplitClause, IInfo))
    -&gt; ExceptT SplitError (TCMT IO) ())
-&gt; ExceptT SplitError (TCMT IO) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621682149447"><span class="annot"><span class="annottext">SplitTag
</span><a href="#local-6989586621682149447"><span class="hs-identifier hs-var">tag</span></a></span></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682149448"><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621682149448"><span class="hs-identifier hs-var">sc</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">IInfo
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1418"></span><span>          </span><span class="annot"><span class="annottext">Bool
-&gt; ExceptT SplitError (TCMT IO) ()
-&gt; ExceptT SplitError (TCMT IO) ()
forall b (m :: * -&gt; *). (IsBool b, Monad m) =&gt; b -&gt; m () -&gt; m ()
</span><a href="Agda.Utils.Monad.html#unless"><span class="hs-identifier hs-var">unless</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SplitTag
</span><a href="#local-6989586621682149447"><span class="hs-identifier hs-var">tag</span></a></span><span> </span><span class="annot"><span class="annottext">SplitTag -&gt; Set SplitTag -&gt; Bool
forall a. Ord a =&gt; a -&gt; Set a -&gt; Bool
</span><span class="hs-operator hs-var">`Set.member`</span></span><span> </span><span class="annot"><span class="annottext">Set SplitTag
</span><a href="#local-6989586621682149444"><span class="hs-identifier hs-var">all_tags</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(ExceptT SplitError (TCMT IO) ()
 -&gt; ExceptT SplitError (TCMT IO) ())
-&gt; ExceptT SplitError (TCMT IO) ()
-&gt; ExceptT SplitError (TCMT IO) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1419"></span><span>            </span><span id="local-6989586621682149450"><span class="annot"><a href="#local-6989586621682149450"><span class="hs-identifier hs-var">isImpossibleClause</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; ExceptT SplitError (TCMT IO) Bool
forall (tcm :: * -&gt; *). MonadTCM tcm =&gt; Telescope -&gt; tcm Bool
</span><a href="Agda.TypeChecking.Empty.html#isEmptyTel"><span class="hs-identifier hs-var">isEmptyTel</span></a></span><span> </span><span class="annot"><span class="annottext">(Telescope -&gt; ExceptT SplitError (TCMT IO) Bool)
-&gt; Telescope -&gt; ExceptT SplitError (TCMT IO) Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SplitClause -&gt; Telescope
</span><a href="Agda.TypeChecking.Coverage.SplitClause.html#scTel"><span class="hs-identifier hs-var">scTel</span></a></span><span> </span><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621682149448"><span class="hs-identifier hs-var">sc</span></a></span><span>
</span><span id="line-1420"></span><span>            </span><span class="annot"><a href="Agda.Utils.Monad.html#unless"><span class="hs-identifier hs-type">unless</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682149450"><span class="hs-identifier hs-type">isImpossibleClause</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1421"></span><span>              </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#liftTCM"><span class="hs-identifier hs-type">liftTCM</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-type">reportSDoc</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;tc.cover&quot;</span></span><span> </span><span class="annot"><span class="hs-number">10</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#vcat"><span class="hs-identifier hs-type">vcat</span></a></span><span>
</span><span id="line-1422"></span><span>                </span><span class="hs-special">[</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;Missing case for&quot;</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-type">&lt;+&gt;</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-type">prettyTCM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682149447"><span class="hs-identifier hs-type">tag</span></a></span><span>
</span><span id="line-1423"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#nest"><span class="hs-identifier hs-type">nest</span></a></span><span> </span><span class="annot"><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-type">prettyTCM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682149448"><span class="hs-identifier hs-type">sc</span></a></span><span>
</span><span id="line-1424"></span><span>                </span><span class="hs-special">]</span><span>
</span><span id="line-1425"></span><span>              </span><span class="annot"><span class="hs-identifier hs-type">throwError</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#GenericSplitError"><span class="hs-identifier hs-type">GenericSplitError</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;precomputed set of constructors does not cover all cases&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1426"></span><span>
</span><span id="line-1427"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682149452"><span class="annot"><span class="annottext">t' :: Type
</span><a href="#local-6989586621682149452"><span class="hs-identifier hs-var hs-var hs-var">t'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Lens' Type Sort -&gt; LensSet Type Sort
forall o i. Lens' o i -&gt; LensSet o i
</span><a href="Agda.Utils.Lens.html#set"><span class="hs-identifier hs-var">set</span></a></span><span> </span><span class="annot"><span class="annottext">(Sort -&gt; f Sort) -&gt; Type -&gt; f Type
forall a. LensSort a =&gt; Lens' a Sort
Lens' Type Sort
</span><a href="Agda.Syntax.Internal.html#lensSort"><span class="hs-identifier hs-var">lensSort</span></a></span><span> </span><span class="annot"><span class="annottext">Sort
</span><a href="#local-6989586621682149397"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">(Type -&gt; Type) -&gt; Type -&gt; Type
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Dom Type -&gt; Type
forall t e. Dom' t e -&gt; e
</span><a href="Agda.Syntax.Internal.html#unDom"><span class="hs-identifier hs-var">unDom</span></a></span><span> </span><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621682149344"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-1428"></span><span>      </span><span class="annot"><span class="annottext">TCMT IO () -&gt; ExceptT SplitError (TCMT IO) ()
forall a. TCM a -&gt; ExceptT SplitError (TCMT IO) a
forall (tcm :: * -&gt; *) a. MonadTCM tcm =&gt; TCM a -&gt; tcm a
</span><a href="Agda.TypeChecking.Monad.Base.html#liftTCM"><span class="hs-identifier hs-var">liftTCM</span></a></span><span> </span><span class="annot"><span class="annottext">(TCMT IO () -&gt; ExceptT SplitError (TCMT IO) ())
-&gt; TCMT IO () -&gt; ExceptT SplitError (TCMT IO) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO () -&gt; TCMT IO ()
forall (tcm :: * -&gt; *) a.
(MonadTCM tcm, MonadAddContext tcm, MonadDebug tcm) =&gt;
tcm a -&gt; tcm a
</span><a href="#local-6989586621682149358"><span class="hs-identifier hs-var">inContextOfT</span></a></span><span> </span><span class="annot"><span class="annottext">(TCMT IO () -&gt; TCMT IO ()) -&gt; TCMT IO () -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">DataOrRecord -&gt; Type -&gt; Telescope -&gt; Maybe (Dom Type) -&gt; TCMT IO ()
forall (m :: * -&gt; *) a ty.
(MonadTCM m, PureTCM m, MonadError TCErr m, LensSort a,
 PrettyTCM a, LensSort ty, PrettyTCM ty) =&gt;
DataOrRecord -&gt; a -&gt; Telescope -&gt; Maybe ty -&gt; m ()
</span><a href="Agda.TypeChecking.Rules.LHS.html#checkSortOfSplitVar"><span class="hs-identifier hs-var">checkSortOfSplitVar</span></a></span><span> </span><span class="annot"><span class="annottext">DataOrRecord
</span><a href="#local-6989586621682149396"><span class="hs-identifier hs-var">dr</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682149452"><span class="hs-identifier hs-var">t'</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682149346"><span class="hs-identifier hs-var">delta2</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (Dom Type)
</span><a href="#local-6989586621682149336"><span class="hs-identifier hs-var">target</span></a></span><span>
</span><span id="line-1429"></span><span>      </span><span class="annot"><span class="annottext">Either SplitClause Covering
-&gt; ExceptT SplitError (TCMT IO) (Either SplitClause Covering)
forall a. a -&gt; ExceptT SplitError (TCMT IO) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Either SplitClause Covering
 -&gt; ExceptT SplitError (TCMT IO) (Either SplitClause Covering))
-&gt; Either SplitClause Covering
-&gt; ExceptT SplitError (TCMT IO) (Either SplitClause Covering)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Covering -&gt; Either SplitClause Covering
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">(Covering -&gt; Either SplitClause Covering)
-&gt; Covering -&gt; Either SplitClause Covering
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Arg Int -&gt; [(SplitTag, (SplitClause, IInfo))] -&gt; Covering
</span><a href="Agda.TypeChecking.Coverage.SplitClause.html#Covering"><span class="hs-identifier hs-var">Covering</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SplitClause -&gt; Int -&gt; Arg Int
</span><a href="Agda.TypeChecking.Coverage.html#lookupPatternVar"><span class="hs-identifier hs-var">lookupPatternVar</span></a></span><span> </span><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621682149332"><span class="hs-identifier hs-var">sc</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682149337"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(SplitTag, (SplitClause, IInfo))]
</span><a href="#local-6989586621682149406"><span class="hs-identifier hs-var">ns</span></a></span><span>
</span><span id="line-1430"></span><span>
</span><span id="line-1431"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1432"></span><span>    </span><span id="local-6989586621682146174"><span id="local-6989586621682146175"><span class="annot"><a href="#local-6989586621682149358"><span class="hs-identifier hs-type">inContextOfT</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621682149458"><span class="hs-identifier hs-type">inContextOfDelta2</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#MonadTCM"><span class="hs-identifier hs-type">MonadTCM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682146174"><span class="hs-identifier hs-type">tcm</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Context.html#MonadAddContext"><span class="hs-identifier hs-type">MonadAddContext</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682146174"><span class="hs-identifier hs-type">tcm</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Debug.html#MonadDebug"><span class="hs-identifier hs-type">MonadDebug</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682146174"><span class="hs-identifier hs-type">tcm</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621682146174"><span class="hs-identifier hs-type">tcm</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682146175"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621682146174"><span class="hs-identifier hs-type">tcm</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682146175"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-1433"></span><span>    </span><span id="local-6989586621682149358"><span class="annot"><span class="annottext">inContextOfT :: forall (tcm :: * -&gt; *) a.
(MonadTCM tcm, MonadAddContext tcm, MonadDebug tcm) =&gt;
tcm a -&gt; tcm a
</span><a href="#local-6989586621682149358"><span class="hs-identifier hs-var hs-var">inContextOfT</span></a></span></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; tcm a -&gt; tcm a
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a.
MonadAddContext m =&gt;
Telescope -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682149333"><span class="hs-identifier hs-var">tel</span></a></span><span> </span><span class="annot"><span class="annottext">(tcm a -&gt; tcm a) -&gt; (tcm a -&gt; tcm a) -&gt; tcm a -&gt; tcm a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Impossible -&gt; Int -&gt; tcm a -&gt; tcm a
forall (m :: * -&gt; *) a.
MonadAddContext m =&gt;
Impossible -&gt; Int -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#escapeContext"><span class="hs-identifier hs-var">escapeContext</span></a></span><span> </span><span class="annot"><span class="annottext">Impossible
HasCallStack =&gt; Impossible
</span><a href="Agda.Utils.Impossible.html#impossible"><span class="hs-identifier hs-var">impossible</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682149337"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span>
</span><span id="line-1434"></span><span>    </span><span id="local-6989586621682149458"><span class="annot"><span class="annottext">inContextOfDelta2 :: forall (tcm :: * -&gt; *) a.
(MonadTCM tcm, MonadAddContext tcm, MonadDebug tcm) =&gt;
tcm a -&gt; tcm a
</span><a href="#local-6989586621682149458"><span class="hs-identifier hs-var hs-var">inContextOfDelta2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; tcm a -&gt; tcm a
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a.
MonadAddContext m =&gt;
Telescope -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682149333"><span class="hs-identifier hs-var">tel</span></a></span><span> </span><span class="annot"><span class="annottext">(tcm a -&gt; tcm a) -&gt; (tcm a -&gt; tcm a) -&gt; tcm a -&gt; tcm a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Impossible -&gt; Int -&gt; tcm a -&gt; tcm a
forall (m :: * -&gt; *) a.
MonadAddContext m =&gt;
Impossible -&gt; Int -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#escapeContext"><span class="hs-identifier hs-var">escapeContext</span></a></span><span> </span><span class="annot"><span class="annottext">Impossible
HasCallStack =&gt; Impossible
</span><a href="Agda.Utils.Impossible.html#impossible"><span class="hs-identifier hs-var">impossible</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682149337"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-1435"></span><span>
</span><span id="line-1436"></span><span>    </span><span class="hs-comment">-- Debug printing</span><span>
</span><span id="line-1437"></span><span>    </span><span id="local-6989586621682149342"><span class="annot"><span class="annottext">debugInit :: a -&gt; a -&gt; [NamedArg SplitPattern] -&gt; a -&gt; tcm ()
</span><a href="#local-6989586621682149342"><span class="hs-identifier hs-var hs-var">debugInit</span></a></span></span><span> </span><span id="local-6989586621682149588"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682149588"><span class="hs-identifier hs-var">tel</span></a></span></span><span> </span><span id="local-6989586621682149589"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682149589"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621682149590"><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621682149590"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span id="local-6989586621682149591"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682149591"><span class="hs-identifier hs-var">cps</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TCMT IO () -&gt; tcm ()
forall a. TCM a -&gt; tcm a
forall (tcm :: * -&gt; *) a. MonadTCM tcm =&gt; TCM a -&gt; tcm a
</span><a href="Agda.TypeChecking.Monad.Base.html#liftTCM"><span class="hs-identifier hs-var">liftTCM</span></a></span><span> </span><span class="annot"><span class="annottext">(TCMT IO () -&gt; tcm ()) -&gt; TCMT IO () -&gt; tcm ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO () -&gt; TCMT IO ()
forall (tcm :: * -&gt; *) a.
(MonadTCEnv tcm, ReadTCState tcm) =&gt;
tcm a -&gt; tcm a
</span><a href="Agda.TypeChecking.Monad.Context.html#inTopContext"><span class="hs-identifier hs-var">inTopContext</span></a></span><span> </span><span class="annot"><span class="annottext">(TCMT IO () -&gt; TCMT IO ()) -&gt; TCMT IO () -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1438"></span><span>      </span><span class="annot"><span class="annottext">PatVarName -&gt; Int -&gt; TCMT IO Doc -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
PatVarName -&gt; Int -&gt; TCMT IO Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">PatVarName
</span><span class="hs-string">&quot;tc.cover.top&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">10</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; TCMT IO ()) -&gt; TCMT IO Doc -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[TCMT IO Doc] -&gt; TCMT IO Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span>
</span><span id="line-1439"></span><span>        </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;TypeChecking.Coverage.split': split&quot;</span></span><span>
</span><span id="line-1440"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Functor m =&gt; Int -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; TCMT IO Doc) -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[TCMT IO Doc] -&gt; TCMT IO Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span>
</span><span id="line-1441"></span><span>          </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;tel     =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682149588"><span class="hs-identifier hs-var">tel</span></a></span><span>
</span><span id="line-1442"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;x       =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682149589"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-1443"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;ps      =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="hs-keyword">do</span><span> </span><span class="annot"><span class="annottext">a -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a. MonadAddContext m =&gt; a -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682149588"><span class="hs-identifier hs-var">tel</span></a></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; TCMT IO Doc) -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">NAPs -&gt; TCMT IO Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; NAPs -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCMPatternList"><span class="hs-identifier hs-var">prettyTCMPatternList</span></a></span><span> </span><span class="annot"><span class="annottext">(NAPs -&gt; TCMT IO Doc) -&gt; NAPs -&gt; TCMT IO Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern] -&gt; NAPs
</span><a href="Agda.TypeChecking.Coverage.SplitPattern.html#fromSplitPatterns"><span class="hs-identifier hs-var">fromSplitPatterns</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621682149590"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-1444"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;cps     =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682149591"><span class="hs-identifier hs-var">cps</span></a></span><span>
</span><span id="line-1445"></span><span>          </span><span class="hs-special">]</span><span>
</span><span id="line-1446"></span><span>        </span><span class="hs-special">]</span><span>
</span><span id="line-1447"></span><span>      </span><span class="annot"><span class="annottext">PatVarName -&gt; Int -&gt; TCMT IO Doc -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
PatVarName -&gt; Int -&gt; TCMT IO Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">PatVarName
</span><span class="hs-string">&quot;tc.cover.top&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">60</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; TCMT IO ()) -&gt; TCMT IO Doc -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[TCMT IO Doc] -&gt; TCMT IO Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span>
</span><span id="line-1448"></span><span>        </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;TypeChecking.Coverage.split': split&quot;</span></span><span>
</span><span id="line-1449"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Functor m =&gt; Int -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; TCMT IO Doc) -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[TCMT IO Doc] -&gt; TCMT IO Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span>
</span><span id="line-1450"></span><span>          </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;tel     =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PatVarName -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; PatVarName -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">(PatVarName -&gt; TCMT IO Doc)
-&gt; (a -&gt; PatVarName) -&gt; a -&gt; TCMT IO Doc
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; PatVarName
forall a. Show a =&gt; a -&gt; PatVarName
</span><span class="hs-identifier hs-var">show</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682149588"><span class="hs-identifier hs-var">tel</span></a></span><span>
</span><span id="line-1451"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;x       =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PatVarName -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; PatVarName -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">(PatVarName -&gt; TCMT IO Doc)
-&gt; (a -&gt; PatVarName) -&gt; a -&gt; TCMT IO Doc
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; PatVarName
forall a. Show a =&gt; a -&gt; PatVarName
</span><span class="hs-identifier hs-var">show</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682149589"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-1452"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;ps      =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PatVarName -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; PatVarName -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">(PatVarName -&gt; TCMT IO Doc)
-&gt; ([NamedArg SplitPattern] -&gt; PatVarName)
-&gt; [NamedArg SplitPattern]
-&gt; TCMT IO Doc
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern] -&gt; PatVarName
forall a. Show a =&gt; a -&gt; PatVarName
</span><span class="hs-identifier hs-var">show</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621682149590"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-1453"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;cps     =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PatVarName -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; PatVarName -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">(PatVarName -&gt; TCMT IO Doc)
-&gt; (a -&gt; PatVarName) -&gt; a -&gt; TCMT IO Doc
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; PatVarName
forall a. Show a =&gt; a -&gt; PatVarName
</span><span class="hs-identifier hs-var">show</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682149591"><span class="hs-identifier hs-var">cps</span></a></span><span>
</span><span id="line-1454"></span><span>          </span><span class="hs-special">]</span><span>
</span><span id="line-1455"></span><span>        </span><span class="hs-special">]</span><span>
</span><span id="line-1456"></span><span>
</span><span id="line-1457"></span><span>    </span><span id="local-6989586621682149666"><span class="annot"><span class="annottext">debugHoleAndType :: a -&gt; a -&gt; PatVarName -&gt; NAPs -&gt; a -&gt; tcm ()
</span><a href="#local-6989586621682149666"><span class="hs-identifier hs-var hs-var">debugHoleAndType</span></a></span></span><span> </span><span id="local-6989586621682149667"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682149667"><span class="hs-identifier hs-var">delta1</span></a></span></span><span> </span><span id="local-6989586621682149668"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682149668"><span class="hs-identifier hs-var">delta2</span></a></span></span><span> </span><span id="local-6989586621682149669"><span class="annot"><span class="annottext">PatVarName
</span><a href="#local-6989586621682149669"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span id="local-6989586621682149670"><span class="annot"><span class="annottext">NAPs
</span><a href="#local-6989586621682149670"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span id="local-6989586621682149671"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682149671"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1458"></span><span>      </span><span class="annot"><span class="annottext">TCMT IO () -&gt; tcm ()
forall a. TCM a -&gt; tcm a
forall (tcm :: * -&gt; *) a. MonadTCM tcm =&gt; TCM a -&gt; tcm a
</span><a href="Agda.TypeChecking.Monad.Base.html#liftTCM"><span class="hs-identifier hs-var">liftTCM</span></a></span><span> </span><span class="annot"><span class="annottext">(TCMT IO () -&gt; tcm ()) -&gt; TCMT IO () -&gt; tcm ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PatVarName -&gt; Int -&gt; TCMT IO Doc -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
PatVarName -&gt; Int -&gt; TCMT IO Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">PatVarName
</span><span class="hs-string">&quot;tc.cover.top&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">10</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; TCMT IO ()) -&gt; TCMT IO Doc -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Functor m =&gt; Int -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; TCMT IO Doc) -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[TCMT IO Doc] -&gt; TCMT IO Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="annot"><span class="annottext">([TCMT IO Doc] -&gt; TCMT IO Doc) -&gt; [TCMT IO Doc] -&gt; TCMT IO Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1459"></span><span>        </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;p      =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">PatVarName -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; PatVarName -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PatVarName -&gt; PatVarName
</span><a href="Agda.Syntax.Internal.html#patVarNameToString"><span class="hs-identifier hs-var">patVarNameToString</span></a></span><span> </span><span class="annot"><span class="annottext">PatVarName
</span><a href="#local-6989586621682149669"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1460"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;ps     =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">NAPs -&gt; TCMT IO Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; NAPs -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCMPatternList"><span class="hs-identifier hs-var">prettyTCMPatternList</span></a></span><span> </span><span class="annot"><span class="annottext">NAPs
</span><a href="#local-6989586621682149670"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-1461"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;delta1 =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682149667"><span class="hs-identifier hs-var">delta1</span></a></span><span>
</span><span id="line-1462"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;delta2 =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc
forall (tcm :: * -&gt; *) a.
(MonadTCM tcm, MonadAddContext tcm, MonadDebug tcm) =&gt;
tcm a -&gt; tcm a
</span><a href="#local-6989586621682149458"><span class="hs-identifier hs-var">inContextOfDelta2</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682149668"><span class="hs-identifier hs-var">delta2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1463"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;t      =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc
forall (tcm :: * -&gt; *) a.
(MonadTCM tcm, MonadAddContext tcm, MonadDebug tcm) =&gt;
tcm a -&gt; tcm a
</span><a href="#local-6989586621682149358"><span class="hs-identifier hs-var">inContextOfT</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682149671"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1464"></span><span>        </span><span class="hs-special">]</span><span>
</span><span id="line-1465"></span><span>
</span><span id="line-1466"></span><span>
</span><span id="line-1467"></span><span class="annot"><span class="hs-comment">-- | splitResult for MakeCase, tries to introduce IApply or ProjP copatterns</span></span><span>
</span><span id="line-1468"></span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#splitResult"><span class="hs-identifier hs-type">splitResult</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Abstract.Name.html#QName"><span class="hs-identifier hs-type">QName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitClause.html#SplitClause"><span class="hs-identifier hs-type">SplitClause</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">TCM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#SplitError"><span class="hs-identifier hs-type">SplitError</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitClause.html#SplitClause"><span class="hs-identifier hs-type">SplitClause</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1469"></span><span id="splitResult"><span class="annot"><span class="annottext">splitResult :: QName -&gt; SplitClause -&gt; TCM (Either SplitError [SplitClause])
</span><a href="Agda.TypeChecking.Coverage.html#splitResult"><span class="hs-identifier hs-var hs-var">splitResult</span></a></span></span><span> </span><span id="local-6989586621682149673"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621682149673"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621682149674"><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621682149674"><span class="hs-identifier hs-var">sc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1470"></span><span>  </span><span class="annot"><span class="annottext">TCMT IO (Maybe SplitClause)
-&gt; TCM (Either SplitError [SplitClause])
-&gt; (SplitClause -&gt; TCM (Either SplitError [SplitClause]))
-&gt; TCM (Either SplitError [SplitClause])
forall (m :: * -&gt; *) a b.
Monad m =&gt;
m (Maybe a) -&gt; m b -&gt; (a -&gt; m b) -&gt; m b
</span><a href="Agda.Utils.Maybe.html#caseMaybeM"><span class="hs-identifier hs-var">caseMaybeM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">QName -&gt; SplitClause -&gt; TCMT IO (Maybe SplitClause)
</span><a href="Agda.TypeChecking.Coverage.html#splitResultPath"><span class="hs-identifier hs-var">splitResultPath</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621682149673"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621682149674"><span class="hs-identifier hs-var">sc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1471"></span><span>             </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Either SplitError Covering -&gt; Either SplitError [SplitClause])
-&gt; TCMT IO (Either SplitError Covering)
-&gt; TCM (Either SplitError [SplitClause])
forall a b. (a -&gt; b) -&gt; TCMT IO a -&gt; TCMT IO b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">((Either SplitError Covering -&gt; Either SplitError [SplitClause])
 -&gt; TCMT IO (Either SplitError Covering)
 -&gt; TCM (Either SplitError [SplitClause]))
-&gt; ((Covering -&gt; [SplitClause])
    -&gt; Either SplitError Covering -&gt; Either SplitError [SplitClause])
-&gt; (Covering -&gt; [SplitClause])
-&gt; TCMT IO (Either SplitError Covering)
-&gt; TCM (Either SplitError [SplitClause])
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Covering -&gt; [SplitClause])
-&gt; Either SplitError Covering -&gt; Either SplitError [SplitClause]
forall a b. (a -&gt; b) -&gt; Either SplitError a -&gt; Either SplitError b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Covering -&gt; [SplitClause]
</span><a href="Agda.TypeChecking.Coverage.SplitClause.html#splitClauses"><span class="hs-identifier hs-var">splitClauses</span></a></span><span> </span><span class="annot"><span class="annottext">(TCMT IO (Either SplitError Covering)
 -&gt; TCM (Either SplitError [SplitClause]))
-&gt; TCMT IO (Either SplitError Covering)
-&gt; TCM (Either SplitError [SplitClause])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">QName -&gt; SplitClause -&gt; TCMT IO (Either SplitError Covering)
</span><a href="Agda.TypeChecking.Coverage.html#splitResultRecord"><span class="hs-identifier hs-var">splitResultRecord</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621682149673"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621682149674"><span class="hs-identifier hs-var">sc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1472"></span><span>             </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Either SplitError [SplitClause]
-&gt; TCM (Either SplitError [SplitClause])
forall a. a -&gt; TCMT IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Either SplitError [SplitClause]
 -&gt; TCM (Either SplitError [SplitClause]))
-&gt; (SplitClause -&gt; Either SplitError [SplitClause])
-&gt; SplitClause
-&gt; TCM (Either SplitError [SplitClause])
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">[SplitClause] -&gt; Either SplitError [SplitClause]
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">([SplitClause] -&gt; Either SplitError [SplitClause])
-&gt; (SplitClause -&gt; [SplitClause])
-&gt; SplitClause
-&gt; Either SplitError [SplitClause]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SplitClause -&gt; [SplitClause] -&gt; [SplitClause]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1473"></span><span>
</span><span id="line-1474"></span><span>
</span><span id="line-1475"></span><span class="annot"><span class="hs-comment">-- | Tries to split the result to introduce an IApply pattern.</span></span><span>
</span><span id="line-1476"></span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#splitResultPath"><span class="hs-identifier hs-type">splitResultPath</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Abstract.Name.html#QName"><span class="hs-identifier hs-type">QName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitClause.html#SplitClause"><span class="hs-identifier hs-type">SplitClause</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">TCM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitClause.html#SplitClause"><span class="hs-identifier hs-type">SplitClause</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1477"></span><span id="splitResultPath"><span class="annot"><span class="annottext">splitResultPath :: QName -&gt; SplitClause -&gt; TCMT IO (Maybe SplitClause)
</span><a href="Agda.TypeChecking.Coverage.html#splitResultPath"><span class="hs-identifier hs-var hs-var">splitResultPath</span></a></span></span><span> </span><span id="local-6989586621682149675"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621682149675"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621682149676"><span class="annot"><span class="annottext">sc :: SplitClause
</span><a href="#local-6989586621682149676"><span class="hs-identifier hs-var">sc</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitClause.html#SClause"><span class="hs-identifier hs-type">SClause</span></a></span><span> </span><span id="local-6989586621682149677"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682149677"><span class="hs-identifier hs-var">tel</span></a></span></span><span> </span><span id="local-6989586621682149678"><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621682149678"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span class="annot"><span class="annottext">Substitution' SplitPattern
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Map CheckpointId (Substitution' Term)
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682149679"><span class="annot"><span class="annottext">Maybe (Dom Type)
</span><a href="#local-6989586621682149679"><span class="hs-identifier hs-var">target</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1478"></span><span>  </span><span class="annot"><span class="annottext">Maybe (Dom Type)
-&gt; TCMT IO (Maybe SplitClause)
-&gt; (Dom Type -&gt; TCMT IO (Maybe SplitClause))
-&gt; TCMT IO (Maybe SplitClause)
forall a b. Maybe a -&gt; b -&gt; (a -&gt; b) -&gt; b
</span><a href="Agda.Utils.Maybe.html#caseMaybe"><span class="hs-identifier hs-var">caseMaybe</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (Dom Type)
</span><a href="#local-6989586621682149679"><span class="hs-identifier hs-var">target</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe SplitClause -&gt; TCMT IO (Maybe SplitClause)
forall a. a -&gt; TCMT IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Maybe SplitClause
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((Dom Type -&gt; TCMT IO (Maybe SplitClause))
 -&gt; TCMT IO (Maybe SplitClause))
-&gt; (Dom Type -&gt; TCMT IO (Maybe SplitClause))
-&gt; TCMT IO (Maybe SplitClause)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621682149680"><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621682149680"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1479"></span><span>        </span><span class="annot"><span class="annottext">TCMT IO (Maybe (Dom Type, Abs Type))
-&gt; TCMT IO (Maybe SplitClause)
-&gt; ((Dom Type, Abs Type) -&gt; TCMT IO (Maybe SplitClause))
-&gt; TCMT IO (Maybe SplitClause)
forall (m :: * -&gt; *) a b.
Monad m =&gt;
m (Maybe a) -&gt; m b -&gt; (a -&gt; m b) -&gt; m b
</span><a href="Agda.Utils.Maybe.html#caseMaybeM"><span class="hs-identifier hs-var">caseMaybeM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type -&gt; TCMT IO (Maybe (Dom Type, Abs Type))
forall (m :: * -&gt; *).
PureTCM m =&gt;
Type -&gt; m (Maybe (Dom Type, Abs Type))
</span><a href="Agda.TypeChecking.Telescope.html#isPath"><span class="hs-identifier hs-var">isPath</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Dom Type -&gt; Type
forall t e. Dom' t e -&gt; e
</span><a href="Agda.Syntax.Internal.html#unDom"><span class="hs-identifier hs-var">unDom</span></a></span><span> </span><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621682149680"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe SplitClause -&gt; TCMT IO (Maybe SplitClause)
forall a. a -&gt; TCMT IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Maybe SplitClause
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(((Dom Type, Abs Type) -&gt; TCMT IO (Maybe SplitClause))
 -&gt; TCMT IO (Maybe SplitClause))
-&gt; ((Dom Type, Abs Type) -&gt; TCMT IO (Maybe SplitClause))
-&gt; TCMT IO (Maybe SplitClause)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span class="annot"><span class="annottext">(Dom Type, Abs Type)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1480"></span><span>               </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Substitute.html#TelV"><span class="hs-identifier hs-type">TelV</span></a></span><span> </span><span id="local-6989586621682149682"><span class="annot"><a href="#local-6989586621682149682"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621682149683"><span class="annot"><a href="#local-6989586621682149683"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682149684"><span class="annot"><a href="#local-6989586621682149684"><span class="hs-identifier hs-var">boundary</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Type -&gt; TCM (TelV Type, Boundary)
forall (m :: * -&gt; *).
PureTCM m =&gt;
Int -&gt; Type -&gt; m (TelV Type, Boundary)
</span><a href="Agda.TypeChecking.Telescope.html#telViewUpToPathBoundary%27"><span class="hs-identifier hs-var">telViewUpToPathBoundary'</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Dom Type -&gt; Type
forall t e. Dom' t e -&gt; e
</span><a href="Agda.Syntax.Internal.html#unDom"><span class="hs-identifier hs-var">unDom</span></a></span><span> </span><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621682149680"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1481"></span><span>               </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682149686"><span class="annot"><a href="#local-6989586621682149686"><span class="hs-identifier hs-var hs-var">tel'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; Telescope -&gt; Telescope
forall t. Abstract t =&gt; Telescope -&gt; t -&gt; t
</span><a href="Agda.TypeChecking.Substitute.Class.html#abstract"><span class="hs-identifier hs-var">abstract</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682149677"><span class="hs-identifier hs-var">tel</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682149682"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-1482"></span><span>                   </span><span id="local-6989586621682149687"><span class="annot"><a href="#local-6989586621682149687"><span class="hs-identifier hs-var hs-var">rho</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Substitution' a
forall a. Int -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#raiseS"><span class="hs-identifier hs-var">raiseS</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span>
</span><span id="line-1483"></span><span>                   </span><span id="local-6989586621682149688"><span class="annot"><a href="#local-6989586621682149688"><span class="hs-identifier hs-var hs-var">ps'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Substitution' (SubstArg [NamedArg SplitPattern])
-&gt; [NamedArg SplitPattern] -&gt; [NamedArg SplitPattern]
forall a. Subst a =&gt; Substitution' (SubstArg a) -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#applySubst"><span class="hs-identifier hs-var">applySubst</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' SplitPattern
Substitution' (SubstArg [NamedArg SplitPattern])
forall a. Substitution' a
</span><a href="#local-6989586621682149687"><span class="hs-identifier hs-var">rho</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SplitClause -&gt; [NamedArg SplitPattern]
</span><a href="Agda.TypeChecking.Coverage.SplitClause.html#scPats"><span class="hs-identifier hs-var">scPats</span></a></span><span> </span><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621682149676"><span class="hs-identifier hs-var">sc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
-&gt; [NamedArg SplitPattern] -&gt; [NamedArg SplitPattern]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; Boundary -&gt; [NamedArg SplitPattern]
forall a.
DeBruijn a =&gt;
Telescope -&gt; Boundary -&gt; [NamedArg (Pattern' a)]
</span><a href="Agda.TypeChecking.Telescope.html#telePatterns"><span class="hs-identifier hs-var">telePatterns</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682149682"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Boundary
</span><a href="#local-6989586621682149684"><span class="hs-identifier hs-var">boundary</span></a></span><span>
</span><span id="line-1484"></span><span>                   </span><span id="local-6989586621682149690"><span class="annot"><a href="#local-6989586621682149690"><span class="hs-identifier hs-var hs-var">cps'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Substitution' (SubstArg (Map CheckpointId (Substitution' Term)))
-&gt; Map CheckpointId (Substitution' Term)
-&gt; Map CheckpointId (Substitution' Term)
forall a. Subst a =&gt; Substitution' (SubstArg a) -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#applySubst"><span class="hs-identifier hs-var">applySubst</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' Term
Substitution' (SubstArg (Map CheckpointId (Substitution' Term)))
forall a. Substitution' a
</span><a href="#local-6989586621682149687"><span class="hs-identifier hs-var">rho</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SplitClause -&gt; Map CheckpointId (Substitution' Term)
</span><a href="Agda.TypeChecking.Coverage.SplitClause.html#scCheckpoints"><span class="hs-identifier hs-var">scCheckpoints</span></a></span><span> </span><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621682149676"><span class="hs-identifier hs-var">sc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1485"></span><span>                   </span><span id="local-6989586621682149691"><span class="annot"><a href="#local-6989586621682149691"><span class="hs-identifier hs-var hs-var">target'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Dom Type -&gt; Maybe (Dom Type)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(Dom Type -&gt; Maybe (Dom Type)) -&gt; Dom Type -&gt; Maybe (Dom Type)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682149683"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="annot"><span class="annottext">Type -&gt; Dom Type -&gt; Dom Type
forall a b. a -&gt; Dom' Term b -&gt; Dom' Term a
forall (f :: * -&gt; *) a b. Functor f =&gt; a -&gt; f b -&gt; f a
</span><span class="hs-operator hs-var">&lt;$</span></span><span> </span><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621682149680"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-1486"></span><span>               </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">.</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitClause.html#SClause"><span class="hs-identifier hs-type">SClause</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682149686"><span class="hs-identifier hs-type">tel'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682149688"><span class="hs-identifier hs-type">ps'</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#idS"><span class="hs-identifier hs-type">idS</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682149690"><span class="hs-identifier hs-type">cps'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682149691"><span class="hs-identifier hs-type">target'</span></a></span><span>
</span><span id="line-1487"></span><span>
</span><span id="line-1488"></span><span class="hs-comment">-- | @splitResultRecord f sc = return res@</span><span>
</span><span id="line-1489"></span><span class="hs-comment">--</span><span>
</span><span id="line-1490"></span><span class="hs-comment">--   If the target type of @sc@ is a record type, a covering set of</span><span>
</span><span id="line-1491"></span><span class="hs-comment">--   split clauses is returned (@sc@ extended by all valid projection patterns),</span><span>
</span><span id="line-1492"></span><span class="hs-comment">--   otherwise @res == Left _@.</span><span>
</span><span id="line-1493"></span><span class="hs-comment">--   Note that the empty set of split clauses is returned if the record has no fields.</span><span>
</span><span id="line-1494"></span><span class="annot"><a href="Agda.TypeChecking.Coverage.html#splitResultRecord"><span class="hs-identifier hs-type">splitResultRecord</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Abstract.Name.html#QName"><span class="hs-identifier hs-type">QName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitClause.html#SplitClause"><span class="hs-identifier hs-type">SplitClause</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">TCM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#SplitError"><span class="hs-identifier hs-type">SplitError</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitClause.html#Covering"><span class="hs-identifier hs-type">Covering</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1495"></span><span id="splitResultRecord"><span class="annot"><span class="annottext">splitResultRecord :: QName -&gt; SplitClause -&gt; TCMT IO (Either SplitError Covering)
</span><a href="Agda.TypeChecking.Coverage.html#splitResultRecord"><span class="hs-identifier hs-var hs-var">splitResultRecord</span></a></span></span><span> </span><span id="local-6989586621682149692"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621682149692"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621682149693"><span class="annot"><span class="annottext">sc :: SplitClause
</span><a href="#local-6989586621682149693"><span class="hs-identifier hs-var">sc</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitClause.html#SClause"><span class="hs-identifier hs-type">SClause</span></a></span><span> </span><span id="local-6989586621682149694"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682149694"><span class="hs-identifier hs-var">tel</span></a></span></span><span> </span><span id="local-6989586621682149695"><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621682149695"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span class="annot"><span class="annottext">Substitution' SplitPattern
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Map CheckpointId (Substitution' Term)
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682149696"><span class="annot"><span class="annottext">Maybe (Dom Type)
</span><a href="#local-6989586621682149696"><span class="hs-identifier hs-var">target</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1496"></span><span>  </span><span class="annot"><span class="annottext">PatVarName -&gt; Int -&gt; TCMT IO Doc -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
PatVarName -&gt; Int -&gt; TCMT IO Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">PatVarName
</span><span class="hs-string">&quot;tc.cover.split&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">10</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; TCMT IO ()) -&gt; TCMT IO Doc -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[TCMT IO Doc] -&gt; TCMT IO Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span>
</span><span id="line-1497"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;splitting result:&quot;</span></span><span>
</span><span id="line-1498"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Functor m =&gt; Int -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; TCMT IO Doc) -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;f      =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">QName -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; QName -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621682149692"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-1499"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Functor m =&gt; Int -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; TCMT IO Doc) -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;target =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a.
MonadAddContext m =&gt;
Telescope -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682149694"><span class="hs-identifier hs-var">tel</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TCMT IO Doc
-&gt; (Dom Type -&gt; TCMT IO Doc) -&gt; Maybe (Dom Type) -&gt; TCMT IO Doc
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><span class="hs-identifier hs-var">maybe</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
forall a. Null a =&gt; a
</span><a href="Agda.Utils.Null.html#empty"><span class="hs-identifier hs-var">empty</span></a></span><span> </span><span class="annot"><span class="annottext">Dom Type -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; Dom Type -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (Dom Type)
</span><a href="#local-6989586621682149696"><span class="hs-identifier hs-var">target</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1500"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-1501"></span><span>  </span><span class="hs-comment">-- if we want to split projections, but have no target type, we give up</span><span>
</span><span id="line-1502"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682149700"><span class="annot"><span class="annottext">failure :: a -&gt; TCMT IO (Either a b)
</span><a href="#local-6989586621682149700"><span class="hs-identifier hs-var hs-var">failure</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Either a b -&gt; TCMT IO (Either a b)
forall a. a -&gt; TCMT IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Either a b -&gt; TCMT IO (Either a b))
-&gt; (a -&gt; Either a b) -&gt; a -&gt; TCMT IO (Either a b)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; Either a b
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span>
</span><span id="line-1503"></span><span>  </span><span class="annot"><span class="annottext">Maybe (Dom Type)
-&gt; TCMT IO (Either SplitError Covering)
-&gt; (Dom Type -&gt; TCMT IO (Either SplitError Covering))
-&gt; TCMT IO (Either SplitError Covering)
forall a b. Maybe a -&gt; b -&gt; (a -&gt; b) -&gt; b
</span><a href="Agda.Utils.Maybe.html#caseMaybe"><span class="hs-identifier hs-var">caseMaybe</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (Dom Type)
</span><a href="#local-6989586621682149696"><span class="hs-identifier hs-var">target</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SplitError -&gt; TCMT IO (Either SplitError Covering)
forall {a} {b}. a -&gt; TCMT IO (Either a b)
</span><a href="#local-6989586621682149700"><span class="hs-identifier hs-var">failure</span></a></span><span> </span><span class="annot"><span class="annottext">SplitError
</span><a href="Agda.TypeChecking.Monad.Base.html#CosplitNoTarget"><span class="hs-identifier hs-var">CosplitNoTarget</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((Dom Type -&gt; TCMT IO (Either SplitError Covering))
 -&gt; TCMT IO (Either SplitError Covering))
-&gt; (Dom Type -&gt; TCMT IO (Either SplitError Covering))
-&gt; TCMT IO (Either SplitError Covering)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621682149702"><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621682149702"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1504"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Telescope
-&gt; TCMT IO (Maybe (QName, Args, RecordData))
-&gt; TCMT IO (Maybe (QName, Args, RecordData))
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a.
MonadAddContext m =&gt;
Telescope -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682149694"><span class="hs-identifier hs-var">tel</span></a></span><span> </span><span class="annot"><span class="annottext">(TCMT IO (Maybe (QName, Args, RecordData))
 -&gt; TCMT IO (Maybe (QName, Args, RecordData)))
-&gt; TCMT IO (Maybe (QName, Args, RecordData))
-&gt; TCMT IO (Maybe (QName, Args, RecordData))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; TCMT IO (Maybe (QName, Args, RecordData))
forall (m :: * -&gt; *).
PureTCM m =&gt;
Type -&gt; m (Maybe (QName, Args, RecordData))
</span><a href="Agda.TypeChecking.Records.html#isRecordType"><span class="hs-identifier hs-var">isRecordType</span></a></span><span> </span><span class="annot"><span class="annottext">(Type -&gt; TCMT IO (Maybe (QName, Args, RecordData)))
-&gt; Type -&gt; TCMT IO (Maybe (QName, Args, RecordData))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Dom Type -&gt; Type
forall t e. Dom' t e -&gt; e
</span><a href="Agda.Syntax.Internal.html#unDom"><span class="hs-identifier hs-var">unDom</span></a></span><span> </span><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621682149702"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TCMT IO (Maybe (QName, Args, RecordData))
-&gt; (Maybe (QName, Args, RecordData)
    -&gt; TCMT IO (Either SplitError Covering))
-&gt; TCMT IO (Either SplitError Covering)
forall a b. TCMT IO a -&gt; (a -&gt; TCMT IO b) -&gt; TCMT IO b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-1505"></span><span>      </span><span class="annot"><span class="annottext">Maybe (QName, Args, RecordData)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Telescope
-&gt; TCMT IO (Either SplitError Covering)
-&gt; TCMT IO (Either SplitError Covering)
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a.
MonadAddContext m =&gt;
Telescope -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682149694"><span class="hs-identifier hs-var">tel</span></a></span><span> </span><span class="annot"><span class="annottext">(TCMT IO (Either SplitError Covering)
 -&gt; TCMT IO (Either SplitError Covering))
-&gt; TCMT IO (Either SplitError Covering)
-&gt; TCMT IO (Either SplitError Covering)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1506"></span><span>        </span><span class="annot"><span class="annottext">SplitError -&gt; TCMT IO (Either SplitError Covering)
forall {a} {b}. a -&gt; TCMT IO (Either a b)
</span><a href="#local-6989586621682149700"><span class="hs-identifier hs-var">failure</span></a></span><span> </span><span class="annot"><span class="annottext">(SplitError -&gt; TCMT IO (Either SplitError Covering))
-&gt; (Closure Type -&gt; SplitError)
-&gt; Closure Type
-&gt; TCMT IO (Either SplitError Covering)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Closure Type -&gt; SplitError
</span><a href="Agda.TypeChecking.Monad.Base.html#CosplitNoRecordType"><span class="hs-identifier hs-var">CosplitNoRecordType</span></a></span><span> </span><span class="annot"><span class="annottext">(Closure Type -&gt; TCMT IO (Either SplitError Covering))
-&gt; TCM (Closure Type) -&gt; TCMT IO (Either SplitError Covering)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">=&lt;&lt;</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; TCM (Closure Type)
forall (m :: * -&gt; *) a.
(MonadTCEnv m, ReadTCState m) =&gt;
a -&gt; m (Closure a)
</span><a href="Agda.TypeChecking.Monad.Base.html#buildClosure"><span class="hs-identifier hs-var">buildClosure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Dom Type -&gt; Type
forall t e. Dom' t e -&gt; e
</span><a href="Agda.Syntax.Internal.html#unDom"><span class="hs-identifier hs-var">unDom</span></a></span><span> </span><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621682149702"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1507"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682149705"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621682149705"><span class="hs-identifier hs-var">_r</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682149706"><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621682149706"><span class="hs-identifier hs-var">vs</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#RecordData"><span class="hs-identifier hs-type">RecordData</span></a></span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">_recFields :: RecordData -&gt; [Dom QName]
</span><a href="Agda.TypeChecking.Monad.Base.html#_recFields"><span class="hs-identifier hs-var">_recFields</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682149709"><span class="annot"><span class="annottext">[Dom QName]
</span><a href="#local-6989586621682149709"><span class="hs-identifier hs-var">fs</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1508"></span><span>        </span><span class="annot"><span class="annottext">PatVarName -&gt; Int -&gt; TCMT IO Doc -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
PatVarName -&gt; Int -&gt; TCMT IO Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">PatVarName
</span><span class="hs-string">&quot;tc.cover&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">20</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; TCMT IO ()) -&gt; TCMT IO Doc -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[TCMT IO Doc] -&gt; TCMT IO Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span>
</span><span id="line-1509"></span><span>          </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">PatVarName -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; PatVarName -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">(PatVarName -&gt; TCMT IO Doc) -&gt; PatVarName -&gt; TCMT IO Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PatVarName
</span><span class="hs-string">&quot;we are of record type _r = &quot;</span></span><span> </span><span class="annot"><span class="annottext">PatVarName -&gt; PatVarName -&gt; PatVarName
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">QName -&gt; PatVarName
forall a. Pretty a =&gt; a -&gt; PatVarName
</span><a href="Agda.Syntax.Common.Pretty.html#prettyShow"><span class="hs-identifier hs-var">prettyShow</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621682149705"><span class="hs-identifier hs-var">_r</span></a></span><span>
</span><span id="line-1510"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">PatVarName -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; PatVarName -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span>   </span><span class="annot"><span class="annottext">PatVarName
</span><span class="hs-string">&quot;applied to parameters vs =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a.
MonadAddContext m =&gt;
Telescope -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682149694"><span class="hs-identifier hs-var">tel</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Args -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; Args -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621682149706"><span class="hs-identifier hs-var">vs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1511"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">PatVarName -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; PatVarName -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">(PatVarName -&gt; TCMT IO Doc) -&gt; PatVarName -&gt; TCMT IO Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PatVarName
</span><span class="hs-string">&quot;and have fields       fs = &quot;</span></span><span> </span><span class="annot"><span class="annottext">PatVarName -&gt; PatVarName -&gt; PatVarName
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[Dom QName] -&gt; PatVarName
forall a. Pretty a =&gt; a -&gt; PatVarName
</span><a href="Agda.Syntax.Common.Pretty.html#prettyShow"><span class="hs-identifier hs-var">prettyShow</span></a></span><span> </span><span class="annot"><span class="annottext">[Dom QName]
</span><a href="#local-6989586621682149709"><span class="hs-identifier hs-var">fs</span></a></span><span>
</span><span id="line-1512"></span><span>          </span><span class="hs-special">]</span><span>
</span><span id="line-1513"></span><span>        </span><span class="hs-comment">-- Andreas, 2018-06-09, issue #2170, we always have irrelevant projections</span><span>
</span><span id="line-1514"></span><span>        </span><span class="hs-comment">-- available on the lhs.</span><span>
</span><span id="line-1515"></span><span>        </span><span class="hs-comment">-- -- Andreas, 2018-03-19, issue #2971, check that we have a &quot;strong&quot; record type,</span><span>
</span><span id="line-1516"></span><span>        </span><span class="hs-comment">-- -- i.e., with all the projections.  Otherwise, we may not split.</span><span>
</span><span id="line-1517"></span><span>        </span><span class="hs-comment">-- ifNotM (strongRecord fs) (failure CosplitIrrelevantProjections) $ {-else-} do</span><span>
</span><span id="line-1518"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682149710"><span class="annot"><span class="annottext">es :: Elims
</span><a href="#local-6989586621682149710"><span class="hs-identifier hs-var hs-var hs-var">es</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NAPs -&gt; Elims
</span><a href="Agda.Syntax.Internal.Pattern.html#patternsToElims"><span class="hs-identifier hs-var">patternsToElims</span></a></span><span> </span><span class="annot"><span class="annottext">(NAPs -&gt; Elims) -&gt; NAPs -&gt; Elims
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern] -&gt; NAPs
</span><a href="Agda.TypeChecking.Coverage.SplitPattern.html#fromSplitPatterns"><span class="hs-identifier hs-var">fromSplitPatterns</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621682149695"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-1519"></span><span>        </span><span class="hs-comment">-- Note: module parameters are part of ps</span><span>
</span><span id="line-1520"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682149711"><span class="annot"><span class="annottext">self :: Arg Term
</span><a href="#local-6989586621682149711"><span class="hs-identifier hs-var hs-var hs-var">self</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Term -&gt; Arg Term
forall a. a -&gt; Arg a
</span><a href="Agda.Syntax.Common.html#defaultArg"><span class="hs-identifier hs-var">defaultArg</span></a></span><span> </span><span class="annot"><span class="annottext">(Term -&gt; Arg Term) -&gt; Term -&gt; Arg Term
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">QName -&gt; Elims -&gt; Term
</span><a href="Agda.Syntax.Internal.html#Def"><span class="hs-identifier hs-var">Def</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621682149692"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">Term -&gt; Elims -&gt; Term
forall t. Apply t =&gt; t -&gt; Elims -&gt; t
</span><a href="Agda.TypeChecking.Substitute.Class.html#applyE"><span class="hs-operator hs-var">`applyE`</span></a></span><span> </span><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621682149710"><span class="hs-identifier hs-var">es</span></a></span><span>
</span><span id="line-1521"></span><span>            </span><span id="local-6989586621682149712"><span class="annot"><span class="annottext">pargs :: Args
</span><a href="#local-6989586621682149712"><span class="hs-identifier hs-var hs-var hs-var">pargs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621682149706"><span class="hs-identifier hs-var">vs</span></a></span><span> </span><span class="annot"><span class="annottext">Args -&gt; Args -&gt; Args
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Arg Term
</span><a href="#local-6989586621682149711"><span class="hs-identifier hs-var">self</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1522"></span><span>            </span><span id="local-6989586621682149713"><span class="annot"><span class="annottext">fieldValues :: [Term]
</span><a href="#local-6989586621682149713"><span class="hs-identifier hs-var hs-var hs-var">fieldValues</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Dom QName] -&gt; (Dom QName -&gt; Term) -&gt; [Term]
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; (a -&gt; b) -&gt; f b
</span><a href="Agda.Utils.Functor.html#for"><span class="hs-identifier hs-var">for</span></a></span><span> </span><span class="annot"><span class="annottext">[Dom QName]
</span><a href="#local-6989586621682149709"><span class="hs-identifier hs-var">fs</span></a></span><span> </span><span class="annot"><span class="annottext">((Dom QName -&gt; Term) -&gt; [Term]) -&gt; (Dom QName -&gt; Term) -&gt; [Term]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621682149714"><span class="annot"><span class="annottext">Dom QName
</span><a href="#local-6989586621682149714"><span class="hs-identifier hs-var">proj</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Arg Term -&gt; Term
forall e. Arg e -&gt; e
</span><a href="Agda.Syntax.Common.html#unArg"><span class="hs-identifier hs-var">unArg</span></a></span><span> </span><span class="annot"><span class="annottext">Arg Term
</span><a href="#local-6989586621682149711"><span class="hs-identifier hs-var">self</span></a></span><span> </span><span class="annot"><span class="annottext">Term -&gt; Elims -&gt; Term
forall t. Apply t =&gt; t -&gt; Elims -&gt; t
</span><a href="Agda.TypeChecking.Substitute.Class.html#applyE"><span class="hs-operator hs-var">`applyE`</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">ProjOrigin -&gt; QName -&gt; Elim' Term
forall a. ProjOrigin -&gt; QName -&gt; Elim' a
</span><a href="Agda.Syntax.Internal.Elim.html#Proj"><span class="hs-identifier hs-var">Proj</span></a></span><span> </span><span class="annot"><span class="annottext">ProjOrigin
</span><a href="Agda.Syntax.Common.html#ProjSystem"><span class="hs-identifier hs-var">ProjSystem</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Dom QName -&gt; QName
forall t e. Dom' t e -&gt; e
</span><a href="Agda.Syntax.Internal.html#unDom"><span class="hs-identifier hs-var">unDom</span></a></span><span> </span><span class="annot"><span class="annottext">Dom QName
</span><a href="#local-6989586621682149714"><span class="hs-identifier hs-var">proj</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-1523"></span><span>        </span><span class="annot"><span class="annottext">PatVarName -&gt; Int -&gt; TCMT IO Doc -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
PatVarName -&gt; Int -&gt; TCMT IO Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">PatVarName
</span><span class="hs-string">&quot;tc.cover&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">20</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; TCMT IO ()) -&gt; TCMT IO Doc -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a.
MonadAddContext m =&gt;
Telescope -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682149694"><span class="hs-identifier hs-var">tel</span></a></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; TCMT IO Doc) -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[TCMT IO Doc] -&gt; TCMT IO Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span>
</span><span id="line-1524"></span><span>          </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">PatVarName -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; PatVarName -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span>   </span><span class="annot"><span class="annottext">PatVarName
</span><span class="hs-string">&quot;we are              self =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Term -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; Term -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Arg Term -&gt; Term
forall e. Arg e -&gt; e
</span><a href="Agda.Syntax.Common.html#unArg"><span class="hs-identifier hs-var">unArg</span></a></span><span> </span><span class="annot"><span class="annottext">Arg Term
</span><a href="#local-6989586621682149711"><span class="hs-identifier hs-var">self</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1525"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">PatVarName -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; PatVarName -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span>   </span><span class="annot"><span class="annottext">PatVarName
</span><span class="hs-string">&quot;            field values =&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[Term] -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; [Term] -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">[Term]
</span><a href="#local-6989586621682149713"><span class="hs-identifier hs-var">fieldValues</span></a></span><span>
</span><span id="line-1526"></span><span>          </span><span class="hs-special">]</span><span>
</span><span id="line-1527"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682149717"><span class="annot"><span class="annottext">n :: Arg Int
</span><a href="#local-6989586621682149717"><span class="hs-identifier hs-var hs-var hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Arg Int
forall a. a -&gt; Arg a
</span><a href="Agda.Syntax.Common.html#defaultArg"><span class="hs-identifier hs-var">defaultArg</span></a></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; Arg Int) -&gt; Int -&gt; Arg Int
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Permutation -&gt; Int
</span><a href="Agda.Utils.Permutation.html#permRange"><span class="hs-identifier hs-var">permRange</span></a></span><span> </span><span class="annot"><span class="annottext">(Permutation -&gt; Int) -&gt; Permutation -&gt; Int
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Permutation -&gt; Maybe Permutation -&gt; Permutation
forall a. a -&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromMaybe</span></span><span> </span><span class="annot"><span class="annottext">Permutation
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe Permutation -&gt; Permutation)
-&gt; Maybe Permutation -&gt; Permutation
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">NAPs -&gt; Maybe Permutation
</span><a href="Agda.Syntax.Internal.Pattern.html#dbPatPerm"><span class="hs-identifier hs-var">dbPatPerm</span></a></span><span> </span><span class="annot"><span class="annottext">(NAPs -&gt; Maybe Permutation) -&gt; NAPs -&gt; Maybe Permutation
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern] -&gt; NAPs
</span><a href="Agda.TypeChecking.Coverage.SplitPattern.html#fromSplitPatterns"><span class="hs-identifier hs-var">fromSplitPatterns</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621682149695"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-1528"></span><span>            </span><span class="hs-comment">-- Andreas &amp; James, 2013-11-19 includes the dot patterns!</span><span>
</span><span id="line-1529"></span><span>            </span><span class="hs-comment">-- See test/succeed/CopatternsAndDotPatterns.agda for a case with dot patterns</span><span>
</span><span id="line-1530"></span><span>            </span><span class="hs-comment">-- and copatterns which fails for @n = size tel@ with a broken case tree.</span><span>
</span><span id="line-1531"></span><span>
</span><span id="line-1532"></span><span>        </span><span class="hs-comment">-- Andreas, 2016-07-22 read the style of projections from the user's lips</span><span>
</span><span id="line-1533"></span><span>        </span><span id="local-6989586621682149719"><span class="annot"><a href="#local-6989586621682149719"><span class="hs-identifier hs-var">projOrigin</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TCMT IO Bool
-&gt; TCMT IO ProjOrigin -&gt; TCMT IO ProjOrigin -&gt; TCMT IO ProjOrigin
forall (m :: * -&gt; *) a. Monad m =&gt; m Bool -&gt; m a -&gt; m a -&gt; m a
</span><a href="Agda.Utils.Monad.html#ifM"><span class="hs-identifier hs-var">ifM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PragmaOptions -&gt; Bool
</span><a href="Agda.Interaction.Options.Base.html#optPostfixProjections"><span class="hs-identifier hs-var">optPostfixProjections</span></a></span><span> </span><span class="annot"><span class="annottext">(PragmaOptions -&gt; Bool) -&gt; TCMT IO PragmaOptions -&gt; TCMT IO Bool
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO PragmaOptions
forall (m :: * -&gt; *). HasOptions m =&gt; m PragmaOptions
</span><a href="Agda.Interaction.Options.HasOptions.html#pragmaOptions"><span class="hs-identifier hs-var">pragmaOptions</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ProjOrigin -&gt; TCMT IO ProjOrigin
forall a. a -&gt; TCMT IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">ProjOrigin
</span><a href="Agda.Syntax.Common.html#ProjPostfix"><span class="hs-identifier hs-var">ProjPostfix</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ProjOrigin -&gt; TCMT IO ProjOrigin
forall a. a -&gt; TCMT IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">ProjOrigin
</span><a href="Agda.Syntax.Common.html#ProjPrefix"><span class="hs-identifier hs-var">ProjPrefix</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1534"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">.</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitClause.html#Covering"><span class="hs-identifier hs-type">Covering</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682149717"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">&lt;$&gt;</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1535"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">forM</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">zip</span></span><span> </span><span class="annot"><a href="#local-6989586621682149709"><span class="hs-identifier hs-type">fs</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">List.inits</span></span><span> </span><span class="annot"><a href="#local-6989586621682149713"><span class="hs-identifier hs-type">fieldValues</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682149724"><span class="annot"><span class="annottext">Dom QName
</span><a href="#local-6989586621682149724"><span class="hs-identifier hs-var">proj</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682149725"><span class="annot"><span class="annottext">[Term]
</span><a href="#local-6989586621682149725"><span class="hs-identifier hs-var">prevFields</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1536"></span><span>            </span><span class="hs-comment">-- compute the new target</span><span>
</span><span id="line-1537"></span><span>            </span><span id="local-6989586621682149726"><span class="annot"><a href="#local-6989586621682149726"><span class="hs-identifier hs-var">dType</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Definition -&gt; Type
</span><a href="Agda.TypeChecking.Monad.Base.html#defType"><span class="hs-identifier hs-var">defType</span></a></span><span> </span><span class="annot"><span class="annottext">(Definition -&gt; Type) -&gt; TCM Definition -&gt; TCM Type
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="hs-keyword">do</span><span> </span><span class="annot"><span class="annottext">QName -&gt; TCM Definition
forall (m :: * -&gt; *). HasConstInfo m =&gt; QName -&gt; m Definition
</span><a href="Agda.TypeChecking.Monad.Signature.html#getConstInfo"><span class="hs-identifier hs-var">getConstInfo</span></a></span><span> </span><span class="annot"><span class="annottext">(QName -&gt; TCM Definition) -&gt; QName -&gt; TCM Definition
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Dom QName -&gt; QName
forall t e. Dom' t e -&gt; e
</span><a href="Agda.Syntax.Internal.html#unDom"><span class="hs-identifier hs-var">unDom</span></a></span><span> </span><span class="annot"><span class="annottext">Dom QName
</span><a href="#local-6989586621682149724"><span class="hs-identifier hs-var">proj</span></a></span><span> </span><span class="hs-comment">-- WRONG: typeOfConst $ unArg proj</span><span>
</span><span id="line-1538"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span class="hs-comment">-- Substitution for parameters and previous fields. Needs to be applied to potential</span><span>
</span><span id="line-1539"></span><span>                </span><span class="hs-comment">-- tactic in proj.</span><span>
</span><span id="line-1540"></span><span>                </span><span id="local-6989586621682149727"><span class="annot"><a href="#local-6989586621682149727"><span class="hs-identifier hs-var hs-var">fieldSub</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Term] -&gt; [Term]
forall a. [a] -&gt; [a]
</span><span class="hs-identifier hs-var">reverse</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Arg Term -&gt; Term) -&gt; Args -&gt; [Term]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">Arg Term -&gt; Term
forall e. Arg e -&gt; e
</span><a href="Agda.Syntax.Common.html#unArg"><span class="hs-identifier hs-var">unArg</span></a></span><span> </span><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621682149706"><span class="hs-identifier hs-var">vs</span></a></span><span> </span><span class="annot"><span class="annottext">[Term] -&gt; [Term] -&gt; [Term]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[Term]
</span><a href="#local-6989586621682149725"><span class="hs-identifier hs-var">prevFields</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Term] -&gt; Substitution' Term -&gt; Substitution' Term
forall a. DeBruijn a =&gt; [a] -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#%2B%2B%23"><span class="hs-operator hs-var">++#</span></a></span><span> </span><span class="annot"><span class="annottext">Impossible -&gt; Substitution' Term
forall a. Impossible -&gt; Substitution' a
</span><a href="Agda.Syntax.Internal.html#EmptyS"><span class="hs-identifier hs-var">EmptyS</span></a></span><span> </span><span class="annot"><span class="annottext">Impossible
HasCallStack =&gt; Impossible
</span><a href="Agda.Utils.Impossible.html#impossible"><span class="hs-identifier hs-var">impossible</span></a></span><span>
</span><span id="line-1541"></span><span>                </span><span id="local-6989586621682149730"><span class="annot"><a href="#local-6989586621682149730"><span class="hs-identifier hs-var hs-var">proj'</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Substitution' (SubstArg (Dom QName)) -&gt; Dom QName -&gt; Dom QName
forall a. Subst a =&gt; Substitution' (SubstArg a) -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#applySubst"><span class="hs-identifier hs-var">applySubst</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' Term
Substitution' (SubstArg (Dom QName))
</span><a href="#local-6989586621682149727"><span class="hs-identifier hs-var">fieldSub</span></a></span><span> </span><span class="annot"><span class="annottext">Dom QName
</span><a href="#local-6989586621682149724"><span class="hs-identifier hs-var">proj</span></a></span><span>
</span><span id="line-1542"></span><span>                </span><span class="hs-comment">-- type of projection instantiated at self</span><span>
</span><span id="line-1543"></span><span>                </span><span id="local-6989586621682149731"><span class="annot"><a href="#local-6989586621682149731"><span class="hs-identifier hs-var hs-var">target'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Dom Type -&gt; Maybe (Dom Type)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(Dom Type -&gt; Maybe (Dom Type)) -&gt; Dom Type -&gt; Maybe (Dom Type)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Dom QName
</span><a href="#local-6989586621682149730"><span class="hs-identifier hs-var">proj'</span></a></span><span> </span><span class="annot"><span class="annottext">Dom QName -&gt; Type -&gt; Dom Type
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; b -&gt; f b
</span><span class="hs-operator hs-var">$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682149726"><span class="hs-identifier hs-var">dType</span></a></span><span> </span><span class="annot"><span class="annottext">Type -&gt; Args -&gt; Type
</span><a href="Agda.TypeChecking.Substitute.html#piApply"><span class="hs-operator hs-var">`piApply`</span></a></span><span> </span><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621682149712"><span class="hs-identifier hs-var">pargs</span></a></span><span>      </span><span class="hs-comment">-- Always visible (#2287)</span><span>
</span><span id="line-1544"></span><span>                </span><span id="local-6989586621682149732"><span class="annot"><a href="#local-6989586621682149732"><span class="hs-identifier hs-var hs-var">projArg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(QName -&gt; Named NamedName SplitPattern)
-&gt; Arg QName -&gt; NamedArg SplitPattern
forall a b. (a -&gt; b) -&gt; Arg a -&gt; Arg b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe NamedName -&gt; SplitPattern -&gt; Named NamedName SplitPattern
forall name a. Maybe name -&gt; a -&gt; Named name a
</span><a href="Agda.Syntax.Common.html#Named"><span class="hs-identifier hs-var">Named</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe NamedName
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">(SplitPattern -&gt; Named NamedName SplitPattern)
-&gt; (QName -&gt; SplitPattern) -&gt; QName -&gt; Named NamedName SplitPattern
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ProjOrigin -&gt; QName -&gt; SplitPattern
forall x. ProjOrigin -&gt; QName -&gt; Pattern' x
</span><a href="Agda.Syntax.Internal.html#ProjP"><span class="hs-identifier hs-var">ProjP</span></a></span><span> </span><span class="annot"><span class="annottext">ProjOrigin
</span><a href="#local-6989586621682149719"><span class="hs-identifier hs-var">projOrigin</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Arg QName -&gt; NamedArg SplitPattern)
-&gt; Arg QName -&gt; NamedArg SplitPattern
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Dom QName -&gt; Arg QName
forall t a. Dom' t a -&gt; Arg a
</span><a href="Agda.Syntax.Internal.html#argFromDom"><span class="hs-identifier hs-var">argFromDom</span></a></span><span> </span><span class="annot"><span class="annottext">(Dom QName -&gt; Arg QName) -&gt; Dom QName -&gt; Arg QName
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Hiding -&gt; Dom QName -&gt; Dom QName
forall a. LensHiding a =&gt; Hiding -&gt; a -&gt; a
</span><a href="Agda.Syntax.Common.html#setHiding"><span class="hs-identifier hs-var">setHiding</span></a></span><span> </span><span class="annot"><span class="annottext">Hiding
</span><a href="Agda.Syntax.Common.html#NotHidden"><span class="hs-identifier hs-var">NotHidden</span></a></span><span> </span><span class="annot"><span class="annottext">Dom QName
</span><a href="#local-6989586621682149724"><span class="hs-identifier hs-var">proj</span></a></span><span>
</span><span id="line-1545"></span><span>                </span><span id="local-6989586621682149734"><span class="annot"><a href="#local-6989586621682149734"><span class="hs-identifier hs-var hs-var">sc'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SplitClause
</span><a href="#local-6989586621682149693"><span class="hs-identifier hs-var">sc</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitClause.html#scPats"><span class="hs-identifier hs-var">scPats</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitClause.html#scPats"><span class="hs-identifier hs-var">scPats</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682149693"><span class="hs-identifier hs-type">sc</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">++</span></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621682149732"><span class="hs-identifier hs-type">projArg</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1546"></span><span>                         </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitClause.html#scSubst"><span class="hs-identifier hs-var">scSubst</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#idS"><span class="hs-identifier hs-type">idS</span></a></span><span>
</span><span id="line-1547"></span><span>                         </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitClause.html#scTarget"><span class="hs-identifier hs-var">scTarget</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682149731"><span class="hs-identifier hs-type">target'</span></a></span><span>
</span><span id="line-1548"></span><span>                         </span><span class="hs-special">}</span><span>
</span><span id="line-1549"></span><span>            </span><span class="annot"><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-type">reportSDoc</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;tc.cover.copattern&quot;</span></span><span> </span><span class="annot"><span class="hs-number">40</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#vcat"><span class="hs-identifier hs-type">vcat</span></a></span><span>
</span><span id="line-1550"></span><span>              </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="hs-string">&quot;fieldSub for&quot;</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-type">&lt;+&gt;</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-type">prettyTCM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#unDom"><span class="hs-identifier hs-var">unDom</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682149724"><span class="hs-identifier hs-type">proj</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1551"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#nest"><span class="hs-identifier hs-type">nest</span></a></span><span> </span><span class="annot"><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#pretty"><span class="hs-identifier hs-type">pretty</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682149727"><span class="hs-identifier hs-type">fieldSub</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-1552"></span><span>            </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitTree.html#SplitCon"><span class="hs-identifier hs-type">SplitCon</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#unDom"><span class="hs-identifier hs-var">unDom</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682149724"><span class="hs-identifier hs-type">proj</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682149734"><span class="hs-identifier hs-type">sc'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitClause.html#NoInfo"><span class="hs-identifier hs-type">NoInfo</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1553"></span><span>  </span><span class="hs-comment">-- Andreas, 2018-06-09, issue #2170: splitting with irrelevant fields is always fine!</span><span>
</span><span id="line-1554"></span><span>  </span><span class="hs-comment">-- where</span><span>
</span><span id="line-1555"></span><span>  </span><span class="hs-comment">-- -- A record type is strong if it has all the projections.</span><span>
</span><span id="line-1556"></span><span>  </span><span class="hs-comment">-- -- This is the case if --irrelevant-projections or no field is irrelevant.</span><span>
</span><span id="line-1557"></span><span>  </span><span class="hs-comment">-- -- TODO: what about shape irrelevance?</span><span>
</span><span id="line-1558"></span><span>  </span><span class="hs-comment">-- strongRecord :: [Arg QName] -&gt; TCM Bool</span><span>
</span><span id="line-1559"></span><span>  </span><span class="hs-comment">-- strongRecord fs = (optIrrelevantProjections &lt;$&gt; pragmaOptions) `or2M`</span><span>
</span><span id="line-1560"></span><span>  </span><span class="hs-comment">--   (return $ not $ any isIrrelevant fs)</span><span>
</span><span id="line-1561"></span><span>
</span><span id="line-1562"></span><span>
</span><span id="line-1563"></span><span class="annot"><span class="hs-comment">-- * Boring instances</span></span><span>
</span><span id="line-1564"></span><span>
</span><span id="line-1565"></span><span class="annot"><span class="hs-comment">-- | For debugging only.</span></span><span>
</span><span id="line-1566"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#PrettyTCM"><span class="hs-identifier hs-type">PrettyTCM</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitClause.html#SplitClause"><span class="hs-identifier hs-type">SplitClause</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1567"></span><span>  </span><span id="local-6989586621682149778"><span class="annot"><span class="annottext">prettyTCM :: forall (m :: * -&gt; *). MonadPretty m =&gt; SplitClause -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var hs-var hs-var">prettyTCM</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Coverage.SplitClause.html#SClause"><span class="hs-identifier hs-type">SClause</span></a></span><span> </span><span id="local-6989586621682149779"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682149779"><span class="hs-identifier hs-var">tel</span></a></span></span><span> </span><span id="local-6989586621682149780"><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621682149780"><span class="hs-identifier hs-var">pats</span></a></span></span><span> </span><span id="local-6989586621682149781"><span class="annot"><span class="annottext">Substitution' SplitPattern
</span><a href="#local-6989586621682149781"><span class="hs-identifier hs-var">sigma</span></a></span></span><span> </span><span id="local-6989586621682149782"><span class="annot"><span class="annottext">Map CheckpointId (Substitution' Term)
</span><a href="#local-6989586621682149782"><span class="hs-identifier hs-var">cps</span></a></span></span><span> </span><span id="local-6989586621682149783"><span class="annot"><span class="annottext">Maybe (Dom Type)
</span><a href="#local-6989586621682149783"><span class="hs-identifier hs-var">target</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[m Doc] -&gt; m Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span>
</span><span id="line-1568"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">m Doc
</span><span class="hs-string">&quot;SplitClause&quot;</span></span><span>
</span><span id="line-1569"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int -&gt; m Doc -&gt; m Doc
forall (m :: * -&gt; *). Functor m =&gt; Int -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">(m Doc -&gt; m Doc) -&gt; m Doc -&gt; m Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[m Doc] -&gt; m Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span>
</span><span id="line-1570"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">m Doc
</span><span class="hs-string">&quot;tel          =&quot;</span></span><span> </span><span class="annot"><span class="annottext">m Doc -&gt; m Doc -&gt; m Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; m Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; Telescope -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682149779"><span class="hs-identifier hs-var">tel</span></a></span><span>
</span><span id="line-1571"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">m Doc
</span><span class="hs-string">&quot;pats         =&quot;</span></span><span> </span><span class="annot"><span class="annottext">m Doc -&gt; m Doc -&gt; m Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[m Doc] -&gt; m Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(NamedArg SplitPattern -&gt; m Doc)
-&gt; [NamedArg SplitPattern] -&gt; [m Doc]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SplitPattern -&gt; m Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; SplitPattern -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">(SplitPattern -&gt; m Doc)
-&gt; (NamedArg SplitPattern -&gt; SplitPattern)
-&gt; NamedArg SplitPattern
-&gt; m Doc
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">NamedArg SplitPattern -&gt; SplitPattern
forall a. NamedArg a -&gt; a
</span><a href="Agda.Syntax.Common.html#namedArg"><span class="hs-identifier hs-var">namedArg</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[NamedArg SplitPattern]
</span><a href="#local-6989586621682149780"><span class="hs-identifier hs-var">pats</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1572"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">m Doc
</span><span class="hs-string">&quot;subst        =&quot;</span></span><span> </span><span class="annot"><span class="annottext">m Doc -&gt; m Doc -&gt; m Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' SplitPattern -&gt; m Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *).
MonadPretty m =&gt;
Substitution' SplitPattern -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution' SplitPattern
</span><a href="#local-6989586621682149781"><span class="hs-identifier hs-var">sigma</span></a></span><span>
</span><span id="line-1573"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">m Doc
</span><span class="hs-string">&quot;checkpoints  =&quot;</span></span><span> </span><span class="annot"><span class="annottext">m Doc -&gt; m Doc -&gt; m Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Map CheckpointId (Substitution' Term) -&gt; m Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *).
MonadPretty m =&gt;
Map CheckpointId (Substitution' Term) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">Map CheckpointId (Substitution' Term)
</span><a href="#local-6989586621682149782"><span class="hs-identifier hs-var">cps</span></a></span><span>
</span><span id="line-1574"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">m Doc
</span><span class="hs-string">&quot;target       =&quot;</span></span><span> </span><span class="annot"><span class="annottext">m Doc -&gt; m Doc -&gt; m Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1575"></span><span>          </span><span class="annot"><span class="annottext">Maybe (Dom Type) -&gt; m Doc -&gt; (Dom Type -&gt; m Doc) -&gt; m Doc
forall a b. Maybe a -&gt; b -&gt; (a -&gt; b) -&gt; b
</span><a href="Agda.Utils.Maybe.html#caseMaybe"><span class="hs-identifier hs-var">caseMaybe</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (Dom Type)
</span><a href="#local-6989586621682149783"><span class="hs-identifier hs-var">target</span></a></span><span> </span><span class="annot"><span class="annottext">m Doc
forall a. Null a =&gt; a
</span><a href="Agda.Utils.Null.html#empty"><span class="hs-identifier hs-var">empty</span></a></span><span> </span><span class="annot"><span class="annottext">((Dom Type -&gt; m Doc) -&gt; m Doc) -&gt; (Dom Type -&gt; m Doc) -&gt; m Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621682149784"><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621682149784"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1576"></span><span>            </span><span class="annot"><span class="annottext">Telescope -&gt; m Doc -&gt; m Doc
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a.
MonadAddContext m =&gt;
Telescope -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621682149779"><span class="hs-identifier hs-var">tel</span></a></span><span> </span><span class="annot"><span class="annottext">(m Doc -&gt; m Doc) -&gt; m Doc -&gt; m Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Dom Type -&gt; m Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; Dom Type -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621682149784"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-1577"></span><span>      </span><span class="hs-comment">-- Triggers crash (see Issue 1374).</span><span>
</span><span id="line-1578"></span><span>      </span><span class="hs-comment">-- , &quot;subst target = &quot; &lt;+&gt; do</span><span>
</span><span id="line-1579"></span><span>      </span><span class="hs-comment">--     caseMaybe target empty $ \ t -&gt; do</span><span>
</span><span id="line-1580"></span><span>      </span><span class="hs-comment">--       addContext tel $ prettyTCM $ applySubst sigma t</span><span>
</span><span id="line-1581"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-1582"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-1583"></span></pre></body></html>