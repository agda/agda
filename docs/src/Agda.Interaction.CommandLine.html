<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span>
</span><span id="line-2"></span><span class="hs-keyword">module</span><span> </span><span class="annot"><a href="Agda.Interaction.CommandLine.html"><span class="hs-identifier">Agda.Interaction.CommandLine</span></a></span><span>
</span><span id="line-3"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Agda.Interaction.CommandLine.html#runInteractionLoop"><span class="hs-identifier">runInteractionLoop</span></a></span><span>
</span><span id="line-4"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-5"></span><span>
</span><span id="line-6"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad</span></span><span>
</span><span id="line-7"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.Except</span></span><span>
</span><span id="line-8"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.IO.Class</span></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier">MonadIO</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-9"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.State</span></span><span>
</span><span id="line-10"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.Reader</span></span><span>
</span><span id="line-11"></span><span>
</span><span id="line-12"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.List</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">List</span></span><span>
</span><span id="line-13"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Maybe</span></span><span>
</span><span id="line-14"></span><span>
</span><span id="line-15"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Text.Read</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">readMaybe</span></span><span class="hs-special">)</span><span>
</span><span id="line-16"></span><span>
</span><span id="line-17"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Interaction.Base.html"><span class="hs-identifier">Agda.Interaction.Base</span></a></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Interaction.Base.html#Command"><span class="hs-identifier">Command</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-18"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Interaction.BasicOps.html"><span class="hs-identifier">Agda.Interaction.BasicOps</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">BasicOps</span></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Interaction.BasicOps.html#parseExpr"><span class="hs-identifier">parseExpr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-19"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Interaction.Imports.html"><span class="hs-identifier">Agda.Interaction.Imports</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Agda.Interaction.Imports.html#CheckResult"><span class="hs-identifier">CheckResult</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Interaction.Imports.html#crInterface"><span class="hs-identifier">crInterface</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-20"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Interaction.Monad.html"><span class="hs-identifier">Agda.Interaction.Monad</span></a></span><span>
</span><span id="line-21"></span><span>
</span><span id="line-22"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Agda.Syntax.Abstract.html"><span class="hs-identifier">Agda.Syntax.Abstract</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">A</span></span><span>
</span><span id="line-23"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html"><span class="hs-identifier">Agda.Syntax.Common</span></a></span><span>
</span><span id="line-24"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Syntax.Common.Pretty.html"><span class="hs-identifier">Agda.Syntax.Common.Pretty</span></a></span><span>
</span><span id="line-25"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Syntax.Common.Pretty.ANSI.html"><span class="hs-identifier">Agda.Syntax.Common.Pretty.ANSI</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Common.Pretty.ANSI.html#putDocLn"><span class="hs-identifier">putDocLn</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-26"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html"><span class="hs-identifier">Agda.Syntax.Internal</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#telToList"><span class="hs-identifier">telToList</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.Blockers.html#alwaysUnblock"><span class="hs-identifier">alwaysUnblock</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-27"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html"><span class="hs-identifier">Agda.Syntax.Internal</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">I</span></span><span>
</span><span id="line-28"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Syntax.Parser.html"><span class="hs-identifier">Agda.Syntax.Parser</span></a></span><span>
</span><span id="line-29"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Syntax.Position.html"><span class="hs-identifier">Agda.Syntax.Position</span></a></span><span>
</span><span id="line-30"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Syntax.Scope.Base.html"><span class="hs-identifier">Agda.Syntax.Scope.Base</span></a></span><span>
</span><span id="line-31"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Syntax.Translation.ConcreteToAbstract.html"><span class="hs-identifier">Agda.Syntax.Translation.ConcreteToAbstract</span></a></span><span>
</span><span id="line-32"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Syntax.Abstract.Pretty.html"><span class="hs-identifier">Agda.Syntax.Abstract.Pretty</span></a></span><span>
</span><span id="line-33"></span><span>
</span><span id="line-34"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Constraints.html"><span class="hs-identifier">Agda.TypeChecking.Constraints</span></a></span><span>
</span><span id="line-35"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.html"><span class="hs-identifier">Agda.TypeChecking.Monad</span></a></span><span>
</span><span id="line-36"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Reduce.html"><span class="hs-identifier">Agda.TypeChecking.Reduce</span></a></span><span>
</span><span id="line-37"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Errors.html"><span class="hs-identifier">Agda.TypeChecking.Errors</span></a></span><span>
</span><span id="line-38"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html"><span class="hs-identifier">Agda.TypeChecking.Pretty</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#PrettyTCM"><span class="hs-identifier">PrettyTCM</span></a></span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier">prettyTCM</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-39"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Substitute.html"><span class="hs-identifier">Agda.TypeChecking.Substitute</span></a></span><span>
</span><span id="line-40"></span><span>
</span><span id="line-41"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Utils.FileName.html"><span class="hs-identifier">Agda.Utils.FileName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Utils.FileName.html#absolute"><span class="hs-identifier">absolute</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Utils.FileName.html#AbsolutePath"><span class="hs-identifier">AbsolutePath</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-42"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Utils.Maybe.html"><span class="hs-identifier">Agda.Utils.Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Utils.Maybe.html#caseMaybeM"><span class="hs-identifier">caseMaybeM</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-43"></span><span>
</span><span id="line-44"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Utils.Impossible.html"><span class="hs-identifier">Agda.Utils.Impossible</span></a></span><span>
</span><span id="line-45"></span><span>
</span><span id="line-46"></span><span class="hs-keyword">data</span><span> </span><span id="ReplEnv"><span class="annot"><a href="Agda.Interaction.CommandLine.html#ReplEnv"><span class="hs-identifier hs-var">ReplEnv</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="ReplEnv"><span class="annot"><a href="Agda.Interaction.CommandLine.html#ReplEnv"><span class="hs-identifier hs-var">ReplEnv</span></a></span></span><span>
</span><span id="line-47"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="replSetupAction"><span class="annot"><span class="annottext">ReplEnv -&gt; TCM ()
</span><a href="Agda.Interaction.CommandLine.html#replSetupAction"><span class="hs-identifier hs-var hs-var">replSetupAction</span></a></span></span><span>     </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">TCM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-48"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="replTypeCheckAction"><span class="annot"><span class="annottext">ReplEnv -&gt; AbsolutePath -&gt; TCM CheckResult
</span><a href="Agda.Interaction.CommandLine.html#replTypeCheckAction"><span class="hs-identifier hs-var hs-var">replTypeCheckAction</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Utils.FileName.html#AbsolutePath"><span class="hs-identifier hs-type">AbsolutePath</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">TCM</span></a></span><span> </span><span class="annot"><a href="Agda.Interaction.Imports.html#CheckResult"><span class="hs-identifier hs-type">CheckResult</span></a></span><span>
</span><span id="line-49"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-50"></span><span>
</span><span id="line-51"></span><span class="hs-keyword">data</span><span> </span><span id="ReplState"><span class="annot"><a href="Agda.Interaction.CommandLine.html#ReplState"><span class="hs-identifier hs-var">ReplState</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="ReplState"><span class="annot"><a href="Agda.Interaction.CommandLine.html#ReplState"><span class="hs-identifier hs-var">ReplState</span></a></span></span><span>
</span><span id="line-52"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="currentFile"><span class="annot"><span class="annottext">ReplState -&gt; Maybe AbsolutePath
</span><a href="Agda.Interaction.CommandLine.html#currentFile"><span class="hs-identifier hs-var hs-var">currentFile</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Agda.Utils.FileName.html#AbsolutePath"><span class="hs-identifier hs-type">AbsolutePath</span></a></span><span>
</span><span id="line-53"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-54"></span><span>
</span><span id="line-55"></span><span class="hs-keyword">newtype</span><span> </span><span id="ReplM"><span class="annot"><a href="Agda.Interaction.CommandLine.html#ReplM"><span class="hs-identifier hs-var">ReplM</span></a></span></span><span> </span><span id="local-6989586621682182865"><span class="annot"><a href="#local-6989586621682182865"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="ReplM"><span class="annot"><a href="Agda.Interaction.CommandLine.html#ReplM"><span class="hs-identifier hs-var">ReplM</span></a></span></span><span> </span><span class="hs-special">{</span><span> </span><span id="unReplM"><span class="annot"><span class="annottext">forall a. ReplM a -&gt; ReaderT ReplEnv (StateT ReplState IM) a
</span><a href="Agda.Interaction.CommandLine.html#unReplM"><span class="hs-identifier hs-var hs-var">unReplM</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ReaderT</span></span><span> </span><span class="annot"><a href="Agda.Interaction.CommandLine.html#ReplEnv"><span class="hs-identifier hs-type">ReplEnv</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">StateT</span></span><span> </span><span class="annot"><a href="Agda.Interaction.CommandLine.html#ReplState"><span class="hs-identifier hs-type">ReplState</span></a></span><span> </span><span class="annot"><a href="Agda.Interaction.Monad.html#IM"><span class="hs-identifier hs-type">IM</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621682182865"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-56"></span><span>    </span><span class="hs-keyword">deriving</span><span>
</span><span id="line-57"></span><span>    </span><span class="hs-special">(</span><span> </span><span id="local-6989586621682183523"><span id="local-6989586621682183529"><span class="annot"><span class="annottext">(forall a b. (a -&gt; b) -&gt; ReplM a -&gt; ReplM b)
-&gt; (forall a b. a -&gt; ReplM b -&gt; ReplM a) -&gt; Functor ReplM
forall a b. a -&gt; ReplM b -&gt; ReplM a
forall a b. (a -&gt; b) -&gt; ReplM a -&gt; ReplM b
forall (f :: * -&gt; *).
(forall a b. (a -&gt; b) -&gt; f a -&gt; f b)
-&gt; (forall a b. a -&gt; f b -&gt; f a) -&gt; Functor f
$cfmap :: forall a b. (a -&gt; b) -&gt; ReplM a -&gt; ReplM b
fmap :: forall a b. (a -&gt; b) -&gt; ReplM a -&gt; ReplM b
$c&lt;$ :: forall a b. a -&gt; ReplM b -&gt; ReplM a
&lt;$ :: forall a b. a -&gt; ReplM b -&gt; ReplM a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Functor</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682183543"><span id="local-6989586621682183549"><span id="local-6989586621682183554"><span id="local-6989586621682183559"><span id="local-6989586621682183564"><span class="annot"><span class="annottext">Functor ReplM
Functor ReplM =&gt;
(forall a. a -&gt; ReplM a)
-&gt; (forall a b. ReplM (a -&gt; b) -&gt; ReplM a -&gt; ReplM b)
-&gt; (forall a b c. (a -&gt; b -&gt; c) -&gt; ReplM a -&gt; ReplM b -&gt; ReplM c)
-&gt; (forall a b. ReplM a -&gt; ReplM b -&gt; ReplM b)
-&gt; (forall a b. ReplM a -&gt; ReplM b -&gt; ReplM a)
-&gt; Applicative ReplM
forall a. a -&gt; ReplM a
forall a b. ReplM a -&gt; ReplM b -&gt; ReplM a
forall a b. ReplM a -&gt; ReplM b -&gt; ReplM b
forall a b. ReplM (a -&gt; b) -&gt; ReplM a -&gt; ReplM b
forall a b c. (a -&gt; b -&gt; c) -&gt; ReplM a -&gt; ReplM b -&gt; ReplM c
forall (f :: * -&gt; *).
Functor f =&gt;
(forall a. a -&gt; f a)
-&gt; (forall a b. f (a -&gt; b) -&gt; f a -&gt; f b)
-&gt; (forall a b c. (a -&gt; b -&gt; c) -&gt; f a -&gt; f b -&gt; f c)
-&gt; (forall a b. f a -&gt; f b -&gt; f b)
-&gt; (forall a b. f a -&gt; f b -&gt; f a)
-&gt; Applicative f
$cpure :: forall a. a -&gt; ReplM a
pure :: forall a. a -&gt; ReplM a
$c&lt;*&gt; :: forall a b. ReplM (a -&gt; b) -&gt; ReplM a -&gt; ReplM b
&lt;*&gt; :: forall a b. ReplM (a -&gt; b) -&gt; ReplM a -&gt; ReplM b
$cliftA2 :: forall a b c. (a -&gt; b -&gt; c) -&gt; ReplM a -&gt; ReplM b -&gt; ReplM c
liftA2 :: forall a b c. (a -&gt; b -&gt; c) -&gt; ReplM a -&gt; ReplM b -&gt; ReplM c
$c*&gt; :: forall a b. ReplM a -&gt; ReplM b -&gt; ReplM b
*&gt; :: forall a b. ReplM a -&gt; ReplM b -&gt; ReplM b
$c&lt;* :: forall a b. ReplM a -&gt; ReplM b -&gt; ReplM a
&lt;* :: forall a b. ReplM a -&gt; ReplM b -&gt; ReplM a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Applicative</span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682183580"><span id="local-6989586621682183586"><span id="local-6989586621682183591"><span class="annot"><span class="annottext">Applicative ReplM
Applicative ReplM =&gt;
(forall a b. ReplM a -&gt; (a -&gt; ReplM b) -&gt; ReplM b)
-&gt; (forall a b. ReplM a -&gt; ReplM b -&gt; ReplM b)
-&gt; (forall a. a -&gt; ReplM a)
-&gt; Monad ReplM
forall a. a -&gt; ReplM a
forall a b. ReplM a -&gt; ReplM b -&gt; ReplM b
forall a b. ReplM a -&gt; (a -&gt; ReplM b) -&gt; ReplM b
forall (m :: * -&gt; *).
Applicative m =&gt;
(forall a b. m a -&gt; (a -&gt; m b) -&gt; m b)
-&gt; (forall a b. m a -&gt; m b -&gt; m b)
-&gt; (forall a. a -&gt; m a)
-&gt; Monad m
$c&gt;&gt;= :: forall a b. ReplM a -&gt; (a -&gt; ReplM b) -&gt; ReplM b
&gt;&gt;= :: forall a b. ReplM a -&gt; (a -&gt; ReplM b) -&gt; ReplM b
$c&gt;&gt; :: forall a b. ReplM a -&gt; ReplM b -&gt; ReplM b
&gt;&gt; :: forall a b. ReplM a -&gt; ReplM b -&gt; ReplM b
$creturn :: forall a. a -&gt; ReplM a
return :: forall a. a -&gt; ReplM a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Monad</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682183600"><span class="annot"><span class="annottext">Monad ReplM
Monad ReplM =&gt; (forall a. IO a -&gt; ReplM a) -&gt; MonadIO ReplM
forall a. IO a -&gt; ReplM a
forall (m :: * -&gt; *).
Monad m =&gt;
(forall a. IO a -&gt; m a) -&gt; MonadIO m
$cliftIO :: forall a. IO a -&gt; ReplM a
liftIO :: forall a. IO a -&gt; ReplM a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var">MonadIO</span></span></span><span>
</span><span id="line-58"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621682183617"><span id="local-6989586621682183623"><span class="annot"><span class="annottext">Monad ReplM
Functor ReplM
Applicative ReplM
ReplM PragmaOptions
ReplM CommandLineOptions
(Functor ReplM, Applicative ReplM, Monad ReplM) =&gt;
ReplM PragmaOptions -&gt; ReplM CommandLineOptions -&gt; HasOptions ReplM
forall (m :: * -&gt; *).
(Functor m, Applicative m, Monad m) =&gt;
m PragmaOptions -&gt; m CommandLineOptions -&gt; HasOptions m
$cpragmaOptions :: ReplM PragmaOptions
pragmaOptions :: ReplM PragmaOptions
$ccommandLineOptions :: ReplM CommandLineOptions
commandLineOptions :: ReplM CommandLineOptions
</span><a href="Agda.Interaction.Options.HasOptions.html#HasOptions"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">HasOptions</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682183638"><span id="local-6989586621682183644"><span class="annot"><span class="annottext">Monad ReplM
ReplM TCEnv
Monad ReplM =&gt;
ReplM TCEnv
-&gt; (forall a. (TCEnv -&gt; TCEnv) -&gt; ReplM a -&gt; ReplM a)
-&gt; MonadTCEnv ReplM
forall a. (TCEnv -&gt; TCEnv) -&gt; ReplM a -&gt; ReplM a
forall (m :: * -&gt; *).
Monad m =&gt;
m TCEnv
-&gt; (forall a. (TCEnv -&gt; TCEnv) -&gt; m a -&gt; m a) -&gt; MonadTCEnv m
$caskTC :: ReplM TCEnv
askTC :: ReplM TCEnv
$clocalTC :: forall a. (TCEnv -&gt; TCEnv) -&gt; ReplM a -&gt; ReplM a
localTC :: forall a. (TCEnv -&gt; TCEnv) -&gt; ReplM a -&gt; ReplM a
</span><a href="Agda.TypeChecking.Monad.Base.html#MonadTCEnv"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var">MonadTCEnv</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682183659"><span id="local-6989586621682183665"><span id="local-6989586621682183670"><span class="annot"><span class="annottext">Monad ReplM
ReplM TCState
Monad ReplM =&gt;
ReplM TCState
-&gt; (forall a b. Lens' TCState a -&gt; (a -&gt; a) -&gt; ReplM b -&gt; ReplM b)
-&gt; (forall a. (TCState -&gt; TCState) -&gt; ReplM a -&gt; ReplM a)
-&gt; ReadTCState ReplM
forall a. (TCState -&gt; TCState) -&gt; ReplM a -&gt; ReplM a
forall a b. Lens' TCState a -&gt; (a -&gt; a) -&gt; ReplM b -&gt; ReplM b
forall (m :: * -&gt; *).
Monad m =&gt;
m TCState
-&gt; (forall a b. Lens' TCState a -&gt; (a -&gt; a) -&gt; m b -&gt; m b)
-&gt; (forall a. (TCState -&gt; TCState) -&gt; m a -&gt; m a)
-&gt; ReadTCState m
$cgetTCState :: ReplM TCState
getTCState :: ReplM TCState
$clocallyTCState :: forall a b. Lens' TCState a -&gt; (a -&gt; a) -&gt; ReplM b -&gt; ReplM b
locallyTCState :: forall a b. Lens' TCState a -&gt; (a -&gt; a) -&gt; ReplM b -&gt; ReplM b
$cwithTCState :: forall a. (TCState -&gt; TCState) -&gt; ReplM a -&gt; ReplM a
withTCState :: forall a. (TCState -&gt; TCState) -&gt; ReplM a -&gt; ReplM a
</span><a href="Agda.TypeChecking.Monad.Base.html#ReadTCState"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">ReadTCState</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682183687"><span id="local-6989586621682183693"><span id="local-6989586621682183698"><span class="annot"><span class="annottext">Monad ReplM
ReplM TCState
Monad ReplM =&gt;
ReplM TCState
-&gt; (TCState -&gt; ReplM ())
-&gt; ((TCState -&gt; TCState) -&gt; ReplM ())
-&gt; MonadTCState ReplM
TCState -&gt; ReplM ()
(TCState -&gt; TCState) -&gt; ReplM ()
forall (m :: * -&gt; *).
Monad m =&gt;
m TCState
-&gt; (TCState -&gt; m ())
-&gt; ((TCState -&gt; TCState) -&gt; m ())
-&gt; MonadTCState m
$cgetTC :: ReplM TCState
getTC :: ReplM TCState
$cputTC :: TCState -&gt; ReplM ()
putTC :: TCState -&gt; ReplM ()
$cmodifyTC :: (TCState -&gt; TCState) -&gt; ReplM ()
modifyTC :: (TCState -&gt; TCState) -&gt; ReplM ()
</span><a href="Agda.TypeChecking.Monad.Base.html#MonadTCState"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">MonadTCState</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682183723"><span class="annot"><span class="annottext">Applicative ReplM
MonadIO ReplM
HasOptions ReplM
MonadTCState ReplM
MonadTCEnv ReplM
(Applicative ReplM, MonadIO ReplM, MonadTCEnv ReplM,
 MonadTCState ReplM, HasOptions ReplM) =&gt;
(forall a. TCM a -&gt; ReplM a) -&gt; MonadTCM ReplM
forall a. TCM a -&gt; ReplM a
forall (tcm :: * -&gt; *).
(Applicative tcm, MonadIO tcm, MonadTCEnv tcm, MonadTCState tcm,
 HasOptions tcm) =&gt;
(forall a. TCM a -&gt; tcm a) -&gt; MonadTCM tcm
$cliftTCM :: forall a. TCM a -&gt; ReplM a
liftTCM :: forall a. TCM a -&gt; ReplM a
</span><a href="Agda.TypeChecking.Monad.Base.html#MonadTCM"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">MonadTCM</span></a></span></span><span>
</span><span id="line-59"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621682183736"><span id="local-6989586621682183742"><span class="annot"><span class="hs-identifier hs-type">MonadError</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCErr"><span class="hs-identifier hs-type">TCErr</span></a></span></span></span><span>
</span><span id="line-60"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621682183757"><span id="local-6989586621682183763"><span id="local-6989586621682183768"><span class="annot"><span class="hs-identifier hs-type">MonadReader</span></span><span> </span><span class="annot"><a href="Agda.Interaction.CommandLine.html#ReplEnv"><span class="hs-identifier hs-type">ReplEnv</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682183779"><span id="local-6989586621682183785"><span id="local-6989586621682183790"><span class="annot"><span class="hs-identifier hs-type">MonadState</span></span><span> </span><span class="annot"><a href="Agda.Interaction.CommandLine.html#ReplState"><span class="hs-identifier hs-type">ReplState</span></a></span></span></span></span><span>
</span><span id="line-61"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621682183802"><span id="local-6989586621682183808"><span class="annot"><span class="annottext">Monad ReplM
Monad ReplM =&gt;
(FileId -&gt; ReplM AbsolutePath)
-&gt; (AbsolutePath -&gt; ReplM FileId) -&gt; MonadFileId ReplM
AbsolutePath -&gt; ReplM FileId
FileId -&gt; ReplM AbsolutePath
forall (m :: * -&gt; *).
Monad m =&gt;
(FileId -&gt; m AbsolutePath)
-&gt; (AbsolutePath -&gt; m FileId) -&gt; MonadFileId m
$cfileFromId :: FileId -&gt; ReplM AbsolutePath
fileFromId :: FileId -&gt; ReplM AbsolutePath
$cidFromFile :: AbsolutePath -&gt; ReplM FileId
idFromFile :: AbsolutePath -&gt; ReplM FileId
</span><a href="Agda.Utils.FileId.html#MonadFileId"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var">MonadFileId</span></a></span></span></span><span>
</span><span id="line-62"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-63"></span><span>
</span><span id="line-64"></span><span class="annot"><a href="Agda.Interaction.CommandLine.html#runReplM"><span class="hs-identifier hs-type">runReplM</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Agda.Utils.FileName.html#AbsolutePath"><span class="hs-identifier hs-type">AbsolutePath</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">TCM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Utils.FileName.html#AbsolutePath"><span class="hs-identifier hs-type">AbsolutePath</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">TCM</span></a></span><span> </span><span class="annot"><a href="Agda.Interaction.Imports.html#CheckResult"><span class="hs-identifier hs-type">CheckResult</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Interaction.CommandLine.html#ReplM"><span class="hs-identifier hs-type">ReplM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">TCM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-65"></span><span id="runReplM"><span class="annot"><span class="annottext">runReplM :: Maybe AbsolutePath
-&gt; TCM ()
-&gt; (AbsolutePath -&gt; TCM CheckResult)
-&gt; ReplM ()
-&gt; TCM ()
</span><a href="Agda.Interaction.CommandLine.html#runReplM"><span class="hs-identifier hs-var hs-var">runReplM</span></a></span></span><span> </span><span id="local-6989586621682183821"><span class="annot"><span class="annottext">Maybe AbsolutePath
</span><a href="#local-6989586621682183821"><span class="hs-identifier hs-var">initialFile</span></a></span></span><span> </span><span id="local-6989586621682183822"><span class="annot"><span class="annottext">TCM ()
</span><a href="#local-6989586621682183822"><span class="hs-identifier hs-var">setup</span></a></span></span><span> </span><span id="local-6989586621682183823"><span class="annot"><span class="annottext">AbsolutePath -&gt; TCM CheckResult
</span><a href="#local-6989586621682183823"><span class="hs-identifier hs-var">checkInterface</span></a></span></span><span>
</span><span id="line-66"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IM () -&gt; TCM ()
forall a. IM a -&gt; TCM a
</span><a href="Agda.Interaction.Monad.html#runIM"><span class="hs-identifier hs-var">runIM</span></a></span><span>
</span><span id="line-67"></span><span>    </span><span class="annot"><span class="annottext">(IM () -&gt; TCM ()) -&gt; (ReplM () -&gt; IM ()) -&gt; ReplM () -&gt; TCM ()
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(StateT ReplState IM () -&gt; ReplState -&gt; IM ())
-&gt; ReplState -&gt; StateT ReplState IM () -&gt; IM ()
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="annot"><span class="annottext">StateT ReplState IM () -&gt; ReplState -&gt; IM ()
forall (m :: * -&gt; *) s a. Monad m =&gt; StateT s m a -&gt; s -&gt; m a
</span><span class="hs-identifier hs-var">evalStateT</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe AbsolutePath -&gt; ReplState
</span><a href="Agda.Interaction.CommandLine.html#ReplState"><span class="hs-identifier hs-var">ReplState</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe AbsolutePath
</span><a href="#local-6989586621682183821"><span class="hs-identifier hs-var">initialFile</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-68"></span><span>    </span><span class="annot"><span class="annottext">(StateT ReplState IM () -&gt; IM ())
-&gt; (ReplM () -&gt; StateT ReplState IM ()) -&gt; ReplM () -&gt; IM ()
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(ReaderT ReplEnv (StateT ReplState IM) ()
 -&gt; ReplEnv -&gt; StateT ReplState IM ())
-&gt; ReplEnv
-&gt; ReaderT ReplEnv (StateT ReplState IM) ()
-&gt; StateT ReplState IM ()
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="annot"><span class="annottext">ReaderT ReplEnv (StateT ReplState IM) ()
-&gt; ReplEnv -&gt; StateT ReplState IM ()
forall r (m :: * -&gt; *) a. ReaderT r m a -&gt; r -&gt; m a
</span><span class="hs-identifier hs-var">runReaderT</span></span><span> </span><span class="annot"><span class="annottext">ReplEnv
</span><a href="#local-6989586621682183829"><span class="hs-identifier hs-var">replEnv</span></a></span><span>
</span><span id="line-69"></span><span>    </span><span class="annot"><span class="annottext">(ReaderT ReplEnv (StateT ReplState IM) ()
 -&gt; StateT ReplState IM ())
-&gt; (ReplM () -&gt; ReaderT ReplEnv (StateT ReplState IM) ())
-&gt; ReplM ()
-&gt; StateT ReplState IM ()
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ReplM () -&gt; ReaderT ReplEnv (StateT ReplState IM) ()
forall a. ReplM a -&gt; ReaderT ReplEnv (StateT ReplState IM) a
</span><a href="Agda.Interaction.CommandLine.html#unReplM"><span class="hs-identifier hs-var">unReplM</span></a></span><span>
</span><span id="line-70"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-71"></span><span>  </span><span id="local-6989586621682183829"><span class="annot"><span class="annottext">replEnv :: ReplEnv
</span><a href="#local-6989586621682183829"><span class="hs-identifier hs-var hs-var">replEnv</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Agda.Interaction.CommandLine.html#ReplEnv"><span class="hs-identifier hs-type">ReplEnv</span></a></span><span>
</span><span id="line-72"></span><span>    </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">replSetupAction :: TCM ()
</span><a href="Agda.Interaction.CommandLine.html#replSetupAction"><span class="hs-identifier hs-var">replSetupAction</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TCM ()
</span><a href="#local-6989586621682183822"><span class="hs-identifier hs-var">setup</span></a></span><span>
</span><span id="line-73"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">replTypeCheckAction :: AbsolutePath -&gt; TCM CheckResult
</span><a href="Agda.Interaction.CommandLine.html#replTypeCheckAction"><span class="hs-identifier hs-var">replTypeCheckAction</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">AbsolutePath -&gt; TCM CheckResult
</span><a href="#local-6989586621682183823"><span class="hs-identifier hs-var">checkInterface</span></a></span><span>
</span><span id="line-74"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-75"></span><span>
</span><span id="line-76"></span><span class="hs-keyword">data</span><span> </span><span id="ExitCode"><span class="annot"><a href="Agda.Interaction.CommandLine.html#ExitCode"><span class="hs-identifier hs-var">ExitCode</span></a></span></span><span> </span><span id="local-6989586621682183077"><span class="annot"><a href="#local-6989586621682183077"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Continue"><span class="annot"><a href="Agda.Interaction.CommandLine.html#Continue"><span class="hs-identifier hs-var">Continue</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="ContinueIn"><span class="annot"><a href="Agda.Interaction.CommandLine.html#ContinueIn"><span class="hs-identifier hs-var">ContinueIn</span></a></span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCEnv"><span class="hs-identifier hs-type">TCEnv</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="Return"><span class="annot"><a href="Agda.Interaction.CommandLine.html#Return"><span class="hs-identifier hs-var">Return</span></a></span></span><span> </span><span class="annot"><a href="#local-6989586621682183077"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-77"></span><span>
</span><span id="line-78"></span><span class="hs-keyword">type</span><span> </span><span id="Command"><span class="annot"><a href="Agda.Interaction.CommandLine.html#Command"><span class="hs-identifier hs-var">Command</span></a></span></span><span> </span><span id="local-6989586621682183833"><span class="annot"><a href="#local-6989586621682183833"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Interaction.CommandLine.html#ReplM"><span class="hs-identifier hs-type">ReplM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Interaction.CommandLine.html#ExitCode"><span class="hs-identifier hs-type">ExitCode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682183833"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-79"></span><span>
</span><span id="line-80"></span><span id="local-6989586621682183019"><span class="annot"><a href="Agda.Interaction.CommandLine.html#matchCommand"><span class="hs-identifier hs-type">matchCommand</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.Interaction.CommandLine.html#Command"><span class="hs-identifier hs-type">Command</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682183019"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">]</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Interaction.CommandLine.html#ReplM"><span class="hs-identifier hs-type">ReplM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Interaction.CommandLine.html#ExitCode"><span class="hs-identifier hs-type">ExitCode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682183019"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-81"></span><span id="matchCommand"><span class="annot"><span class="annottext">matchCommand :: forall a.
String
-&gt; [Command a] -&gt; Either [String] ([String] -&gt; ReplM (ExitCode a))
</span><a href="Agda.Interaction.CommandLine.html#matchCommand"><span class="hs-identifier hs-var hs-var">matchCommand</span></a></span></span><span> </span><span id="local-6989586621682183836"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682183836"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621682183837"><span class="annot"><span class="annottext">[Command a]
</span><a href="#local-6989586621682183837"><span class="hs-identifier hs-var">cmds</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-82"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">(Command a -&gt; Bool) -&gt; [Command a] -&gt; [Command a]
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">List.filter</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; String -&gt; Bool
forall a. Eq a =&gt; [a] -&gt; [a] -&gt; Bool
</span><span class="hs-identifier hs-var">List.isPrefixOf</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682183836"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Bool) -&gt; (Command a -&gt; String) -&gt; Command a -&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Command a -&gt; String
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Command a]
</span><a href="#local-6989586621682183837"><span class="hs-identifier hs-var">cmds</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-83"></span><span>        </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span id="local-6989586621682183840"><span class="annot"><span class="annottext">[String] -&gt; ReplM (ExitCode a)
</span><a href="#local-6989586621682183840"><span class="hs-identifier hs-var">m</span></a></span></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">([String] -&gt; ReplM (ExitCode a))
-&gt; Either [String] ([String] -&gt; ReplM (ExitCode a))
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">[String] -&gt; ReplM (ExitCode a)
</span><a href="#local-6989586621682183840"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-84"></span><span>        </span><span id="local-6989586621682183841"><span class="annot"><span class="annottext">[Command a]
</span><a href="#local-6989586621682183841"><span class="hs-identifier hs-var">xs</span></a></span></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[String] -&gt; Either [String] ([String] -&gt; ReplM (ExitCode a))
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">([String] -&gt; Either [String] ([String] -&gt; ReplM (ExitCode a)))
-&gt; [String] -&gt; Either [String] ([String] -&gt; ReplM (ExitCode a))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Command a -&gt; String) -&gt; [Command a] -&gt; [String]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">List.map</span></span><span> </span><span class="annot"><span class="annottext">Command a -&gt; String
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span> </span><span class="annot"><span class="annottext">[Command a]
</span><a href="#local-6989586621682183841"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-85"></span><span>
</span><span id="line-86"></span><span id="local-6989586621682183035"><span class="annot"><a href="Agda.Interaction.CommandLine.html#interaction"><span class="hs-identifier hs-type">interaction</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.Interaction.CommandLine.html#Command"><span class="hs-identifier hs-type">Command</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682183035"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">TCM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Interaction.CommandLine.html#ExitCode"><span class="hs-identifier hs-type">ExitCode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682183035"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Interaction.CommandLine.html#ReplM"><span class="hs-identifier hs-type">ReplM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682183035"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-87"></span><span id="interaction"><span class="annot"><span class="annottext">interaction :: forall a.
String -&gt; [Command a] -&gt; (String -&gt; TCM (ExitCode a)) -&gt; ReplM a
</span><a href="Agda.Interaction.CommandLine.html#interaction"><span class="hs-identifier hs-var hs-var">interaction</span></a></span></span><span> </span><span id="local-6989586621682183874"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682183874"><span class="hs-identifier hs-var">prompt</span></a></span></span><span> </span><span id="local-6989586621682183875"><span class="annot"><span class="annottext">[Command a]
</span><a href="#local-6989586621682183875"><span class="hs-identifier hs-var">cmds</span></a></span></span><span> </span><span id="local-6989586621682183876"><span class="annot"><span class="annottext">String -&gt; TCM (ExitCode a)
</span><a href="#local-6989586621682183876"><span class="hs-identifier hs-var">eval</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ReplM a
</span><a href="#local-6989586621682183877"><span class="hs-identifier hs-var">loop</span></a></span><span>
</span><span id="line-88"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-89"></span><span>        </span><span id="local-6989586621682183878"><span class="annot"><span class="annottext">go :: ExitCode a -&gt; ReplM a
</span><a href="#local-6989586621682183878"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Interaction.CommandLine.html#Return"><span class="hs-identifier hs-type">Return</span></a></span><span> </span><span id="local-6989586621682183879"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682183879"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; ReplM a
forall a. a -&gt; ReplM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682183879"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-90"></span><span>        </span><span class="annot"><a href="#local-6989586621682183878"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">ExitCode a
</span><a href="Agda.Interaction.CommandLine.html#Continue"><span class="hs-identifier hs-var">Continue</span></a></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ReplM a
</span><a href="#local-6989586621682183877"><span class="hs-identifier hs-var">loop</span></a></span><span>
</span><span id="line-91"></span><span>        </span><span class="annot"><a href="#local-6989586621682183878"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Interaction.CommandLine.html#ContinueIn"><span class="hs-identifier hs-type">ContinueIn</span></a></span><span> </span><span id="local-6989586621682183880"><span class="annot"><span class="annottext">TCEnv
</span><a href="#local-6989586621682183880"><span class="hs-identifier hs-var">env</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(TCEnv -&gt; TCEnv) -&gt; ReplM a -&gt; ReplM a
forall a. (TCEnv -&gt; TCEnv) -&gt; ReplM a -&gt; ReplM a
forall (m :: * -&gt; *) a.
MonadTCEnv m =&gt;
(TCEnv -&gt; TCEnv) -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Base.html#localTC"><span class="hs-identifier hs-var">localTC</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TCEnv -&gt; TCEnv -&gt; TCEnv
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="annot"><span class="annottext">TCEnv
</span><a href="#local-6989586621682183880"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ReplM a
</span><a href="#local-6989586621682183877"><span class="hs-identifier hs-var">loop</span></a></span><span>
</span><span id="line-92"></span><span>
</span><span id="line-93"></span><span>        </span><span id="local-6989586621682183877"><span class="annot"><span class="annottext">loop :: ReplM a
</span><a href="#local-6989586621682183877"><span class="hs-identifier hs-var hs-var">loop</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-94"></span><span>            </span><span class="hs-keyword">do</span><span>  </span><span id="local-6989586621682183882"><span class="annot"><a href="#local-6989586621682183882"><span class="hs-identifier hs-var">ms</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ReaderT ReplEnv (StateT ReplState IM) (Maybe String)
-&gt; ReplM (Maybe String)
forall a. ReaderT ReplEnv (StateT ReplState IM) a -&gt; ReplM a
</span><a href="Agda.Interaction.CommandLine.html#ReplM"><span class="hs-identifier hs-var">ReplM</span></a></span><span> </span><span class="annot"><span class="annottext">(ReaderT ReplEnv (StateT ReplState IM) (Maybe String)
 -&gt; ReplM (Maybe String))
-&gt; ReaderT ReplEnv (StateT ReplState IM) (Maybe String)
-&gt; ReplM (Maybe String)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">StateT ReplState IM (Maybe String)
-&gt; ReaderT ReplEnv (StateT ReplState IM) (Maybe String)
forall (m :: * -&gt; *) a. Monad m =&gt; m a -&gt; ReaderT ReplEnv m a
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(StateT ReplState IM (Maybe String)
 -&gt; ReaderT ReplEnv (StateT ReplState IM) (Maybe String))
-&gt; StateT ReplState IM (Maybe String)
-&gt; ReaderT ReplEnv (StateT ReplState IM) (Maybe String)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IM (Maybe String) -&gt; StateT ReplState IM (Maybe String)
forall (m :: * -&gt; *) a. Monad m =&gt; m a -&gt; StateT ReplState m a
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(IM (Maybe String) -&gt; StateT ReplState IM (Maybe String))
-&gt; IM (Maybe String) -&gt; StateT ReplState IM (Maybe String)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; IM (Maybe String)
</span><a href="Agda.Interaction.Monad.html#readline"><span class="hs-identifier hs-var">readline</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682183874"><span class="hs-identifier hs-var">prompt</span></a></span><span>
</span><span id="line-95"></span><span>                </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="hs-identifier hs-type">fmap</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">words</span></span><span> </span><span class="annot"><a href="#local-6989586621682183882"><span class="hs-identifier hs-type">ms</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-96"></span><span>                    </span><span class="annot"><span class="annottext">Maybe [String]
</span><span class="hs-identifier hs-var">Nothing</span></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">a -&gt; ReplM a
forall a. a -&gt; ReplM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(a -&gt; ReplM a) -&gt; a -&gt; ReplM a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; a
forall a. HasCallStack =&gt; String -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;** EOF **&quot;</span></span><span>
</span><span id="line-97"></span><span>                    </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ReplM a
</span><a href="#local-6989586621682183877"><span class="hs-identifier hs-var">loop</span></a></span><span>
</span><span id="line-98"></span><span>                    </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">':'</span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621682183887"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682183887"><span class="hs-identifier hs-var">cmd</span></a></span></span><span class="hs-special">)</span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621682183888"><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621682183888"><span class="hs-identifier hs-var">args</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-99"></span><span>                        </span><span class="hs-keyword">do</span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">String
-&gt; [Command a] -&gt; Either [String] ([String] -&gt; ReplM (ExitCode a))
forall a.
String
-&gt; [Command a] -&gt; Either [String] ([String] -&gt; ReplM (ExitCode a))
</span><a href="Agda.Interaction.CommandLine.html#matchCommand"><span class="hs-identifier hs-var">matchCommand</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682183887"><span class="hs-identifier hs-var">cmd</span></a></span><span> </span><span class="annot"><span class="annottext">[Command a]
</span><a href="#local-6989586621682183875"><span class="hs-identifier hs-var">cmds</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-100"></span><span>                                </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span id="local-6989586621682183889"><span class="annot"><span class="annottext">[String] -&gt; ReplM (ExitCode a)
</span><a href="#local-6989586621682183889"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ExitCode a -&gt; ReplM a
</span><a href="#local-6989586621682183878"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">(ExitCode a -&gt; ReplM a) -&gt; ReplM (ExitCode a) -&gt; ReplM a
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">=&lt;&lt;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[String] -&gt; ReplM (ExitCode a)
</span><a href="#local-6989586621682183889"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621682183888"><span class="hs-identifier hs-var">args</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-101"></span><span>                                </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-102"></span><span>                                    </span><span class="hs-keyword">do</span><span>  </span><span class="annot"><span class="annottext">IO () -&gt; ReplM ()
forall a. IO a -&gt; ReplM a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; ReplM ()) -&gt; IO () -&gt; ReplM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; IO ()
</span><span class="hs-identifier hs-var">putStrLn</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; IO ()) -&gt; String -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Unknown command '&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682183887"><span class="hs-identifier hs-var">cmd</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;'&quot;</span></span><span>
</span><span id="line-103"></span><span>                                        </span><span class="annot"><span class="annottext">ReplM a
</span><a href="#local-6989586621682183877"><span class="hs-identifier hs-var">loop</span></a></span><span>
</span><span id="line-104"></span><span>                                </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span id="local-6989586621682183892"><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621682183892"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-105"></span><span>                                    </span><span class="hs-keyword">do</span><span>  </span><span class="annot"><span class="annottext">IO () -&gt; ReplM ()
forall a. IO a -&gt; ReplM a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; ReplM ()) -&gt; IO () -&gt; ReplM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; IO ()
</span><span class="hs-identifier hs-var">putStrLn</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; IO ()) -&gt; String -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;More than one command match: &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span>
</span><span id="line-106"></span><span>                                                            </span><span class="annot"><span class="annottext">String -&gt; [String] -&gt; String
forall a. [a] -&gt; [[a]] -&gt; [a]
</span><span class="hs-identifier hs-var">List.intercalate</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;, &quot;</span></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621682183892"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-107"></span><span>                                        </span><span class="annot"><span class="annottext">ReplM a
</span><a href="#local-6989586621682183877"><span class="hs-identifier hs-var">loop</span></a></span><span>
</span><span id="line-108"></span><span>                    </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><span class="annottext">[String]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-109"></span><span>                        </span><span class="hs-keyword">do</span><span>  </span><span class="annot"><span class="annottext">ExitCode a -&gt; ReplM a
</span><a href="#local-6989586621682183878"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">(ExitCode a -&gt; ReplM a) -&gt; ReplM (ExitCode a) -&gt; ReplM a
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">=&lt;&lt;</span></span><span> </span><span class="annot"><span class="annottext">TCM (ExitCode a) -&gt; ReplM (ExitCode a)
forall a. TCM a -&gt; ReplM a
forall (tcm :: * -&gt; *) a. MonadTCM tcm =&gt; TCM a -&gt; tcm a
</span><a href="Agda.TypeChecking.Monad.Base.html#liftTCM"><span class="hs-identifier hs-var">liftTCM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; TCM (ExitCode a)
</span><a href="#local-6989586621682183876"><span class="hs-identifier hs-var">eval</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; TCM (ExitCode a)) -&gt; String -&gt; TCM (ExitCode a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Maybe String -&gt; String
forall a. HasCallStack =&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromJust</span></span><span> </span><span class="annot"><span class="annottext">Maybe String
</span><a href="#local-6989586621682183882"><span class="hs-identifier hs-var">ms</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-110"></span><span>            </span><span class="annot"><span class="annottext">ReplM a -&gt; (TCErr -&gt; ReplM a) -&gt; ReplM a
forall a. ReplM a -&gt; (TCErr -&gt; ReplM a) -&gt; ReplM a
forall e (m :: * -&gt; *) a.
MonadError e m =&gt;
m a -&gt; (e -&gt; m a) -&gt; m a
</span><span class="hs-operator hs-var">`catchError`</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621682183895"><span class="annot"><span class="annottext">TCErr
</span><a href="#local-6989586621682183895"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-111"></span><span>                </span><span class="hs-keyword">do</span><span>  </span><span class="annot"><span class="annottext">Doc Aspects -&gt; ReplM ()
forall (m :: * -&gt; *).
(MonadIO m, HasOptions m) =&gt;
Doc Aspects -&gt; m ()
</span><a href="Agda.Syntax.Common.Pretty.ANSI.html#putDocLn"><span class="hs-identifier hs-var">putDocLn</span></a></span><span> </span><span class="annot"><span class="annottext">(Doc Aspects -&gt; ReplM ()) -&gt; ReplM (Doc Aspects) -&gt; ReplM ()
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">=&lt;&lt;</span></span><span> </span><span class="annot"><span class="annottext">TCErr -&gt; ReplM (Doc Aspects)
forall (tcm :: * -&gt; *). MonadTCM tcm =&gt; TCErr -&gt; tcm (Doc Aspects)
</span><a href="Agda.TypeChecking.Errors.html#prettyError"><span class="hs-identifier hs-var">prettyError</span></a></span><span> </span><span class="annot"><span class="annottext">TCErr
</span><a href="#local-6989586621682183895"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-112"></span><span>                    </span><span class="annot"><span class="annottext">ReplM a
</span><a href="#local-6989586621682183877"><span class="hs-identifier hs-var">loop</span></a></span><span>
</span><span id="line-113"></span><span>
</span><span id="line-114"></span><span class="annot"><a href="Agda.Interaction.CommandLine.html#runInteractionLoop"><span class="hs-identifier hs-type">runInteractionLoop</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Agda.Utils.FileName.html#AbsolutePath"><span class="hs-identifier hs-type">AbsolutePath</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">TCM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Utils.FileName.html#AbsolutePath"><span class="hs-identifier hs-type">AbsolutePath</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">TCM</span></a></span><span> </span><span class="annot"><a href="Agda.Interaction.Imports.html#CheckResult"><span class="hs-identifier hs-type">CheckResult</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">TCM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-115"></span><span id="runInteractionLoop"><span class="annot"><span class="annottext">runInteractionLoop :: Maybe AbsolutePath
-&gt; TCM () -&gt; (AbsolutePath -&gt; TCM CheckResult) -&gt; TCM ()
</span><a href="Agda.Interaction.CommandLine.html#runInteractionLoop"><span class="hs-identifier hs-var hs-var">runInteractionLoop</span></a></span></span><span> </span><span id="local-6989586621682183897"><span class="annot"><span class="annottext">Maybe AbsolutePath
</span><a href="#local-6989586621682183897"><span class="hs-identifier hs-var">initialFile</span></a></span></span><span> </span><span id="local-6989586621682183898"><span class="annot"><span class="annottext">TCM ()
</span><a href="#local-6989586621682183898"><span class="hs-identifier hs-var">setup</span></a></span></span><span> </span><span id="local-6989586621682183899"><span class="annot"><span class="annottext">AbsolutePath -&gt; TCM CheckResult
</span><a href="#local-6989586621682183899"><span class="hs-identifier hs-var">check</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe AbsolutePath
-&gt; TCM ()
-&gt; (AbsolutePath -&gt; TCM CheckResult)
-&gt; ReplM ()
-&gt; TCM ()
</span><a href="Agda.Interaction.CommandLine.html#runReplM"><span class="hs-identifier hs-var">runReplM</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe AbsolutePath
</span><a href="#local-6989586621682183897"><span class="hs-identifier hs-var">initialFile</span></a></span><span> </span><span class="annot"><span class="annottext">TCM ()
</span><a href="#local-6989586621682183898"><span class="hs-identifier hs-var">setup</span></a></span><span> </span><span class="annot"><span class="annottext">AbsolutePath -&gt; TCM CheckResult
</span><a href="#local-6989586621682183899"><span class="hs-identifier hs-var">check</span></a></span><span> </span><span class="annot"><span class="annottext">ReplM ()
</span><a href="Agda.Interaction.CommandLine.html#interactionLoop"><span class="hs-identifier hs-var">interactionLoop</span></a></span><span>
</span><span id="line-116"></span><span>
</span><span id="line-117"></span><span class="annot"><a href="Agda.Interaction.CommandLine.html#replSetup"><span class="hs-identifier hs-type">replSetup</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Interaction.CommandLine.html#ReplM"><span class="hs-identifier hs-type">ReplM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-118"></span><span id="replSetup"><span class="annot"><span class="annottext">replSetup :: ReplM ()
</span><a href="Agda.Interaction.CommandLine.html#replSetup"><span class="hs-identifier hs-var hs-var">replSetup</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-119"></span><span>    </span><span class="annot"><span class="annottext">TCM () -&gt; ReplM ()
forall a. TCM a -&gt; ReplM a
forall (tcm :: * -&gt; *) a. MonadTCM tcm =&gt; TCM a -&gt; tcm a
</span><a href="Agda.TypeChecking.Monad.Base.html#liftTCM"><span class="hs-identifier hs-var">liftTCM</span></a></span><span> </span><span class="annot"><span class="annottext">(TCM () -&gt; ReplM ()) -&gt; ReplM (TCM ()) -&gt; ReplM ()
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">=&lt;&lt;</span></span><span> </span><span class="annot"><span class="annottext">(ReplEnv -&gt; TCM ()) -&gt; ReplM (TCM ())
forall r (m :: * -&gt; *) a. MonadReader r m =&gt; (r -&gt; a) -&gt; m a
</span><span class="hs-identifier hs-var">asks</span></span><span> </span><span class="annot"><span class="annottext">ReplEnv -&gt; TCM ()
</span><a href="Agda.Interaction.CommandLine.html#replSetupAction"><span class="hs-identifier hs-var">replSetupAction</span></a></span><span>
</span><span id="line-120"></span><span>    </span><span class="annot"><span class="annottext">IO () -&gt; ReplM ()
forall a. IO a -&gt; ReplM a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; ReplM ()) -&gt; IO () -&gt; ReplM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; IO ()
</span><span class="hs-identifier hs-var">putStr</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="Agda.Interaction.CommandLine.html#splashScreen"><span class="hs-identifier hs-var">splashScreen</span></a></span><span>
</span><span id="line-121"></span><span>
</span><span id="line-122"></span><span class="annot"><a href="Agda.Interaction.CommandLine.html#checkCurrentFile"><span class="hs-identifier hs-type">checkCurrentFile</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Interaction.CommandLine.html#ReplM"><span class="hs-identifier hs-type">ReplM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Agda.Interaction.Imports.html#CheckResult"><span class="hs-identifier hs-type">CheckResult</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-123"></span><span id="checkCurrentFile"><span class="annot"><span class="annottext">checkCurrentFile :: ReplM (Maybe CheckResult)
</span><a href="Agda.Interaction.CommandLine.html#checkCurrentFile"><span class="hs-identifier hs-var hs-var">checkCurrentFile</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(AbsolutePath -&gt; ReplM CheckResult)
-&gt; Maybe AbsolutePath -&gt; ReplM (Maybe CheckResult)
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; Maybe a -&gt; f (Maybe b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">AbsolutePath -&gt; ReplM CheckResult
</span><a href="Agda.Interaction.CommandLine.html#checkFile"><span class="hs-identifier hs-var">checkFile</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe AbsolutePath -&gt; ReplM (Maybe CheckResult))
-&gt; ReplM (Maybe AbsolutePath) -&gt; ReplM (Maybe CheckResult)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">=&lt;&lt;</span></span><span> </span><span class="annot"><span class="annottext">(ReplState -&gt; Maybe AbsolutePath) -&gt; ReplM (Maybe AbsolutePath)
forall s (m :: * -&gt; *) a. MonadState s m =&gt; (s -&gt; a) -&gt; m a
</span><span class="hs-identifier hs-var">gets</span></span><span> </span><span class="annot"><span class="annottext">ReplState -&gt; Maybe AbsolutePath
</span><a href="Agda.Interaction.CommandLine.html#currentFile"><span class="hs-identifier hs-var">currentFile</span></a></span><span>
</span><span id="line-124"></span><span>
</span><span id="line-125"></span><span class="annot"><a href="Agda.Interaction.CommandLine.html#checkFile"><span class="hs-identifier hs-type">checkFile</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Utils.FileName.html#AbsolutePath"><span class="hs-identifier hs-type">AbsolutePath</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Interaction.CommandLine.html#ReplM"><span class="hs-identifier hs-type">ReplM</span></a></span><span> </span><span class="annot"><a href="Agda.Interaction.Imports.html#CheckResult"><span class="hs-identifier hs-type">CheckResult</span></a></span><span>
</span><span id="line-126"></span><span id="checkFile"><span class="annot"><span class="annottext">checkFile :: AbsolutePath -&gt; ReplM CheckResult
</span><a href="Agda.Interaction.CommandLine.html#checkFile"><span class="hs-identifier hs-var hs-var">checkFile</span></a></span></span><span> </span><span id="local-6989586621682183909"><span class="annot"><span class="annottext">AbsolutePath
</span><a href="#local-6989586621682183909"><span class="hs-identifier hs-var">file</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TCM CheckResult -&gt; ReplM CheckResult
forall a. TCM a -&gt; ReplM a
forall (tcm :: * -&gt; *) a. MonadTCM tcm =&gt; TCM a -&gt; tcm a
</span><a href="Agda.TypeChecking.Monad.Base.html#liftTCM"><span class="hs-identifier hs-var">liftTCM</span></a></span><span> </span><span class="annot"><span class="annottext">(TCM CheckResult -&gt; ReplM CheckResult)
-&gt; ((AbsolutePath -&gt; TCM CheckResult) -&gt; TCM CheckResult)
-&gt; (AbsolutePath -&gt; TCM CheckResult)
-&gt; ReplM CheckResult
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(AbsolutePath -&gt; TCM CheckResult)
-&gt; AbsolutePath -&gt; TCM CheckResult
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">AbsolutePath
</span><a href="#local-6989586621682183909"><span class="hs-identifier hs-var">file</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((AbsolutePath -&gt; TCM CheckResult) -&gt; ReplM CheckResult)
-&gt; ReplM (AbsolutePath -&gt; TCM CheckResult) -&gt; ReplM CheckResult
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">=&lt;&lt;</span></span><span> </span><span class="annot"><span class="annottext">(ReplEnv -&gt; AbsolutePath -&gt; TCM CheckResult)
-&gt; ReplM (AbsolutePath -&gt; TCM CheckResult)
forall r (m :: * -&gt; *) a. MonadReader r m =&gt; (r -&gt; a) -&gt; m a
</span><span class="hs-identifier hs-var">asks</span></span><span> </span><span class="annot"><span class="annottext">ReplEnv -&gt; AbsolutePath -&gt; TCM CheckResult
</span><a href="Agda.Interaction.CommandLine.html#replTypeCheckAction"><span class="hs-identifier hs-var">replTypeCheckAction</span></a></span><span>
</span><span id="line-127"></span><span>
</span><span id="line-128"></span><span class="annot"><span class="hs-comment">-- | The interaction loop.</span></span><span>
</span><span id="line-129"></span><span class="annot"><a href="Agda.Interaction.CommandLine.html#interactionLoop"><span class="hs-identifier hs-type">interactionLoop</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Interaction.CommandLine.html#ReplM"><span class="hs-identifier hs-type">ReplM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-130"></span><span id="interactionLoop"><span class="annot"><span class="annottext">interactionLoop :: ReplM ()
</span><a href="Agda.Interaction.CommandLine.html#interactionLoop"><span class="hs-identifier hs-var hs-var">interactionLoop</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-131"></span><span>    </span><span class="hs-comment">-- Run the setup action</span><span>
</span><span id="line-132"></span><span>    </span><span class="annot"><span class="annottext">ReplM ()
</span><a href="Agda.Interaction.CommandLine.html#replSetup"><span class="hs-identifier hs-var">replSetup</span></a></span><span>
</span><span id="line-133"></span><span>    </span><span class="annot"><span class="annottext">ReplM ()
</span><a href="#local-6989586621682183910"><span class="hs-identifier hs-var">reload</span></a></span><span>
</span><span id="line-134"></span><span>    </span><span class="annot"><span class="annottext">String -&gt; [Command ()] -&gt; (String -&gt; TCM (ExitCode ())) -&gt; ReplM ()
forall a.
String -&gt; [Command a] -&gt; (String -&gt; TCM (ExitCode a)) -&gt; ReplM a
</span><a href="Agda.Interaction.CommandLine.html#interaction"><span class="hs-identifier hs-var">interaction</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Main&gt; &quot;</span></span><span> </span><span class="annot"><span class="annottext">[Command ()]
</span><a href="#local-6989586621682183911"><span class="hs-identifier hs-var">commands</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; TCM (ExitCode ())
forall a. String -&gt; TCM (ExitCode a)
</span><a href="Agda.Interaction.CommandLine.html#evalTerm"><span class="hs-identifier hs-var">evalTerm</span></a></span><span>
</span><span id="line-135"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-136"></span><span>        </span><span id="local-6989586621682183910"><span class="annot"><span class="annottext">ReplM ()
</span><a href="#local-6989586621682183910"><span class="hs-identifier hs-var">reload</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Interaction.CommandLine.html#ReplM"><span class="hs-identifier hs-type">ReplM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-137"></span><span>            </span><span id="local-6989586621682183931"><span class="annot"><a href="#local-6989586621682183931"><span class="hs-identifier hs-var">checked</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ReplM (Maybe CheckResult)
</span><a href="Agda.Interaction.CommandLine.html#checkCurrentFile"><span class="hs-identifier hs-var">checkCurrentFile</span></a></span><span>
</span><span id="line-138"></span><span>            </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#liftTCM"><span class="hs-identifier hs-type">liftTCM</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-139"></span><span>              </span><span class="hs-keyword">case</span><span> </span><span class="annot"><a href="#local-6989586621682183931"><span class="hs-identifier hs-type">checked</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-140"></span><span>                </span><span class="annot"><span class="annottext">Maybe CheckResult
</span><span class="hs-identifier hs-var">Nothing</span></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ScopeInfo -&gt; TCM ()
</span><a href="Agda.TypeChecking.Monad.State.html#setScope"><span class="hs-identifier hs-var">setScope</span></a></span><span> </span><span class="annot"><span class="annottext">ScopeInfo
</span><a href="Agda.Syntax.Scope.Base.html#emptyScopeInfo"><span class="hs-identifier hs-var">emptyScopeInfo</span></a></span><span>
</span><span id="line-141"></span><span>                </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621682183934"><span class="annot"><span class="annottext">CheckResult
</span><a href="#local-6989586621682183934"><span class="hs-identifier hs-var">scope</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="annot"><span class="annottext">ScopeInfo -&gt; TCM ()
</span><a href="Agda.TypeChecking.Monad.State.html#setScope"><span class="hs-identifier hs-var">setScope</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Interface -&gt; ScopeInfo
</span><a href="Agda.TypeChecking.Monad.Base.html#iInsideScope"><span class="hs-identifier hs-var">iInsideScope</span></a></span><span> </span><span class="annot"><span class="annottext">(Interface -&gt; ScopeInfo) -&gt; Interface -&gt; ScopeInfo
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">CheckResult -&gt; Interface
</span><a href="Agda.Interaction.Imports.html#crInterface"><span class="hs-identifier hs-var">crInterface</span></a></span><span> </span><span class="annot"><span class="annottext">CheckResult
</span><a href="#local-6989586621682183934"><span class="hs-identifier hs-var">scope</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-142"></span><span>                                 </span><span class="annot"><span class="annottext">TCM ()
forall (m :: * -&gt; *). MonadTCState m =&gt; m ()
</span><a href="Agda.TypeChecking.Monad.State.html#recomputeInverseScope"><span class="hs-identifier hs-var">recomputeInverseScope</span></a></span><span>
</span><span id="line-143"></span><span>            </span><span class="hs-comment">-- Andreas, 2021-01-27, issue #5132, make Set and Prop available from Agda.Primitive</span><span>
</span><span id="line-144"></span><span>            </span><span class="hs-comment">-- if no module is loaded.</span><span>
</span><span id="line-145"></span><span>            </span><span class="annot"><span class="hs-identifier hs-type">when</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">isNothing</span></span><span> </span><span class="annot"><a href="#local-6989586621682183931"><span class="hs-identifier hs-type">checked</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-146"></span><span>              </span><span class="hs-comment">-- @open import Agda.Primitive using (Set; Prop)@</span><span>
</span><span id="line-147"></span><span>              </span><span class="annot"><span class="hs-identifier hs-type">void</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#liftTCM"><span class="hs-identifier hs-type">liftTCM</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Translation.ConcreteToAbstract.html#importPrimitives"><span class="hs-identifier hs-type">importPrimitives</span></a></span><span>
</span><span id="line-148"></span><span>          </span><span class="annot"><span class="annottext">ReplM () -&gt; (TCErr -&gt; ReplM ()) -&gt; ReplM ()
forall a. ReplM a -&gt; (TCErr -&gt; ReplM a) -&gt; ReplM a
forall e (m :: * -&gt; *) a.
MonadError e m =&gt;
m a -&gt; (e -&gt; m a) -&gt; m a
</span><span class="hs-operator hs-var">`catchError`</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621682183941"><span class="annot"><span class="annottext">TCErr
</span><a href="#local-6989586621682183941"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-149"></span><span>            </span><span class="annot"><span class="annottext">Doc Aspects -&gt; ReplM ()
forall (m :: * -&gt; *).
(MonadIO m, HasOptions m) =&gt;
Doc Aspects -&gt; m ()
</span><a href="Agda.Syntax.Common.Pretty.ANSI.html#putDocLn"><span class="hs-identifier hs-var">putDocLn</span></a></span><span> </span><span class="annot"><span class="annottext">(Doc Aspects -&gt; ReplM ()) -&gt; ReplM (Doc Aspects) -&gt; ReplM ()
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">=&lt;&lt;</span></span><span> </span><span class="annot"><span class="annottext">TCErr -&gt; ReplM (Doc Aspects)
forall (tcm :: * -&gt; *). MonadTCM tcm =&gt; TCErr -&gt; tcm (Doc Aspects)
</span><a href="Agda.TypeChecking.Errors.html#prettyError"><span class="hs-identifier hs-var">prettyError</span></a></span><span> </span><span class="annot"><span class="annottext">TCErr
</span><a href="#local-6989586621682183941"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-150"></span><span>            </span><span class="annot"><span class="annottext">IO () -&gt; ReplM ()
forall a. IO a -&gt; ReplM a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; ReplM ()) -&gt; IO () -&gt; ReplM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; IO ()
</span><span class="hs-identifier hs-var">putStrLn</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Failed.&quot;</span></span><span>
</span><span id="line-151"></span><span>
</span><span id="line-152"></span><span>        </span><span id="local-6989586621682183911"><span class="annot"><span class="annottext">commands :: [Command ()]
</span><a href="#local-6989586621682183911"><span class="hs-identifier hs-var hs-var">commands</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-153"></span><span>            </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;quit&quot;</span></span><span>        </span><span class="annot"><span class="annottext">String -&gt; ([String] -&gt; ReplM (ExitCode ())) -&gt; Command ()
forall {a} {b}. a -&gt; b -&gt; (a, b)
</span><a href="#local-6989586621682183972"><span class="hs-operator hs-var">|&gt;</span></a></span><span>  </span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">[String]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ExitCode () -&gt; ReplM (ExitCode ())
forall a. a -&gt; ReplM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(ExitCode () -&gt; ReplM (ExitCode ()))
-&gt; ExitCode () -&gt; ReplM (ExitCode ())
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">() -&gt; ExitCode ()
forall a. a -&gt; ExitCode a
</span><a href="Agda.Interaction.CommandLine.html#Return"><span class="hs-identifier hs-var">Return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-154"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;?&quot;</span></span><span>           </span><span class="annot"><span class="annottext">String -&gt; ([String] -&gt; ReplM (ExitCode ())) -&gt; Command ()
forall {a} {b}. a -&gt; b -&gt; (a, b)
</span><a href="#local-6989586621682183972"><span class="hs-operator hs-var">|&gt;</span></a></span><span>  </span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">[String]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ReplM () -&gt; ReplM (ExitCode ())
forall a b. ReplM a -&gt; ReplM (ExitCode b)
</span><a href="Agda.Interaction.CommandLine.html#continueAfter"><span class="hs-identifier hs-var">continueAfter</span></a></span><span> </span><span class="annot"><span class="annottext">(ReplM () -&gt; ReplM (ExitCode ()))
-&gt; ReplM () -&gt; ReplM (ExitCode ())
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IO () -&gt; ReplM ()
forall a. IO a -&gt; ReplM a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; ReplM ()) -&gt; IO () -&gt; ReplM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Command ()] -&gt; IO ()
forall a. [Command a] -&gt; IO ()
</span><a href="Agda.Interaction.CommandLine.html#help"><span class="hs-identifier hs-var">help</span></a></span><span> </span><span class="annot"><span class="annottext">[Command ()]
</span><a href="#local-6989586621682183911"><span class="hs-identifier hs-var">commands</span></a></span><span>
</span><span id="line-155"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;reload&quot;</span></span><span>      </span><span class="annot"><span class="annottext">String -&gt; ([String] -&gt; ReplM (ExitCode ())) -&gt; Command ()
forall {a} {b}. a -&gt; b -&gt; (a, b)
</span><a href="#local-6989586621682183972"><span class="hs-operator hs-var">|&gt;</span></a></span><span>  </span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">[String]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="annot"><span class="annottext">ReplM ()
</span><a href="#local-6989586621682183910"><span class="hs-identifier hs-var">reload</span></a></span><span>
</span><span id="line-156"></span><span>                                         </span><span class="annot"><span class="annottext">TCEnv -&gt; ExitCode ()
forall a. TCEnv -&gt; ExitCode a
</span><a href="Agda.Interaction.CommandLine.html#ContinueIn"><span class="hs-identifier hs-var">ContinueIn</span></a></span><span> </span><span class="annot"><span class="annottext">(TCEnv -&gt; ExitCode ()) -&gt; ReplM TCEnv -&gt; ReplM (ExitCode ())
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ReplM TCEnv
forall (m :: * -&gt; *). MonadTCEnv m =&gt; m TCEnv
</span><a href="Agda.TypeChecking.Monad.Base.html#askTC"><span class="hs-identifier hs-var">askTC</span></a></span><span>
</span><span id="line-157"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;constraints&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ([String] -&gt; ReplM (ExitCode ())) -&gt; Command ()
forall {a} {b}. a -&gt; b -&gt; (a, b)
</span><a href="#local-6989586621682183972"><span class="hs-operator hs-var">|&gt;</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621682183976"><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621682183976"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ReplM () -&gt; ReplM (ExitCode ())
forall a b. ReplM a -&gt; ReplM (ExitCode b)
</span><a href="Agda.Interaction.CommandLine.html#continueAfter"><span class="hs-identifier hs-var">continueAfter</span></a></span><span> </span><span class="annot"><span class="annottext">(ReplM () -&gt; ReplM (ExitCode ()))
-&gt; ReplM () -&gt; ReplM (ExitCode ())
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCM () -&gt; ReplM ()
forall a. TCM a -&gt; ReplM a
forall (tcm :: * -&gt; *) a. MonadTCM tcm =&gt; TCM a -&gt; tcm a
</span><a href="Agda.TypeChecking.Monad.Base.html#liftTCM"><span class="hs-identifier hs-var">liftTCM</span></a></span><span> </span><span class="annot"><span class="annottext">(TCM () -&gt; ReplM ()) -&gt; TCM () -&gt; ReplM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[String] -&gt; TCM ()
</span><a href="Agda.Interaction.CommandLine.html#showConstraints"><span class="hs-identifier hs-var">showConstraints</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621682183976"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-158"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Context&quot;</span></span><span>     </span><span class="annot"><span class="annottext">String -&gt; ([String] -&gt; ReplM (ExitCode ())) -&gt; Command ()
forall {a} {b}. a -&gt; b -&gt; (a, b)
</span><a href="#local-6989586621682183972"><span class="hs-operator hs-var">|&gt;</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621682183978"><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621682183978"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ReplM () -&gt; ReplM (ExitCode ())
forall a b. ReplM a -&gt; ReplM (ExitCode b)
</span><a href="Agda.Interaction.CommandLine.html#continueAfter"><span class="hs-identifier hs-var">continueAfter</span></a></span><span> </span><span class="annot"><span class="annottext">(ReplM () -&gt; ReplM (ExitCode ()))
-&gt; ReplM () -&gt; ReplM (ExitCode ())
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCM () -&gt; ReplM ()
forall a. TCM a -&gt; ReplM a
forall (tcm :: * -&gt; *) a. MonadTCM tcm =&gt; TCM a -&gt; tcm a
</span><a href="Agda.TypeChecking.Monad.Base.html#liftTCM"><span class="hs-identifier hs-var">liftTCM</span></a></span><span> </span><span class="annot"><span class="annottext">(TCM () -&gt; ReplM ()) -&gt; TCM () -&gt; ReplM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[String] -&gt; TCM ()
</span><a href="Agda.Interaction.CommandLine.html#showContext"><span class="hs-identifier hs-var">showContext</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621682183978"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-159"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;give&quot;</span></span><span>        </span><span class="annot"><span class="annottext">String -&gt; ([String] -&gt; ReplM (ExitCode ())) -&gt; Command ()
forall {a} {b}. a -&gt; b -&gt; (a, b)
</span><a href="#local-6989586621682183972"><span class="hs-operator hs-var">|&gt;</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621682183980"><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621682183980"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ReplM () -&gt; ReplM (ExitCode ())
forall a b. ReplM a -&gt; ReplM (ExitCode b)
</span><a href="Agda.Interaction.CommandLine.html#continueAfter"><span class="hs-identifier hs-var">continueAfter</span></a></span><span> </span><span class="annot"><span class="annottext">(ReplM () -&gt; ReplM (ExitCode ()))
-&gt; ReplM () -&gt; ReplM (ExitCode ())
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCM () -&gt; ReplM ()
forall a. TCM a -&gt; ReplM a
forall (tcm :: * -&gt; *) a. MonadTCM tcm =&gt; TCM a -&gt; tcm a
</span><a href="Agda.TypeChecking.Monad.Base.html#liftTCM"><span class="hs-identifier hs-var">liftTCM</span></a></span><span> </span><span class="annot"><span class="annottext">(TCM () -&gt; ReplM ()) -&gt; TCM () -&gt; ReplM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[String] -&gt; TCM ()
</span><a href="Agda.Interaction.CommandLine.html#giveMeta"><span class="hs-identifier hs-var">giveMeta</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621682183980"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-160"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Refine&quot;</span></span><span>      </span><span class="annot"><span class="annottext">String -&gt; ([String] -&gt; ReplM (ExitCode ())) -&gt; Command ()
forall {a} {b}. a -&gt; b -&gt; (a, b)
</span><a href="#local-6989586621682183972"><span class="hs-operator hs-var">|&gt;</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621682183982"><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621682183982"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ReplM () -&gt; ReplM (ExitCode ())
forall a b. ReplM a -&gt; ReplM (ExitCode b)
</span><a href="Agda.Interaction.CommandLine.html#continueAfter"><span class="hs-identifier hs-var">continueAfter</span></a></span><span> </span><span class="annot"><span class="annottext">(ReplM () -&gt; ReplM (ExitCode ()))
-&gt; ReplM () -&gt; ReplM (ExitCode ())
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCM () -&gt; ReplM ()
forall a. TCM a -&gt; ReplM a
forall (tcm :: * -&gt; *) a. MonadTCM tcm =&gt; TCM a -&gt; tcm a
</span><a href="Agda.TypeChecking.Monad.Base.html#liftTCM"><span class="hs-identifier hs-var">liftTCM</span></a></span><span> </span><span class="annot"><span class="annottext">(TCM () -&gt; ReplM ()) -&gt; TCM () -&gt; ReplM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[String] -&gt; TCM ()
</span><a href="Agda.Interaction.CommandLine.html#refineMeta"><span class="hs-identifier hs-var">refineMeta</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621682183982"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-161"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;metas&quot;</span></span><span>       </span><span class="annot"><span class="annottext">String -&gt; ([String] -&gt; ReplM (ExitCode ())) -&gt; Command ()
forall {a} {b}. a -&gt; b -&gt; (a, b)
</span><a href="#local-6989586621682183972"><span class="hs-operator hs-var">|&gt;</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621682183984"><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621682183984"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ReplM () -&gt; ReplM (ExitCode ())
forall a b. ReplM a -&gt; ReplM (ExitCode b)
</span><a href="Agda.Interaction.CommandLine.html#continueAfter"><span class="hs-identifier hs-var">continueAfter</span></a></span><span> </span><span class="annot"><span class="annottext">(ReplM () -&gt; ReplM (ExitCode ()))
-&gt; ReplM () -&gt; ReplM (ExitCode ())
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCM () -&gt; ReplM ()
forall a. TCM a -&gt; ReplM a
forall (tcm :: * -&gt; *) a. MonadTCM tcm =&gt; TCM a -&gt; tcm a
</span><a href="Agda.TypeChecking.Monad.Base.html#liftTCM"><span class="hs-identifier hs-var">liftTCM</span></a></span><span> </span><span class="annot"><span class="annottext">(TCM () -&gt; ReplM ()) -&gt; TCM () -&gt; ReplM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[String] -&gt; TCM ()
</span><a href="Agda.Interaction.CommandLine.html#showMetas"><span class="hs-identifier hs-var">showMetas</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621682183984"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-162"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;load&quot;</span></span><span>        </span><span class="annot"><span class="annottext">String -&gt; ([String] -&gt; ReplM (ExitCode ())) -&gt; Command ()
forall {a} {b}. a -&gt; b -&gt; (a, b)
</span><a href="#local-6989586621682183972"><span class="hs-operator hs-var">|&gt;</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621682183986"><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621682183986"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ReplM () -&gt; ReplM (ExitCode ())
forall a b. ReplM a -&gt; ReplM (ExitCode b)
</span><a href="Agda.Interaction.CommandLine.html#continueAfter"><span class="hs-identifier hs-var">continueAfter</span></a></span><span> </span><span class="annot"><span class="annottext">(ReplM () -&gt; ReplM (ExitCode ()))
-&gt; ReplM () -&gt; ReplM (ExitCode ())
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ReplM () -&gt; [String] -&gt; ReplM ()
</span><a href="Agda.Interaction.CommandLine.html#loadFile"><span class="hs-identifier hs-var">loadFile</span></a></span><span> </span><span class="annot"><span class="annottext">ReplM ()
</span><a href="#local-6989586621682183910"><span class="hs-identifier hs-var">reload</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621682183986"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-163"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;eval&quot;</span></span><span>        </span><span class="annot"><span class="annottext">String -&gt; ([String] -&gt; ReplM (ExitCode ())) -&gt; Command ()
forall {a} {b}. a -&gt; b -&gt; (a, b)
</span><a href="#local-6989586621682183972"><span class="hs-operator hs-var">|&gt;</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621682183988"><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621682183988"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ReplM () -&gt; ReplM (ExitCode ())
forall a b. ReplM a -&gt; ReplM (ExitCode b)
</span><a href="Agda.Interaction.CommandLine.html#continueAfter"><span class="hs-identifier hs-var">continueAfter</span></a></span><span> </span><span class="annot"><span class="annottext">(ReplM () -&gt; ReplM (ExitCode ()))
-&gt; ReplM () -&gt; ReplM (ExitCode ())
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCM () -&gt; ReplM ()
forall a. TCM a -&gt; ReplM a
forall (tcm :: * -&gt; *) a. MonadTCM tcm =&gt; TCM a -&gt; tcm a
</span><a href="Agda.TypeChecking.Monad.Base.html#liftTCM"><span class="hs-identifier hs-var">liftTCM</span></a></span><span> </span><span class="annot"><span class="annottext">(TCM () -&gt; ReplM ()) -&gt; TCM () -&gt; ReplM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[String] -&gt; TCM ()
</span><a href="Agda.Interaction.CommandLine.html#evalIn"><span class="hs-identifier hs-var">evalIn</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621682183988"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-164"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;typeOf&quot;</span></span><span>      </span><span class="annot"><span class="annottext">String -&gt; ([String] -&gt; ReplM (ExitCode ())) -&gt; Command ()
forall {a} {b}. a -&gt; b -&gt; (a, b)
</span><a href="#local-6989586621682183972"><span class="hs-operator hs-var">|&gt;</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621682183990"><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621682183990"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ReplM () -&gt; ReplM (ExitCode ())
forall a b. ReplM a -&gt; ReplM (ExitCode b)
</span><a href="Agda.Interaction.CommandLine.html#continueAfter"><span class="hs-identifier hs-var">continueAfter</span></a></span><span> </span><span class="annot"><span class="annottext">(ReplM () -&gt; ReplM (ExitCode ()))
-&gt; ReplM () -&gt; ReplM (ExitCode ())
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCM () -&gt; ReplM ()
forall a. TCM a -&gt; ReplM a
forall (tcm :: * -&gt; *) a. MonadTCM tcm =&gt; TCM a -&gt; tcm a
</span><a href="Agda.TypeChecking.Monad.Base.html#liftTCM"><span class="hs-identifier hs-var">liftTCM</span></a></span><span> </span><span class="annot"><span class="annottext">(TCM () -&gt; ReplM ()) -&gt; TCM () -&gt; ReplM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[String] -&gt; TCM ()
</span><a href="Agda.Interaction.CommandLine.html#typeOf"><span class="hs-identifier hs-var">typeOf</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621682183990"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-165"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;typeIn&quot;</span></span><span>      </span><span class="annot"><span class="annottext">String -&gt; ([String] -&gt; ReplM (ExitCode ())) -&gt; Command ()
forall {a} {b}. a -&gt; b -&gt; (a, b)
</span><a href="#local-6989586621682183972"><span class="hs-operator hs-var">|&gt;</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621682183992"><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621682183992"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ReplM () -&gt; ReplM (ExitCode ())
forall a b. ReplM a -&gt; ReplM (ExitCode b)
</span><a href="Agda.Interaction.CommandLine.html#continueAfter"><span class="hs-identifier hs-var">continueAfter</span></a></span><span> </span><span class="annot"><span class="annottext">(ReplM () -&gt; ReplM (ExitCode ()))
-&gt; ReplM () -&gt; ReplM (ExitCode ())
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCM () -&gt; ReplM ()
forall a. TCM a -&gt; ReplM a
forall (tcm :: * -&gt; *) a. MonadTCM tcm =&gt; TCM a -&gt; tcm a
</span><a href="Agda.TypeChecking.Monad.Base.html#liftTCM"><span class="hs-identifier hs-var">liftTCM</span></a></span><span> </span><span class="annot"><span class="annottext">(TCM () -&gt; ReplM ()) -&gt; TCM () -&gt; ReplM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[String] -&gt; TCM ()
</span><a href="Agda.Interaction.CommandLine.html#typeIn"><span class="hs-identifier hs-var">typeIn</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621682183992"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-166"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;wakeup&quot;</span></span><span>      </span><span class="annot"><span class="annottext">String -&gt; ([String] -&gt; ReplM (ExitCode ())) -&gt; Command ()
forall {a} {b}. a -&gt; b -&gt; (a, b)
</span><a href="#local-6989586621682183972"><span class="hs-operator hs-var">|&gt;</span></a></span><span> </span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">[String]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ReplM () -&gt; ReplM (ExitCode ())
forall a b. ReplM a -&gt; ReplM (ExitCode b)
</span><a href="Agda.Interaction.CommandLine.html#continueAfter"><span class="hs-identifier hs-var">continueAfter</span></a></span><span> </span><span class="annot"><span class="annottext">(ReplM () -&gt; ReplM (ExitCode ()))
-&gt; ReplM () -&gt; ReplM (ExitCode ())
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCM () -&gt; ReplM ()
forall a. TCM a -&gt; ReplM a
forall (tcm :: * -&gt; *) a. MonadTCM tcm =&gt; TCM a -&gt; tcm a
</span><a href="Agda.TypeChecking.Monad.Base.html#liftTCM"><span class="hs-identifier hs-var">liftTCM</span></a></span><span> </span><span class="annot"><span class="annottext">(TCM () -&gt; ReplM ()) -&gt; TCM () -&gt; ReplM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCM ()
</span><a href="Agda.Interaction.CommandLine.html#retryConstraints"><span class="hs-identifier hs-var">retryConstraints</span></a></span><span>
</span><span id="line-167"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;scope&quot;</span></span><span>       </span><span class="annot"><span class="annottext">String -&gt; ([String] -&gt; ReplM (ExitCode ())) -&gt; Command ()
forall {a} {b}. a -&gt; b -&gt; (a, b)
</span><a href="#local-6989586621682183972"><span class="hs-operator hs-var">|&gt;</span></a></span><span> </span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">[String]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ReplM () -&gt; ReplM (ExitCode ())
forall a b. ReplM a -&gt; ReplM (ExitCode b)
</span><a href="Agda.Interaction.CommandLine.html#continueAfter"><span class="hs-identifier hs-var">continueAfter</span></a></span><span> </span><span class="annot"><span class="annottext">(ReplM () -&gt; ReplM (ExitCode ()))
-&gt; ReplM () -&gt; ReplM (ExitCode ())
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCM () -&gt; ReplM ()
forall a. TCM a -&gt; ReplM a
forall (tcm :: * -&gt; *) a. MonadTCM tcm =&gt; TCM a -&gt; tcm a
</span><a href="Agda.TypeChecking.Monad.Base.html#liftTCM"><span class="hs-identifier hs-var">liftTCM</span></a></span><span> </span><span class="annot"><span class="annottext">(TCM () -&gt; ReplM ()) -&gt; TCM () -&gt; ReplM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCM ()
</span><a href="Agda.Interaction.CommandLine.html#showScope"><span class="hs-identifier hs-var">showScope</span></a></span><span>
</span><span id="line-168"></span><span>            </span><span class="hs-special">]</span><span>
</span><span id="line-169"></span><span>            </span><span class="hs-keyword">where</span><span>
</span><span id="line-170"></span><span>                </span><span id="local-6989586621682183972"><span class="annot"><span class="annottext">|&gt; :: a -&gt; b -&gt; (a, b)
</span><a href="#local-6989586621682183972"><span class="hs-operator hs-var hs-var">(|&gt;)</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-special">,</span><span class="hs-special">)</span><span>
</span><span id="line-171"></span><span>
</span><span id="line-172"></span><span id="local-6989586621682183078"><span id="local-6989586621682183079"><span class="annot"><a href="Agda.Interaction.CommandLine.html#continueAfter"><span class="hs-identifier hs-type">continueAfter</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Interaction.CommandLine.html#ReplM"><span class="hs-identifier hs-type">ReplM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682183078"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Interaction.CommandLine.html#ReplM"><span class="hs-identifier hs-type">ReplM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Interaction.CommandLine.html#ExitCode"><span class="hs-identifier hs-type">ExitCode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682183079"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-173"></span><span id="continueAfter"><span class="annot"><span class="annottext">continueAfter :: forall a b. ReplM a -&gt; ReplM (ExitCode b)
</span><a href="Agda.Interaction.CommandLine.html#continueAfter"><span class="hs-identifier hs-var hs-var">continueAfter</span></a></span></span><span> </span><span id="local-6989586621682183998"><span class="annot"><span class="annottext">ReplM a
</span><a href="#local-6989586621682183998"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ReplM (ExitCode b) -&gt; ReplM (ExitCode b)
forall a. ReplM a -&gt; ReplM a
</span><a href="Agda.Interaction.CommandLine.html#withCurrentFile"><span class="hs-identifier hs-var">withCurrentFile</span></a></span><span> </span><span class="annot"><span class="annottext">(ReplM (ExitCode b) -&gt; ReplM (ExitCode b))
-&gt; ReplM (ExitCode b) -&gt; ReplM (ExitCode b)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-174"></span><span>  </span><span class="annot"><span class="annottext">ReplM a
</span><a href="#local-6989586621682183998"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">ReplM a -&gt; ReplM (ExitCode b) -&gt; ReplM (ExitCode b)
forall a b. ReplM a -&gt; ReplM b -&gt; ReplM b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; m b -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">ExitCode b -&gt; ReplM (ExitCode b)
forall a. a -&gt; ReplM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">ExitCode b
forall a. ExitCode a
</span><a href="Agda.Interaction.CommandLine.html#Continue"><span class="hs-identifier hs-var">Continue</span></a></span><span>
</span><span id="line-175"></span><span>
</span><span id="line-176"></span><span class="annot"><span class="hs-comment">-- | Set 'envCurrentPath' to the repl's current file</span></span><span>
</span><span id="line-177"></span><span id="local-6989586621682183086"><span class="annot"><a href="Agda.Interaction.CommandLine.html#withCurrentFile"><span class="hs-identifier hs-type">withCurrentFile</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Interaction.CommandLine.html#ReplM"><span class="hs-identifier hs-type">ReplM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682183086"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Interaction.CommandLine.html#ReplM"><span class="hs-identifier hs-type">ReplM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682183086"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-178"></span><span id="withCurrentFile"><span class="annot"><span class="annottext">withCurrentFile :: forall a. ReplM a -&gt; ReplM a
</span><a href="Agda.Interaction.CommandLine.html#withCurrentFile"><span class="hs-identifier hs-var hs-var">withCurrentFile</span></a></span></span><span> </span><span id="local-6989586621682184008"><span class="annot"><span class="annottext">ReplM a
</span><a href="#local-6989586621682184008"><span class="hs-identifier hs-var">cont</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-179"></span><span>  </span><span id="local-6989586621682184009"><span class="annot"><a href="#local-6989586621682184009"><span class="hs-identifier hs-var">mpath</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(ReplState -&gt; Maybe AbsolutePath) -&gt; ReplM (Maybe AbsolutePath)
forall s (m :: * -&gt; *) a. MonadState s m =&gt; (s -&gt; a) -&gt; m a
</span><span class="hs-identifier hs-var">gets</span></span><span> </span><span class="annot"><span class="annottext">ReplState -&gt; Maybe AbsolutePath
</span><a href="Agda.Interaction.CommandLine.html#currentFile"><span class="hs-identifier hs-var">currentFile</span></a></span><span>
</span><span id="line-180"></span><span>  </span><span id="local-6989586621682184010"><span class="annot"><a href="#local-6989586621682184010"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="hs-identifier hs-type">traverse</span></span><span> </span><span class="annot"><a href="Agda.Utils.FileId.html#idFromFile"><span class="hs-identifier hs-type">idFromFile</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682184009"><span class="hs-identifier hs-type">mpath</span></a></span><span>
</span><span id="line-181"></span><span>  </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#localTC"><span class="hs-identifier hs-type">localTC</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621682184011"><span class="annot"><span class="annottext">TCEnv
</span><a href="#local-6989586621682184011"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TCEnv
</span><a href="#local-6989586621682184011"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#envCurrentPath"><span class="hs-identifier hs-var">envCurrentPath</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682184010"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621682184008"><span class="hs-identifier hs-type">cont</span></a></span><span>
</span><span id="line-182"></span><span>
</span><span id="line-183"></span><span class="annot"><a href="Agda.Interaction.CommandLine.html#loadFile"><span class="hs-identifier hs-type">loadFile</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Interaction.CommandLine.html#ReplM"><span class="hs-identifier hs-type">ReplM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Interaction.CommandLine.html#ReplM"><span class="hs-identifier hs-type">ReplM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-184"></span><span id="loadFile"><span class="annot"><span class="annottext">loadFile :: ReplM () -&gt; [String] -&gt; ReplM ()
</span><a href="Agda.Interaction.CommandLine.html#loadFile"><span class="hs-identifier hs-var hs-var">loadFile</span></a></span></span><span> </span><span id="local-6989586621682184012"><span class="annot"><span class="annottext">ReplM ()
</span><a href="#local-6989586621682184012"><span class="hs-identifier hs-var">reload</span></a></span></span><span> </span><span class="hs-special">[</span><span id="local-6989586621682184013"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682184013"><span class="hs-identifier hs-var">file</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-185"></span><span>  </span><span id="local-6989586621682184014"><span class="annot"><a href="#local-6989586621682184014"><span class="hs-identifier hs-var">absPath</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO AbsolutePath -&gt; ReplM AbsolutePath
forall a. IO a -&gt; ReplM a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">(IO AbsolutePath -&gt; ReplM AbsolutePath)
-&gt; IO AbsolutePath -&gt; ReplM AbsolutePath
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; IO AbsolutePath
</span><a href="Agda.Utils.FileName.html#absolute"><span class="hs-identifier hs-var">absolute</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682184013"><span class="hs-identifier hs-var">file</span></a></span><span>
</span><span id="line-186"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">modify</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="Agda.Interaction.CommandLine.html#ReplState"><span class="hs-identifier hs-type">ReplState</span></a></span><span> </span><span id="local-6989586621682184016"><span class="annot"><span class="annottext">Maybe AbsolutePath
</span><a href="#local-6989586621682184016"><span class="hs-identifier hs-var">_prevFile</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe AbsolutePath -&gt; ReplState
</span><a href="Agda.Interaction.CommandLine.html#ReplState"><span class="hs-identifier hs-var">ReplState</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AbsolutePath -&gt; Maybe AbsolutePath
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">AbsolutePath
</span><a href="#local-6989586621682184014"><span class="hs-identifier hs-var">absPath</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-187"></span><span>  </span><span class="annot"><a href="Agda.Interaction.CommandLine.html#withCurrentFile"><span class="hs-identifier hs-type">withCurrentFile</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682184012"><span class="hs-identifier hs-type">reload</span></a></span><span>
</span><span id="line-188"></span><span class="annot"><a href="Agda.Interaction.CommandLine.html#loadFile"><span class="hs-identifier hs-var">loadFile</span></a></span><span> </span><span class="annot"><span class="annottext">ReplM ()
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[String]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IO () -&gt; ReplM ()
forall a. IO a -&gt; ReplM a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; ReplM ()) -&gt; IO () -&gt; ReplM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; IO ()
</span><span class="hs-identifier hs-var">putStrLn</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;:load file&quot;</span></span><span>
</span><span id="line-189"></span><span>
</span><span id="line-190"></span><span class="annot"><a href="Agda.Interaction.CommandLine.html#showConstraints"><span class="hs-identifier hs-type">showConstraints</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">TCM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-191"></span><span id="showConstraints"><span class="annot"><span class="annottext">showConstraints :: [String] -&gt; TCM ()
</span><a href="Agda.Interaction.CommandLine.html#showConstraints"><span class="hs-identifier hs-var hs-var">showConstraints</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-192"></span><span>    </span><span class="hs-keyword">do</span><span>  </span><span id="local-6989586621682184017"><span class="annot"><a href="#local-6989586621682184017"><span class="hs-identifier hs-var">cs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Rewrite -&gt; TCM [OutputForm Expr Expr]
</span><a href="Agda.Interaction.BasicOps.html#getConstraints"><span class="hs-identifier hs-var">BasicOps.getConstraints</span></a></span><span> </span><span class="annot"><span class="annottext">Rewrite
</span><a href="Agda.Interaction.Base.html#AsIs"><span class="hs-identifier hs-var">AsIs</span></a></span><span>
</span><span id="line-193"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">liftIO</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">putStrLn</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">unlines</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">List.map</span></span><span> </span><span class="annot"><a href="Agda.Syntax.Common.Pretty.html#prettyShow"><span class="hs-identifier hs-type">prettyShow</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682184017"><span class="hs-identifier hs-type">cs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-194"></span><span class="annot"><a href="Agda.Interaction.CommandLine.html#showConstraints"><span class="hs-identifier hs-var">showConstraints</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IO () -&gt; TCM ()
forall a. IO a -&gt; TCMT IO a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; TCM ()) -&gt; IO () -&gt; TCM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; IO ()
</span><span class="hs-identifier hs-var">putStrLn</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;:constraints [cid]&quot;</span></span><span>
</span><span id="line-195"></span><span>
</span><span id="line-196"></span><span>
</span><span id="line-197"></span><span class="annot"><a href="Agda.Interaction.CommandLine.html#showMetas"><span class="hs-identifier hs-type">showMetas</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">TCM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-198"></span><span id="showMetas"><span class="annot"><span class="annottext">showMetas :: [String] -&gt; TCM ()
</span><a href="Agda.Interaction.CommandLine.html#showMetas"><span class="hs-identifier hs-var hs-var">showMetas</span></a></span></span><span> </span><span class="hs-special">[</span><span id="local-6989586621682184022"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682184022"><span class="hs-identifier hs-var">m</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-199"></span><span>    </span><span class="hs-keyword">do</span><span>  </span><span id="local-6989586621682184023"><span class="annot"><a href="#local-6989586621682184023"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Nat -&gt; InteractionId
</span><a href="Agda.Syntax.Common.html#InteractionId"><span class="hs-identifier hs-var">InteractionId</span></a></span><span> </span><span class="annot"><span class="annottext">(Nat -&gt; InteractionId) -&gt; TCMT IO Nat -&gt; TCMT IO InteractionId
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; TCMT IO Nat
forall a. Read a =&gt; String -&gt; TCM a
</span><a href="Agda.Interaction.CommandLine.html#readM"><span class="hs-identifier hs-var">readM</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682184022"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-200"></span><span>        </span><span class="annot"><a href="Agda.TypeChecking.Monad.MetaVars.html#withInteractionId"><span class="hs-identifier hs-type">withInteractionId</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682184023"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-201"></span><span>          </span><span id="local-6989586621682184027"><span class="annot"><a href="#local-6989586621682184027"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="Agda.Interaction.BasicOps.html#typeOfMeta"><span class="hs-identifier hs-type">typeOfMeta</span></a></span><span> </span><span class="annot"><a href="Agda.Interaction.Base.html#AsIs"><span class="hs-identifier hs-type">AsIs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682184023"><span class="hs-identifier hs-type">i</span></a></span><span>
</span><span id="line-202"></span><span>          </span><span id="local-6989586621682184029"><span class="annot"><a href="#local-6989586621682184029"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.MetaVars.html#getInteractionRange"><span class="hs-identifier hs-type">getInteractionRange</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682184023"><span class="hs-identifier hs-type">i</span></a></span><span>
</span><span id="line-203"></span><span>          </span><span id="local-6989586621682184031"><span class="annot"><a href="#local-6989586621682184031"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="Agda.Syntax.Abstract.Pretty.html#prettyA"><span class="hs-identifier hs-type">prettyA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682184027"><span class="hs-identifier hs-type">s</span></a></span><span>
</span><span id="line-204"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">liftIO</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">putStrLn</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">render</span></span><span> </span><span class="annot"><a href="#local-6989586621682184031"><span class="hs-identifier hs-type">d</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">++</span></span><span> </span><span class="annot"><span class="hs-string">&quot; &quot;</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">++</span></span><span> </span><span class="annot"><a href="Agda.Syntax.Common.Pretty.html#prettyShow"><span class="hs-identifier hs-type">prettyShow</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682184029"><span class="hs-identifier hs-type">r</span></a></span><span>
</span><span id="line-205"></span><span class="annot"><a href="Agda.Interaction.CommandLine.html#showMetas"><span class="hs-identifier hs-var">showMetas</span></a></span><span> </span><span class="hs-special">[</span><span id="local-6989586621682184034"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682184034"><span class="hs-identifier hs-var">m</span></a></span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;normal&quot;</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-206"></span><span>    </span><span class="hs-keyword">do</span><span>  </span><span id="local-6989586621682184035"><span class="annot"><a href="#local-6989586621682184035"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Nat -&gt; InteractionId
</span><a href="Agda.Syntax.Common.html#InteractionId"><span class="hs-identifier hs-var">InteractionId</span></a></span><span> </span><span class="annot"><span class="annottext">(Nat -&gt; InteractionId) -&gt; TCMT IO Nat -&gt; TCMT IO InteractionId
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; TCMT IO Nat
forall a. Read a =&gt; String -&gt; TCM a
</span><a href="Agda.Interaction.CommandLine.html#readM"><span class="hs-identifier hs-var">readM</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682184034"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-207"></span><span>        </span><span class="annot"><a href="Agda.TypeChecking.Monad.MetaVars.html#withInteractionId"><span class="hs-identifier hs-type">withInteractionId</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682184035"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-208"></span><span>          </span><span id="local-6989586621682184036"><span class="annot"><a href="#local-6989586621682184036"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="Agda.Syntax.Abstract.Pretty.html#prettyA"><span class="hs-identifier hs-type">prettyA</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">=&lt;&lt;</span></span><span> </span><span class="annot"><a href="Agda.Interaction.BasicOps.html#typeOfMeta"><span class="hs-identifier hs-type">typeOfMeta</span></a></span><span> </span><span class="annot"><a href="Agda.Interaction.Base.html#Normalised"><span class="hs-identifier hs-type">Normalised</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682184035"><span class="hs-identifier hs-type">i</span></a></span><span>
</span><span id="line-209"></span><span>          </span><span id="local-6989586621682184038"><span class="annot"><a href="#local-6989586621682184038"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.MetaVars.html#getInteractionRange"><span class="hs-identifier hs-type">getInteractionRange</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682184035"><span class="hs-identifier hs-type">i</span></a></span><span>
</span><span id="line-210"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">liftIO</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">putStrLn</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">render</span></span><span> </span><span class="annot"><a href="#local-6989586621682184036"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">++</span></span><span> </span><span class="annot"><span class="hs-string">&quot; &quot;</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">++</span></span><span> </span><span class="annot"><a href="Agda.Syntax.Common.Pretty.html#prettyShow"><span class="hs-identifier hs-type">prettyShow</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682184038"><span class="hs-identifier hs-type">r</span></a></span><span>
</span><span id="line-211"></span><span class="annot"><a href="Agda.Interaction.CommandLine.html#showMetas"><span class="hs-identifier hs-var">showMetas</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-212"></span><span>    </span><span class="hs-keyword">do</span><span>  </span><span id="local-6989586621682184039"><span class="annot"><a href="#local-6989586621682184039"><span class="hs-identifier hs-var">interactionMetas</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Rewrite -&gt; TCM [OutputConstraint Expr InteractionId]
</span><a href="Agda.Interaction.BasicOps.html#typesOfVisibleMetas"><span class="hs-identifier hs-var">typesOfVisibleMetas</span></a></span><span> </span><span class="annot"><span class="annottext">Rewrite
</span><a href="Agda.Interaction.Base.html#AsIs"><span class="hs-identifier hs-var">AsIs</span></a></span><span>
</span><span id="line-213"></span><span>        </span><span id="local-6989586621682184041"><span class="annot"><a href="#local-6989586621682184041"><span class="hs-identifier hs-var">hiddenMetas</span></a></span></span><span>      </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="Agda.Interaction.BasicOps.html#typesOfHiddenMetas"><span class="hs-identifier hs-type">typesOfHiddenMetas</span></a></span><span>  </span><span class="annot"><a href="Agda.Interaction.Base.html#AsIs"><span class="hs-identifier hs-type">AsIs</span></a></span><span>
</span><span id="line-214"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">mapM_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">liftIO</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">.</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">print</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">=&lt;&lt;</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">mapM</span></span><span> </span><span class="annot"><a href="#local-6989586621682184045"><span class="hs-identifier hs-type">showII</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682184039"><span class="hs-identifier hs-type">interactionMetas</span></a></span><span>
</span><span id="line-215"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">mapM_</span></span><span> </span><span class="annot"><a href="#local-6989586621682184046"><span class="hs-identifier hs-type">print'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682184041"><span class="hs-identifier hs-type">hiddenMetas</span></a></span><span>
</span><span id="line-216"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-217"></span><span>        </span><span id="local-6989586621682184045"><span class="annot"><span class="annottext">showII :: OutputConstraint_boot TCErr a InteractionId -&gt; m (Doc Aspects)
</span><a href="#local-6989586621682184045"><span class="hs-identifier hs-var hs-var">showII</span></a></span></span><span> </span><span id="local-6989586621682184221"><span class="annot"><span class="annottext">OutputConstraint_boot TCErr a InteractionId
</span><a href="#local-6989586621682184221"><span class="hs-identifier hs-var">o</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">InteractionId -&gt; m (Doc Aspects) -&gt; m (Doc Aspects)
forall (m :: * -&gt; *) a.
(MonadDebug m, ReadTCState m, MonadError TCErr m, MonadTCEnv m,
 MonadTrace m) =&gt;
InteractionId -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.MetaVars.html#withInteractionId"><span class="hs-identifier hs-var">withInteractionId</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OutputForm a InteractionId -&gt; InteractionId
forall a b. OutputForm a b -&gt; b
</span><a href="Agda.Interaction.BasicOps.html#outputFormId"><span class="hs-identifier hs-var">outputFormId</span></a></span><span> </span><span class="annot"><span class="annottext">(OutputForm a InteractionId -&gt; InteractionId)
-&gt; OutputForm a InteractionId -&gt; InteractionId
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Range
-&gt; [ProblemId]
-&gt; Blocker
-&gt; OutputConstraint_boot TCErr a InteractionId
-&gt; OutputForm a InteractionId
forall tcErr a b.
Range
-&gt; [ProblemId]
-&gt; Blocker
-&gt; OutputConstraint_boot tcErr a b
-&gt; OutputForm_boot tcErr a b
</span><a href="Agda.Interaction.Base.html#OutputForm"><span class="hs-identifier hs-var">OutputForm</span></a></span><span> </span><span class="annot"><span class="annottext">Range
forall a. Range' a
</span><a href="Agda.Syntax.Position.html#noRange"><span class="hs-identifier hs-var">noRange</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">Blocker
</span><a href="Agda.Syntax.Internal.Blockers.html#alwaysUnblock"><span class="hs-identifier hs-var">alwaysUnblock</span></a></span><span> </span><span class="annot"><span class="annottext">OutputConstraint_boot TCErr a InteractionId
</span><a href="#local-6989586621682184221"><span class="hs-identifier hs-var">o</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(m (Doc Aspects) -&gt; m (Doc Aspects))
-&gt; m (Doc Aspects) -&gt; m (Doc Aspects)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">OutputConstraint_boot TCErr a InteractionId -&gt; m (Doc Aspects)
forall a (m :: * -&gt; *).
(ToConcrete a, Pretty (ConOfAbs a), MonadAbsToCon m) =&gt;
a -&gt; m (Doc Aspects)
</span><a href="Agda.Syntax.Abstract.Pretty.html#prettyA"><span class="hs-identifier hs-var">prettyA</span></a></span><span> </span><span class="annot"><span class="annottext">OutputConstraint_boot TCErr a InteractionId
</span><a href="#local-6989586621682184221"><span class="hs-identifier hs-var">o</span></a></span><span>
</span><span id="line-218"></span><span>        </span><span id="local-6989586621682184386"><span class="annot"><span class="annottext">showM :: OutputConstraint_boot TCErr a NamedMeta -&gt; m (Doc Aspects)
</span><a href="#local-6989586621682184386"><span class="hs-identifier hs-var hs-var">showM</span></a></span></span><span>  </span><span id="local-6989586621682184387"><span class="annot"><span class="annottext">OutputConstraint_boot TCErr a NamedMeta
</span><a href="#local-6989586621682184387"><span class="hs-identifier hs-var">o</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MetaId -&gt; m (Doc Aspects) -&gt; m (Doc Aspects)
forall (m :: * -&gt; *) a.
(HasCallStack, MonadDebug m, MonadTCEnv m, MonadTrace m,
 ReadTCState m) =&gt;
MetaId -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.MetaVars.html#withMetaId"><span class="hs-identifier hs-var">withMetaId</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NamedMeta -&gt; MetaId
</span><a href="Agda.TypeChecking.Monad.Base.Types.html#nmid"><span class="hs-identifier hs-var">nmid</span></a></span><span> </span><span class="annot"><span class="annottext">(NamedMeta -&gt; MetaId) -&gt; NamedMeta -&gt; MetaId
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">OutputForm a NamedMeta -&gt; NamedMeta
forall a b. OutputForm a b -&gt; b
</span><a href="Agda.Interaction.BasicOps.html#outputFormId"><span class="hs-identifier hs-var">outputFormId</span></a></span><span> </span><span class="annot"><span class="annottext">(OutputForm a NamedMeta -&gt; NamedMeta)
-&gt; OutputForm a NamedMeta -&gt; NamedMeta
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Range
-&gt; [ProblemId]
-&gt; Blocker
-&gt; OutputConstraint_boot TCErr a NamedMeta
-&gt; OutputForm a NamedMeta
forall tcErr a b.
Range
-&gt; [ProblemId]
-&gt; Blocker
-&gt; OutputConstraint_boot tcErr a b
-&gt; OutputForm_boot tcErr a b
</span><a href="Agda.Interaction.Base.html#OutputForm"><span class="hs-identifier hs-var">OutputForm</span></a></span><span> </span><span class="annot"><span class="annottext">Range
forall a. Range' a
</span><a href="Agda.Syntax.Position.html#noRange"><span class="hs-identifier hs-var">noRange</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">Blocker
</span><a href="Agda.Syntax.Internal.Blockers.html#alwaysUnblock"><span class="hs-identifier hs-var">alwaysUnblock</span></a></span><span> </span><span class="annot"><span class="annottext">OutputConstraint_boot TCErr a NamedMeta
</span><a href="#local-6989586621682184387"><span class="hs-identifier hs-var">o</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(m (Doc Aspects) -&gt; m (Doc Aspects))
-&gt; m (Doc Aspects) -&gt; m (Doc Aspects)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">OutputConstraint_boot TCErr a NamedMeta -&gt; m (Doc Aspects)
forall a (m :: * -&gt; *).
(ToConcrete a, Pretty (ConOfAbs a), MonadAbsToCon m) =&gt;
a -&gt; m (Doc Aspects)
</span><a href="Agda.Syntax.Abstract.Pretty.html#prettyA"><span class="hs-identifier hs-var">prettyA</span></a></span><span> </span><span class="annot"><span class="annottext">OutputConstraint_boot TCErr a NamedMeta
</span><a href="#local-6989586621682184387"><span class="hs-identifier hs-var">o</span></a></span><span>
</span><span id="line-219"></span><span>
</span><span id="line-220"></span><span>        </span><span id="local-6989586621682184392"><span class="annot"><span class="annottext">metaId :: OutputConstraint_boot tcErr a b -&gt; b
</span><a href="#local-6989586621682184392"><span class="hs-identifier hs-var hs-var">metaId</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Interaction.Base.html#OfType"><span class="hs-identifier hs-type">OfType</span></a></span><span> </span><span id="local-6989586621682184394"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621682184394"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="annot"><span class="annottext">a
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621682184394"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-221"></span><span>        </span><span class="annot"><a href="#local-6989586621682184392"><span class="hs-identifier hs-var">metaId</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Interaction.Base.html#JustType"><span class="hs-identifier hs-type">JustType</span></a></span><span> </span><span id="local-6989586621682184396"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621682184396"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621682184396"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-222"></span><span>        </span><span class="annot"><a href="#local-6989586621682184392"><span class="hs-identifier hs-var">metaId</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Interaction.Base.html#JustSort"><span class="hs-identifier hs-type">JustSort</span></a></span><span> </span><span id="local-6989586621682184398"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621682184398"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621682184398"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-223"></span><span>        </span><span class="annot"><a href="#local-6989586621682184392"><span class="hs-identifier hs-var">metaId</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Interaction.Base.html#Assign"><span class="hs-identifier hs-type">Assign</span></a></span><span> </span><span id="local-6989586621682184400"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621682184400"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621682184401"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682184401"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621682184400"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-224"></span><span>        </span><span class="annot"><a href="#local-6989586621682184392"><span class="hs-identifier hs-var">metaId</span></a></span><span> </span><span class="annot"><span class="annottext">OutputConstraint_boot tcErr a b
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">b
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span>
</span><span id="line-225"></span><span>        </span><span id="local-6989586621682184046"><span class="annot"><span class="annottext">print' :: OutputConstraint_boot TCErr a NamedMeta -&gt; m ()
</span><a href="#local-6989586621682184046"><span class="hs-identifier hs-var hs-var">print'</span></a></span></span><span> </span><span id="local-6989586621682184555"><span class="annot"><span class="annottext">OutputConstraint_boot TCErr a NamedMeta
</span><a href="#local-6989586621682184555"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-226"></span><span>            </span><span id="local-6989586621682184556"><span class="annot"><a href="#local-6989586621682184556"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">MetaId -&gt; m Range
forall (m :: * -&gt; *).
(HasCallStack, MonadDebug m, ReadTCState m) =&gt;
MetaId -&gt; m Range
</span><a href="Agda.TypeChecking.Monad.MetaVars.html#getMetaRange"><span class="hs-identifier hs-var">getMetaRange</span></a></span><span> </span><span class="annot"><span class="annottext">(MetaId -&gt; m Range) -&gt; MetaId -&gt; m Range
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">NamedMeta -&gt; MetaId
</span><a href="Agda.TypeChecking.Monad.Base.Types.html#nmid"><span class="hs-identifier hs-var">nmid</span></a></span><span> </span><span class="annot"><span class="annottext">(NamedMeta -&gt; MetaId) -&gt; NamedMeta -&gt; MetaId
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">OutputConstraint_boot TCErr a NamedMeta -&gt; NamedMeta
forall {tcErr} {a} {b}. OutputConstraint_boot tcErr a b -&gt; b
</span><a href="#local-6989586621682184392"><span class="hs-identifier hs-var">metaId</span></a></span><span> </span><span class="annot"><span class="annottext">OutputConstraint_boot TCErr a NamedMeta
</span><a href="#local-6989586621682184555"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-227"></span><span>            </span><span id="local-6989586621682184558"><span class="annot"><a href="#local-6989586621682184558"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="#local-6989586621682184386"><span class="hs-identifier hs-type">showM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682184555"><span class="hs-identifier hs-type">x</span></a></span><span>
</span><span id="line-228"></span><span>            </span><span class="annot"><span class="hs-identifier hs-type">liftIO</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">putStrLn</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">render</span></span><span> </span><span class="annot"><a href="#local-6989586621682184558"><span class="hs-identifier hs-type">d</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">++</span></span><span> </span><span class="annot"><span class="hs-string">&quot;  [ at &quot;</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">++</span></span><span> </span><span class="annot"><a href="Agda.Syntax.Common.Pretty.html#prettyShow"><span class="hs-identifier hs-type">prettyShow</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682184556"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">++</span></span><span> </span><span class="annot"><span class="hs-string">&quot; ]&quot;</span></span><span>
</span><span id="line-229"></span><span class="annot"><a href="Agda.Interaction.CommandLine.html#showMetas"><span class="hs-identifier hs-var">showMetas</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IO () -&gt; TCM ()
forall a. IO a -&gt; TCMT IO a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; TCM ()) -&gt; IO () -&gt; TCM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; IO ()
</span><span class="hs-identifier hs-var">putStrLn</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; IO ()) -&gt; String -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;:meta [metaid]&quot;</span></span><span>
</span><span id="line-230"></span><span>
</span><span id="line-231"></span><span>
</span><span id="line-232"></span><span class="annot"><a href="Agda.Interaction.CommandLine.html#showScope"><span class="hs-identifier hs-type">showScope</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">TCM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-233"></span><span id="showScope"><span class="annot"><span class="annottext">showScope :: TCM ()
</span><a href="Agda.Interaction.CommandLine.html#showScope"><span class="hs-identifier hs-var hs-var">showScope</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-234"></span><span>  </span><span id="local-6989586621682184559"><span class="annot"><a href="#local-6989586621682184559"><span class="hs-identifier hs-var">scope</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TCMT IO ScopeInfo
forall (m :: * -&gt; *). ReadTCState m =&gt; m ScopeInfo
</span><a href="Agda.TypeChecking.Monad.State.html#getScope"><span class="hs-identifier hs-var">getScope</span></a></span><span>
</span><span id="line-235"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">liftIO</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">putStrLn</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Agda.Syntax.Common.Pretty.html#prettyShow"><span class="hs-identifier hs-type">prettyShow</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682184559"><span class="hs-identifier hs-type">scope</span></a></span><span>
</span><span id="line-236"></span><span>
</span><span id="line-237"></span><span class="annot"><a href="Agda.Interaction.CommandLine.html#metaParseExpr"><span class="hs-identifier hs-type">metaParseExpr</span></a></span><span> </span><span class="hs-glyph">::</span><span>  </span><span class="annot"><a href="Agda.Syntax.Common.html#InteractionId"><span class="hs-identifier hs-type">InteractionId</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">TCM</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Abstract.html#Expr"><span class="hs-identifier hs-type">A.Expr</span></a></span><span>
</span><span id="line-238"></span><span id="metaParseExpr"><span class="annot"><span class="annottext">metaParseExpr :: InteractionId -&gt; String -&gt; TCM Expr
</span><a href="Agda.Interaction.CommandLine.html#metaParseExpr"><span class="hs-identifier hs-var hs-var">metaParseExpr</span></a></span></span><span> </span><span id="local-6989586621682184562"><span class="annot"><span class="annottext">InteractionId
</span><a href="#local-6989586621682184562"><span class="hs-identifier hs-var">ii</span></a></span></span><span> </span><span id="local-6989586621682184563"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682184563"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-239"></span><span>    </span><span class="hs-keyword">do</span><span>  </span><span id="local-6989586621682184564"><span class="annot"><a href="#local-6989586621682184564"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">InteractionId -&gt; TCMT IO MetaId
forall (m :: * -&gt; *).
(ReadTCState m, MonadError TCErr m, MonadTCEnv m) =&gt;
InteractionId -&gt; m MetaId
</span><a href="Agda.TypeChecking.Monad.MetaVars.html#lookupInteractionId"><span class="hs-identifier hs-var">lookupInteractionId</span></a></span><span> </span><span class="annot"><span class="annottext">InteractionId
</span><a href="#local-6989586621682184562"><span class="hs-identifier hs-var">ii</span></a></span><span>
</span><span id="line-240"></span><span>        </span><span id="local-6989586621682184566"><span class="annot"><a href="#local-6989586621682184566"><span class="hs-identifier hs-var">scope</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#getMetaScope"><span class="hs-identifier hs-type">getMetaScope</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">&lt;$&gt;</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.MetaVars.html#lookupLocalMeta"><span class="hs-identifier hs-type">lookupLocalMeta</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682184564"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-241"></span><span>        </span><span id="local-6989586621682184569"><span class="annot"><a href="#local-6989586621682184569"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="Agda.Syntax.Position.html#getRange"><span class="hs-identifier hs-type">getRange</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">&lt;$&gt;</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.MetaVars.html#lookupLocalMeta"><span class="hs-identifier hs-type">lookupLocalMeta</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682184564"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-242"></span><span>        </span><span class="hs-comment">-- liftIO $ putStrLn $ prettyShow scope</span><span>
</span><span id="line-243"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682184571"><span class="annot"><a href="#local-6989586621682184571"><span class="hs-identifier hs-var hs-var">pos</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Position' SrcFile -&gt; Maybe (Position' SrcFile) -&gt; Position' SrcFile
forall a. a -&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromMaybe</span></span><span> </span><span class="annot"><span class="annottext">Position' SrcFile
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Range -&gt; Maybe (Position' SrcFile)
forall a. Range' a -&gt; Maybe (Position' a)
</span><a href="Agda.Syntax.Position.html#rStart"><span class="hs-identifier hs-var">rStart</span></a></span><span> </span><span class="annot"><span class="annottext">Range
</span><a href="#local-6989586621682184569"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-244"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621682184574"><span class="annot"><a href="#local-6989586621682184574"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682184575"><span class="annot"><a href="#local-6989586621682184575"><span class="hs-identifier hs-var">attrs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Trace.html#runPM"><span class="hs-identifier hs-type">runPM</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Agda.Syntax.Parser.html#parsePosString"><span class="hs-identifier hs-type">parsePosString</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Parser.html#exprParser"><span class="hs-identifier hs-type">exprParser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682184571"><span class="hs-identifier hs-type">pos</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682184563"><span class="hs-identifier hs-type">s</span></a></span><span>
</span><span id="line-245"></span><span>        </span><span class="annot"><a href="Agda.Syntax.Translation.ConcreteToAbstract.html#checkAttributes"><span class="hs-identifier hs-type">checkAttributes</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682184575"><span class="hs-identifier hs-type">attrs</span></a></span><span>
</span><span id="line-246"></span><span>        </span><span class="annot"><a href="Agda.Syntax.Translation.ConcreteToAbstract.html#concreteToAbstract"><span class="hs-identifier hs-type">concreteToAbstract</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682184566"><span class="hs-identifier hs-type">scope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682184574"><span class="hs-identifier hs-type">e</span></a></span><span>
</span><span id="line-247"></span><span>
</span><span id="line-248"></span><span id="local-6989586621682183159"><span class="annot"><a href="Agda.Interaction.CommandLine.html#actOnMeta"><span class="hs-identifier hs-type">actOnMeta</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Common.html#InteractionId"><span class="hs-identifier hs-type">InteractionId</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Abstract.html#Expr"><span class="hs-identifier hs-type">A.Expr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">TCM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682183159"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">TCM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682183159"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-249"></span><span id="actOnMeta"><span class="annot"><span class="annottext">actOnMeta :: forall a. [String] -&gt; (InteractionId -&gt; Expr -&gt; TCM a) -&gt; TCM a
</span><a href="Agda.Interaction.CommandLine.html#actOnMeta"><span class="hs-identifier hs-var hs-var">actOnMeta</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682184592"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682184592"><span class="hs-identifier hs-var">is</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621682184593"><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621682184593"><span class="hs-identifier hs-var">es</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682184594"><span class="annot"><span class="annottext">InteractionId -&gt; Expr -&gt; TCM a
</span><a href="#local-6989586621682184594"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-250"></span><span>     </span><span class="hs-keyword">do</span><span>  </span><span id="local-6989586621682184595"><span class="annot"><a href="#local-6989586621682184595"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">String -&gt; TCMT IO Nat
forall a. Read a =&gt; String -&gt; TCM a
</span><a href="Agda.Interaction.CommandLine.html#readM"><span class="hs-identifier hs-var">readM</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682184592"><span class="hs-identifier hs-var">is</span></a></span><span>
</span><span id="line-251"></span><span>         </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682184596"><span class="annot"><a href="#local-6989586621682184596"><span class="hs-identifier hs-var hs-var">ii</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Nat -&gt; InteractionId
</span><a href="Agda.Syntax.Common.html#InteractionId"><span class="hs-identifier hs-var">InteractionId</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621682184595"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-252"></span><span>         </span><span id="local-6989586621682184597"><span class="annot"><a href="#local-6989586621682184597"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="Agda.Interaction.CommandLine.html#metaParseExpr"><span class="hs-identifier hs-type">metaParseExpr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682184596"><span class="hs-identifier hs-type">ii</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">unwords</span></span><span> </span><span class="annot"><a href="#local-6989586621682184593"><span class="hs-identifier hs-type">es</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-253"></span><span>         </span><span class="annot"><a href="Agda.TypeChecking.Monad.MetaVars.html#withInteractionId"><span class="hs-identifier hs-type">withInteractionId</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682184596"><span class="hs-identifier hs-type">ii</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="#local-6989586621682184594"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682184596"><span class="hs-identifier hs-type">ii</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682184597"><span class="hs-identifier hs-type">e</span></a></span><span>
</span><span id="line-254"></span><span class="annot"><a href="Agda.Interaction.CommandLine.html#actOnMeta"><span class="hs-identifier hs-var">actOnMeta</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">InteractionId -&gt; Expr -&gt; TCM a
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TCM a
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span>
</span><span id="line-255"></span><span>
</span><span id="line-256"></span><span>
</span><span id="line-257"></span><span class="annot"><a href="Agda.Interaction.CommandLine.html#giveMeta"><span class="hs-identifier hs-type">giveMeta</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">TCM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-258"></span><span id="giveMeta"><span class="annot"><span class="annottext">giveMeta :: [String] -&gt; TCM ()
</span><a href="Agda.Interaction.CommandLine.html#giveMeta"><span class="hs-identifier hs-var hs-var">giveMeta</span></a></span></span><span> </span><span id="local-6989586621682184599"><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621682184599"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">[String] -&gt; Nat
forall a. [a] -&gt; Nat
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Nat
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621682184599"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Nat -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;=</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">2</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-259"></span><span>  </span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[String] -&gt; (InteractionId -&gt; Expr -&gt; TCM Expr) -&gt; TCM Expr
forall a. [String] -&gt; (InteractionId -&gt; Expr -&gt; TCM a) -&gt; TCM a
</span><a href="Agda.Interaction.CommandLine.html#actOnMeta"><span class="hs-identifier hs-var">actOnMeta</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621682184599"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">((InteractionId -&gt; Expr -&gt; TCM Expr) -&gt; TCM Expr)
-&gt; (InteractionId -&gt; Expr -&gt; TCM Expr) -&gt; TCM Expr
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621682184601"><span class="annot"><span class="annottext">InteractionId
</span><a href="#local-6989586621682184601"><span class="hs-identifier hs-var">ii</span></a></span></span><span> </span><span id="local-6989586621682184602"><span class="annot"><span class="annottext">Expr
</span><a href="#local-6989586621682184602"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">UseForce -&gt; InteractionId -&gt; Expr -&gt; TCM Expr
</span><a href="Agda.Interaction.BasicOps.html#give"><span class="hs-identifier hs-var">give</span></a></span><span> </span><span class="annot"><span class="annottext">UseForce
</span><a href="Agda.Interaction.Base.html#WithoutForce"><span class="hs-identifier hs-var">WithoutForce</span></a></span><span> </span><span class="annot"><span class="annottext">InteractionId
</span><a href="#local-6989586621682184601"><span class="hs-identifier hs-var">ii</span></a></span><span> </span><span class="annot"><span class="annottext">Expr
</span><a href="#local-6989586621682184602"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-260"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-261"></span><span class="annot"><a href="Agda.Interaction.CommandLine.html#giveMeta"><span class="hs-identifier hs-var">giveMeta</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IO () -&gt; TCM ()
forall a. IO a -&gt; TCMT IO a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; TCM ()) -&gt; IO () -&gt; TCM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; IO ()
</span><span class="hs-identifier hs-var">putStrLn</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; IO ()) -&gt; String -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;: give&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; metaid expr&quot;</span></span><span>
</span><span id="line-262"></span><span>
</span><span id="line-263"></span><span>
</span><span id="line-264"></span><span>
</span><span id="line-265"></span><span class="annot"><a href="Agda.Interaction.CommandLine.html#refineMeta"><span class="hs-identifier hs-type">refineMeta</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">TCM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-266"></span><span id="refineMeta"><span class="annot"><span class="annottext">refineMeta :: [String] -&gt; TCM ()
</span><a href="Agda.Interaction.CommandLine.html#refineMeta"><span class="hs-identifier hs-var hs-var">refineMeta</span></a></span></span><span> </span><span id="local-6989586621682184605"><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621682184605"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">[String] -&gt; Nat
forall a. [a] -&gt; Nat
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Nat
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621682184605"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Nat -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;=</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">2</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-267"></span><span>  </span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[String] -&gt; (InteractionId -&gt; Expr -&gt; TCM Expr) -&gt; TCM Expr
forall a. [String] -&gt; (InteractionId -&gt; Expr -&gt; TCM a) -&gt; TCM a
</span><a href="Agda.Interaction.CommandLine.html#actOnMeta"><span class="hs-identifier hs-var">actOnMeta</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621682184605"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">((InteractionId -&gt; Expr -&gt; TCM Expr) -&gt; TCM Expr)
-&gt; (InteractionId -&gt; Expr -&gt; TCM Expr) -&gt; TCM Expr
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621682184606"><span class="annot"><span class="annottext">InteractionId
</span><a href="#local-6989586621682184606"><span class="hs-identifier hs-var">ii</span></a></span></span><span> </span><span id="local-6989586621682184607"><span class="annot"><span class="annottext">Expr
</span><a href="#local-6989586621682184607"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">UseForce -&gt; InteractionId -&gt; Expr -&gt; TCM Expr
</span><a href="Agda.Interaction.BasicOps.html#refine"><span class="hs-identifier hs-var">refine</span></a></span><span> </span><span class="annot"><span class="annottext">UseForce
</span><a href="Agda.Interaction.Base.html#WithoutForce"><span class="hs-identifier hs-var">WithoutForce</span></a></span><span> </span><span class="annot"><span class="annottext">InteractionId
</span><a href="#local-6989586621682184606"><span class="hs-identifier hs-var">ii</span></a></span><span> </span><span class="annot"><span class="annottext">Expr
</span><a href="#local-6989586621682184607"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-268"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-269"></span><span class="annot"><a href="Agda.Interaction.CommandLine.html#refineMeta"><span class="hs-identifier hs-var">refineMeta</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IO () -&gt; TCM ()
forall a. IO a -&gt; TCMT IO a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; TCM ()) -&gt; IO () -&gt; TCM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; IO ()
</span><span class="hs-identifier hs-var">putStrLn</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; IO ()) -&gt; String -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;: refine&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; metaid expr&quot;</span></span><span>
</span><span id="line-270"></span><span>
</span><span id="line-271"></span><span>
</span><span id="line-272"></span><span>
</span><span id="line-273"></span><span class="annot"><a href="Agda.Interaction.CommandLine.html#retryConstraints"><span class="hs-identifier hs-type">retryConstraints</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">TCM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-274"></span><span id="retryConstraints"><span class="annot"><span class="annottext">retryConstraints :: TCM ()
</span><a href="Agda.Interaction.CommandLine.html#retryConstraints"><span class="hs-identifier hs-var hs-var">retryConstraints</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TCM ()
</span><a href="Agda.TypeChecking.Constraints.html#wakeupConstraints_"><span class="hs-identifier hs-var">wakeupConstraints_</span></a></span><span>
</span><span id="line-275"></span><span>
</span><span id="line-276"></span><span>
</span><span id="line-277"></span><span class="annot"><a href="Agda.Interaction.CommandLine.html#evalIn"><span class="hs-identifier hs-type">evalIn</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">TCM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-278"></span><span id="evalIn"><span class="annot"><span class="annottext">evalIn :: [String] -&gt; TCM ()
</span><a href="Agda.Interaction.CommandLine.html#evalIn"><span class="hs-identifier hs-var hs-var">evalIn</span></a></span></span><span> </span><span id="local-6989586621682184610"><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621682184610"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">[String] -&gt; Nat
forall a. [a] -&gt; Nat
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Nat
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621682184610"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Nat -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;=</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">2</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-279"></span><span>    </span><span class="hs-keyword">do</span><span>  </span><span id="local-6989586621682184611"><span class="annot"><a href="#local-6989586621682184611"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[String]
-&gt; (InteractionId -&gt; Expr -&gt; TCMT IO (Doc Aspects))
-&gt; TCMT IO (Doc Aspects)
forall a. [String] -&gt; (InteractionId -&gt; Expr -&gt; TCM a) -&gt; TCM a
</span><a href="Agda.Interaction.CommandLine.html#actOnMeta"><span class="hs-identifier hs-var">actOnMeta</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621682184610"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">((InteractionId -&gt; Expr -&gt; TCMT IO (Doc Aspects))
 -&gt; TCMT IO (Doc Aspects))
-&gt; (InteractionId -&gt; Expr -&gt; TCMT IO (Doc Aspects))
-&gt; TCMT IO (Doc Aspects)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">InteractionId
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682184612"><span class="annot"><span class="annottext">Expr
</span><a href="#local-6989586621682184612"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Expr -&gt; TCMT IO (Doc Aspects)
forall a (m :: * -&gt; *).
(ToConcrete a, Pretty (ConOfAbs a), MonadAbsToCon m) =&gt;
a -&gt; m (Doc Aspects)
</span><a href="Agda.Syntax.Abstract.Pretty.html#prettyA"><span class="hs-identifier hs-var">prettyA</span></a></span><span> </span><span class="annot"><span class="annottext">(Expr -&gt; TCMT IO (Doc Aspects))
-&gt; TCM Expr -&gt; TCMT IO (Doc Aspects)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">=&lt;&lt;</span></span><span> </span><span class="annot"><span class="annottext">ComputeMode -&gt; Expr -&gt; TCM Expr
</span><a href="Agda.Interaction.BasicOps.html#evalInCurrent"><span class="hs-identifier hs-var">evalInCurrent</span></a></span><span> </span><span class="annot"><span class="annottext">ComputeMode
</span><a href="Agda.Interaction.Base.html#DefaultCompute"><span class="hs-identifier hs-var">DefaultCompute</span></a></span><span> </span><span class="annot"><span class="annottext">Expr
</span><a href="#local-6989586621682184612"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-280"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">liftIO</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">print</span></span><span> </span><span class="annot"><a href="#local-6989586621682184611"><span class="hs-identifier hs-type">d</span></a></span><span>
</span><span id="line-281"></span><span class="annot"><a href="Agda.Interaction.CommandLine.html#evalIn"><span class="hs-identifier hs-var">evalIn</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IO () -&gt; TCM ()
forall a. IO a -&gt; TCMT IO a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; TCM ()) -&gt; IO () -&gt; TCM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; IO ()
</span><span class="hs-identifier hs-var">putStrLn</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;:eval metaid expr&quot;</span></span><span>
</span><span id="line-282"></span><span>
</span><span id="line-283"></span><span class="annot"><a href="Agda.Interaction.CommandLine.html#parseExpr"><span class="hs-identifier hs-type">parseExpr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">TCM</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Abstract.html#Expr"><span class="hs-identifier hs-type">A.Expr</span></a></span><span>
</span><span id="line-284"></span><span id="parseExpr"><span class="annot"><span class="annottext">parseExpr :: String -&gt; TCM Expr
</span><a href="Agda.Interaction.CommandLine.html#parseExpr"><span class="hs-identifier hs-var hs-var">parseExpr</span></a></span></span><span> </span><span id="local-6989586621682184616"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682184616"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-285"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621682184617"><span class="annot"><a href="#local-6989586621682184617"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682184618"><span class="annot"><a href="#local-6989586621682184618"><span class="hs-identifier hs-var">attrs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">PM (Expr, Attributes) -&gt; TCM (Expr, Attributes)
forall a. PM a -&gt; TCM a
</span><a href="Agda.TypeChecking.Monad.Trace.html#runPM"><span class="hs-identifier hs-var">runPM</span></a></span><span> </span><span class="annot"><span class="annottext">(PM (Expr, Attributes) -&gt; TCM (Expr, Attributes))
-&gt; PM (Expr, Attributes) -&gt; TCM (Expr, Attributes)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Parser Expr -&gt; String -&gt; PM (Expr, Attributes)
forall a. Parser a -&gt; String -&gt; PM (a, Attributes)
</span><a href="Agda.Syntax.Parser.html#parse"><span class="hs-identifier hs-var">parse</span></a></span><span> </span><span class="annot"><span class="annottext">Parser Expr
</span><a href="Agda.Syntax.Parser.html#exprParser"><span class="hs-identifier hs-var">exprParser</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682184616"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-286"></span><span>    </span><span class="annot"><a href="Agda.Syntax.Translation.ConcreteToAbstract.html#checkAttributes"><span class="hs-identifier hs-type">checkAttributes</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682184618"><span class="hs-identifier hs-type">attrs</span></a></span><span>
</span><span id="line-287"></span><span>    </span><span class="annot"><a href="Agda.Syntax.Translation.ConcreteToAbstract.html#localToAbstract"><span class="hs-identifier hs-type">localToAbstract</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682184617"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span>
</span><span id="line-288"></span><span>
</span><span id="line-289"></span><span id="local-6989586621682183066"><span class="annot"><a href="Agda.Interaction.CommandLine.html#evalTerm"><span class="hs-identifier hs-type">evalTerm</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">TCM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Interaction.CommandLine.html#ExitCode"><span class="hs-identifier hs-type">ExitCode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682183066"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-290"></span><span id="evalTerm"><span class="annot"><span class="annottext">evalTerm :: forall a. String -&gt; TCM (ExitCode a)
</span><a href="Agda.Interaction.CommandLine.html#evalTerm"><span class="hs-identifier hs-var hs-var">evalTerm</span></a></span></span><span> </span><span id="local-6989586621682184631"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682184631"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-291"></span><span>    </span><span class="hs-keyword">do</span><span>  </span><span id="local-6989586621682184632"><span class="annot"><a href="#local-6989586621682184632"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">String -&gt; TCM Expr
</span><a href="Agda.Interaction.CommandLine.html#parseExpr"><span class="hs-identifier hs-var">parseExpr</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682184631"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-292"></span><span>        </span><span id="local-6989586621682184633"><span class="annot"><a href="#local-6989586621682184633"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="Agda.Interaction.BasicOps.html#evalInCurrent"><span class="hs-identifier hs-type">evalInCurrent</span></a></span><span> </span><span class="annot"><a href="Agda.Interaction.Base.html#DefaultCompute"><span class="hs-identifier hs-type">DefaultCompute</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682184632"><span class="hs-identifier hs-type">e</span></a></span><span>
</span><span id="line-293"></span><span>        </span><span id="local-6989586621682184634"><span class="annot"><a href="#local-6989586621682184634"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-type">prettyTCM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682184633"><span class="hs-identifier hs-type">v</span></a></span><span>
</span><span id="line-294"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">liftIO</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">print</span></span><span> </span><span class="annot"><a href="#local-6989586621682184634"><span class="hs-identifier hs-type">e</span></a></span><span>
</span><span id="line-295"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><a href="Agda.Interaction.CommandLine.html#Continue"><span class="hs-identifier hs-type">Continue</span></a></span><span>
</span><span id="line-296"></span><span>
</span><span id="line-297"></span><span class="annot"><a href="Agda.Interaction.CommandLine.html#typeOf"><span class="hs-identifier hs-type">typeOf</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">TCM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-298"></span><span id="typeOf"><span class="annot"><span class="annottext">typeOf :: [String] -&gt; TCM ()
</span><a href="Agda.Interaction.CommandLine.html#typeOf"><span class="hs-identifier hs-var hs-var">typeOf</span></a></span></span><span> </span><span id="local-6989586621682184635"><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621682184635"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-299"></span><span>    </span><span class="hs-keyword">do</span><span>  </span><span id="local-6989586621682184636"><span class="annot"><a href="#local-6989586621682184636"><span class="hs-identifier hs-var">e</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">String -&gt; TCM Expr
</span><a href="Agda.Interaction.CommandLine.html#parseExpr"><span class="hs-identifier hs-var">parseExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[String] -&gt; String
</span><span class="hs-identifier hs-var">unwords</span></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621682184635"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-300"></span><span>        </span><span id="local-6989586621682184637"><span class="annot"><a href="#local-6989586621682184637"><span class="hs-identifier hs-var">e0</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="Agda.Interaction.BasicOps.html#typeInCurrent"><span class="hs-identifier hs-type">typeInCurrent</span></a></span><span> </span><span class="annot"><a href="Agda.Interaction.Base.html#Normalised"><span class="hs-identifier hs-type">Normalised</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682184636"><span class="hs-identifier hs-type">e</span></a></span><span>
</span><span id="line-301"></span><span>        </span><span id="local-6989586621682184639"><span class="annot"><a href="#local-6989586621682184639"><span class="hs-identifier hs-var">e1</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="Agda.Interaction.BasicOps.html#typeInCurrent"><span class="hs-identifier hs-type">typeInCurrent</span></a></span><span> </span><span class="annot"><a href="Agda.Interaction.Base.html#AsIs"><span class="hs-identifier hs-type">AsIs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682184636"><span class="hs-identifier hs-type">e</span></a></span><span>
</span><span id="line-302"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">liftIO</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">.</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">print</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">=&lt;&lt;</span></span><span> </span><span class="annot"><a href="Agda.Syntax.Abstract.Pretty.html#prettyA"><span class="hs-identifier hs-type">prettyA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682184639"><span class="hs-identifier hs-type">e1</span></a></span><span>
</span><span id="line-303"></span><span>
</span><span id="line-304"></span><span class="annot"><a href="Agda.Interaction.CommandLine.html#typeIn"><span class="hs-identifier hs-type">typeIn</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">TCM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-305"></span><span id="typeIn"><span class="annot"><span class="annottext">typeIn :: [String] -&gt; TCM ()
</span><a href="Agda.Interaction.CommandLine.html#typeIn"><span class="hs-identifier hs-var hs-var">typeIn</span></a></span></span><span> </span><span id="local-6989586621682184640"><span class="annot"><span class="annottext">s :: [String]
</span><a href="#local-6989586621682184640"><span class="hs-identifier hs-var">s</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-identifier">_</span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span class="annot"><span class="annottext">String
</span><span class="hs-identifier">_</span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span class="annot"><span class="annottext">[String]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-306"></span><span>    </span><span class="annot"><span class="annottext">[String] -&gt; (InteractionId -&gt; Expr -&gt; TCM ()) -&gt; TCM ()
forall a. [String] -&gt; (InteractionId -&gt; Expr -&gt; TCM a) -&gt; TCM a
</span><a href="Agda.Interaction.CommandLine.html#actOnMeta"><span class="hs-identifier hs-var">actOnMeta</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621682184640"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">((InteractionId -&gt; Expr -&gt; TCM ()) -&gt; TCM ())
-&gt; (InteractionId -&gt; Expr -&gt; TCM ()) -&gt; TCM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621682184641"><span class="annot"><span class="annottext">InteractionId
</span><a href="#local-6989586621682184641"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621682184642"><span class="annot"><span class="annottext">Expr
</span><a href="#local-6989586621682184642"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-307"></span><span>    </span><span class="hs-keyword">do</span><span>  </span><span id="local-6989586621682184643"><span class="annot"><a href="#local-6989586621682184643"><span class="hs-identifier hs-var">e1</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">InteractionId -&gt; Rewrite -&gt; Expr -&gt; TCM Expr
</span><a href="Agda.Interaction.BasicOps.html#typeInMeta"><span class="hs-identifier hs-var">typeInMeta</span></a></span><span> </span><span class="annot"><span class="annottext">InteractionId
</span><a href="#local-6989586621682184641"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Rewrite
</span><a href="Agda.Interaction.Base.html#Normalised"><span class="hs-identifier hs-var">Normalised</span></a></span><span> </span><span class="annot"><span class="annottext">Expr
</span><a href="#local-6989586621682184642"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-308"></span><span>        </span><span id="local-6989586621682184645"><span class="annot"><a href="#local-6989586621682184645"><span class="hs-identifier hs-var">e2</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="Agda.Interaction.BasicOps.html#typeInMeta"><span class="hs-identifier hs-type">typeInMeta</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682184641"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="annot"><a href="Agda.Interaction.Base.html#AsIs"><span class="hs-identifier hs-type">AsIs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682184642"><span class="hs-identifier hs-type">e</span></a></span><span>
</span><span id="line-309"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">liftIO</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">.</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">print</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">=&lt;&lt;</span></span><span> </span><span class="annot"><a href="Agda.Syntax.Abstract.Pretty.html#prettyA"><span class="hs-identifier hs-type">prettyA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682184643"><span class="hs-identifier hs-type">e1</span></a></span><span>
</span><span id="line-310"></span><span class="annot"><a href="Agda.Interaction.CommandLine.html#typeIn"><span class="hs-identifier hs-var">typeIn</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IO () -&gt; TCM ()
forall a. IO a -&gt; TCMT IO a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; TCM ()) -&gt; IO () -&gt; TCM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; IO ()
</span><span class="hs-identifier hs-var">putStrLn</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;:typeIn meta expr&quot;</span></span><span>
</span><span id="line-311"></span><span>
</span><span id="line-312"></span><span class="annot"><a href="Agda.Interaction.CommandLine.html#showContext"><span class="hs-identifier hs-type">showContext</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">TCM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-313"></span><span id="showContext"><span class="annot"><span class="annottext">showContext :: [String] -&gt; TCM ()
</span><a href="Agda.Interaction.CommandLine.html#showContext"><span class="hs-identifier hs-var hs-var">showContext</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682184646"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682184646"><span class="hs-identifier hs-var">meta</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621682184647"><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621682184647"><span class="hs-identifier hs-var">args</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-314"></span><span>    </span><span id="local-6989586621682184648"><span class="annot"><a href="#local-6989586621682184648"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Nat -&gt; InteractionId
</span><a href="Agda.Syntax.Common.html#InteractionId"><span class="hs-identifier hs-var">InteractionId</span></a></span><span> </span><span class="annot"><span class="annottext">(Nat -&gt; InteractionId) -&gt; TCMT IO Nat -&gt; TCMT IO InteractionId
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; TCMT IO Nat
forall a. Read a =&gt; String -&gt; TCM a
</span><a href="Agda.Interaction.CommandLine.html#readM"><span class="hs-identifier hs-var">readM</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682184646"><span class="hs-identifier hs-var">meta</span></a></span><span>
</span><span id="line-315"></span><span>    </span><span id="local-6989586621682184649"><span class="annot"><a href="#local-6989586621682184649"><span class="hs-identifier hs-var">mi</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.MetaVars.html#lookupLocalMeta"><span class="hs-identifier hs-type">lookupLocalMeta</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">=&lt;&lt;</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.MetaVars.html#lookupInteractionId"><span class="hs-identifier hs-type">lookupInteractionId</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682184648"><span class="hs-identifier hs-type">i</span></a></span><span>
</span><span id="line-316"></span><span>    </span><span class="annot"><a href="Agda.TypeChecking.Monad.MetaVars.html#withMetaInfo"><span class="hs-identifier hs-type">withMetaInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#getMetaInfo"><span class="hs-identifier hs-type">getMetaInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682184649"><span class="hs-identifier hs-type">mi</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-317"></span><span>      </span><span id="local-6989586621682184652"><span class="annot"><a href="#local-6989586621682184652"><span class="hs-identifier hs-var">ctx</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="hs-identifier hs-type">List.map</span></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#unDom"><span class="hs-identifier hs-var">I.unDom</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">.</span></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#telToList"><span class="hs-identifier hs-type">telToList</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">&lt;$&gt;</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Context.html#getContextTelescope"><span class="hs-identifier hs-type">getContextTelescope</span></a></span><span>
</span><span id="line-318"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">zipWithM_</span></span><span> </span><span class="annot"><a href="#local-6989586621682184656"><span class="hs-identifier hs-type">display</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682184652"><span class="hs-identifier hs-type">ctx</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">reverse</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">zipWith</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">const</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-number">1</span></span><span class="hs-glyph">..</span><span class="hs-special">]</span><span> </span><span class="annot"><a href="#local-6989586621682184652"><span class="hs-identifier hs-type">ctx</span></a></span><span>
</span><span id="line-319"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-320"></span><span>        </span><span id="local-6989586621682184656"><span class="annot"><span class="annottext">display :: (String, Type) -&gt; Nat -&gt; TCM ()
</span><a href="#local-6989586621682184656"><span class="hs-identifier hs-var hs-var">display</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682184659"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682184659"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682184660"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682184660"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682184661"><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621682184661"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-321"></span><span>            </span><span id="local-6989586621682184662"><span class="annot"><a href="#local-6989586621682184662"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621682184647"><span class="hs-identifier hs-var">args</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-322"></span><span>                    </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;normal&quot;</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Type -&gt; TCMT IO Type
forall a (m :: * -&gt; *). (Normalise a, MonadReduce m) =&gt; a -&gt; m a
</span><a href="Agda.TypeChecking.Reduce.html#normalise"><span class="hs-identifier hs-var">normalise</span></a></span><span> </span><span class="annot"><span class="annottext">(Type -&gt; TCMT IO Type) -&gt; Type -&gt; TCMT IO Type
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Type -&gt; Type
forall a. Subst a =&gt; Nat -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#raise"><span class="hs-identifier hs-var">raise</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621682184661"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682184660"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-323"></span><span>                    </span><span class="annot"><span class="annottext">[String]
</span><span class="hs-identifier">_</span></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Type -&gt; TCMT IO Type
forall a. a -&gt; TCMT IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Type -&gt; TCMT IO Type) -&gt; Type -&gt; TCMT IO Type
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Type -&gt; Type
forall a. Subst a =&gt; Nat -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#raise"><span class="hs-identifier hs-var">raise</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621682184661"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682184660"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-324"></span><span>            </span><span id="local-6989586621682184665"><span class="annot"><a href="#local-6989586621682184665"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-type">prettyTCM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682184662"><span class="hs-identifier hs-type">t</span></a></span><span>
</span><span id="line-325"></span><span>            </span><span class="annot"><span class="hs-identifier hs-type">liftIO</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">print</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">text</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Common.html#argNameToString"><span class="hs-identifier hs-type">argNameToString</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682184659"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="hs-string">&quot;:&quot;</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">&lt;+&gt;</span></span><span> </span><span class="annot"><a href="#local-6989586621682184665"><span class="hs-identifier hs-type">d</span></a></span><span>
</span><span id="line-326"></span><span class="annot"><a href="Agda.Interaction.CommandLine.html#showContext"><span class="hs-identifier hs-var">showContext</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IO () -&gt; TCM ()
forall a. IO a -&gt; TCMT IO a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; TCM ()) -&gt; IO () -&gt; TCM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; IO ()
</span><span class="hs-identifier hs-var">putStrLn</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;:Context meta&quot;</span></span><span>
</span><span id="line-327"></span><span>
</span><span id="line-328"></span><span class="annot"><span class="hs-comment">-- | The logo that prints when Agda is started in interactive mode.</span></span><span>
</span><span id="line-329"></span><span class="annot"><a href="Agda.Interaction.CommandLine.html#splashScreen"><span class="hs-identifier hs-type">splashScreen</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span>
</span><span id="line-330"></span><span id="splashScreen"><span class="annot"><span class="annottext">splashScreen :: String
</span><a href="Agda.Interaction.CommandLine.html#splashScreen"><span class="hs-identifier hs-var hs-var">splashScreen</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[String] -&gt; String
</span><span class="hs-identifier hs-var">unlines</span></span><span>
</span><span id="line-331"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;                 _ &quot;</span></span><span>
</span><span id="line-332"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;   ____         | |&quot;</span></span><span>
</span><span id="line-333"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;  / __ \\        | |&quot;</span></span><span>
</span><span id="line-334"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; | |__| |___  __| | ___&quot;</span></span><span>
</span><span id="line-335"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; |  __  / _ \\/ _  |/ __\\     Agda Interactive&quot;</span></span><span>
</span><span id="line-336"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; | |  |/ /_\\ \\/_| / /_| \\&quot;</span></span><span>
</span><span id="line-337"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; |_|  |\\___  /____\\_____/    Type :? for help.&quot;</span></span><span>
</span><span id="line-338"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;        __/ /&quot;</span></span><span>
</span><span id="line-339"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;        \\__/&quot;</span></span><span>
</span><span id="line-340"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;&quot;</span></span><span>
</span><span id="line-341"></span><span>    </span><span class="hs-comment">-- , &quot;The interactive mode is no longer supported. Don't complain if it doesn't work.&quot;</span><span>
</span><span id="line-342"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;The interactive mode is no longer under active development. Use at your own risk.&quot;</span></span><span>
</span><span id="line-343"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-344"></span><span>
</span><span id="line-345"></span><span class="annot"><span class="hs-comment">-- | The help message</span></span><span>
</span><span id="line-346"></span><span id="local-6989586621682183080"><span class="annot"><a href="Agda.Interaction.CommandLine.html#help"><span class="hs-identifier hs-type">help</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.Interaction.CommandLine.html#Command"><span class="hs-identifier hs-type">Command</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682183080"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-347"></span><span id="help"><span class="annot"><span class="annottext">help :: forall a. [Command a] -&gt; IO ()
</span><a href="Agda.Interaction.CommandLine.html#help"><span class="hs-identifier hs-var hs-var">help</span></a></span></span><span> </span><span id="local-6989586621682184670"><span class="annot"><span class="annottext">[Command a]
</span><a href="#local-6989586621682184670"><span class="hs-identifier hs-var">cs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; IO ()
</span><span class="hs-identifier hs-var">putStr</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; IO ()) -&gt; String -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[String] -&gt; String
</span><span class="hs-identifier hs-var">unlines</span></span><span> </span><span class="annot"><span class="annottext">([String] -&gt; String) -&gt; [String] -&gt; String
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-348"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Command overview&quot;</span></span><span> </span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">[String] -&gt; [String] -&gt; [String]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">(Command a -&gt; String) -&gt; [Command a] -&gt; [String]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">List.map</span></span><span> </span><span class="annot"><span class="annottext">Command a -&gt; String
forall {b}. (String, b) -&gt; String
</span><a href="#local-6989586621682184671"><span class="hs-identifier hs-var">explain</span></a></span><span> </span><span class="annot"><span class="annottext">[Command a]
</span><a href="#local-6989586621682184670"><span class="hs-identifier hs-var">cs</span></a></span><span> </span><span class="annot"><span class="annottext">[String] -&gt; [String] -&gt; [String]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span>
</span><span id="line-349"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;&lt;exp&gt; Infer type of expression &lt;exp&gt; and evaluate it.&quot;</span></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-350"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-351"></span><span>        </span><span id="local-6989586621682184671"><span class="annot"><span class="annottext">explain :: (String, b) -&gt; String
</span><a href="#local-6989586621682184671"><span class="hs-identifier hs-var hs-var">explain</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682184674"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682184674"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">b
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;:&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682184674"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-352"></span><span>
</span><span id="line-353"></span><span class="hs-comment">-- Read -------------------------------------------------------------------</span><span>
</span><span id="line-354"></span><span>
</span><span id="line-355"></span><span id="local-6989586621682183092"><span class="annot"><a href="Agda.Interaction.CommandLine.html#readM"><span class="hs-identifier hs-type">readM</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Read</span></span><span> </span><span class="annot"><a href="#local-6989586621682183092"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">TCM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682183092"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-356"></span><span id="readM"><span class="annot"><span class="annottext">readM :: forall a. Read a =&gt; String -&gt; TCM a
</span><a href="Agda.Interaction.CommandLine.html#readM"><span class="hs-identifier hs-var hs-var">readM</span></a></span></span><span> </span><span id="local-6989586621682184679"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682184679"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TCM a -&gt; (a -&gt; TCM a) -&gt; Maybe a -&gt; TCM a
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><span class="hs-identifier hs-var">maybe</span></span><span> </span><span class="annot"><span class="annottext">TCM a
</span><a href="#local-6989586621682184681"><span class="hs-identifier hs-var">err</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; TCM a
forall a. a -&gt; TCMT IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Maybe a -&gt; TCM a) -&gt; Maybe a -&gt; TCM a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Maybe a
forall a. Read a =&gt; String -&gt; Maybe a
</span><span class="hs-identifier hs-var">readMaybe</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682184679"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-357"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-358"></span><span>  </span><span id="local-6989586621682184681"><span class="annot"><span class="annottext">err :: TCM a
</span><a href="#local-6989586621682184681"><span class="hs-identifier hs-var hs-var">err</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TCErr -&gt; TCM a
forall a. TCErr -&gt; TCMT IO a
forall e (m :: * -&gt; *) a. MonadError e m =&gt; e -&gt; m a
</span><span class="hs-identifier hs-var">throwError</span></span><span> </span><span class="annot"><span class="annottext">(TCErr -&gt; TCM a) -&gt; TCErr -&gt; TCM a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; TCErr
</span><a href="Agda.TypeChecking.Monad.Base.html#GenericException"><span class="hs-identifier hs-var">GenericException</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; TCErr) -&gt; String -&gt; TCErr
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Cannot parse: &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682184679"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-359"></span></pre></body></html>