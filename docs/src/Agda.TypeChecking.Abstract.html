<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# OPTIONS_GHC -Wunused-imports #-}</span><span>
</span><span id="line-2"></span><span>
</span><span id="line-3"></span><span class="annot"><span class="hs-comment">-- | Functions for abstracting terms over other terms.</span></span><span>
</span><span id="line-4"></span><span>
</span><span id="line-5"></span><span class="hs-keyword">module</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Abstract.html"><span class="hs-identifier">Agda.TypeChecking.Abstract</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-6"></span><span>
</span><span id="line-7"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Prelude</span></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier">null</span></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-8"></span><span>
</span><span id="line-9"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad</span></span><span>
</span><span id="line-10"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.Except</span></span><span>
</span><span id="line-11"></span><span>
</span><span id="line-12"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Function</span></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier">on</span></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-13"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.HashMap.Strict</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">HMap</span></span><span>
</span><span id="line-14"></span><span>
</span><span id="line-15"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html"><span class="hs-identifier">Agda.Syntax.Common</span></a></span><span>
</span><span id="line-16"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Syntax.Position.html"><span class="hs-identifier">Agda.Syntax.Position</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Agda.Syntax.Position.html#Range"><span class="hs-identifier">Range</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-17"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html"><span class="hs-identifier">Agda.Syntax.Internal</span></a></span><span>
</span><span id="line-18"></span><span>
</span><span id="line-19"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Free.html"><span class="hs-identifier">Agda.TypeChecking.Free</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Free.html#freeIn"><span class="hs-identifier">freeIn</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-20"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.MetaVars.html"><span class="hs-identifier">Agda.TypeChecking.MetaVars</span></a></span><span>
</span><span id="line-21"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.html"><span class="hs-identifier">Agda.TypeChecking.Monad</span></a></span><span>
</span><span id="line-22"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Substitute.html"><span class="hs-identifier">Agda.TypeChecking.Substitute</span></a></span><span>
</span><span id="line-23"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.CheckInternal.html"><span class="hs-identifier">Agda.TypeChecking.CheckInternal</span></a></span><span>
</span><span id="line-24"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Conversion.html"><span class="hs-identifier">Agda.TypeChecking.Conversion</span></a></span><span>
</span><span id="line-25"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Constraints.html"><span class="hs-identifier">Agda.TypeChecking.Constraints</span></a></span><span>
</span><span id="line-26"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html"><span class="hs-identifier">Agda.TypeChecking.Pretty</span></a></span><span>
</span><span id="line-27"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Primitive.html"><span class="hs-identifier">Agda.TypeChecking.Primitive</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Primitive.html#getRefl"><span class="hs-identifier">getRefl</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-28"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Sort.html"><span class="hs-identifier">Agda.TypeChecking.Sort</span></a></span><span>
</span><span id="line-29"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Telescope.html"><span class="hs-identifier">Agda.TypeChecking.Telescope</span></a></span><span>
</span><span id="line-30"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Warnings.html"><span class="hs-identifier">Agda.TypeChecking.Warnings</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Warnings.html#warning"><span class="hs-identifier">warning</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-31"></span><span>
</span><span id="line-32"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Utils.Functor.html"><span class="hs-identifier">Agda.Utils.Functor</span></a></span><span>
</span><span id="line-33"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Utils.List.html"><span class="hs-identifier">Agda.Utils.List</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Agda.Utils.List.html#splitExactlyAt"><span class="hs-identifier">splitExactlyAt</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Utils.List.html#dropEnd"><span class="hs-identifier">dropEnd</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-34"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Utils.Null.html"><span class="hs-identifier">Agda.Utils.Null</span></a></span><span>
</span><span id="line-35"></span><span>
</span><span id="line-36"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Utils.Impossible.html"><span class="hs-identifier">Agda.Utils.Impossible</span></a></span><span>
</span><span id="line-37"></span><span>
</span><span id="line-38"></span><span class="annot"><span class="hs-comment">-- | @abstractType r a v b[v] = b@ where @v : a@.</span></span><span>
</span><span id="line-39"></span><span class="annot"><a href="Agda.TypeChecking.Abstract.html#abstractType"><span class="hs-identifier hs-type">abstractType</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-40"></span><span>     </span><span class="annot"><a href="Agda.Syntax.Position.html#Range"><span class="hs-identifier hs-type">Range</span></a></span><span>     </span><span class="annot"><span class="hs-comment">-- ^ Range of the @rewrite@ expression, if any, otherwise empty.</span></span><span>
</span><span id="line-41"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span>      </span><span class="annot"><span class="hs-comment">-- ^ Type of the term to abstract.</span></span><span>
</span><span id="line-42"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span>      </span><span class="annot"><span class="hs-comment">-- ^ Term to abstract.</span></span><span>
</span><span id="line-43"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span>      </span><span class="annot"><span class="hs-comment">-- ^ Type to abstract in.</span></span><span>
</span><span id="line-44"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">TCM</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ Type with hole (de Bruijn index 0) for the abstracted term.</span></span><span>
</span><span id="line-45"></span><span id="abstractType"><span class="annot"><span class="annottext">abstractType :: Range -&gt; Type -&gt; Term -&gt; Type -&gt; TCM Type
</span><a href="Agda.TypeChecking.Abstract.html#abstractType"><span class="hs-identifier hs-var hs-var">abstractType</span></a></span></span><span> </span><span id="local-6989586621682163287"><span class="annot"><span class="annottext">Range
</span><a href="#local-6989586621682163287"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span id="local-6989586621682163288"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682163288"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621682163289"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621682163289"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#El"><span class="hs-identifier hs-type">El</span></a></span><span> </span><span id="local-6989586621682163291"><span class="annot"><span class="annottext">Sort' Term
</span><a href="#local-6989586621682163291"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span id="local-6989586621682163292"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621682163292"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-46"></span><span>
</span><span id="line-47"></span><span>  </span><span id="local-6989586621682163293"><span class="annot"><a href="#local-6989586621682163293"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Sort' Term -&gt; Term -&gt; Type
forall t a. Sort' t -&gt; a -&gt; Type'' t a
</span><a href="Agda.Syntax.Internal.html#El"><span class="hs-identifier hs-var">El</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Nat -&gt; Term -&gt; Sort' Term -&gt; Sort' Term
forall a. AbsTerm a =&gt; Nat -&gt; Term -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Abstract.html#absTerm"><span class="hs-identifier hs-var">absTerm</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621682163289"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Sort' Term
</span><a href="#local-6989586621682163291"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Term -&gt; Type) -&gt; TCMT IO Term -&gt; TCM Type
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; Term -&gt; Type -&gt; Term -&gt; TCMT IO Term
</span><a href="Agda.TypeChecking.Abstract.html#abstractTerm"><span class="hs-identifier hs-var">abstractTerm</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682163288"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621682163289"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Sort' Term -&gt; Type
</span><a href="Agda.TypeChecking.Substitute.html#sort"><span class="hs-identifier hs-var">sort</span></a></span><span> </span><span class="annot"><span class="annottext">Sort' Term
</span><a href="#local-6989586621682163291"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621682163292"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-48"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">unless</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Utils.Null.html#null"><span class="hs-identifier hs-type">null</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682163287"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">||</span></span><span> </span><span class="annot"><span class="hs-number">0</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Free.html#freeIn"><span class="hs-operator hs-type">`freeIn`</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682163293"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-49"></span><span>    </span><span class="hs-comment">-- Andreas, 2025-07-03, issue #7973</span><span>
</span><span id="line-50"></span><span>    </span><span class="hs-comment">-- If with abstraction did not abstract anything, warn the user.</span><span>
</span><span id="line-51"></span><span>    </span><span class="annot"><a href="Agda.TypeChecking.Monad.Trace.html#setCurrentRange"><span class="hs-identifier hs-type">setCurrentRange</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682163287"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Warnings.html#warning"><span class="hs-identifier hs-type">warning</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#RewritesNothing"><span class="hs-identifier hs-type">RewritesNothing</span></a></span><span>
</span><span id="line-52"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><a href="#local-6989586621682163293"><span class="hs-identifier hs-type">c</span></a></span><span>
</span><span id="line-53"></span><span>
</span><span id="line-54"></span><span class="hs-comment">-- | @piAbstractTerm NotHidden v a b[v] = (w : a) -&gt; b[w]@</span><span>
</span><span id="line-55"></span><span class="hs-comment">--   @piAbstractTerm Hidden    v a b[v] = {w : a} -&gt; b[w]@</span><span>
</span><span id="line-56"></span><span class="annot"><a href="Agda.TypeChecking.Abstract.html#piAbstractTerm"><span class="hs-identifier hs-type">piAbstractTerm</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html#ArgInfo"><span class="hs-identifier hs-type">ArgInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">TCM</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span>
</span><span id="line-57"></span><span id="piAbstractTerm"><span class="annot"><span class="annottext">piAbstractTerm :: ArgInfo -&gt; Term -&gt; Type -&gt; Type -&gt; TCM Type
</span><a href="Agda.TypeChecking.Abstract.html#piAbstractTerm"><span class="hs-identifier hs-var hs-var">piAbstractTerm</span></a></span></span><span> </span><span id="local-6989586621682163304"><span class="annot"><span class="annottext">ArgInfo
</span><a href="#local-6989586621682163304"><span class="hs-identifier hs-var">info</span></a></span></span><span> </span><span id="local-6989586621682163305"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621682163305"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span id="local-6989586621682163306"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682163306"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621682163307"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682163307"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-58"></span><span>  </span><span id="local-6989586621682163308"><span class="annot"><a href="#local-6989586621682163308"><span class="hs-identifier hs-var">fun</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Dom (String, Type) -&gt; Type -&gt; Type
</span><a href="Agda.TypeChecking.Substitute.html#mkPi"><span class="hs-identifier hs-var">mkPi</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ArgInfo -&gt; Dom (String, Type) -&gt; Dom (String, Type)
forall a. LensArgInfo a =&gt; ArgInfo -&gt; a -&gt; a
</span><a href="Agda.Syntax.Common.html#setArgInfo"><span class="hs-identifier hs-var">setArgInfo</span></a></span><span> </span><span class="annot"><span class="annottext">ArgInfo
</span><a href="#local-6989586621682163304"><span class="hs-identifier hs-var">info</span></a></span><span> </span><span class="annot"><span class="annottext">(Dom (String, Type) -&gt; Dom (String, Type))
-&gt; Dom (String, Type) -&gt; Dom (String, Type)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(String, Type) -&gt; Dom (String, Type)
forall a. a -&gt; Dom a
</span><a href="Agda.Syntax.Internal.html#defaultDom"><span class="hs-identifier hs-var">defaultDom</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;w&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682163306"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Type -&gt; Type) -&gt; TCM Type -&gt; TCM Type
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Range -&gt; Type -&gt; Term -&gt; Type -&gt; TCM Type
</span><a href="Agda.TypeChecking.Abstract.html#abstractType"><span class="hs-identifier hs-var">abstractType</span></a></span><span> </span><span class="annot"><span class="annottext">Range
forall a. Null a =&gt; a
</span><a href="Agda.Utils.Null.html#empty"><span class="hs-identifier hs-var">empty</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682163306"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621682163305"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682163307"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-59"></span><span>  </span><span class="annot"><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-type">reportSDoc</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;tc.abstract&quot;</span></span><span> </span><span class="annot"><span class="hs-number">50</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span>
</span><span id="line-60"></span><span>    </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#sep"><span class="hs-identifier hs-type">sep</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="hs-string">&quot;piAbstract&quot;</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-type">&lt;+&gt;</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#sep"><span class="hs-identifier hs-type">sep</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-type">prettyTCM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682163305"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-type">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;:&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#nest"><span class="hs-identifier hs-type">nest</span></a></span><span> </span><span class="annot"><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-type">prettyTCM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682163306"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-61"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#nest"><span class="hs-identifier hs-type">nest</span></a></span><span> </span><span class="annot"><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><span class="hs-string">&quot;from&quot;</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-type">&lt;+&gt;</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-type">prettyTCM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682163307"><span class="hs-identifier hs-type">b</span></a></span><span>
</span><span id="line-62"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#nest"><span class="hs-identifier hs-type">nest</span></a></span><span> </span><span class="annot"><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><span class="hs-string">&quot;--&gt;&quot;</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-type">&lt;+&gt;</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-type">prettyTCM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682163308"><span class="hs-identifier hs-type">fun</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-63"></span><span>  </span><span class="annot"><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-type">reportSDoc</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;tc.abstract&quot;</span></span><span> </span><span class="annot"><span class="hs-number">70</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span>
</span><span id="line-64"></span><span>    </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#sep"><span class="hs-identifier hs-type">sep</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="hs-string">&quot;piAbstract&quot;</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-type">&lt;+&gt;</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#sep"><span class="hs-identifier hs-type">sep</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">.</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">show</span></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621682163305"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-type">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;:&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#nest"><span class="hs-identifier hs-type">nest</span></a></span><span> </span><span class="annot"><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">.</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">show</span></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621682163306"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-65"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#nest"><span class="hs-identifier hs-type">nest</span></a></span><span> </span><span class="annot"><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><span class="hs-string">&quot;from&quot;</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-type">&lt;+&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">.</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">show</span></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621682163307"><span class="hs-identifier hs-type">b</span></a></span><span>
</span><span id="line-66"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#nest"><span class="hs-identifier hs-type">nest</span></a></span><span> </span><span class="annot"><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><span class="hs-string">&quot;--&gt;&quot;</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-type">&lt;+&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">.</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">show</span></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621682163308"><span class="hs-identifier hs-type">fun</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-67"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><a href="#local-6989586621682163308"><span class="hs-identifier hs-type">fun</span></a></span><span>
</span><span id="line-68"></span><span>
</span><span id="line-69"></span><span class="hs-comment">-- | @piAbstract (v, a) b[v] = (w : a) -&gt; b[w]@</span><span>
</span><span id="line-70"></span><span class="hs-comment">--</span><span>
</span><span id="line-71"></span><span class="hs-comment">--   For the inspect idiom, it does something special:</span><span>
</span><span id="line-72"></span><span class="hs-comment">--   @piAbstract (v, a) b[v, refl v] = (w : a) (w' : Eq a w v) -&gt; b[w, w']</span><span>
</span><span id="line-73"></span><span class="hs-comment">--   (Not all @refl v@ subterms are abstracted: see caveat below.)</span><span>
</span><span id="line-74"></span><span class="hs-comment">--</span><span>
</span><span id="line-75"></span><span class="hs-comment">--   For @rewrite@, it does something special:</span><span>
</span><span id="line-76"></span><span class="hs-comment">--   @piAbstract (prf, Eq a v v') b[v,prf] = (w : a) (w' : Eq a w v') -&gt; b[w, w']@</span><span>
</span><span id="line-77"></span><span>
</span><span id="line-78"></span><span class="annot"><a href="Agda.TypeChecking.Abstract.html#piAbstract"><span class="hs-identifier hs-type">piAbstract</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html#Arg"><span class="hs-identifier hs-type">Arg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#EqualityView"><span class="hs-identifier hs-type">EqualityView</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">TCM</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span>
</span><span id="line-79"></span><span id="piAbstract"><span class="annot"><span class="annottext">piAbstract :: Arg (Term, EqualityView) -&gt; Type -&gt; TCM Type
</span><a href="Agda.TypeChecking.Abstract.html#piAbstract"><span class="hs-identifier hs-var hs-var">piAbstract</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Common.html#Arg"><span class="hs-identifier hs-type">Arg</span></a></span><span> </span><span id="local-6989586621682163323"><span class="annot"><span class="annottext">ArgInfo
</span><a href="#local-6989586621682163323"><span class="hs-identifier hs-var">info</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682163324"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621682163324"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#OtherType"><span class="hs-identifier hs-type">OtherType</span></a></span><span> </span><span id="local-6989586621682163326"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682163326"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span id="local-6989586621682163327"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682163327"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ArgInfo -&gt; Term -&gt; Type -&gt; Type -&gt; TCM Type
</span><a href="Agda.TypeChecking.Abstract.html#piAbstractTerm"><span class="hs-identifier hs-var">piAbstractTerm</span></a></span><span> </span><span class="annot"><span class="annottext">ArgInfo
</span><a href="#local-6989586621682163323"><span class="hs-identifier hs-var">info</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621682163324"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682163326"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682163327"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-80"></span><span class="annot"><a href="Agda.TypeChecking.Abstract.html#piAbstract"><span class="hs-identifier hs-var">piAbstract</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Common.html#Arg"><span class="hs-identifier hs-type">Arg</span></a></span><span> </span><span id="local-6989586621682163328"><span class="annot"><span class="annottext">ArgInfo
</span><a href="#local-6989586621682163328"><span class="hs-identifier hs-var">info</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682163329"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621682163329"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#IdiomType"><span class="hs-identifier hs-type">IdiomType</span></a></span><span> </span><span id="local-6989586621682163331"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682163331"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span id="local-6989586621682163332"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682163332"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-81"></span><span>  </span><span id="local-6989586621682163333"><span class="annot"><a href="#local-6989586621682163333"><span class="hs-identifier hs-var">refl</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TCM (Arg Term -&gt; Term)
</span><a href="Agda.TypeChecking.Primitive.html#getRefl"><span class="hs-identifier hs-var">getRefl</span></a></span><span>
</span><span id="line-82"></span><span>  </span><span id="local-6989586621682163334"><span class="annot"><a href="#local-6989586621682163334"><span class="hs-identifier hs-var">eq</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-type">addContext</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-string">&quot;w&quot;</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#defaultDom"><span class="hs-identifier hs-type">defaultDom</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682163331"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-83"></span><span>    </span><span class="hs-comment">-- manufacture the type @w &#8801; v@</span><span>
</span><span id="line-84"></span><span>    </span><span id="local-6989586621682163336"><span class="annot"><a href="#local-6989586621682163336"><span class="hs-identifier hs-var">eqName</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Builtin.html#primEqualityName"><span class="hs-identifier hs-type">primEqualityName</span></a></span><span>
</span><span id="line-85"></span><span>    </span><span id="local-6989586621682163338"><span class="annot"><a href="#local-6989586621682163338"><span class="hs-identifier hs-var">eqTy</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#defType"><span class="hs-identifier hs-var">defType</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">&lt;$&gt;</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Signature.html#getConstInfo"><span class="hs-identifier hs-type">getConstInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682163336"><span class="hs-identifier hs-type">eqName</span></a></span><span>
</span><span id="line-86"></span><span>    </span><span class="hs-comment">-- E.g. @eqTy = eqTel &#8594; Set a@ where @eqTel = {a : Level} {A : Set a} (x y : A)@.</span><span>
</span><span id="line-87"></span><span>    </span><span class="annot"><a href="Agda.TypeChecking.Substitute.html#TelV"><span class="hs-identifier hs-type">TelV</span></a></span><span> </span><span id="local-6989586621682163342"><span class="annot"><a href="#local-6989586621682163342"><span class="hs-identifier hs-var">eqTel</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Telescope.html#telView"><span class="hs-identifier hs-type">telView</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682163338"><span class="hs-identifier hs-type">eqTy</span></a></span><span>
</span><span id="line-88"></span><span>    </span><span id="local-6989586621682163344"><span class="annot"><a href="#local-6989586621682163344"><span class="hs-identifier hs-var">tel</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="Agda.TypeChecking.MetaVars.html#newTelMeta"><span class="hs-identifier hs-type">newTelMeta</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#telFromList"><span class="hs-identifier hs-type">telFromList</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Agda.Utils.List.html#dropEnd"><span class="hs-identifier hs-type">dropEnd</span></a></span><span> </span><span class="annot"><span class="hs-number">3</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#telToList"><span class="hs-identifier hs-type">telToList</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682163342"><span class="hs-identifier hs-type">eqTel</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-89"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682163348"><span class="annot"><a href="#local-6989586621682163348"><span class="hs-identifier hs-var hs-var">eq</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">QName -&gt; [Elim] -&gt; Term
</span><a href="Agda.Syntax.Internal.html#Def"><span class="hs-identifier hs-var">Def</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621682163336"><span class="hs-identifier hs-var">eqName</span></a></span><span> </span><span class="annot"><span class="annottext">([Elim] -&gt; Term) -&gt; [Elim] -&gt; Term
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Arg Term -&gt; Elim) -&gt; Args -&gt; [Elim]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">Arg Term -&gt; Elim
forall a. Arg a -&gt; Elim' a
</span><a href="Agda.Syntax.Internal.Elim.html#Apply"><span class="hs-identifier hs-var">Apply</span></a></span><span>
</span><span id="line-90"></span><span>                 </span><span class="annot"><span class="annottext">(Args -&gt; [Elim]) -&gt; Args -&gt; [Elim]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Arg Term -&gt; Arg Term) -&gt; Args -&gt; Args
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Hiding -&gt; Arg Term -&gt; Arg Term
forall a. LensHiding a =&gt; Hiding -&gt; a -&gt; a
</span><a href="Agda.Syntax.Common.html#setHiding"><span class="hs-identifier hs-var">setHiding</span></a></span><span> </span><span class="annot"><span class="annottext">Hiding
</span><a href="Agda.Syntax.Common.html#Hidden"><span class="hs-identifier hs-var">Hidden</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621682163344"><span class="hs-identifier hs-var">tel</span></a></span><span>
</span><span id="line-91"></span><span>                 </span><span class="hs-comment">-- we write `v &#8801; w` because this equality is typically used to</span><span>
</span><span id="line-92"></span><span>                 </span><span class="hs-comment">-- get `v` to unfold to whatever pattern was used to refine `w`</span><span>
</span><span id="line-93"></span><span>                 </span><span class="hs-comment">-- in a with-clause.</span><span>
</span><span id="line-94"></span><span>                 </span><span class="hs-comment">-- If we were to write `w &#8801; v`, we would often need to take the</span><span>
</span><span id="line-95"></span><span>                 </span><span class="hs-comment">-- symmetric of the proof we get to make use of `rewrite`.</span><span>
</span><span id="line-96"></span><span>                 </span><span class="annot"><span class="annottext">Args -&gt; Args -&gt; Args
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Hiding -&gt; Arg Term -&gt; Arg Term
forall a. LensHiding a =&gt; Hiding -&gt; a -&gt; a
</span><a href="Agda.Syntax.Common.html#setHiding"><span class="hs-identifier hs-var">setHiding</span></a></span><span> </span><span class="annot"><span class="annottext">Hiding
</span><a href="Agda.Syntax.Common.html#Hidden"><span class="hs-identifier hs-var">Hidden</span></a></span><span> </span><span class="annot"><span class="annottext">(Arg Term -&gt; Arg Term) -&gt; Arg Term -&gt; Arg Term
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Term -&gt; Arg Term
forall a. a -&gt; Arg a
</span><a href="Agda.Syntax.Common.html#defaultArg"><span class="hs-identifier hs-var">defaultArg</span></a></span><span> </span><span class="annot"><span class="annottext">(Term -&gt; Arg Term) -&gt; Term -&gt; Arg Term
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Term -&gt; Term
forall a. Subst a =&gt; Nat -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#raise"><span class="hs-identifier hs-var">raise</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">(Term -&gt; Term) -&gt; Term -&gt; Term
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; Term
forall t a. Type'' t a -&gt; a
</span><a href="Agda.Syntax.Internal.html#unEl"><span class="hs-identifier hs-var">unEl</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682163331"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-97"></span><span>                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Term -&gt; Arg Term
forall a. a -&gt; Arg a
</span><a href="Agda.Syntax.Common.html#defaultArg"><span class="hs-identifier hs-var">defaultArg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Nat -&gt; Term -&gt; Term
forall a. Subst a =&gt; Nat -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#raise"><span class="hs-identifier hs-var">raise</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621682163329"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-98"></span><span>                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Term -&gt; Arg Term
forall a. a -&gt; Arg a
</span><a href="Agda.Syntax.Common.html#defaultArg"><span class="hs-identifier hs-var">defaultArg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Nat -&gt; Term
</span><a href="Agda.Syntax.Internal.html#var"><span class="hs-identifier hs-var">var</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span>
</span><span id="line-99"></span><span>                    </span><span class="hs-special">]</span><span>
</span><span id="line-100"></span><span>    </span><span class="hs-comment">-- Since the result of this function will be type-checked in</span><span>
</span><span id="line-101"></span><span>    </span><span class="hs-comment">-- `withFunctionType`, we can be a little lazy here and put</span><span>
</span><span id="line-102"></span><span>    </span><span class="hs-comment">-- a meta for the sort.</span><span>
</span><span id="line-103"></span><span>    </span><span id="local-6989586621682163357"><span class="annot"><a href="#local-6989586621682163357"><span class="hs-identifier hs-var">sort</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="Agda.TypeChecking.MetaVars.html#newSortMeta"><span class="hs-identifier hs-type">newSortMeta</span></a></span><span>
</span><span id="line-104"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#El"><span class="hs-identifier hs-type">El</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682163357"><span class="hs-identifier hs-type">sort</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682163348"><span class="hs-identifier hs-type">eq</span></a></span><span>
</span><span id="line-105"></span><span>
</span><span id="line-106"></span><span>  </span><span class="hs-comment">-- ncf, 2026-01-12: we abstract over v as w first, then over @refl w@</span><span>
</span><span id="line-107"></span><span>  </span><span class="hs-comment">-- at type @v &#8801; w@ so that we only replace those @refl v@ subterms of</span><span>
</span><span id="line-108"></span><span>  </span><span class="hs-comment">-- the original term that become ill-typed after abstracting v.</span><span>
</span><span id="line-109"></span><span>  </span><span id="local-6989586621682163359"><span class="annot"><a href="#local-6989586621682163359"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Abstract.html#abstractType"><span class="hs-identifier hs-type">abstractType</span></a></span><span> </span><span class="annot"><a href="Agda.Utils.Null.html#empty"><span class="hs-identifier hs-type">empty</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682163331"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682163329"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682163332"><span class="hs-identifier hs-type">b</span></a></span><span>
</span><span id="line-110"></span><span>  </span><span id="local-6989586621682163360"><span class="annot"><a href="#local-6989586621682163360"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-type">addContext</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-string">&quot;w&quot;</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#defaultDom"><span class="hs-identifier hs-type">defaultDom</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682163331"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span>
</span><span id="line-111"></span><span>         </span><span class="annot"><a href="Agda.TypeChecking.Abstract.html#abstractType"><span class="hs-identifier hs-type">abstractType</span></a></span><span> </span><span class="annot"><a href="Agda.Utils.Null.html#empty"><span class="hs-identifier hs-type">empty</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682163334"><span class="hs-identifier hs-type">eq</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682163333"><span class="hs-identifier hs-type">refl</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Common.html#defaultArg"><span class="hs-identifier hs-type">defaultArg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#var"><span class="hs-identifier hs-type">var</span></a></span><span> </span><span class="annot"><span class="hs-number">0</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621682163359"><span class="hs-identifier hs-type">b</span></a></span><span>
</span><span id="line-112"></span><span>
</span><span id="line-113"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">pure</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Substitute.html#mkPi"><span class="hs-identifier hs-type">mkPi</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Common.html#setHiding"><span class="hs-identifier hs-type">setHiding</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Common.html#getHiding"><span class="hs-identifier hs-type">getHiding</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682163328"><span class="hs-identifier hs-type">info</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#defaultDom"><span class="hs-identifier hs-type">defaultDom</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-string">&quot;w&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621682163331"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-114"></span><span>       </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Substitute.html#mkPi"><span class="hs-identifier hs-type">mkPi</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Common.html#setHiding"><span class="hs-identifier hs-type">setHiding</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html#NotHidden"><span class="hs-identifier hs-type">NotHidden</span></a></span><span>        </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#defaultDom"><span class="hs-identifier hs-type">defaultDom</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-string">&quot;eq&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621682163334"><span class="hs-identifier hs-type">eq</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-115"></span><span>       </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="#local-6989586621682163360"><span class="hs-identifier hs-type">b</span></a></span><span>
</span><span id="line-116"></span><span class="annot"><a href="Agda.TypeChecking.Abstract.html#piAbstract"><span class="hs-identifier hs-var">piAbstract</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Common.html#Arg"><span class="hs-identifier hs-type">Arg</span></a></span><span> </span><span id="local-6989586621682163363"><span class="annot"><span class="annottext">ArgInfo
</span><a href="#local-6989586621682163363"><span class="hs-identifier hs-var">info</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682163364"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621682163364"><span class="hs-identifier hs-var">prf</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#EqualityViewType"><span class="hs-identifier hs-type">EqualityViewType</span></a></span><span> </span><span id="local-6989586621682163366"><span class="annot"><span class="annottext">eqt :: EqualityTypeData
</span><a href="#local-6989586621682163366"><span class="hs-identifier hs-var">eqt</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#EqualityTypeData"><span class="hs-identifier hs-type">EqualityTypeData</span></a></span><span> </span><span id="local-6989586621682163368"><span class="annot"><span class="annottext">Range
</span><a href="#local-6989586621682163368"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="annot"><span class="annottext">Sort' Term
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">QName
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Args
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Common.html#Arg"><span class="hs-identifier hs-type">Arg</span></a></span><span> </span><span class="annot"><span class="annottext">ArgInfo
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682163369"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621682163369"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682163370"><span class="annot"><span class="annottext">Arg Term
</span><a href="#local-6989586621682163370"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="annot"><span class="annottext">Arg Term
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span id="local-6989586621682163371"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682163371"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-117"></span><span>  </span><span id="local-6989586621682163372"><span class="annot"><a href="#local-6989586621682163372"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Term -&gt; TCMT IO (Sort' Term)
forall (m :: * -&gt; *).
(PureTCM m, MonadConstraint m) =&gt;
Term -&gt; m (Sort' Term)
</span><a href="Agda.TypeChecking.Sort.html#sortOf"><span class="hs-identifier hs-var">sortOf</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621682163369"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-118"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span class="annot"><a href="#local-6989586621682163374"><span class="hs-identifier hs-type">prfTy</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span>
</span><span id="line-119"></span><span>      </span><span id="local-6989586621682163374"><span class="annot"><a href="#local-6989586621682163374"><span class="hs-identifier hs-var hs-var">prfTy</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EqualityTypeData -&gt; Type
forall a. EqualityUnview a =&gt; a -&gt; Type
</span><a href="Agda.TypeChecking.Monad.Builtin.html#equalityUnview"><span class="hs-identifier hs-var">equalityUnview</span></a></span><span> </span><span class="annot"><span class="annottext">EqualityTypeData
</span><a href="#local-6989586621682163366"><span class="hs-identifier hs-var">eqt</span></a></span><span>
</span><span id="line-120"></span><span>      </span><span id="local-6989586621682163376"><span class="annot"><a href="#local-6989586621682163376"><span class="hs-identifier hs-var hs-var">vTy</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Sort' Term -&gt; Term -&gt; Type
forall t a. Sort' t -&gt; a -&gt; Type'' t a
</span><a href="Agda.Syntax.Internal.html#El"><span class="hs-identifier hs-var">El</span></a></span><span> </span><span class="annot"><span class="annottext">Sort' Term
</span><a href="#local-6989586621682163372"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621682163369"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-121"></span><span>  </span><span class="hs-comment">-- Andreas, 2025-07-03, issue #7973</span><span>
</span><span id="line-122"></span><span>  </span><span class="hs-comment">-- We alert the user when the lhs of the equality proof could not be abstracted</span><span>
</span><span id="line-123"></span><span>  </span><span class="hs-comment">-- but not when the equality proof itself could not be abstracted.</span><span>
</span><span id="line-124"></span><span>  </span><span class="hs-comment">-- Only the former means that the rewrite did not fire.</span><span>
</span><span id="line-125"></span><span>  </span><span id="local-6989586621682163377"><span class="annot"><a href="#local-6989586621682163377"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Abstract.html#abstractType"><span class="hs-identifier hs-type">abstractType</span></a></span><span> </span><span class="annot"><a href="Agda.Utils.Null.html#empty"><span class="hs-identifier hs-type">empty</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682163374"><span class="hs-identifier hs-type">prfTy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682163364"><span class="hs-identifier hs-type">prf</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682163371"><span class="hs-identifier hs-type">b</span></a></span><span>  </span><span class="hs-comment">-- @empty@ means do not warn</span><span>
</span><span id="line-126"></span><span>  </span><span id="local-6989586621682163378"><span class="annot"><a href="#local-6989586621682163378"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-type">addContext</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-string">&quot;w&quot;</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#defaultDom"><span class="hs-identifier hs-type">defaultDom</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682163374"><span class="hs-identifier hs-type">prfTy</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span>
</span><span id="line-127"></span><span>         </span><span class="hs-comment">-- Passing range @r@ here means warn if abstraction failed to abstract anything.</span><span>
</span><span id="line-128"></span><span>         </span><span class="annot"><a href="Agda.TypeChecking.Abstract.html#abstractType"><span class="hs-identifier hs-type">abstractType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682163368"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#raise"><span class="hs-identifier hs-type">raise</span></a></span><span> </span><span class="annot"><span class="hs-number">1</span></span><span> </span><span class="annot"><a href="#local-6989586621682163376"><span class="hs-identifier hs-type">vTy</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Common.html#unArg"><span class="hs-identifier hs-var">unArg</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#raise"><span class="hs-identifier hs-type">raise</span></a></span><span> </span><span class="annot"><span class="hs-number">1</span></span><span> </span><span class="annot"><a href="#local-6989586621682163370"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621682163377"><span class="hs-identifier hs-type">b</span></a></span><span>
</span><span id="line-129"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">.</span></span><span> </span><span class="annot"><a href="#local-6989586621682163380"><span class="hs-identifier hs-type">funType</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;lhs&quot;</span></span><span> </span><span class="annot"><a href="#local-6989586621682163376"><span class="hs-identifier hs-type">vTy</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">.</span></span><span> </span><span class="annot"><a href="#local-6989586621682163380"><span class="hs-identifier hs-type">funType</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;equality&quot;</span></span><span> </span><span class="annot"><a href="#local-6989586621682163381"><span class="hs-identifier hs-type">eqTy'</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">.</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Abstract.html#swap01"><span class="hs-identifier hs-type">swap01</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="#local-6989586621682163378"><span class="hs-identifier hs-type">b</span></a></span><span>
</span><span id="line-130"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-131"></span><span>    </span><span id="local-6989586621682163380"><span class="annot"><span class="annottext">funType :: String -&gt; Type -&gt; Type -&gt; Type
</span><a href="#local-6989586621682163380"><span class="hs-identifier hs-var hs-var">funType</span></a></span></span><span> </span><span id="local-6989586621682163383"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682163383"><span class="hs-identifier hs-var">str</span></a></span></span><span> </span><span id="local-6989586621682163384"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682163384"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Dom (String, Type) -&gt; Type -&gt; Type
</span><a href="Agda.TypeChecking.Substitute.html#mkPi"><span class="hs-identifier hs-var">mkPi</span></a></span><span> </span><span class="annot"><span class="annottext">(Dom (String, Type) -&gt; Type -&gt; Type)
-&gt; Dom (String, Type) -&gt; Type -&gt; Type
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ArgInfo -&gt; Dom (String, Type) -&gt; Dom (String, Type)
forall a. LensArgInfo a =&gt; ArgInfo -&gt; a -&gt; a
</span><a href="Agda.Syntax.Common.html#setArgInfo"><span class="hs-identifier hs-var">setArgInfo</span></a></span><span> </span><span class="annot"><span class="annottext">ArgInfo
</span><a href="#local-6989586621682163363"><span class="hs-identifier hs-var">info</span></a></span><span> </span><span class="annot"><span class="annottext">(Dom (String, Type) -&gt; Dom (String, Type))
-&gt; Dom (String, Type) -&gt; Dom (String, Type)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(String, Type) -&gt; Dom (String, Type)
forall a. a -&gt; Dom a
</span><a href="Agda.Syntax.Internal.html#defaultDom"><span class="hs-identifier hs-var">defaultDom</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682163383"><span class="hs-identifier hs-var">str</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682163384"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-132"></span><span>    </span><span class="hs-comment">-- Abstract the lhs (@a@) of the equality only.</span><span>
</span><span id="line-133"></span><span>    </span><span class="annot"><a href="#local-6989586621682163385"><span class="hs-identifier hs-type">eqt1</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#EqualityTypeData"><span class="hs-identifier hs-type">EqualityTypeData</span></a></span><span>
</span><span id="line-134"></span><span>    </span><span id="local-6989586621682163385"><span class="annot"><span class="annottext">eqt1 :: EqualityTypeData
</span><a href="#local-6989586621682163385"><span class="hs-identifier hs-var hs-var">eqt1</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Nat -&gt; EqualityTypeData -&gt; EqualityTypeData
forall a. Subst a =&gt; Nat -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#raise"><span class="hs-identifier hs-var">raise</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">EqualityTypeData
</span><a href="#local-6989586621682163366"><span class="hs-identifier hs-var">eqt</span></a></span><span>
</span><span id="line-135"></span><span>    </span><span class="annot"><a href="#local-6989586621682163381"><span class="hs-identifier hs-type">eqTy'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span>
</span><span id="line-136"></span><span>    </span><span id="local-6989586621682163381"><span class="annot"><span class="annottext">eqTy' :: Type
</span><a href="#local-6989586621682163381"><span class="hs-identifier hs-var hs-var">eqTy'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EqualityTypeData -&gt; Type
forall a. EqualityUnview a =&gt; a -&gt; Type
</span><a href="Agda.TypeChecking.Monad.Builtin.html#equalityUnview"><span class="hs-identifier hs-var">equalityUnview</span></a></span><span> </span><span class="annot"><span class="annottext">(EqualityTypeData -&gt; Type) -&gt; EqualityTypeData -&gt; Type
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">EqualityTypeData
</span><a href="#local-6989586621682163385"><span class="hs-identifier hs-var">eqt1</span></a></span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#_eqtLhs"><span class="hs-identifier hs-var">_eqtLhs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#_eqtLhs"><span class="hs-identifier hs-var">_eqtLhs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682163385"><span class="hs-identifier hs-type">eqt1</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$&gt;</span></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#var"><span class="hs-identifier hs-type">var</span></a></span><span> </span><span class="annot"><span class="hs-number">0</span></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-137"></span><span>
</span><span id="line-138"></span><span>
</span><span id="line-139"></span><span class="annot"><span class="hs-comment">-- | @isPrefixOf u v = Just es@ if @v == u `applyE` es@.</span></span><span>
</span><span id="line-140"></span><span class="hs-keyword">class</span><span> </span><span id="IsPrefixOf"><span class="annot"><a href="Agda.TypeChecking.Abstract.html#IsPrefixOf"><span class="hs-identifier hs-var">IsPrefixOf</span></a></span></span><span> </span><span id="local-6989586621682162801"><span class="annot"><a href="#local-6989586621682162801"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-141"></span><span>  </span><span id="isPrefixOf"><span class="annot"><a href="Agda.TypeChecking.Abstract.html#isPrefixOf"><span class="hs-identifier hs-type">isPrefixOf</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621682162801"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621682162801"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Elims"><span class="hs-identifier hs-type">Elims</span></a></span><span>
</span><span id="line-142"></span><span>
</span><span id="line-143"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Abstract.html#IsPrefixOf"><span class="hs-identifier hs-type">IsPrefixOf</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Elims"><span class="hs-identifier hs-type">Elims</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-144"></span><span>  </span><span id="local-6989586621682163409"><span class="annot"><span class="annottext">isPrefixOf :: [Elim] -&gt; [Elim] -&gt; Maybe [Elim]
</span><a href="Agda.TypeChecking.Abstract.html#isPrefixOf"><span class="hs-identifier hs-var hs-var hs-var">isPrefixOf</span></a></span></span><span> </span><span id="local-6989586621682163410"><span class="annot"><span class="annottext">[Elim]
</span><a href="#local-6989586621682163410"><span class="hs-identifier hs-var">us</span></a></span></span><span> </span><span id="local-6989586621682163411"><span class="annot"><span class="annottext">[Elim]
</span><a href="#local-6989586621682163411"><span class="hs-identifier hs-var">vs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-145"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621682163412"><span class="annot"><a href="#local-6989586621682163412"><span class="hs-identifier hs-var">vs1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682163413"><span class="annot"><a href="#local-6989586621682163413"><span class="hs-identifier hs-var">vs2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Nat -&gt; [Elim] -&gt; Maybe ([Elim], [Elim])
forall n a. Integral n =&gt; n -&gt; [a] -&gt; Maybe ([a], [a])
</span><a href="Agda.Utils.List.html#splitExactlyAt"><span class="hs-identifier hs-var">splitExactlyAt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Elim] -&gt; Nat
forall a. [a] -&gt; Nat
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Nat
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">[Elim]
</span><a href="#local-6989586621682163410"><span class="hs-identifier hs-var">us</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Elim]
</span><a href="#local-6989586621682163411"><span class="hs-identifier hs-var">vs</span></a></span><span>
</span><span id="line-146"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">guard</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Abstract.html#equalSy"><span class="hs-identifier hs-type">equalSy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682163410"><span class="hs-identifier hs-type">us</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682163412"><span class="hs-identifier hs-type">vs1</span></a></span><span>
</span><span id="line-147"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><a href="#local-6989586621682163413"><span class="hs-identifier hs-type">vs2</span></a></span><span>
</span><span id="line-148"></span><span>
</span><span id="line-149"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Abstract.html#IsPrefixOf"><span class="hs-identifier hs-type">IsPrefixOf</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Args"><span class="hs-identifier hs-type">Args</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-150"></span><span>  </span><span id="local-6989586621682163428"><span class="annot"><span class="annottext">isPrefixOf :: Args -&gt; Args -&gt; Maybe [Elim]
</span><a href="Agda.TypeChecking.Abstract.html#isPrefixOf"><span class="hs-identifier hs-var hs-var hs-var">isPrefixOf</span></a></span></span><span> </span><span id="local-6989586621682163429"><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621682163429"><span class="hs-identifier hs-var">us</span></a></span></span><span> </span><span id="local-6989586621682163430"><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621682163430"><span class="hs-identifier hs-var">vs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-151"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621682163431"><span class="annot"><a href="#local-6989586621682163431"><span class="hs-identifier hs-var">vs1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682163432"><span class="annot"><a href="#local-6989586621682163432"><span class="hs-identifier hs-var">vs2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Args -&gt; Maybe (Args, Args)
forall n a. Integral n =&gt; n -&gt; [a] -&gt; Maybe ([a], [a])
</span><a href="Agda.Utils.List.html#splitExactlyAt"><span class="hs-identifier hs-var">splitExactlyAt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Args -&gt; Nat
forall a. [a] -&gt; Nat
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Nat
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621682163429"><span class="hs-identifier hs-var">us</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621682163430"><span class="hs-identifier hs-var">vs</span></a></span><span>
</span><span id="line-152"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">guard</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Abstract.html#equalSy"><span class="hs-identifier hs-type">equalSy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682163429"><span class="hs-identifier hs-type">us</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682163431"><span class="hs-identifier hs-type">vs1</span></a></span><span>
</span><span id="line-153"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">map</span></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.Elim.html#Apply"><span class="hs-identifier hs-type">Apply</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682163432"><span class="hs-identifier hs-type">vs2</span></a></span><span>
</span><span id="line-154"></span><span>
</span><span id="line-155"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Abstract.html#IsPrefixOf"><span class="hs-identifier hs-type">IsPrefixOf</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-156"></span><span>  </span><span id="local-6989586621682163450"><span class="annot"><span class="annottext">isPrefixOf :: Term -&gt; Term -&gt; Maybe [Elim]
</span><a href="Agda.TypeChecking.Abstract.html#isPrefixOf"><span class="hs-identifier hs-var hs-var hs-var">isPrefixOf</span></a></span></span><span> </span><span id="local-6989586621682163451"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621682163451"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span id="local-6989586621682163452"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621682163452"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-157"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621682163451"><span class="hs-identifier hs-var">u</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621682163452"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-158"></span><span>      </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span>   </span><span id="local-6989586621682163454"><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621682163454"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621682163455"><span class="annot"><span class="annottext">[Elim]
</span><a href="#local-6989586621682163455"><span class="hs-identifier hs-var">us</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span>   </span><span id="local-6989586621682163456"><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621682163456"><span class="hs-identifier hs-var">j</span></a></span></span><span> </span><span id="local-6989586621682163457"><span class="annot"><span class="annottext">[Elim]
</span><a href="#local-6989586621682163457"><span class="hs-identifier hs-var">vs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621682163454"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Nat -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621682163456"><span class="hs-identifier hs-var">j</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[Elim]
</span><a href="#local-6989586621682163455"><span class="hs-identifier hs-var">us</span></a></span><span> </span><span class="annot"><span class="annottext">[Elim] -&gt; [Elim] -&gt; Maybe [Elim]
forall a. IsPrefixOf a =&gt; a -&gt; a -&gt; Maybe [Elim]
</span><a href="Agda.TypeChecking.Abstract.html#isPrefixOf"><span class="hs-operator hs-var">`isPrefixOf`</span></a></span><span> </span><span class="annot"><span class="annottext">[Elim]
</span><a href="#local-6989586621682163457"><span class="hs-identifier hs-var">vs</span></a></span><span>
</span><span id="line-159"></span><span>      </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Def"><span class="hs-identifier hs-type">Def</span></a></span><span>   </span><span id="local-6989586621682163458"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621682163458"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621682163459"><span class="annot"><span class="annottext">[Elim]
</span><a href="#local-6989586621682163459"><span class="hs-identifier hs-var">us</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Def"><span class="hs-identifier hs-type">Def</span></a></span><span>   </span><span id="local-6989586621682163460"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621682163460"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span id="local-6989586621682163461"><span class="annot"><span class="annottext">[Elim]
</span><a href="#local-6989586621682163461"><span class="hs-identifier hs-var">vs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621682163458"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">QName -&gt; QName -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621682163460"><span class="hs-identifier hs-var">g</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[Elim]
</span><a href="#local-6989586621682163459"><span class="hs-identifier hs-var">us</span></a></span><span> </span><span class="annot"><span class="annottext">[Elim] -&gt; [Elim] -&gt; Maybe [Elim]
forall a. IsPrefixOf a =&gt; a -&gt; a -&gt; Maybe [Elim]
</span><a href="Agda.TypeChecking.Abstract.html#isPrefixOf"><span class="hs-operator hs-var">`isPrefixOf`</span></a></span><span> </span><span class="annot"><span class="annottext">[Elim]
</span><a href="#local-6989586621682163461"><span class="hs-identifier hs-var">vs</span></a></span><span>
</span><span id="line-160"></span><span>      </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Con"><span class="hs-identifier hs-type">Con</span></a></span><span> </span><span id="local-6989586621682163463"><span class="annot"><span class="annottext">ConHead
</span><a href="#local-6989586621682163463"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="annot"><span class="annottext">ConInfo
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682163464"><span class="annot"><span class="annottext">[Elim]
</span><a href="#local-6989586621682163464"><span class="hs-identifier hs-var">us</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Con"><span class="hs-identifier hs-type">Con</span></a></span><span> </span><span id="local-6989586621682163465"><span class="annot"><span class="annottext">ConHead
</span><a href="#local-6989586621682163465"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span class="annot"><span class="annottext">ConInfo
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682163466"><span class="annot"><span class="annottext">[Elim]
</span><a href="#local-6989586621682163466"><span class="hs-identifier hs-var">vs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">ConHead
</span><a href="#local-6989586621682163463"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">ConHead -&gt; ConHead -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">ConHead
</span><a href="#local-6989586621682163465"><span class="hs-identifier hs-var">d</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[Elim]
</span><a href="#local-6989586621682163464"><span class="hs-identifier hs-var">us</span></a></span><span> </span><span class="annot"><span class="annottext">[Elim] -&gt; [Elim] -&gt; Maybe [Elim]
forall a. IsPrefixOf a =&gt; a -&gt; a -&gt; Maybe [Elim]
</span><a href="Agda.TypeChecking.Abstract.html#isPrefixOf"><span class="hs-operator hs-var">`isPrefixOf`</span></a></span><span> </span><span class="annot"><span class="annottext">[Elim]
</span><a href="#local-6989586621682163466"><span class="hs-identifier hs-var">vs</span></a></span><span>
</span><span id="line-161"></span><span>      </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#MetaV"><span class="hs-identifier hs-type">MetaV</span></a></span><span> </span><span id="local-6989586621682163468"><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621682163468"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621682163469"><span class="annot"><span class="annottext">[Elim]
</span><a href="#local-6989586621682163469"><span class="hs-identifier hs-var">us</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#MetaV"><span class="hs-identifier hs-type">MetaV</span></a></span><span> </span><span id="local-6989586621682163470"><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621682163470"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span id="local-6989586621682163471"><span class="annot"><span class="annottext">[Elim]
</span><a href="#local-6989586621682163471"><span class="hs-identifier hs-var">vs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621682163468"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">MetaId -&gt; MetaId -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621682163470"><span class="hs-identifier hs-var">y</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[Elim]
</span><a href="#local-6989586621682163469"><span class="hs-identifier hs-var">us</span></a></span><span> </span><span class="annot"><span class="annottext">[Elim] -&gt; [Elim] -&gt; Maybe [Elim]
forall a. IsPrefixOf a =&gt; a -&gt; a -&gt; Maybe [Elim]
</span><a href="Agda.TypeChecking.Abstract.html#isPrefixOf"><span class="hs-operator hs-var">`isPrefixOf`</span></a></span><span> </span><span class="annot"><span class="annottext">[Elim]
</span><a href="#local-6989586621682163471"><span class="hs-identifier hs-var">vs</span></a></span><span>
</span><span id="line-162"></span><span>      </span><span class="hs-special">(</span><span id="local-6989586621682163472"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621682163472"><span class="hs-identifier hs-var">u</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682163473"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621682163473"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Maybe ()
forall (f :: * -&gt; *). Alternative f =&gt; Bool -&gt; f ()
</span><span class="hs-identifier hs-var">guard</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term -&gt; Term -&gt; Bool
forall a. EqualSy a =&gt; a -&gt; a -&gt; Bool
</span><a href="Agda.TypeChecking.Abstract.html#equalSy"><span class="hs-identifier hs-var">equalSy</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621682163472"><span class="hs-identifier hs-var">u</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621682163473"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe () -&gt; Maybe [Elim] -&gt; Maybe [Elim]
forall a b. Maybe a -&gt; Maybe b -&gt; Maybe b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; m b -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">[Elim] -&gt; Maybe [Elim]
forall a. a -&gt; Maybe a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-163"></span><span>
</span><span id="line-164"></span><span class="hs-comment">-- Type-based abstraction. Needed if @u@ is a constructor application (#745, fix of #5833).</span><span>
</span><span id="line-165"></span><span class="hs-comment">-- Note that @a@ is the type of the new variable, not necessarily the</span><span>
</span><span id="line-166"></span><span class="hs-comment">-- type of @u@: this allows the inspect idiom to abstract over ill-typed</span><span>
</span><span id="line-167"></span><span class="hs-comment">-- subterms of the form @refl w : w &#8801; v@ created by abstracting over @v@</span><span>
</span><span id="line-168"></span><span class="hs-comment">-- (see 'piAbstract').</span><span>
</span><span id="line-169"></span><span class="annot"><a href="Agda.TypeChecking.Abstract.html#abstractTerm"><span class="hs-identifier hs-type">abstractTerm</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">TCM</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span>
</span><span id="line-170"></span><span id="abstractTerm"><span class="annot"><span class="annottext">abstractTerm :: Type -&gt; Term -&gt; Type -&gt; Term -&gt; TCMT IO Term
</span><a href="Agda.TypeChecking.Abstract.html#abstractTerm"><span class="hs-identifier hs-var hs-var">abstractTerm</span></a></span></span><span> </span><span id="local-6989586621682163474"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682163474"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621682163475"><span class="annot"><span class="annottext">u :: Term
</span><a href="#local-6989586621682163475"><span class="hs-identifier hs-var">u</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="Agda.Syntax.Internal.html#Con"><span class="hs-identifier hs-type">Con</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span id="local-6989586621682163476"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682163476"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span id="local-6989586621682163477"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621682163477"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-171"></span><span>  </span><span class="annot"><span class="annottext">String -&gt; Nat -&gt; TCMT IO Doc -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
String -&gt; Nat -&gt; TCMT IO Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tc.abstract&quot;</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">50</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; TCMT IO ()) -&gt; TCMT IO Doc -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-172"></span><span>    </span><span class="annot"><span class="annottext">[TCMT IO Doc] -&gt; TCMT IO Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;Abstracting&quot;</span></span><span>
</span><span id="line-173"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Nat -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Functor m =&gt; Nat -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; TCMT IO Doc) -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[TCMT IO Doc] -&gt; TCMT IO Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Term -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; Term -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621682163475"><span class="hs-identifier hs-var">u</span></a></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;:&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Nat -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Functor m =&gt; Nat -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; TCMT IO Doc) -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; Type -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682163474"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-174"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;over&quot;</span></span><span>
</span><span id="line-175"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Nat -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Functor m =&gt; Nat -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; TCMT IO Doc) -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[TCMT IO Doc] -&gt; TCMT IO Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Term -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; Term -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621682163477"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;:&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Nat -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Functor m =&gt; Nat -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; TCMT IO Doc) -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; Type -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682163476"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="hs-special">]</span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-176"></span><span>  </span><span class="annot"><span class="annottext">String -&gt; Nat -&gt; TCMT IO Doc -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
String -&gt; Nat -&gt; TCMT IO Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tc.abstract&quot;</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">70</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; TCMT IO ()) -&gt; TCMT IO Doc -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-177"></span><span>    </span><span class="annot"><span class="annottext">[TCMT IO Doc] -&gt; TCMT IO Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;Abstracting&quot;</span></span><span>
</span><span id="line-178"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Nat -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Functor m =&gt; Nat -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; TCMT IO Doc) -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[TCMT IO Doc] -&gt; TCMT IO Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; String -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; TCMT IO Doc) -&gt; (Term -&gt; String) -&gt; Term -&gt; TCMT IO Doc
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Term -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621682163475"><span class="hs-identifier hs-var">u</span></a></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;:&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Nat -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Functor m =&gt; Nat -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; TCMT IO Doc) -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; String -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; TCMT IO Doc) -&gt; (Type -&gt; String) -&gt; Type -&gt; TCMT IO Doc
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682163474"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-179"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;over&quot;</span></span><span>
</span><span id="line-180"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Nat -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Functor m =&gt; Nat -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; TCMT IO Doc) -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[TCMT IO Doc] -&gt; TCMT IO Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; String -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; TCMT IO Doc) -&gt; (Term -&gt; String) -&gt; Term -&gt; TCMT IO Doc
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Term -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621682163477"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;:&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Nat -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Functor m =&gt; Nat -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; TCMT IO Doc) -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; String -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; TCMT IO Doc) -&gt; (Type -&gt; String) -&gt; Type -&gt; TCMT IO Doc
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682163476"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="hs-special">]</span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-181"></span><span>
</span><span id="line-182"></span><span>  </span><span id="local-6989586621682163478"><span class="annot"><a href="#local-6989586621682163478"><span class="hs-identifier hs-var">hole</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ModuleName -&gt; Name -&gt; QName
</span><a href="Agda.Syntax.Abstract.Name.html#qualify"><span class="hs-identifier hs-var">qualify</span></a></span><span> </span><span class="annot"><span class="annottext">(ModuleName -&gt; Name -&gt; QName)
-&gt; TCMT IO ModuleName -&gt; TCMT IO (Name -&gt; QName)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO ModuleName
forall (m :: * -&gt; *). MonadTCEnv m =&gt; m ModuleName
</span><a href="Agda.TypeChecking.Monad.Env.html#currentModule"><span class="hs-identifier hs-var">currentModule</span></a></span><span> </span><span class="annot"><span class="annottext">TCMT IO (Name -&gt; QName) -&gt; TCMT IO Name -&gt; TCM QName
forall a b. TCMT IO (a -&gt; b) -&gt; TCMT IO a -&gt; TCMT IO b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; TCMT IO Name
forall a (m :: * -&gt; *).
(FreshName a, MonadFresh NameId m) =&gt;
a -&gt; m Name
forall (m :: * -&gt; *). MonadFresh NameId m =&gt; String -&gt; m Name
</span><a href="Agda.TypeChecking.Monad.Base.html#freshName_"><span class="hs-identifier hs-var">freshName_</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;hole&quot;</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">)</span><span>
</span><span id="line-183"></span><span>  </span><span class="annot"><a href="Agda.TypeChecking.Monad.Mutual.html#noMutualBlock"><span class="hs-identifier hs-type">noMutualBlock</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Signature.html#addConstant%27"><span class="hs-identifier hs-type">addConstant'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682163478"><span class="hs-identifier hs-type">hole</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html#defaultArgInfo"><span class="hs-identifier hs-type">defaultArgInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682163474"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#defaultAxiom"><span class="hs-identifier hs-type">defaultAxiom</span></a></span><span>
</span><span id="line-184"></span><span>
</span><span id="line-185"></span><span>  </span><span id="local-6989586621682163486"><span class="annot"><a href="#local-6989586621682163486"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="hs-identifier hs-type">map</span></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.Elim.html#Apply"><span class="hs-identifier hs-type">Apply</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">&lt;$&gt;</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Context.html#getContextArgs"><span class="hs-identifier hs-type">getContextArgs</span></a></span><span>
</span><span id="line-186"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682163488"><span class="annot"><a href="#local-6989586621682163488"><span class="hs-identifier hs-var hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Elim] -&gt; Nat
forall a. [a] -&gt; Nat
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Nat
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">[Elim]
</span><a href="#local-6989586621682163486"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-187"></span><span>
</span><span id="line-188"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682163489"><span class="annot"><a href="#local-6989586621682163489"><span class="hs-identifier hs-var hs-var">abstr</span></a></span></span><span> </span><span id="local-6989586621682163490"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682163490"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span id="local-6989586621682163491"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621682163491"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-189"></span><span>        </span><span id="local-6989586621682163492"><span class="annot"><a href="#local-6989586621682163492"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TCMT IO Nat
forall (m :: * -&gt; *). MonadTCEnv m =&gt; m Nat
</span><a href="Agda.TypeChecking.Monad.Context.html#getContextSize"><span class="hs-identifier hs-var">getContextSize</span></a></span><span>
</span><span id="line-190"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682163494"><span class="annot"><a href="#local-6989586621682163494"><span class="hs-identifier hs-var">a'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682163495"><span class="annot"><a href="#local-6989586621682163495"><span class="hs-identifier hs-var">u'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#raise"><span class="hs-identifier hs-type">raise</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682163492"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><span class="hs-glyph hs-type">-</span></span><span> </span><span class="annot"><a href="#local-6989586621682163488"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682163474"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621682163475"><span class="hs-identifier hs-type">u</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-191"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><a href="#local-6989586621682163495"><span class="hs-identifier hs-type">u'</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Abstract.html#isPrefixOf"><span class="hs-operator hs-type">`isPrefixOf`</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682163491"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-192"></span><span>          </span><span class="annot"><span class="annottext">Maybe [Elim]
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Term -&gt; TCMT IO Term
forall a. a -&gt; TCMT IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621682163491"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-193"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621682163496"><span class="annot"><span class="annottext">[Elim]
</span><a href="#local-6989586621682163496"><span class="hs-identifier hs-var">es</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-comment">-- Check that the types match.</span><span>
</span><span id="line-194"></span><span>            </span><span id="local-6989586621682163497"><span class="annot"><a href="#local-6989586621682163497"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TCMT IO TCState
forall (m :: * -&gt; *). MonadTCState m =&gt; m TCState
</span><a href="Agda.TypeChecking.Monad.Base.html#getTC"><span class="hs-identifier hs-var">getTC</span></a></span><span>
</span><span id="line-195"></span><span>            </span><span class="hs-keyword">do</span><span>  </span><span class="annot"><a href="Agda.TypeChecking.Constraints.html#noConstraints"><span class="hs-identifier hs-type">noConstraints</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Conversion.html#equalType"><span class="hs-identifier hs-type">equalType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682163494"><span class="hs-identifier hs-type">a'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682163490"><span class="hs-identifier hs-type">b</span></a></span><span>
</span><span id="line-196"></span><span>                </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#putTC"><span class="hs-identifier hs-type">putTC</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682163497"><span class="hs-identifier hs-type">s</span></a></span><span>
</span><span id="line-197"></span><span>                </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Def"><span class="hs-identifier hs-type">Def</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682163478"><span class="hs-identifier hs-type">hole</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#raise"><span class="hs-identifier hs-type">raise</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682163492"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><span class="hs-glyph hs-type">-</span></span><span> </span><span class="annot"><a href="#local-6989586621682163488"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621682163486"><span class="hs-identifier hs-type">args</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">++</span></span><span> </span><span class="annot"><a href="#local-6989586621682163496"><span class="hs-identifier hs-type">es</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-198"></span><span>              </span><span class="annot"><span class="hs-operator hs-type">`catchError`</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span class="annot"><span class="annottext">TCErr
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-199"></span><span>                </span><span class="annot"><span class="annottext">String -&gt; Nat -&gt; TCMT IO Doc -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
String -&gt; Nat -&gt; TCMT IO Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tc.abstract.ill-typed&quot;</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">50</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; TCMT IO ()) -&gt; TCMT IO Doc -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-200"></span><span>                  </span><span class="annot"><span class="annottext">[TCMT IO Doc] -&gt; TCMT IO Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;Skipping ill-typed abstraction&quot;</span></span><span>
</span><span id="line-201"></span><span>                      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Nat -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Functor m =&gt; Nat -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; TCMT IO Doc) -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[TCMT IO Doc] -&gt; TCMT IO Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Term -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; Term -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621682163491"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;:&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Nat -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Functor m =&gt; Nat -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; TCMT IO Doc) -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; Type -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682163490"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="hs-special">]</span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-202"></span><span>                </span><span class="annot"><span class="annottext">Term -&gt; TCMT IO Term
forall a. a -&gt; TCMT IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621682163491"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-203"></span><span>
</span><span id="line-204"></span><span>  </span><span class="hs-comment">-- #2763: This can fail if the user is with-abstracting incorrectly (for</span><span>
</span><span id="line-205"></span><span>  </span><span class="hs-comment">-- instance, abstracting over a first component of a sigma without also</span><span>
</span><span id="line-206"></span><span>  </span><span class="hs-comment">-- abstracting the second component). In this case we skip abstraction</span><span>
</span><span id="line-207"></span><span>  </span><span class="hs-comment">-- altogether and let the type check of the final with-function type produce</span><span>
</span><span id="line-208"></span><span>  </span><span class="hs-comment">-- the error message.</span><span>
</span><span id="line-209"></span><span>  </span><span id="local-6989586621682163503"><span class="annot"><a href="#local-6989586621682163503"><span class="hs-identifier hs-var">res</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#catchError_"><span class="hs-identifier hs-type">catchError_</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Monad.MetaVars.html#withFrozenMetas"><span class="hs-identifier hs-type">withFrozenMetas</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.CheckInternal.html#checkInternal%27"><span class="hs-identifier hs-type">checkInternal'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.CheckInternal.html#defaultAction"><span class="hs-identifier hs-type">defaultAction</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Agda.TypeChecking.CheckInternal.html#preAction"><span class="hs-identifier hs-var">preAction</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682163489"><span class="hs-identifier hs-type">abstr</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621682163477"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.Types.html#CmpLeq"><span class="hs-identifier hs-type">CmpLeq</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682163476"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621682163510"><span class="annot"><span class="annottext">TCErr
</span><a href="#local-6989586621682163510"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-210"></span><span>        </span><span class="annot"><span class="annottext">String -&gt; Nat -&gt; TCMT IO Doc -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
String -&gt; Nat -&gt; TCMT IO Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tc.abstract.ill-typed&quot;</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">40</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; TCMT IO ()) -&gt; TCMT IO Doc -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-211"></span><span>          </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;Skipping typed abstraction over ill-typed term&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%3F%3E"><span class="hs-operator hs-var">&lt;?&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; Term -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621682163477"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%3F%3E"><span class="hs-operator hs-var">&lt;?&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;:&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Type -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
forall (m :: * -&gt; *). MonadPretty m =&gt; Type -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682163476"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-212"></span><span>        </span><span class="annot"><span class="annottext">Term -&gt; TCMT IO Term
forall a. a -&gt; TCMT IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621682163477"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-213"></span><span>  </span><span class="annot"><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-type">reportSDoc</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;tc.abstract&quot;</span></span><span> </span><span class="annot"><span class="hs-number">50</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><span class="hs-string">&quot;Resulting abstraction&quot;</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#%3C%3F%3E"><span class="hs-operator hs-type">&lt;?&gt;</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-type">prettyTCM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682163503"><span class="hs-identifier hs-type">res</span></a></span><span>
</span><span id="line-214"></span><span>  </span><span class="annot"><a href="Agda.TypeChecking.Monad.State.html#modifySignature"><span class="hs-identifier hs-type">modifySignature</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.State.html#updateDefinitions"><span class="hs-identifier hs-type">updateDefinitions</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">HMap.delete</span></span><span> </span><span class="annot"><a href="#local-6989586621682163478"><span class="hs-identifier hs-type">hole</span></a></span><span>
</span><span id="line-215"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Abstract.html#absTerm"><span class="hs-identifier hs-type">absTerm</span></a></span><span> </span><span class="annot"><span class="hs-number">0</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Def"><span class="hs-identifier hs-type">Def</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682163478"><span class="hs-identifier hs-type">hole</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682163486"><span class="hs-identifier hs-type">args</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621682163503"><span class="hs-identifier hs-type">res</span></a></span><span>
</span><span id="line-216"></span><span>
</span><span id="line-217"></span><span class="annot"><a href="Agda.TypeChecking.Abstract.html#abstractTerm"><span class="hs-identifier hs-var">abstractTerm</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682163515"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621682163515"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682163516"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621682163516"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Term -&gt; TCMT IO Term
forall a. a -&gt; TCMT IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Term -&gt; TCMT IO Term) -&gt; Term -&gt; TCMT IO Term
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Term -&gt; Term -&gt; Term
forall a. AbsTerm a =&gt; Nat -&gt; Term -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Abstract.html#absTerm"><span class="hs-identifier hs-var">absTerm</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621682163515"><span class="hs-identifier hs-var">u</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621682163516"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="hs-comment">-- Non-constructors can use untyped abstraction</span><span>
</span><span id="line-218"></span><span>
</span><span id="line-219"></span><span class="hs-keyword">class</span><span> </span><span id="AbsTerm"><span class="annot"><a href="Agda.TypeChecking.Abstract.html#AbsTerm"><span class="hs-identifier hs-var">AbsTerm</span></a></span></span><span> </span><span id="local-6989586621682162734"><span class="annot"><a href="#local-6989586621682162734"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-220"></span><span>  </span><span class="hs-comment">-- | @subst j u . absTerm j u == id@</span><span>
</span><span id="line-221"></span><span>  </span><span id="absTerm"><span class="annot"><a href="Agda.TypeChecking.Abstract.html#absTerm"><span class="hs-identifier hs-type">absTerm</span></a></span></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-222"></span><span>       </span><span class="annot"><a href="Agda.Syntax.Common.html#Nat"><span class="hs-identifier hs-type">Nat</span></a></span><span>   </span><span class="annot"><span class="hs-comment">-- ^ De Bruijn index that should be the placeholder for the abstracted term.</span></span><span>
</span><span id="line-223"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ Term to abstract.</span></span><span>
</span><span id="line-224"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621682162734"><span class="hs-identifier hs-type">a</span></a></span><span>     </span><span class="annot"><span class="hs-comment">-- ^ Where to abstract.</span></span><span>
</span><span id="line-225"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621682162734"><span class="hs-identifier hs-type">a</span></a></span><span>     </span><span class="annot"><span class="hs-comment">-- ^ If the given de Bruijn index is free in the result, abstraction actually happened.</span></span><span>
</span><span id="line-226"></span><span>
</span><span id="line-227"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Abstract.html#AbsTerm"><span class="hs-identifier hs-type">AbsTerm</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-228"></span><span>  </span><span id="local-6989586621682163550"><span class="annot"><span class="annottext">absTerm :: Nat -&gt; Term -&gt; Term -&gt; Term
</span><a href="Agda.TypeChecking.Abstract.html#absTerm"><span class="hs-identifier hs-var hs-var hs-var">absTerm</span></a></span></span><span> </span><span id="local-6989586621682163551"><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621682163551"><span class="hs-identifier hs-var">j</span></a></span></span><span> </span><span id="local-6989586621682163552"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621682163552"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span id="local-6989586621682163553"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621682163553"><span class="hs-identifier hs-var">v</span></a></span></span><span>
</span><span id="line-229"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621682163554"><span class="annot"><span class="annottext">[Elim]
</span><a href="#local-6989586621682163554"><span class="hs-identifier hs-var">es</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621682163552"><span class="hs-identifier hs-var">u</span></a></span><span> </span><span class="annot"><span class="annottext">Term -&gt; Term -&gt; Maybe [Elim]
forall a. IsPrefixOf a =&gt; a -&gt; a -&gt; Maybe [Elim]
</span><a href="Agda.TypeChecking.Abstract.html#isPrefixOf"><span class="hs-operator hs-var">`isPrefixOf`</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621682163553"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Nat -&gt; [Elim] -&gt; Term
</span><a href="Agda.Syntax.Internal.html#Var"><span class="hs-identifier hs-var">Var</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621682163551"><span class="hs-identifier hs-var">j</span></a></span><span> </span><span class="annot"><span class="annottext">([Elim] -&gt; Term) -&gt; [Elim] -&gt; Term
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Elim] -&gt; [Elim]
forall b. AbsTerm b =&gt; b -&gt; b
</span><a href="#local-6989586621682163555"><span class="hs-identifier hs-var">absT</span></a></span><span> </span><span class="annot"><span class="annottext">[Elim]
</span><a href="#local-6989586621682163554"><span class="hs-identifier hs-var">es</span></a></span><span>
</span><span id="line-230"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>                   </span><span class="hs-glyph">=</span><span>
</span><span id="line-231"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621682163553"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-232"></span><span class="hs-comment">-- Andreas, 2013-10-20: the original impl. works only at base types</span><span>
</span><span id="line-233"></span><span class="hs-comment">--    v | u == v  -&gt; Var j []  -- incomplete see succeed/WithOfFunctionType</span><span>
</span><span id="line-234"></span><span>      </span><span class="annot"><a href="Agda.Syntax.Internal.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span id="local-6989586621682163556"><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621682163556"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621682163557"><span class="annot"><span class="annottext">[Elim]
</span><a href="#local-6989586621682163557"><span class="hs-identifier hs-var">vs</span></a></span></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Nat -&gt; [Elim] -&gt; Term
</span><a href="Agda.Syntax.Internal.html#Var"><span class="hs-identifier hs-var">Var</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621682163556"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Nat -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621682163551"><span class="hs-identifier hs-var">j</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621682163556"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621682163556"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Nat -&gt; Nat
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([Elim] -&gt; Term) -&gt; [Elim] -&gt; Term
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Elim] -&gt; [Elim]
forall b. AbsTerm b =&gt; b -&gt; b
</span><a href="#local-6989586621682163555"><span class="hs-identifier hs-var">absT</span></a></span><span> </span><span class="annot"><span class="annottext">[Elim]
</span><a href="#local-6989586621682163557"><span class="hs-identifier hs-var">vs</span></a></span><span>
</span><span id="line-235"></span><span>      </span><span class="annot"><a href="Agda.Syntax.Internal.html#Lam"><span class="hs-identifier hs-type">Lam</span></a></span><span> </span><span id="local-6989586621682163561"><span class="annot"><span class="annottext">ArgInfo
</span><a href="#local-6989586621682163561"><span class="hs-identifier hs-var">h</span></a></span></span><span> </span><span id="local-6989586621682163562"><span class="annot"><span class="annottext">Abs Term
</span><a href="#local-6989586621682163562"><span class="hs-identifier hs-var">b</span></a></span></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ArgInfo -&gt; Abs Term -&gt; Term
</span><a href="Agda.Syntax.Internal.html#Lam"><span class="hs-identifier hs-var">Lam</span></a></span><span> </span><span class="annot"><span class="annottext">ArgInfo
</span><a href="#local-6989586621682163561"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="annot"><span class="annottext">(Abs Term -&gt; Term) -&gt; Abs Term -&gt; Term
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Abs Term -&gt; Abs Term
forall b. AbsTerm b =&gt; b -&gt; b
</span><a href="#local-6989586621682163555"><span class="hs-identifier hs-var">absT</span></a></span><span> </span><span class="annot"><span class="annottext">Abs Term
</span><a href="#local-6989586621682163562"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-236"></span><span>      </span><span class="annot"><a href="Agda.Syntax.Internal.html#Def"><span class="hs-identifier hs-type">Def</span></a></span><span> </span><span id="local-6989586621682163563"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621682163563"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span id="local-6989586621682163564"><span class="annot"><span class="annottext">[Elim]
</span><a href="#local-6989586621682163564"><span class="hs-identifier hs-var">vs</span></a></span></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">QName -&gt; [Elim] -&gt; Term
</span><a href="Agda.Syntax.Internal.html#Def"><span class="hs-identifier hs-var">Def</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621682163563"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">([Elim] -&gt; Term) -&gt; [Elim] -&gt; Term
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Elim] -&gt; [Elim]
forall b. AbsTerm b =&gt; b -&gt; b
</span><a href="#local-6989586621682163555"><span class="hs-identifier hs-var">absT</span></a></span><span> </span><span class="annot"><span class="annottext">[Elim]
</span><a href="#local-6989586621682163564"><span class="hs-identifier hs-var">vs</span></a></span><span>
</span><span id="line-237"></span><span>      </span><span class="annot"><a href="Agda.Syntax.Internal.html#Con"><span class="hs-identifier hs-type">Con</span></a></span><span> </span><span id="local-6989586621682163565"><span class="annot"><span class="annottext">ConHead
</span><a href="#local-6989586621682163565"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span id="local-6989586621682163566"><span class="annot"><span class="annottext">ConInfo
</span><a href="#local-6989586621682163566"><span class="hs-identifier hs-var">ci</span></a></span></span><span> </span><span id="local-6989586621682163567"><span class="annot"><span class="annottext">[Elim]
</span><a href="#local-6989586621682163567"><span class="hs-identifier hs-var">vs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ConHead -&gt; ConInfo -&gt; [Elim] -&gt; Term
</span><a href="Agda.Syntax.Internal.html#Con"><span class="hs-identifier hs-var">Con</span></a></span><span> </span><span class="annot"><span class="annottext">ConHead
</span><a href="#local-6989586621682163565"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">ConInfo
</span><a href="#local-6989586621682163566"><span class="hs-identifier hs-var">ci</span></a></span><span> </span><span class="annot"><span class="annottext">([Elim] -&gt; Term) -&gt; [Elim] -&gt; Term
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Elim] -&gt; [Elim]
forall b. AbsTerm b =&gt; b -&gt; b
</span><a href="#local-6989586621682163555"><span class="hs-identifier hs-var">absT</span></a></span><span> </span><span class="annot"><span class="annottext">[Elim]
</span><a href="#local-6989586621682163567"><span class="hs-identifier hs-var">vs</span></a></span><span>
</span><span id="line-238"></span><span>      </span><span class="annot"><a href="Agda.Syntax.Internal.html#Pi"><span class="hs-identifier hs-type">Pi</span></a></span><span> </span><span id="local-6989586621682163569"><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621682163569"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621682163570"><span class="annot"><span class="annottext">Abs Type
</span><a href="#local-6989586621682163570"><span class="hs-identifier hs-var">b</span></a></span></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Dom Type -&gt; Abs Type -&gt; Term) -&gt; (Dom Type, Abs Type) -&gt; Term
forall a b c. (a -&gt; b -&gt; c) -&gt; (a, b) -&gt; c
</span><span class="hs-identifier hs-var">uncurry</span></span><span> </span><span class="annot"><span class="annottext">Dom Type -&gt; Abs Type -&gt; Term
</span><a href="Agda.Syntax.Internal.html#Pi"><span class="hs-identifier hs-var">Pi</span></a></span><span> </span><span class="annot"><span class="annottext">((Dom Type, Abs Type) -&gt; Term) -&gt; (Dom Type, Abs Type) -&gt; Term
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Dom Type, Abs Type) -&gt; (Dom Type, Abs Type)
forall b. AbsTerm b =&gt; b -&gt; b
</span><a href="#local-6989586621682163555"><span class="hs-identifier hs-var">absT</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621682163569"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Abs Type
</span><a href="#local-6989586621682163570"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-239"></span><span>      </span><span class="annot"><a href="Agda.Syntax.Internal.html#Lit"><span class="hs-identifier hs-type">Lit</span></a></span><span> </span><span id="local-6989586621682163573"><span class="annot"><span class="annottext">Literal
</span><a href="#local-6989586621682163573"><span class="hs-identifier hs-var">l</span></a></span></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Literal -&gt; Term
</span><a href="Agda.Syntax.Internal.html#Lit"><span class="hs-identifier hs-var">Lit</span></a></span><span> </span><span class="annot"><span class="annottext">Literal
</span><a href="#local-6989586621682163573"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-240"></span><span>      </span><span class="annot"><a href="Agda.Syntax.Internal.html#Level"><span class="hs-identifier hs-type">Level</span></a></span><span> </span><span id="local-6989586621682163575"><span class="annot"><span class="annottext">Level
</span><a href="#local-6989586621682163575"><span class="hs-identifier hs-var">l</span></a></span></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Level -&gt; Term
</span><a href="Agda.Syntax.Internal.html#Level"><span class="hs-identifier hs-var">Level</span></a></span><span> </span><span class="annot"><span class="annottext">(Level -&gt; Term) -&gt; Level -&gt; Term
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Level -&gt; Level
forall b. AbsTerm b =&gt; b -&gt; b
</span><a href="#local-6989586621682163555"><span class="hs-identifier hs-var">absT</span></a></span><span> </span><span class="annot"><span class="annottext">Level
</span><a href="#local-6989586621682163575"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-241"></span><span>      </span><span class="annot"><a href="Agda.Syntax.Internal.html#Sort"><span class="hs-identifier hs-type">Sort</span></a></span><span> </span><span id="local-6989586621682163577"><span class="annot"><span class="annottext">Sort' Term
</span><a href="#local-6989586621682163577"><span class="hs-identifier hs-var">s</span></a></span></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Sort' Term -&gt; Term
</span><a href="Agda.Syntax.Internal.html#Sort"><span class="hs-identifier hs-var">Sort</span></a></span><span> </span><span class="annot"><span class="annottext">(Sort' Term -&gt; Term) -&gt; Sort' Term -&gt; Term
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Sort' Term -&gt; Sort' Term
forall b. AbsTerm b =&gt; b -&gt; b
</span><a href="#local-6989586621682163555"><span class="hs-identifier hs-var">absT</span></a></span><span> </span><span class="annot"><span class="annottext">Sort' Term
</span><a href="#local-6989586621682163577"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-242"></span><span>      </span><span class="annot"><a href="Agda.Syntax.Internal.html#MetaV"><span class="hs-identifier hs-type">MetaV</span></a></span><span> </span><span id="local-6989586621682163578"><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621682163578"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span id="local-6989586621682163579"><span class="annot"><span class="annottext">[Elim]
</span><a href="#local-6989586621682163579"><span class="hs-identifier hs-var">vs</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">MetaId -&gt; [Elim] -&gt; Term
</span><a href="Agda.Syntax.Internal.html#MetaV"><span class="hs-identifier hs-var">MetaV</span></a></span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621682163578"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">([Elim] -&gt; Term) -&gt; [Elim] -&gt; Term
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Elim] -&gt; [Elim]
forall b. AbsTerm b =&gt; b -&gt; b
</span><a href="#local-6989586621682163555"><span class="hs-identifier hs-var">absT</span></a></span><span> </span><span class="annot"><span class="annottext">[Elim]
</span><a href="#local-6989586621682163579"><span class="hs-identifier hs-var">vs</span></a></span><span>
</span><span id="line-243"></span><span>      </span><span class="annot"><a href="Agda.Syntax.Internal.html#DontCare"><span class="hs-identifier hs-type">DontCare</span></a></span><span> </span><span id="local-6989586621682163581"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621682163581"><span class="hs-identifier hs-var">mv</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Term -&gt; Term
</span><a href="Agda.Syntax.Internal.html#DontCare"><span class="hs-identifier hs-var">DontCare</span></a></span><span> </span><span class="annot"><span class="annottext">(Term -&gt; Term) -&gt; Term -&gt; Term
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Term -&gt; Term
forall b. AbsTerm b =&gt; b -&gt; b
</span><a href="#local-6989586621682163555"><span class="hs-identifier hs-var">absT</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621682163581"><span class="hs-identifier hs-var">mv</span></a></span><span>
</span><span id="line-244"></span><span>      </span><span class="annot"><a href="Agda.Syntax.Internal.html#Dummy"><span class="hs-identifier hs-type">Dummy</span></a></span><span> </span><span id="local-6989586621682163583"><span class="annot"><span class="annottext">DummyTermKind
</span><a href="#local-6989586621682163583"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span id="local-6989586621682163584"><span class="annot"><span class="annottext">[Elim]
</span><a href="#local-6989586621682163584"><span class="hs-identifier hs-var">es</span></a></span></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">DummyTermKind -&gt; [Elim] -&gt; Term
</span><a href="Agda.Syntax.Internal.html#Dummy"><span class="hs-identifier hs-var">Dummy</span></a></span><span> </span><span class="annot"><span class="annottext">DummyTermKind
</span><a href="#local-6989586621682163583"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">([Elim] -&gt; Term) -&gt; [Elim] -&gt; Term
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Elim] -&gt; [Elim]
forall b. AbsTerm b =&gt; b -&gt; b
</span><a href="#local-6989586621682163555"><span class="hs-identifier hs-var">absT</span></a></span><span> </span><span class="annot"><span class="annottext">[Elim]
</span><a href="#local-6989586621682163584"><span class="hs-identifier hs-var">es</span></a></span><span>
</span><span id="line-245"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-246"></span><span>        </span><span id="local-6989586621682162862"><span class="annot"><a href="#local-6989586621682163555"><span class="hs-identifier hs-type">absT</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Abstract.html#AbsTerm"><span class="hs-identifier hs-type">AbsTerm</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682162862"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621682162862"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621682162862"><span class="hs-identifier hs-type">b</span></a></span></span><span>
</span><span id="line-247"></span><span>        </span><span id="local-6989586621682163555"><span class="annot"><span class="annottext">absT :: forall b. AbsTerm b =&gt; b -&gt; b
</span><a href="#local-6989586621682163555"><span class="hs-identifier hs-var hs-var">absT</span></a></span></span><span> </span><span id="local-6989586621682163587"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621682163587"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Term -&gt; b -&gt; b
forall a. AbsTerm a =&gt; Nat -&gt; Term -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Abstract.html#absTerm"><span class="hs-identifier hs-var">absTerm</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621682163551"><span class="hs-identifier hs-var">j</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621682163552"><span class="hs-identifier hs-var">u</span></a></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621682163587"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-248"></span><span>
</span><span id="line-249"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Abstract.html#AbsTerm"><span class="hs-identifier hs-type">AbsTerm</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-250"></span><span>  </span><span id="local-6989586621682163591"><span class="annot"><span class="annottext">absTerm :: Nat -&gt; Term -&gt; Type -&gt; Type
</span><a href="Agda.TypeChecking.Abstract.html#absTerm"><span class="hs-identifier hs-var hs-var hs-var">absTerm</span></a></span></span><span> </span><span id="local-6989586621682163592"><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621682163592"><span class="hs-identifier hs-var">j</span></a></span></span><span> </span><span id="local-6989586621682163593"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621682163593"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#El"><span class="hs-identifier hs-type">El</span></a></span><span> </span><span id="local-6989586621682163594"><span class="annot"><span class="annottext">Sort' Term
</span><a href="#local-6989586621682163594"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span id="local-6989586621682163595"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621682163595"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Sort' Term -&gt; Term -&gt; Type
forall t a. Sort' t -&gt; a -&gt; Type'' t a
</span><a href="Agda.Syntax.Internal.html#El"><span class="hs-identifier hs-var">El</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Nat -&gt; Term -&gt; Sort' Term -&gt; Sort' Term
forall a. AbsTerm a =&gt; Nat -&gt; Term -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Abstract.html#absTerm"><span class="hs-identifier hs-var">absTerm</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621682163592"><span class="hs-identifier hs-var">j</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621682163593"><span class="hs-identifier hs-var">u</span></a></span><span> </span><span class="annot"><span class="annottext">Sort' Term
</span><a href="#local-6989586621682163594"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Nat -&gt; Term -&gt; Term -&gt; Term
forall a. AbsTerm a =&gt; Nat -&gt; Term -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Abstract.html#absTerm"><span class="hs-identifier hs-var">absTerm</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621682163592"><span class="hs-identifier hs-var">j</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621682163593"><span class="hs-identifier hs-var">u</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621682163595"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-251"></span><span>
</span><span id="line-252"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Abstract.html#AbsTerm"><span class="hs-identifier hs-type">AbsTerm</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Sort"><span class="hs-identifier hs-type">Sort</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-253"></span><span>  </span><span id="local-6989586621682163613"><span class="annot"><span class="annottext">absTerm :: Nat -&gt; Term -&gt; Sort' Term -&gt; Sort' Term
</span><a href="Agda.TypeChecking.Abstract.html#absTerm"><span class="hs-identifier hs-var hs-var hs-var">absTerm</span></a></span></span><span> </span><span id="local-6989586621682163614"><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621682163614"><span class="hs-identifier hs-var">j</span></a></span></span><span> </span><span id="local-6989586621682163615"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621682163615"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-254"></span><span>    </span><span class="annot"><a href="Agda.Syntax.Internal.html#Univ"><span class="hs-identifier hs-type">Univ</span></a></span><span> </span><span id="local-6989586621682163617"><span class="annot"><span class="annottext">Univ
</span><a href="#local-6989586621682163617"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span id="local-6989586621682163618"><span class="annot"><span class="annottext">Level
</span><a href="#local-6989586621682163618"><span class="hs-identifier hs-var">n</span></a></span></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Univ -&gt; Level -&gt; Sort' Term
forall t. Univ -&gt; Level' t -&gt; Sort' t
</span><a href="Agda.Syntax.Internal.html#Univ"><span class="hs-identifier hs-var">Univ</span></a></span><span> </span><span class="annot"><span class="annottext">Univ
</span><a href="#local-6989586621682163617"><span class="hs-identifier hs-var">u</span></a></span><span> </span><span class="annot"><span class="annottext">(Level -&gt; Sort' Term) -&gt; Level -&gt; Sort' Term
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Level -&gt; Level
forall b. AbsTerm b =&gt; b -&gt; b
</span><a href="#local-6989586621682163619"><span class="hs-identifier hs-var">absS</span></a></span><span> </span><span class="annot"><span class="annottext">Level
</span><a href="#local-6989586621682163618"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-255"></span><span>    </span><span id="local-6989586621682163620"><span class="annot"><span class="annottext">s :: Sort' Term
</span><a href="#local-6989586621682163620"><span class="hs-identifier hs-var">s</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="Agda.Syntax.Internal.html#Inf"><span class="hs-identifier hs-type">Inf</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Sort' Term
</span><a href="#local-6989586621682163620"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-256"></span><span>    </span><span class="annot"><span class="annottext">Sort' Term
</span><a href="Agda.Syntax.Internal.html#SizeUniv"><span class="hs-identifier hs-var">SizeUniv</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Sort' Term
forall t. Sort' t
</span><a href="Agda.Syntax.Internal.html#SizeUniv"><span class="hs-identifier hs-var">SizeUniv</span></a></span><span>
</span><span id="line-257"></span><span>    </span><span class="annot"><span class="annottext">Sort' Term
</span><a href="Agda.Syntax.Internal.html#LockUniv"><span class="hs-identifier hs-var">LockUniv</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Sort' Term
forall t. Sort' t
</span><a href="Agda.Syntax.Internal.html#LockUniv"><span class="hs-identifier hs-var">LockUniv</span></a></span><span>
</span><span id="line-258"></span><span>    </span><span class="annot"><span class="annottext">Sort' Term
</span><a href="Agda.Syntax.Internal.html#LevelUniv"><span class="hs-identifier hs-var">LevelUniv</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Sort' Term
forall t. Sort' t
</span><a href="Agda.Syntax.Internal.html#LevelUniv"><span class="hs-identifier hs-var">LevelUniv</span></a></span><span>
</span><span id="line-259"></span><span>    </span><span class="annot"><span class="annottext">Sort' Term
</span><a href="Agda.Syntax.Internal.html#IntervalUniv"><span class="hs-identifier hs-var">IntervalUniv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Sort' Term
forall t. Sort' t
</span><a href="Agda.Syntax.Internal.html#IntervalUniv"><span class="hs-identifier hs-var">IntervalUniv</span></a></span><span>
</span><span id="line-260"></span><span>    </span><span class="annot"><a href="Agda.Syntax.Internal.html#PiSort"><span class="hs-identifier hs-type">PiSort</span></a></span><span> </span><span id="local-6989586621682163627"><span class="annot"><span class="annottext">Dom' Term Term
</span><a href="#local-6989586621682163627"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621682163628"><span class="annot"><span class="annottext">Sort' Term
</span><a href="#local-6989586621682163628"><span class="hs-identifier hs-var">s1</span></a></span></span><span> </span><span id="local-6989586621682163629"><span class="annot"><span class="annottext">Abs (Sort' Term)
</span><a href="#local-6989586621682163629"><span class="hs-identifier hs-var">s2</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Dom' Term Term -&gt; Sort' Term -&gt; Abs (Sort' Term) -&gt; Sort' Term
forall t. Dom' t t -&gt; Sort' t -&gt; Abs (Sort' t) -&gt; Sort' t
</span><a href="Agda.Syntax.Internal.html#PiSort"><span class="hs-identifier hs-var">PiSort</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Dom' Term Term -&gt; Dom' Term Term
forall b. AbsTerm b =&gt; b -&gt; b
</span><a href="#local-6989586621682163619"><span class="hs-identifier hs-var">absS</span></a></span><span> </span><span class="annot"><span class="annottext">Dom' Term Term
</span><a href="#local-6989586621682163627"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Sort' Term -&gt; Sort' Term
forall b. AbsTerm b =&gt; b -&gt; b
</span><a href="#local-6989586621682163619"><span class="hs-identifier hs-var">absS</span></a></span><span> </span><span class="annot"><span class="annottext">Sort' Term
</span><a href="#local-6989586621682163628"><span class="hs-identifier hs-var">s1</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Abs (Sort' Term) -&gt; Abs (Sort' Term)
forall b. AbsTerm b =&gt; b -&gt; b
</span><a href="#local-6989586621682163619"><span class="hs-identifier hs-var">absS</span></a></span><span> </span><span class="annot"><span class="annottext">Abs (Sort' Term)
</span><a href="#local-6989586621682163629"><span class="hs-identifier hs-var">s2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-261"></span><span>    </span><span class="annot"><a href="Agda.Syntax.Internal.html#FunSort"><span class="hs-identifier hs-type">FunSort</span></a></span><span> </span><span id="local-6989586621682163631"><span class="annot"><span class="annottext">Sort' Term
</span><a href="#local-6989586621682163631"><span class="hs-identifier hs-var">s1</span></a></span></span><span> </span><span id="local-6989586621682163632"><span class="annot"><span class="annottext">Sort' Term
</span><a href="#local-6989586621682163632"><span class="hs-identifier hs-var">s2</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Sort' Term -&gt; Sort' Term -&gt; Sort' Term
forall t. Sort' t -&gt; Sort' t -&gt; Sort' t
</span><a href="Agda.Syntax.Internal.html#FunSort"><span class="hs-identifier hs-var">FunSort</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Sort' Term -&gt; Sort' Term
forall b. AbsTerm b =&gt; b -&gt; b
</span><a href="#local-6989586621682163619"><span class="hs-identifier hs-var">absS</span></a></span><span> </span><span class="annot"><span class="annottext">Sort' Term
</span><a href="#local-6989586621682163631"><span class="hs-identifier hs-var">s1</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Sort' Term -&gt; Sort' Term
forall b. AbsTerm b =&gt; b -&gt; b
</span><a href="#local-6989586621682163619"><span class="hs-identifier hs-var">absS</span></a></span><span> </span><span class="annot"><span class="annottext">Sort' Term
</span><a href="#local-6989586621682163632"><span class="hs-identifier hs-var">s2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-262"></span><span>    </span><span class="annot"><a href="Agda.Syntax.Internal.html#UnivSort"><span class="hs-identifier hs-type">UnivSort</span></a></span><span> </span><span id="local-6989586621682163634"><span class="annot"><span class="annottext">Sort' Term
</span><a href="#local-6989586621682163634"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Sort' Term -&gt; Sort' Term
forall t. Sort' t -&gt; Sort' t
</span><a href="Agda.Syntax.Internal.html#UnivSort"><span class="hs-identifier hs-var">UnivSort</span></a></span><span> </span><span class="annot"><span class="annottext">(Sort' Term -&gt; Sort' Term) -&gt; Sort' Term -&gt; Sort' Term
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Sort' Term -&gt; Sort' Term
forall b. AbsTerm b =&gt; b -&gt; b
</span><a href="#local-6989586621682163619"><span class="hs-identifier hs-var">absS</span></a></span><span> </span><span class="annot"><span class="annottext">Sort' Term
</span><a href="#local-6989586621682163634"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-263"></span><span>    </span><span class="annot"><a href="Agda.Syntax.Internal.html#MetaS"><span class="hs-identifier hs-type">MetaS</span></a></span><span> </span><span id="local-6989586621682163636"><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621682163636"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621682163637"><span class="annot"><span class="annottext">[Elim]
</span><a href="#local-6989586621682163637"><span class="hs-identifier hs-var">es</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">MetaId -&gt; [Elim] -&gt; Sort' Term
forall t. MetaId -&gt; [Elim' t] -&gt; Sort' t
</span><a href="Agda.Syntax.Internal.html#MetaS"><span class="hs-identifier hs-var">MetaS</span></a></span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621682163636"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">([Elim] -&gt; Sort' Term) -&gt; [Elim] -&gt; Sort' Term
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Elim] -&gt; [Elim]
forall b. AbsTerm b =&gt; b -&gt; b
</span><a href="#local-6989586621682163619"><span class="hs-identifier hs-var">absS</span></a></span><span> </span><span class="annot"><span class="annottext">[Elim]
</span><a href="#local-6989586621682163637"><span class="hs-identifier hs-var">es</span></a></span><span>
</span><span id="line-264"></span><span>    </span><span class="annot"><a href="Agda.Syntax.Internal.html#DefS"><span class="hs-identifier hs-type">DefS</span></a></span><span> </span><span id="local-6989586621682163639"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621682163639"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span id="local-6989586621682163640"><span class="annot"><span class="annottext">[Elim]
</span><a href="#local-6989586621682163640"><span class="hs-identifier hs-var">es</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">QName -&gt; [Elim] -&gt; Sort' Term
forall t. QName -&gt; [Elim' t] -&gt; Sort' t
</span><a href="Agda.Syntax.Internal.html#DefS"><span class="hs-identifier hs-var">DefS</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621682163639"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="annot"><span class="annottext">([Elim] -&gt; Sort' Term) -&gt; [Elim] -&gt; Sort' Term
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Elim] -&gt; [Elim]
forall b. AbsTerm b =&gt; b -&gt; b
</span><a href="#local-6989586621682163619"><span class="hs-identifier hs-var">absS</span></a></span><span> </span><span class="annot"><span class="annottext">[Elim]
</span><a href="#local-6989586621682163640"><span class="hs-identifier hs-var">es</span></a></span><span>
</span><span id="line-265"></span><span>    </span><span id="local-6989586621682163641"><span class="annot"><span class="annottext">s :: Sort' Term
</span><a href="#local-6989586621682163641"><span class="hs-identifier hs-var">s</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="Agda.Syntax.Internal.html#DummyS"><span class="hs-identifier hs-type">DummyS</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Sort' Term
</span><a href="#local-6989586621682163641"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-266"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-267"></span><span>      </span><span id="local-6989586621682163643"><span class="annot"><a href="#local-6989586621682163619"><span class="hs-identifier hs-type">absS</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Abstract.html#AbsTerm"><span class="hs-identifier hs-type">AbsTerm</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682163643"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621682163643"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621682163643"><span class="hs-identifier hs-type">b</span></a></span></span><span>
</span><span id="line-268"></span><span>      </span><span id="local-6989586621682163619"><span class="annot"><span class="annottext">absS :: forall b. AbsTerm b =&gt; b -&gt; b
</span><a href="#local-6989586621682163619"><span class="hs-identifier hs-var hs-var">absS</span></a></span></span><span> </span><span id="local-6989586621682163646"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621682163646"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Term -&gt; b -&gt; b
forall a. AbsTerm a =&gt; Nat -&gt; Term -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Abstract.html#absTerm"><span class="hs-identifier hs-var">absTerm</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621682163614"><span class="hs-identifier hs-var">j</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621682163615"><span class="hs-identifier hs-var">u</span></a></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621682163646"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-269"></span><span>
</span><span id="line-270"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Abstract.html#AbsTerm"><span class="hs-identifier hs-type">AbsTerm</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Level"><span class="hs-identifier hs-type">Level</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-271"></span><span>  </span><span id="local-6989586621682163651"><span class="annot"><span class="annottext">absTerm :: Nat -&gt; Term -&gt; Level -&gt; Level
</span><a href="Agda.TypeChecking.Abstract.html#absTerm"><span class="hs-identifier hs-var hs-var hs-var">absTerm</span></a></span></span><span> </span><span id="local-6989586621682163652"><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621682163652"><span class="hs-identifier hs-var">j</span></a></span></span><span> </span><span id="local-6989586621682163653"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621682163653"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Max"><span class="hs-identifier hs-type">Max</span></a></span><span> </span><span id="local-6989586621682163655"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621682163655"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621682163656"><span class="annot"><span class="annottext">[PlusLevel' Term]
</span><a href="#local-6989586621682163656"><span class="hs-keyword hs-var">as</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; [PlusLevel' Term] -&gt; Level
forall t. Integer -&gt; [PlusLevel' t] -&gt; Level' t
</span><a href="Agda.Syntax.Internal.html#Max"><span class="hs-identifier hs-var">Max</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621682163655"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">([PlusLevel' Term] -&gt; Level) -&gt; [PlusLevel' Term] -&gt; Level
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Term -&gt; [PlusLevel' Term] -&gt; [PlusLevel' Term]
forall a. AbsTerm a =&gt; Nat -&gt; Term -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Abstract.html#absTerm"><span class="hs-identifier hs-var">absTerm</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621682163652"><span class="hs-identifier hs-var">j</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621682163653"><span class="hs-identifier hs-var">u</span></a></span><span> </span><span class="annot"><span class="annottext">[PlusLevel' Term]
</span><a href="#local-6989586621682163656"><span class="hs-keyword hs-var">as</span></a></span><span>
</span><span id="line-272"></span><span>
</span><span id="line-273"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Abstract.html#AbsTerm"><span class="hs-identifier hs-type">AbsTerm</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#PlusLevel"><span class="hs-identifier hs-type">PlusLevel</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-274"></span><span>  </span><span id="local-6989586621682163660"><span class="annot"><span class="annottext">absTerm :: Nat -&gt; Term -&gt; PlusLevel' Term -&gt; PlusLevel' Term
</span><a href="Agda.TypeChecking.Abstract.html#absTerm"><span class="hs-identifier hs-var hs-var hs-var">absTerm</span></a></span></span><span> </span><span id="local-6989586621682163661"><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621682163661"><span class="hs-identifier hs-var">j</span></a></span></span><span> </span><span id="local-6989586621682163662"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621682163662"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Plus"><span class="hs-identifier hs-type">Plus</span></a></span><span> </span><span id="local-6989586621682163664"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621682163664"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621682163665"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621682163665"><span class="hs-identifier hs-var">l</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Term -&gt; PlusLevel' Term
forall t. Integer -&gt; t -&gt; PlusLevel' t
</span><a href="Agda.Syntax.Internal.html#Plus"><span class="hs-identifier hs-var">Plus</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621682163664"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">(Term -&gt; PlusLevel' Term) -&gt; Term -&gt; PlusLevel' Term
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Term -&gt; Term -&gt; Term
forall a. AbsTerm a =&gt; Nat -&gt; Term -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Abstract.html#absTerm"><span class="hs-identifier hs-var">absTerm</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621682163661"><span class="hs-identifier hs-var">j</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621682163662"><span class="hs-identifier hs-var">u</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621682163665"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-275"></span><span>
</span><span id="line-276"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621682162861"><span class="annot"><a href="Agda.TypeChecking.Abstract.html#AbsTerm"><span class="hs-identifier hs-type">AbsTerm</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682162861"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Abstract.html#AbsTerm"><span class="hs-identifier hs-type">AbsTerm</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.Elim.html#Elim%27"><span class="hs-identifier hs-type">Elim'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682162861"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-277"></span><span>  </span><span id="local-6989586621682163671"><span class="annot"><span class="annottext">absTerm :: Nat -&gt; Term -&gt; Elim' a -&gt; Elim' a
</span><a href="Agda.TypeChecking.Abstract.html#absTerm"><span class="hs-identifier hs-var hs-var hs-var">absTerm</span></a></span></span><span> </span><span id="local-6989586621682163672"><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621682163672"><span class="hs-identifier hs-var">j</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a -&gt; a) -&gt; Elim' a -&gt; Elim' a
forall a b. (a -&gt; b) -&gt; Elim' a -&gt; Elim' b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">((a -&gt; a) -&gt; Elim' a -&gt; Elim' a)
-&gt; (Term -&gt; a -&gt; a) -&gt; Term -&gt; Elim' a -&gt; Elim' a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Term -&gt; a -&gt; a
forall a. AbsTerm a =&gt; Nat -&gt; Term -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Abstract.html#absTerm"><span class="hs-identifier hs-var">absTerm</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621682163672"><span class="hs-identifier hs-var">j</span></a></span><span>
</span><span id="line-278"></span><span>
</span><span id="line-279"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621682162883"><span class="annot"><a href="Agda.TypeChecking.Abstract.html#AbsTerm"><span class="hs-identifier hs-type">AbsTerm</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682162883"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Abstract.html#AbsTerm"><span class="hs-identifier hs-type">AbsTerm</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Common.html#Arg"><span class="hs-identifier hs-type">Arg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682162883"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-280"></span><span>  </span><span id="local-6989586621682163678"><span class="annot"><span class="annottext">absTerm :: Nat -&gt; Term -&gt; Arg a -&gt; Arg a
</span><a href="Agda.TypeChecking.Abstract.html#absTerm"><span class="hs-identifier hs-var hs-var hs-var">absTerm</span></a></span></span><span> </span><span id="local-6989586621682163679"><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621682163679"><span class="hs-identifier hs-var">j</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a -&gt; a) -&gt; Arg a -&gt; Arg a
forall a b. (a -&gt; b) -&gt; Arg a -&gt; Arg b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">((a -&gt; a) -&gt; Arg a -&gt; Arg a)
-&gt; (Term -&gt; a -&gt; a) -&gt; Term -&gt; Arg a -&gt; Arg a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Term -&gt; a -&gt; a
forall a. AbsTerm a =&gt; Nat -&gt; Term -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Abstract.html#absTerm"><span class="hs-identifier hs-var">absTerm</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621682163679"><span class="hs-identifier hs-var">j</span></a></span><span>
</span><span id="line-281"></span><span>
</span><span id="line-282"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621682162860"><span class="annot"><a href="Agda.TypeChecking.Abstract.html#AbsTerm"><span class="hs-identifier hs-type">AbsTerm</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682162860"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Abstract.html#AbsTerm"><span class="hs-identifier hs-type">AbsTerm</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Dom"><span class="hs-identifier hs-type">Dom</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682162860"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-283"></span><span>  </span><span id="local-6989586621682163685"><span class="annot"><span class="annottext">absTerm :: Nat -&gt; Term -&gt; Dom a -&gt; Dom a
</span><a href="Agda.TypeChecking.Abstract.html#absTerm"><span class="hs-identifier hs-var hs-var hs-var">absTerm</span></a></span></span><span> </span><span id="local-6989586621682163686"><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621682163686"><span class="hs-identifier hs-var">j</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a -&gt; a) -&gt; Dom a -&gt; Dom a
forall a b. (a -&gt; b) -&gt; Dom' Term a -&gt; Dom' Term b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">((a -&gt; a) -&gt; Dom a -&gt; Dom a)
-&gt; (Term -&gt; a -&gt; a) -&gt; Term -&gt; Dom a -&gt; Dom a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Term -&gt; a -&gt; a
forall a. AbsTerm a =&gt; Nat -&gt; Term -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Abstract.html#absTerm"><span class="hs-identifier hs-var">absTerm</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621682163686"><span class="hs-identifier hs-var">j</span></a></span><span>
</span><span id="line-284"></span><span>
</span><span id="line-285"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621682162859"><span class="annot"><a href="Agda.TypeChecking.Abstract.html#AbsTerm"><span class="hs-identifier hs-type">AbsTerm</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682162859"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Abstract.html#AbsTerm"><span class="hs-identifier hs-type">AbsTerm</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621682162859"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-286"></span><span>  </span><span id="local-6989586621682163692"><span class="annot"><span class="annottext">absTerm :: Nat -&gt; Term -&gt; [a] -&gt; [a]
</span><a href="Agda.TypeChecking.Abstract.html#absTerm"><span class="hs-identifier hs-var hs-var hs-var">absTerm</span></a></span></span><span> </span><span id="local-6989586621682163693"><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621682163693"><span class="hs-identifier hs-var">j</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a -&gt; a) -&gt; [a] -&gt; [a]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">((a -&gt; a) -&gt; [a] -&gt; [a]) -&gt; (Term -&gt; a -&gt; a) -&gt; Term -&gt; [a] -&gt; [a]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Term -&gt; a -&gt; a
forall a. AbsTerm a =&gt; Nat -&gt; Term -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Abstract.html#absTerm"><span class="hs-identifier hs-var">absTerm</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621682163693"><span class="hs-identifier hs-var">j</span></a></span><span>
</span><span id="line-287"></span><span>
</span><span id="line-288"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621682162888"><span class="annot"><a href="Agda.TypeChecking.Abstract.html#AbsTerm"><span class="hs-identifier hs-type">AbsTerm</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682162888"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Abstract.html#AbsTerm"><span class="hs-identifier hs-type">AbsTerm</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621682162888"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-289"></span><span>  </span><span id="local-6989586621682163700"><span class="annot"><span class="annottext">absTerm :: Nat -&gt; Term -&gt; Maybe a -&gt; Maybe a
</span><a href="Agda.TypeChecking.Abstract.html#absTerm"><span class="hs-identifier hs-var hs-var hs-var">absTerm</span></a></span></span><span> </span><span id="local-6989586621682163701"><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621682163701"><span class="hs-identifier hs-var">j</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a -&gt; a) -&gt; Maybe a -&gt; Maybe a
forall a b. (a -&gt; b) -&gt; Maybe a -&gt; Maybe b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">((a -&gt; a) -&gt; Maybe a -&gt; Maybe a)
-&gt; (Term -&gt; a -&gt; a) -&gt; Term -&gt; Maybe a -&gt; Maybe a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Term -&gt; a -&gt; a
forall a. AbsTerm a =&gt; Nat -&gt; Term -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Abstract.html#absTerm"><span class="hs-identifier hs-var">absTerm</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621682163701"><span class="hs-identifier hs-var">j</span></a></span><span>
</span><span id="line-290"></span><span>
</span><span id="line-291"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621682162858"><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#TermSubst"><span class="hs-identifier hs-type">TermSubst</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682162858"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Abstract.html#AbsTerm"><span class="hs-identifier hs-type">AbsTerm</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682162858"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Abstract.html#AbsTerm"><span class="hs-identifier hs-type">AbsTerm</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Abs"><span class="hs-identifier hs-type">Abs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682162858"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-292"></span><span>  </span><span id="local-6989586621682163710"><span class="annot"><span class="annottext">absTerm :: Nat -&gt; Term -&gt; Abs a -&gt; Abs a
</span><a href="Agda.TypeChecking.Abstract.html#absTerm"><span class="hs-identifier hs-var hs-var hs-var">absTerm</span></a></span></span><span> </span><span id="local-6989586621682163711"><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621682163711"><span class="hs-identifier hs-var">j</span></a></span></span><span> </span><span id="local-6989586621682163712"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621682163712"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#NoAbs"><span class="hs-identifier hs-type">NoAbs</span></a></span><span> </span><span id="local-6989586621682163714"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682163714"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621682163715"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682163715"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; a -&gt; Abs a
forall a. String -&gt; a -&gt; Abs a
</span><a href="Agda.Syntax.Internal.html#NoAbs"><span class="hs-identifier hs-var">NoAbs</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682163714"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">(a -&gt; Abs a) -&gt; a -&gt; Abs a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Term -&gt; a -&gt; a
forall a. AbsTerm a =&gt; Nat -&gt; Term -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Abstract.html#absTerm"><span class="hs-identifier hs-var">absTerm</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621682163711"><span class="hs-identifier hs-var">j</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621682163712"><span class="hs-identifier hs-var">u</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682163715"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-293"></span><span>  </span><span class="annot"><a href="Agda.TypeChecking.Abstract.html#absTerm"><span class="hs-identifier hs-var">absTerm</span></a></span><span> </span><span id="local-6989586621682163716"><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621682163716"><span class="hs-identifier hs-var">j</span></a></span></span><span> </span><span id="local-6989586621682163717"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621682163717"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Abs"><span class="hs-identifier hs-type">Abs</span></a></span><span>   </span><span id="local-6989586621682163719"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682163719"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621682163720"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682163720"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; a -&gt; Abs a
forall a. String -&gt; a -&gt; Abs a
</span><a href="Agda.Syntax.Internal.html#Abs"><span class="hs-identifier hs-var">Abs</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682163719"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">(a -&gt; Abs a) -&gt; a -&gt; Abs a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Term -&gt; a -&gt; a
forall a. AbsTerm a =&gt; Nat -&gt; Term -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Abstract.html#absTerm"><span class="hs-identifier hs-var">absTerm</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621682163716"><span class="hs-identifier hs-var">j</span></a></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Nat -&gt; Nat
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Nat -&gt; Term -&gt; Term
forall a. Subst a =&gt; Nat -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#raise"><span class="hs-identifier hs-var">raise</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621682163717"><span class="hs-identifier hs-var">u</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682163720"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-294"></span><span>
</span><span id="line-295"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621682162856"><span id="local-6989586621682162857"><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Abstract.html#AbsTerm"><span class="hs-identifier hs-type">AbsTerm</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682162856"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Abstract.html#AbsTerm"><span class="hs-identifier hs-type">AbsTerm</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682162857"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Abstract.html#AbsTerm"><span class="hs-identifier hs-type">AbsTerm</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682162856"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621682162857"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-296"></span><span>  </span><span id="local-6989586621682163726"><span class="annot"><span class="annottext">absTerm :: Nat -&gt; Term -&gt; (a, b) -&gt; (a, b)
</span><a href="Agda.TypeChecking.Abstract.html#absTerm"><span class="hs-identifier hs-var hs-var hs-var">absTerm</span></a></span></span><span> </span><span id="local-6989586621682163727"><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621682163727"><span class="hs-identifier hs-var">j</span></a></span></span><span> </span><span id="local-6989586621682163728"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621682163728"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682163729"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682163729"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682163730"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621682163730"><span class="hs-identifier hs-var">y</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Nat -&gt; Term -&gt; a -&gt; a
forall a. AbsTerm a =&gt; Nat -&gt; Term -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Abstract.html#absTerm"><span class="hs-identifier hs-var">absTerm</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621682163727"><span class="hs-identifier hs-var">j</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621682163728"><span class="hs-identifier hs-var">u</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682163729"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Term -&gt; b -&gt; b
forall a. AbsTerm a =&gt; Nat -&gt; Term -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Abstract.html#absTerm"><span class="hs-identifier hs-var">absTerm</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621682163727"><span class="hs-identifier hs-var">j</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621682163728"><span class="hs-identifier hs-var">u</span></a></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621682163730"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-297"></span><span>
</span><span id="line-298"></span><span class="annot"><span class="hs-comment">-- | This swaps @var 0@ and @var 1@.</span></span><span>
</span><span id="line-299"></span><span id="local-6989586621682162797"><span class="annot"><a href="Agda.TypeChecking.Abstract.html#swap01"><span class="hs-identifier hs-type">swap01</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#TermSubst"><span class="hs-identifier hs-type">TermSubst</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682162797"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621682162797"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621682162797"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-300"></span><span id="swap01"><span class="annot"><span class="annottext">swap01 :: forall a. TermSubst a =&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Abstract.html#swap01"><span class="hs-identifier hs-var hs-var">swap01</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Substitution' (SubstArg a) -&gt; a -&gt; a
forall a. Subst a =&gt; Substitution' (SubstArg a) -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#applySubst"><span class="hs-identifier hs-var">applySubst</span></a></span><span> </span><span class="annot"><span class="annottext">(Substitution' (SubstArg a) -&gt; a -&gt; a)
-&gt; Substitution' (SubstArg a) -&gt; a -&gt; a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Term
</span><a href="Agda.Syntax.Internal.html#var"><span class="hs-identifier hs-var">var</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">SubstArg a
-&gt; Substitution' (SubstArg a) -&gt; Substitution' (SubstArg a)
forall a. a -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.Syntax.Internal.html#%3A%23"><span class="hs-operator hs-var">:#</span></a></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Substitution' Term -&gt; Substitution' Term
forall a. Nat -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#liftS"><span class="hs-identifier hs-var">liftS</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">1</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Nat -&gt; Substitution' Term
forall a. Nat -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#raiseS"><span class="hs-identifier hs-var">raiseS</span></a></span><span> </span><span class="annot"><span class="annottext">Nat
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span>
</span><span id="line-301"></span><span>
</span><span id="line-302"></span><span>
</span><span id="line-303"></span><span class="annot"><span class="hs-comment">-- ** Equality of terms for the sake of with-abstraction.</span></span><span>
</span><span id="line-304"></span><span>
</span><span id="line-305"></span><span class="hs-comment">-- The following could be parameterized by a record of flags</span><span>
</span><span id="line-306"></span><span class="hs-comment">-- what parts of the syntax tree should be ignored.</span><span>
</span><span id="line-307"></span><span class="hs-comment">-- For now, there is a fixed strategy.</span><span>
</span><span id="line-308"></span><span>
</span><span id="line-309"></span><span class="hs-keyword">class</span><span> </span><span id="EqualSy"><span class="annot"><a href="Agda.TypeChecking.Abstract.html#EqualSy"><span class="hs-identifier hs-var">EqualSy</span></a></span></span><span> </span><span id="local-6989586621682162811"><span class="annot"><a href="#local-6989586621682162811"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-310"></span><span>  </span><span id="equalSy"><span class="annot"><a href="Agda.TypeChecking.Abstract.html#equalSy"><span class="hs-identifier hs-type">equalSy</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621682162811"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621682162811"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-311"></span><span>
</span><span id="line-312"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621682162805"><span class="annot"><a href="Agda.TypeChecking.Abstract.html#EqualSy"><span class="hs-identifier hs-type">EqualSy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682162805"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Abstract.html#EqualSy"><span class="hs-identifier hs-type">EqualSy</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621682162805"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-313"></span><span>  </span><span id="local-6989586621682163748"><span class="annot"><span class="annottext">equalSy :: [a] -&gt; [a] -&gt; Bool
</span><a href="Agda.TypeChecking.Abstract.html#equalSy"><span class="hs-identifier hs-var hs-var hs-var">equalSy</span></a></span></span><span> </span><span id="local-6989586621682163749"><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621682163749"><span class="hs-identifier hs-var">us</span></a></span></span><span> </span><span id="local-6989586621682163750"><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621682163750"><span class="hs-identifier hs-var">vs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Bool] -&gt; Bool
forall (t :: * -&gt; *). Foldable t =&gt; t Bool -&gt; Bool
</span><span class="hs-identifier hs-var">and</span></span><span> </span><span class="annot"><span class="annottext">([Bool] -&gt; Bool) -&gt; [Bool] -&gt; Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[a] -&gt; Nat
forall a. [a] -&gt; Nat
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Nat
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621682163749"><span class="hs-identifier hs-var">us</span></a></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Nat -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">[a] -&gt; Nat
forall a. [a] -&gt; Nat
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Nat
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621682163750"><span class="hs-identifier hs-var">vs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; [Bool] -&gt; [Bool]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">(a -&gt; a -&gt; Bool) -&gt; [a] -&gt; [a] -&gt; [Bool]
forall a b c. (a -&gt; b -&gt; c) -&gt; [a] -&gt; [b] -&gt; [c]
</span><span class="hs-identifier hs-var">zipWith</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; a -&gt; Bool
forall a. EqualSy a =&gt; a -&gt; a -&gt; Bool
</span><a href="Agda.TypeChecking.Abstract.html#equalSy"><span class="hs-identifier hs-var">equalSy</span></a></span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621682163749"><span class="hs-identifier hs-var">us</span></a></span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621682163750"><span class="hs-identifier hs-var">vs</span></a></span><span>
</span><span id="line-314"></span><span>
</span><span id="line-315"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Abstract.html#EqualSy"><span class="hs-identifier hs-type">EqualSy</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-316"></span><span>  </span><span id="local-6989586621682163783"><span class="annot"><span class="annottext">equalSy :: Term -&gt; Term -&gt; Bool
</span><a href="Agda.TypeChecking.Abstract.html#equalSy"><span class="hs-identifier hs-var hs-var hs-var">equalSy</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((Term, Term) -&gt; Bool) -&gt; Term -&gt; Term -&gt; Bool
forall a b c. ((a, b) -&gt; c) -&gt; a -&gt; b -&gt; c
</span><span class="hs-identifier hs-var">curry</span></span><span> </span><span class="annot"><span class="annottext">(((Term, Term) -&gt; Bool) -&gt; Term -&gt; Term -&gt; Bool)
-&gt; ((Term, Term) -&gt; Bool) -&gt; Term -&gt; Term -&gt; Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-317"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span id="local-6989586621682163785"><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621682163785"><span class="hs-identifier hs-var">i</span></a></span></span><span>   </span><span id="local-6989586621682163786"><span class="annot"><span class="annottext">[Elim]
</span><a href="#local-6989586621682163786"><span class="hs-identifier hs-var">vs</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span id="local-6989586621682163787"><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621682163787"><span class="hs-identifier hs-var">i'</span></a></span></span><span>   </span><span id="local-6989586621682163788"><span class="annot"><span class="annottext">[Elim]
</span><a href="#local-6989586621682163788"><span class="hs-identifier hs-var">vs'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621682163785"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Nat -&gt; Nat -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Nat
</span><a href="#local-6989586621682163787"><span class="hs-identifier hs-var">i'</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">[Elim] -&gt; [Elim] -&gt; Bool
forall a. EqualSy a =&gt; a -&gt; a -&gt; Bool
</span><a href="Agda.TypeChecking.Abstract.html#equalSy"><span class="hs-identifier hs-var">equalSy</span></a></span><span> </span><span class="annot"><span class="annottext">[Elim]
</span><a href="#local-6989586621682163786"><span class="hs-identifier hs-var">vs</span></a></span><span> </span><span class="annot"><span class="annottext">[Elim]
</span><a href="#local-6989586621682163788"><span class="hs-identifier hs-var">vs'</span></a></span><span>
</span><span id="line-318"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Con"><span class="hs-identifier hs-type">Con</span></a></span><span> </span><span id="local-6989586621682163790"><span class="annot"><span class="annottext">ConHead
</span><a href="#local-6989586621682163790"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="annot"><span class="annottext">ConInfo
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682163791"><span class="annot"><span class="annottext">[Elim]
</span><a href="#local-6989586621682163791"><span class="hs-identifier hs-var">es</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Con"><span class="hs-identifier hs-type">Con</span></a></span><span> </span><span id="local-6989586621682163792"><span class="annot"><span class="annottext">ConHead
</span><a href="#local-6989586621682163792"><span class="hs-identifier hs-var">c'</span></a></span></span><span> </span><span class="annot"><span class="annottext">ConInfo
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682163793"><span class="annot"><span class="annottext">[Elim]
</span><a href="#local-6989586621682163793"><span class="hs-identifier hs-var">es'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ConHead
</span><a href="#local-6989586621682163790"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">ConHead -&gt; ConHead -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">ConHead
</span><a href="#local-6989586621682163792"><span class="hs-identifier hs-var">c'</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">[Elim] -&gt; [Elim] -&gt; Bool
forall a. EqualSy a =&gt; a -&gt; a -&gt; Bool
</span><a href="Agda.TypeChecking.Abstract.html#equalSy"><span class="hs-identifier hs-var">equalSy</span></a></span><span> </span><span class="annot"><span class="annottext">[Elim]
</span><a href="#local-6989586621682163791"><span class="hs-identifier hs-var">es</span></a></span><span> </span><span class="annot"><span class="annottext">[Elim]
</span><a href="#local-6989586621682163793"><span class="hs-identifier hs-var">es'</span></a></span><span>
</span><span id="line-319"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Def"><span class="hs-identifier hs-type">Def</span></a></span><span>   </span><span id="local-6989586621682163794"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621682163794"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621682163795"><span class="annot"><span class="annottext">[Elim]
</span><a href="#local-6989586621682163795"><span class="hs-identifier hs-var">es</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Def"><span class="hs-identifier hs-type">Def</span></a></span><span>   </span><span id="local-6989586621682163796"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621682163796"><span class="hs-identifier hs-var">f'</span></a></span></span><span> </span><span id="local-6989586621682163797"><span class="annot"><span class="annottext">[Elim]
</span><a href="#local-6989586621682163797"><span class="hs-identifier hs-var">es'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621682163794"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">QName -&gt; QName -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621682163796"><span class="hs-identifier hs-var">f'</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">[Elim] -&gt; [Elim] -&gt; Bool
forall a. EqualSy a =&gt; a -&gt; a -&gt; Bool
</span><a href="Agda.TypeChecking.Abstract.html#equalSy"><span class="hs-identifier hs-var">equalSy</span></a></span><span> </span><span class="annot"><span class="annottext">[Elim]
</span><a href="#local-6989586621682163795"><span class="hs-identifier hs-var">es</span></a></span><span> </span><span class="annot"><span class="annottext">[Elim]
</span><a href="#local-6989586621682163797"><span class="hs-identifier hs-var">es'</span></a></span><span>
</span><span id="line-320"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#MetaV"><span class="hs-identifier hs-type">MetaV</span></a></span><span> </span><span id="local-6989586621682163798"><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621682163798"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621682163799"><span class="annot"><span class="annottext">[Elim]
</span><a href="#local-6989586621682163799"><span class="hs-identifier hs-var">es</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#MetaV"><span class="hs-identifier hs-type">MetaV</span></a></span><span> </span><span id="local-6989586621682163800"><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621682163800"><span class="hs-identifier hs-var">x'</span></a></span></span><span> </span><span id="local-6989586621682163801"><span class="annot"><span class="annottext">[Elim]
</span><a href="#local-6989586621682163801"><span class="hs-identifier hs-var">es'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621682163798"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">MetaId -&gt; MetaId -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621682163800"><span class="hs-identifier hs-var">x'</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">[Elim] -&gt; [Elim] -&gt; Bool
forall a. EqualSy a =&gt; a -&gt; a -&gt; Bool
</span><a href="Agda.TypeChecking.Abstract.html#equalSy"><span class="hs-identifier hs-var">equalSy</span></a></span><span> </span><span class="annot"><span class="annottext">[Elim]
</span><a href="#local-6989586621682163799"><span class="hs-identifier hs-var">es</span></a></span><span> </span><span class="annot"><span class="annottext">[Elim]
</span><a href="#local-6989586621682163801"><span class="hs-identifier hs-var">es'</span></a></span><span>
</span><span id="line-321"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Lit"><span class="hs-identifier hs-type">Lit</span></a></span><span>   </span><span id="local-6989586621682163802"><span class="annot"><span class="annottext">Literal
</span><a href="#local-6989586621682163802"><span class="hs-identifier hs-var">l</span></a></span></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Lit"><span class="hs-identifier hs-type">Lit</span></a></span><span>   </span><span id="local-6989586621682163803"><span class="annot"><span class="annottext">Literal
</span><a href="#local-6989586621682163803"><span class="hs-identifier hs-var">l'</span></a></span></span><span>    </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Literal
</span><a href="#local-6989586621682163802"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">Literal -&gt; Literal -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Literal
</span><a href="#local-6989586621682163803"><span class="hs-identifier hs-var">l'</span></a></span><span>
</span><span id="line-322"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Lam"><span class="hs-identifier hs-type">Lam</span></a></span><span>   </span><span id="local-6989586621682163804"><span class="annot"><span class="annottext">ArgInfo
</span><a href="#local-6989586621682163804"><span class="hs-identifier hs-var">ai</span></a></span></span><span> </span><span id="local-6989586621682163805"><span class="annot"><span class="annottext">Abs Term
</span><a href="#local-6989586621682163805"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Lam"><span class="hs-identifier hs-type">Lam</span></a></span><span>   </span><span id="local-6989586621682163806"><span class="annot"><span class="annottext">ArgInfo
</span><a href="#local-6989586621682163806"><span class="hs-identifier hs-var">ai'</span></a></span></span><span> </span><span id="local-6989586621682163807"><span class="annot"><span class="annottext">Abs Term
</span><a href="#local-6989586621682163807"><span class="hs-identifier hs-var">b'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ArgInfo -&gt; ArgInfo -&gt; Bool
forall a. EqualSy a =&gt; a -&gt; a -&gt; Bool
</span><a href="Agda.TypeChecking.Abstract.html#equalSy"><span class="hs-identifier hs-var">equalSy</span></a></span><span> </span><span class="annot"><span class="annottext">ArgInfo
</span><a href="#local-6989586621682163804"><span class="hs-identifier hs-var">ai</span></a></span><span> </span><span class="annot"><span class="annottext">ArgInfo
</span><a href="#local-6989586621682163806"><span class="hs-identifier hs-var">ai'</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Abs Term -&gt; Abs Term -&gt; Bool
forall a. EqualSy a =&gt; a -&gt; a -&gt; Bool
</span><a href="Agda.TypeChecking.Abstract.html#equalSy"><span class="hs-identifier hs-var">equalSy</span></a></span><span> </span><span class="annot"><span class="annottext">Abs Term
</span><a href="#local-6989586621682163805"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="annot"><span class="annottext">Abs Term
</span><a href="#local-6989586621682163807"><span class="hs-identifier hs-var">b'</span></a></span><span>
</span><span id="line-323"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Level"><span class="hs-identifier hs-type">Level</span></a></span><span> </span><span id="local-6989586621682163808"><span class="annot"><span class="annottext">Level
</span><a href="#local-6989586621682163808"><span class="hs-identifier hs-var">l</span></a></span></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Level"><span class="hs-identifier hs-type">Level</span></a></span><span> </span><span id="local-6989586621682163809"><span class="annot"><span class="annottext">Level
</span><a href="#local-6989586621682163809"><span class="hs-identifier hs-var">l'</span></a></span></span><span>    </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Level -&gt; Level -&gt; Bool
forall a. EqualSy a =&gt; a -&gt; a -&gt; Bool
</span><a href="Agda.TypeChecking.Abstract.html#equalSy"><span class="hs-identifier hs-var">equalSy</span></a></span><span> </span><span class="annot"><span class="annottext">Level
</span><a href="#local-6989586621682163808"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">Level
</span><a href="#local-6989586621682163809"><span class="hs-identifier hs-var">l'</span></a></span><span>
</span><span id="line-324"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Sort"><span class="hs-identifier hs-type">Sort</span></a></span><span>  </span><span id="local-6989586621682163810"><span class="annot"><span class="annottext">Sort' Term
</span><a href="#local-6989586621682163810"><span class="hs-identifier hs-var">s</span></a></span></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Sort"><span class="hs-identifier hs-type">Sort</span></a></span><span>  </span><span id="local-6989586621682163811"><span class="annot"><span class="annottext">Sort' Term
</span><a href="#local-6989586621682163811"><span class="hs-identifier hs-var">s'</span></a></span></span><span>    </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Sort' Term -&gt; Sort' Term -&gt; Bool
forall a. EqualSy a =&gt; a -&gt; a -&gt; Bool
</span><a href="Agda.TypeChecking.Abstract.html#equalSy"><span class="hs-identifier hs-var">equalSy</span></a></span><span> </span><span class="annot"><span class="annottext">Sort' Term
</span><a href="#local-6989586621682163810"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">Sort' Term
</span><a href="#local-6989586621682163811"><span class="hs-identifier hs-var">s'</span></a></span><span>
</span><span id="line-325"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Pi"><span class="hs-identifier hs-type">Pi</span></a></span><span>    </span><span id="local-6989586621682163812"><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621682163812"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621682163813"><span class="annot"><span class="annottext">Abs Type
</span><a href="#local-6989586621682163813"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Pi"><span class="hs-identifier hs-type">Pi</span></a></span><span>    </span><span id="local-6989586621682163814"><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621682163814"><span class="hs-identifier hs-var">a'</span></a></span></span><span> </span><span id="local-6989586621682163815"><span class="annot"><span class="annottext">Abs Type
</span><a href="#local-6989586621682163815"><span class="hs-identifier hs-var">b'</span></a></span></span><span> </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Dom Type -&gt; Dom Type -&gt; Bool
forall a. EqualSy a =&gt; a -&gt; a -&gt; Bool
</span><a href="Agda.TypeChecking.Abstract.html#equalSy"><span class="hs-identifier hs-var">equalSy</span></a></span><span> </span><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621682163812"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621682163814"><span class="hs-identifier hs-var">a'</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Abs Type -&gt; Abs Type -&gt; Bool
forall a. EqualSy a =&gt; a -&gt; a -&gt; Bool
</span><a href="Agda.TypeChecking.Abstract.html#equalSy"><span class="hs-identifier hs-var">equalSy</span></a></span><span> </span><span class="annot"><span class="annottext">Abs Type
</span><a href="#local-6989586621682163813"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="annot"><span class="annottext">Abs Type
</span><a href="#local-6989586621682163815"><span class="hs-identifier hs-var">b'</span></a></span><span>
</span><span id="line-326"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#DontCare"><span class="hs-identifier hs-type">DontCare</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#DontCare"><span class="hs-identifier hs-type">DontCare</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><span class="hs-identifier">_</span></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-327"></span><span>       </span><span class="hs-comment">-- Irrelevant things are syntactically equal.</span><span>
</span><span id="line-328"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Dummy"><span class="hs-identifier hs-type">Dummy</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Term
</span><span class="hs-identifier">_</span></span><span>           </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span>
</span><span id="line-329"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term
</span><span class="hs-identifier">_</span></span><span>         </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Dummy"><span class="hs-identifier hs-type">Dummy</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>     </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span>
</span><span id="line-330"></span><span>    </span><span class="annot"><span class="annottext">(Term, Term)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-331"></span><span>
</span><span id="line-332"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Abstract.html#EqualSy"><span class="hs-identifier hs-type">EqualSy</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Level"><span class="hs-identifier hs-type">Level</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-333"></span><span>  </span><span id="local-6989586621682163823"><span class="annot"><span class="annottext">equalSy :: Level -&gt; Level -&gt; Bool
</span><a href="Agda.TypeChecking.Abstract.html#equalSy"><span class="hs-identifier hs-var hs-var hs-var">equalSy</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Max"><span class="hs-identifier hs-type">Max</span></a></span><span> </span><span id="local-6989586621682163824"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621682163824"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621682163825"><span class="annot"><span class="annottext">[PlusLevel' Term]
</span><a href="#local-6989586621682163825"><span class="hs-identifier hs-var">vs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Max"><span class="hs-identifier hs-type">Max</span></a></span><span> </span><span id="local-6989586621682163826"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621682163826"><span class="hs-identifier hs-var">n'</span></a></span></span><span> </span><span id="local-6989586621682163827"><span class="annot"><span class="annottext">[PlusLevel' Term]
</span><a href="#local-6989586621682163827"><span class="hs-identifier hs-var">vs'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621682163824"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621682163826"><span class="hs-identifier hs-var">n'</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">[PlusLevel' Term] -&gt; [PlusLevel' Term] -&gt; Bool
forall a. EqualSy a =&gt; a -&gt; a -&gt; Bool
</span><a href="Agda.TypeChecking.Abstract.html#equalSy"><span class="hs-identifier hs-var">equalSy</span></a></span><span> </span><span class="annot"><span class="annottext">[PlusLevel' Term]
</span><a href="#local-6989586621682163825"><span class="hs-identifier hs-var">vs</span></a></span><span> </span><span class="annot"><span class="annottext">[PlusLevel' Term]
</span><a href="#local-6989586621682163827"><span class="hs-identifier hs-var">vs'</span></a></span><span>
</span><span id="line-334"></span><span>
</span><span id="line-335"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Abstract.html#EqualSy"><span class="hs-identifier hs-type">EqualSy</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#PlusLevel"><span class="hs-identifier hs-type">PlusLevel</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-336"></span><span>  </span><span id="local-6989586621682163831"><span class="annot"><span class="annottext">equalSy :: PlusLevel' Term -&gt; PlusLevel' Term -&gt; Bool
</span><a href="Agda.TypeChecking.Abstract.html#equalSy"><span class="hs-identifier hs-var hs-var hs-var">equalSy</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Plus"><span class="hs-identifier hs-type">Plus</span></a></span><span> </span><span id="local-6989586621682163832"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621682163832"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621682163833"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621682163833"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Plus"><span class="hs-identifier hs-type">Plus</span></a></span><span> </span><span id="local-6989586621682163834"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621682163834"><span class="hs-identifier hs-var">n'</span></a></span></span><span> </span><span id="local-6989586621682163835"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621682163835"><span class="hs-identifier hs-var">v'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621682163832"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621682163834"><span class="hs-identifier hs-var">n'</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Term -&gt; Term -&gt; Bool
forall a. EqualSy a =&gt; a -&gt; a -&gt; Bool
</span><a href="Agda.TypeChecking.Abstract.html#equalSy"><span class="hs-identifier hs-var">equalSy</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621682163833"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621682163835"><span class="hs-identifier hs-var">v'</span></a></span><span>
</span><span id="line-337"></span><span>
</span><span id="line-338"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Abstract.html#EqualSy"><span class="hs-identifier hs-type">EqualSy</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Sort"><span class="hs-identifier hs-type">Sort</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-339"></span><span>  </span><span id="local-6989586621682163859"><span class="annot"><span class="annottext">equalSy :: Sort' Term -&gt; Sort' Term -&gt; Bool
</span><a href="Agda.TypeChecking.Abstract.html#equalSy"><span class="hs-identifier hs-var hs-var hs-var">equalSy</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((Sort' Term, Sort' Term) -&gt; Bool)
-&gt; Sort' Term -&gt; Sort' Term -&gt; Bool
forall a b c. ((a, b) -&gt; c) -&gt; a -&gt; b -&gt; c
</span><span class="hs-identifier hs-var">curry</span></span><span> </span><span class="annot"><span class="annottext">(((Sort' Term, Sort' Term) -&gt; Bool)
 -&gt; Sort' Term -&gt; Sort' Term -&gt; Bool)
-&gt; ((Sort' Term, Sort' Term) -&gt; Bool)
-&gt; Sort' Term
-&gt; Sort' Term
-&gt; Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-340"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Univ"><span class="hs-identifier hs-type">Univ</span></a></span><span> </span><span id="local-6989586621682163860"><span class="annot"><span class="annottext">Univ
</span><a href="#local-6989586621682163860"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span id="local-6989586621682163861"><span class="annot"><span class="annottext">Level
</span><a href="#local-6989586621682163861"><span class="hs-identifier hs-var">l</span></a></span></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Univ"><span class="hs-identifier hs-type">Univ</span></a></span><span> </span><span id="local-6989586621682163862"><span class="annot"><span class="annottext">Univ
</span><a href="#local-6989586621682163862"><span class="hs-identifier hs-var">u'</span></a></span></span><span> </span><span id="local-6989586621682163863"><span class="annot"><span class="annottext">Level
</span><a href="#local-6989586621682163863"><span class="hs-identifier hs-var">l'</span></a></span></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Univ
</span><a href="#local-6989586621682163860"><span class="hs-identifier hs-var">u</span></a></span><span> </span><span class="annot"><span class="annottext">Univ -&gt; Univ -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Univ
</span><a href="#local-6989586621682163862"><span class="hs-identifier hs-var">u'</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Level -&gt; Level -&gt; Bool
forall a. EqualSy a =&gt; a -&gt; a -&gt; Bool
</span><a href="Agda.TypeChecking.Abstract.html#equalSy"><span class="hs-identifier hs-var">equalSy</span></a></span><span> </span><span class="annot"><span class="annottext">Level
</span><a href="#local-6989586621682163861"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">Level
</span><a href="#local-6989586621682163863"><span class="hs-identifier hs-var">l'</span></a></span><span>
</span><span id="line-341"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Inf"><span class="hs-identifier hs-type">Inf</span></a></span><span> </span><span id="local-6989586621682163864"><span class="annot"><span class="annottext">Univ
</span><a href="#local-6989586621682163864"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span id="local-6989586621682163865"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621682163865"><span class="hs-identifier hs-var">m</span></a></span></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Inf"><span class="hs-identifier hs-type">Inf</span></a></span><span> </span><span id="local-6989586621682163866"><span class="annot"><span class="annottext">Univ
</span><a href="#local-6989586621682163866"><span class="hs-identifier hs-var">u'</span></a></span></span><span> </span><span id="local-6989586621682163867"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621682163867"><span class="hs-identifier hs-var">n</span></a></span></span><span>    </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Univ
</span><a href="#local-6989586621682163864"><span class="hs-identifier hs-var">u</span></a></span><span> </span><span class="annot"><span class="annottext">Univ -&gt; Univ -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Univ
</span><a href="#local-6989586621682163866"><span class="hs-identifier hs-var">u'</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621682163865"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621682163867"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-342"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Sort' Term
</span><a href="Agda.Syntax.Internal.html#SizeUniv"><span class="hs-identifier hs-var">SizeUniv</span></a></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Sort' Term
</span><a href="Agda.Syntax.Internal.html#SizeUniv"><span class="hs-identifier hs-var">SizeUniv</span></a></span><span>    </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-343"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Sort' Term
</span><a href="Agda.Syntax.Internal.html#LevelUniv"><span class="hs-identifier hs-var">LevelUniv</span></a></span><span> </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Sort' Term
</span><a href="Agda.Syntax.Internal.html#LevelUniv"><span class="hs-identifier hs-var">LevelUniv</span></a></span><span>   </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-344"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#PiSort"><span class="hs-identifier hs-type">PiSort</span></a></span><span> </span><span id="local-6989586621682163868"><span class="annot"><span class="annottext">Dom' Term Term
</span><a href="#local-6989586621682163868"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621682163869"><span class="annot"><span class="annottext">Sort' Term
</span><a href="#local-6989586621682163869"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span id="local-6989586621682163870"><span class="annot"><span class="annottext">Abs (Sort' Term)
</span><a href="#local-6989586621682163870"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#PiSort"><span class="hs-identifier hs-type">PiSort</span></a></span><span> </span><span id="local-6989586621682163871"><span class="annot"><span class="annottext">Dom' Term Term
</span><a href="#local-6989586621682163871"><span class="hs-identifier hs-var">a'</span></a></span></span><span> </span><span id="local-6989586621682163872"><span class="annot"><span class="annottext">Sort' Term
</span><a href="#local-6989586621682163872"><span class="hs-identifier hs-var">b'</span></a></span></span><span> </span><span id="local-6989586621682163873"><span class="annot"><span class="annottext">Abs (Sort' Term)
</span><a href="#local-6989586621682163873"><span class="hs-identifier hs-var">c'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Dom' Term Term -&gt; Dom' Term Term -&gt; Bool
forall a. EqualSy a =&gt; a -&gt; a -&gt; Bool
</span><a href="Agda.TypeChecking.Abstract.html#equalSy"><span class="hs-identifier hs-var">equalSy</span></a></span><span> </span><span class="annot"><span class="annottext">Dom' Term Term
</span><a href="#local-6989586621682163868"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">Dom' Term Term
</span><a href="#local-6989586621682163871"><span class="hs-identifier hs-var">a'</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Sort' Term -&gt; Sort' Term -&gt; Bool
forall a. EqualSy a =&gt; a -&gt; a -&gt; Bool
</span><a href="Agda.TypeChecking.Abstract.html#equalSy"><span class="hs-identifier hs-var">equalSy</span></a></span><span> </span><span class="annot"><span class="annottext">Sort' Term
</span><a href="#local-6989586621682163869"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="annot"><span class="annottext">Sort' Term
</span><a href="#local-6989586621682163872"><span class="hs-identifier hs-var">b'</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Abs (Sort' Term) -&gt; Abs (Sort' Term) -&gt; Bool
forall a. EqualSy a =&gt; a -&gt; a -&gt; Bool
</span><a href="Agda.TypeChecking.Abstract.html#equalSy"><span class="hs-identifier hs-var">equalSy</span></a></span><span> </span><span class="annot"><span class="annottext">Abs (Sort' Term)
</span><a href="#local-6989586621682163870"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Abs (Sort' Term)
</span><a href="#local-6989586621682163873"><span class="hs-identifier hs-var">c'</span></a></span><span>
</span><span id="line-345"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#FunSort"><span class="hs-identifier hs-type">FunSort</span></a></span><span> </span><span id="local-6989586621682163874"><span class="annot"><span class="annottext">Sort' Term
</span><a href="#local-6989586621682163874"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621682163875"><span class="annot"><span class="annottext">Sort' Term
</span><a href="#local-6989586621682163875"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#FunSort"><span class="hs-identifier hs-type">FunSort</span></a></span><span> </span><span id="local-6989586621682163876"><span class="annot"><span class="annottext">Sort' Term
</span><a href="#local-6989586621682163876"><span class="hs-identifier hs-var">a'</span></a></span></span><span> </span><span id="local-6989586621682163877"><span class="annot"><span class="annottext">Sort' Term
</span><a href="#local-6989586621682163877"><span class="hs-identifier hs-var">b'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Sort' Term -&gt; Sort' Term -&gt; Bool
forall a. EqualSy a =&gt; a -&gt; a -&gt; Bool
</span><a href="Agda.TypeChecking.Abstract.html#equalSy"><span class="hs-identifier hs-var">equalSy</span></a></span><span> </span><span class="annot"><span class="annottext">Sort' Term
</span><a href="#local-6989586621682163874"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">Sort' Term
</span><a href="#local-6989586621682163876"><span class="hs-identifier hs-var">a'</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Sort' Term -&gt; Sort' Term -&gt; Bool
forall a. EqualSy a =&gt; a -&gt; a -&gt; Bool
</span><a href="Agda.TypeChecking.Abstract.html#equalSy"><span class="hs-identifier hs-var">equalSy</span></a></span><span> </span><span class="annot"><span class="annottext">Sort' Term
</span><a href="#local-6989586621682163875"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="annot"><span class="annottext">Sort' Term
</span><a href="#local-6989586621682163877"><span class="hs-identifier hs-var">b'</span></a></span><span>
</span><span id="line-346"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#UnivSort"><span class="hs-identifier hs-type">UnivSort</span></a></span><span> </span><span id="local-6989586621682163878"><span class="annot"><span class="annottext">Sort' Term
</span><a href="#local-6989586621682163878"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#UnivSort"><span class="hs-identifier hs-type">UnivSort</span></a></span><span> </span><span id="local-6989586621682163879"><span class="annot"><span class="annottext">Sort' Term
</span><a href="#local-6989586621682163879"><span class="hs-identifier hs-var">a'</span></a></span></span><span> </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Sort' Term -&gt; Sort' Term -&gt; Bool
forall a. EqualSy a =&gt; a -&gt; a -&gt; Bool
</span><a href="Agda.TypeChecking.Abstract.html#equalSy"><span class="hs-identifier hs-var">equalSy</span></a></span><span> </span><span class="annot"><span class="annottext">Sort' Term
</span><a href="#local-6989586621682163878"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">Sort' Term
</span><a href="#local-6989586621682163879"><span class="hs-identifier hs-var">a'</span></a></span><span>
</span><span id="line-347"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#MetaS"><span class="hs-identifier hs-type">MetaS</span></a></span><span> </span><span id="local-6989586621682163880"><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621682163880"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621682163881"><span class="annot"><span class="annottext">[Elim]
</span><a href="#local-6989586621682163881"><span class="hs-identifier hs-var">es</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#MetaS"><span class="hs-identifier hs-type">MetaS</span></a></span><span> </span><span id="local-6989586621682163882"><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621682163882"><span class="hs-identifier hs-var">x'</span></a></span></span><span> </span><span id="local-6989586621682163883"><span class="annot"><span class="annottext">[Elim]
</span><a href="#local-6989586621682163883"><span class="hs-identifier hs-var">es'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621682163880"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">MetaId -&gt; MetaId -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621682163882"><span class="hs-identifier hs-var">x'</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">[Elim] -&gt; [Elim] -&gt; Bool
forall a. EqualSy a =&gt; a -&gt; a -&gt; Bool
</span><a href="Agda.TypeChecking.Abstract.html#equalSy"><span class="hs-identifier hs-var">equalSy</span></a></span><span> </span><span class="annot"><span class="annottext">[Elim]
</span><a href="#local-6989586621682163881"><span class="hs-identifier hs-var">es</span></a></span><span> </span><span class="annot"><span class="annottext">[Elim]
</span><a href="#local-6989586621682163883"><span class="hs-identifier hs-var">es'</span></a></span><span>
</span><span id="line-348"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#DefS"><span class="hs-identifier hs-type">DefS</span></a></span><span>  </span><span id="local-6989586621682163884"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621682163884"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span id="local-6989586621682163885"><span class="annot"><span class="annottext">[Elim]
</span><a href="#local-6989586621682163885"><span class="hs-identifier hs-var">es</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#DefS"><span class="hs-identifier hs-type">DefS</span></a></span><span>  </span><span id="local-6989586621682163886"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621682163886"><span class="hs-identifier hs-var">d'</span></a></span></span><span> </span><span id="local-6989586621682163887"><span class="annot"><span class="annottext">[Elim]
</span><a href="#local-6989586621682163887"><span class="hs-identifier hs-var">es'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621682163884"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="annot"><span class="annottext">QName -&gt; QName -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621682163886"><span class="hs-identifier hs-var">d'</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">[Elim] -&gt; [Elim] -&gt; Bool
forall a. EqualSy a =&gt; a -&gt; a -&gt; Bool
</span><a href="Agda.TypeChecking.Abstract.html#equalSy"><span class="hs-identifier hs-var">equalSy</span></a></span><span> </span><span class="annot"><span class="annottext">[Elim]
</span><a href="#local-6989586621682163885"><span class="hs-identifier hs-var">es</span></a></span><span> </span><span class="annot"><span class="annottext">[Elim]
</span><a href="#local-6989586621682163887"><span class="hs-identifier hs-var">es'</span></a></span><span>
</span><span id="line-349"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#DummyS"><span class="hs-identifier hs-type">DummyS</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Sort' Term
</span><span class="hs-identifier">_</span></span><span>           </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span>
</span><span id="line-350"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Sort' Term
</span><span class="hs-identifier">_</span></span><span>         </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#DummyS"><span class="hs-identifier hs-type">DummyS</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>    </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span>
</span><span id="line-351"></span><span>    </span><span class="annot"><span class="annottext">(Sort' Term, Sort' Term)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-352"></span><span>
</span><span id="line-353"></span><span class="annot"><span class="hs-comment">-- | Ignores sorts.</span></span><span>
</span><span id="line-354"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Abstract.html#EqualSy"><span class="hs-identifier hs-type">EqualSy</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-355"></span><span>  </span><span id="local-6989586621682163890"><span class="annot"><span class="annottext">equalSy :: Type -&gt; Type -&gt; Bool
</span><a href="Agda.TypeChecking.Abstract.html#equalSy"><span class="hs-identifier hs-var hs-var hs-var">equalSy</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Term -&gt; Term -&gt; Bool
forall a. EqualSy a =&gt; a -&gt; a -&gt; Bool
</span><a href="Agda.TypeChecking.Abstract.html#equalSy"><span class="hs-identifier hs-var">equalSy</span></a></span><span> </span><span class="annot"><span class="annottext">(Term -&gt; Term -&gt; Bool) -&gt; (Type -&gt; Term) -&gt; Type -&gt; Type -&gt; Bool
forall b c a. (b -&gt; b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; a -&gt; c
</span><span class="hs-operator hs-var">`on`</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; Term
forall t a. Type'' t a -&gt; a
</span><a href="Agda.Syntax.Internal.html#unEl"><span class="hs-identifier hs-var">unEl</span></a></span><span>
</span><span id="line-356"></span><span>
</span><span id="line-357"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621682162804"><span class="annot"><a href="Agda.TypeChecking.Abstract.html#EqualSy"><span class="hs-identifier hs-type">EqualSy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682162804"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Abstract.html#EqualSy"><span class="hs-identifier hs-type">EqualSy</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.Elim.html#Elim%27"><span class="hs-identifier hs-type">Elim'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682162804"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-358"></span><span>  </span><span id="local-6989586621682163898"><span class="annot"><span class="annottext">equalSy :: Elim' a -&gt; Elim' a -&gt; Bool
</span><a href="Agda.TypeChecking.Abstract.html#equalSy"><span class="hs-identifier hs-var hs-var hs-var">equalSy</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((Elim' a, Elim' a) -&gt; Bool) -&gt; Elim' a -&gt; Elim' a -&gt; Bool
forall a b c. ((a, b) -&gt; c) -&gt; a -&gt; b -&gt; c
</span><span class="hs-identifier hs-var">curry</span></span><span> </span><span class="annot"><span class="annottext">(((Elim' a, Elim' a) -&gt; Bool) -&gt; Elim' a -&gt; Elim' a -&gt; Bool)
-&gt; ((Elim' a, Elim' a) -&gt; Bool) -&gt; Elim' a -&gt; Elim' a -&gt; Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-359"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.Elim.html#Proj"><span class="hs-identifier hs-type">Proj</span></a></span><span> </span><span class="annot"><span class="annottext">ProjOrigin
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682163900"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621682163900"><span class="hs-identifier hs-var">f</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.Elim.html#Proj"><span class="hs-identifier hs-type">Proj</span></a></span><span> </span><span class="annot"><span class="annottext">ProjOrigin
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682163901"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621682163901"><span class="hs-identifier hs-var">f'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621682163900"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">QName -&gt; QName -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621682163901"><span class="hs-identifier hs-var">f'</span></a></span><span>
</span><span id="line-360"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.Elim.html#Apply"><span class="hs-identifier hs-type">Apply</span></a></span><span> </span><span id="local-6989586621682163902"><span class="annot"><span class="annottext">Arg a
</span><a href="#local-6989586621682163902"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.Elim.html#Apply"><span class="hs-identifier hs-type">Apply</span></a></span><span> </span><span id="local-6989586621682163903"><span class="annot"><span class="annottext">Arg a
</span><a href="#local-6989586621682163903"><span class="hs-identifier hs-var">a'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Arg a -&gt; Arg a -&gt; Bool
forall a. EqualSy a =&gt; a -&gt; a -&gt; Bool
</span><a href="Agda.TypeChecking.Abstract.html#equalSy"><span class="hs-identifier hs-var">equalSy</span></a></span><span> </span><span class="annot"><span class="annottext">Arg a
</span><a href="#local-6989586621682163902"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">Arg a
</span><a href="#local-6989586621682163903"><span class="hs-identifier hs-var">a'</span></a></span><span>
</span><span id="line-361"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.Elim.html#IApply"><span class="hs-identifier hs-type">IApply</span></a></span><span> </span><span id="local-6989586621682163905"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682163905"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span id="local-6989586621682163906"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682163906"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span id="local-6989586621682163907"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682163907"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.Elim.html#IApply"><span class="hs-identifier hs-type">IApply</span></a></span><span> </span><span id="local-6989586621682163908"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682163908"><span class="hs-identifier hs-var">u'</span></a></span></span><span> </span><span id="local-6989586621682163909"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682163909"><span class="hs-identifier hs-var">v'</span></a></span></span><span> </span><span id="local-6989586621682163910"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682163910"><span class="hs-identifier hs-var">r'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-362"></span><span>           </span><span class="annot"><span class="annottext">a -&gt; a -&gt; Bool
forall a. EqualSy a =&gt; a -&gt; a -&gt; Bool
</span><a href="Agda.TypeChecking.Abstract.html#equalSy"><span class="hs-identifier hs-var">equalSy</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682163905"><span class="hs-identifier hs-var">u</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682163908"><span class="hs-identifier hs-var">u'</span></a></span><span>
</span><span id="line-363"></span><span>        </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; a -&gt; Bool
forall a. EqualSy a =&gt; a -&gt; a -&gt; Bool
</span><a href="Agda.TypeChecking.Abstract.html#equalSy"><span class="hs-identifier hs-var">equalSy</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682163906"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682163909"><span class="hs-identifier hs-var">v'</span></a></span><span>
</span><span id="line-364"></span><span>        </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; a -&gt; Bool
forall a. EqualSy a =&gt; a -&gt; a -&gt; Bool
</span><a href="Agda.TypeChecking.Abstract.html#equalSy"><span class="hs-identifier hs-var">equalSy</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682163907"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682163910"><span class="hs-identifier hs-var">r'</span></a></span><span>
</span><span id="line-365"></span><span>    </span><span class="annot"><span class="annottext">(Elim' a, Elim' a)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-366"></span><span>
</span><span id="line-367"></span><span class="annot"><span class="hs-comment">-- | Ignores 'absName'.</span></span><span>
</span><span id="line-368"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621682162905"><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#Subst"><span class="hs-identifier hs-type">Subst</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682162905"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Abstract.html#EqualSy"><span class="hs-identifier hs-type">EqualSy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682162905"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Abstract.html#EqualSy"><span class="hs-identifier hs-type">EqualSy</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Abs"><span class="hs-identifier hs-type">Abs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682162905"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-369"></span><span>  </span><span id="local-6989586621682163919"><span class="annot"><span class="annottext">equalSy :: Abs a -&gt; Abs a -&gt; Bool
</span><a href="Agda.TypeChecking.Abstract.html#equalSy"><span class="hs-identifier hs-var hs-var hs-var">equalSy</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((Abs a, Abs a) -&gt; Bool) -&gt; Abs a -&gt; Abs a -&gt; Bool
forall a b c. ((a, b) -&gt; c) -&gt; a -&gt; b -&gt; c
</span><span class="hs-identifier hs-var">curry</span></span><span> </span><span class="annot"><span class="annottext">(((Abs a, Abs a) -&gt; Bool) -&gt; Abs a -&gt; Abs a -&gt; Bool)
-&gt; ((Abs a, Abs a) -&gt; Bool) -&gt; Abs a -&gt; Abs a -&gt; Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-370"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#NoAbs"><span class="hs-identifier hs-type">NoAbs</span></a></span><span> </span><span id="local-6989586621682163920"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682163920"><span class="hs-identifier hs-var">_x</span></a></span></span><span> </span><span id="local-6989586621682163921"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682163921"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#NoAbs"><span class="hs-identifier hs-type">NoAbs</span></a></span><span> </span><span id="local-6989586621682163922"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682163922"><span class="hs-identifier hs-var">_x'</span></a></span></span><span> </span><span id="local-6989586621682163923"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682163923"><span class="hs-identifier hs-var">b'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">a -&gt; a -&gt; Bool
forall a. EqualSy a =&gt; a -&gt; a -&gt; Bool
</span><a href="Agda.TypeChecking.Abstract.html#equalSy"><span class="hs-identifier hs-var">equalSy</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682163921"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682163923"><span class="hs-identifier hs-var">b'</span></a></span><span> </span><span class="hs-comment">-- no need to raise if both are NoAbs</span><span>
</span><span id="line-371"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621682163924"><span class="annot"><span class="annottext">Abs a
</span><a href="#local-6989586621682163924"><span class="hs-identifier hs-var">a</span></a></span></span><span>         </span><span class="hs-special">,</span><span> </span><span id="local-6989586621682163925"><span class="annot"><span class="annottext">Abs a
</span><a href="#local-6989586621682163925"><span class="hs-identifier hs-var">a'</span></a></span></span><span>          </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">a -&gt; a -&gt; Bool
forall a. EqualSy a =&gt; a -&gt; a -&gt; Bool
</span><a href="Agda.TypeChecking.Abstract.html#equalSy"><span class="hs-identifier hs-var">equalSy</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Abs a -&gt; a
forall a. Subst a =&gt; Abs a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#absBody"><span class="hs-identifier hs-var">absBody</span></a></span><span> </span><span class="annot"><span class="annottext">Abs a
</span><a href="#local-6989586621682163924"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Abs a -&gt; a
forall a. Subst a =&gt; Abs a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#absBody"><span class="hs-identifier hs-var">absBody</span></a></span><span> </span><span class="annot"><span class="annottext">Abs a
</span><a href="#local-6989586621682163925"><span class="hs-identifier hs-var">a'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-372"></span><span>
</span><span id="line-373"></span><span class="annot"><span class="hs-comment">-- | Ignore origin and free variables.</span></span><span>
</span><span id="line-374"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Abstract.html#EqualSy"><span class="hs-identifier hs-type">EqualSy</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html#ArgInfo"><span class="hs-identifier hs-type">ArgInfo</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-375"></span><span>  </span><span id="local-6989586621682163934"><span class="annot"><span class="annottext">equalSy :: ArgInfo -&gt; ArgInfo -&gt; Bool
</span><a href="Agda.TypeChecking.Abstract.html#equalSy"><span class="hs-identifier hs-var hs-var hs-var">equalSy</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Common.html#ArgInfo"><span class="hs-identifier hs-type">ArgInfo</span></a></span><span> </span><span id="local-6989586621682163936"><span class="annot"><span class="annottext">Hiding
</span><a href="#local-6989586621682163936"><span class="hs-identifier hs-var">h</span></a></span></span><span> </span><span id="local-6989586621682163937"><span class="annot"><span class="annottext">Modality
</span><a href="#local-6989586621682163937"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span id="local-6989586621682163938"><span class="annot"><span class="annottext">Origin
</span><a href="#local-6989586621682163938"><span class="hs-identifier hs-var">_o</span></a></span></span><span> </span><span id="local-6989586621682163939"><span class="annot"><span class="annottext">FreeVariables
</span><a href="#local-6989586621682163939"><span class="hs-identifier hs-var">_fv</span></a></span></span><span> </span><span id="local-6989586621682163940"><span class="annot"><span class="annottext">Annotation
</span><a href="#local-6989586621682163940"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Common.html#ArgInfo"><span class="hs-identifier hs-type">ArgInfo</span></a></span><span> </span><span id="local-6989586621682163941"><span class="annot"><span class="annottext">Hiding
</span><a href="#local-6989586621682163941"><span class="hs-identifier hs-var">h'</span></a></span></span><span> </span><span id="local-6989586621682163942"><span class="annot"><span class="annottext">Modality
</span><a href="#local-6989586621682163942"><span class="hs-identifier hs-var">m'</span></a></span></span><span> </span><span id="local-6989586621682163943"><span class="annot"><span class="annottext">Origin
</span><a href="#local-6989586621682163943"><span class="hs-identifier hs-var">_o'</span></a></span></span><span> </span><span id="local-6989586621682163944"><span class="annot"><span class="annottext">FreeVariables
</span><a href="#local-6989586621682163944"><span class="hs-identifier hs-var">_fv'</span></a></span></span><span> </span><span id="local-6989586621682163945"><span class="annot"><span class="annottext">Annotation
</span><a href="#local-6989586621682163945"><span class="hs-identifier hs-var">a'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-376"></span><span>    </span><span class="annot"><span class="annottext">Hiding
</span><a href="#local-6989586621682163936"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="annot"><span class="annottext">Hiding -&gt; Hiding -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Hiding
</span><a href="#local-6989586621682163941"><span class="hs-identifier hs-var">h'</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Modality
</span><a href="#local-6989586621682163937"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">Modality -&gt; Modality -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Modality
</span><a href="#local-6989586621682163942"><span class="hs-identifier hs-var">m'</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Annotation
</span><a href="#local-6989586621682163940"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">Annotation -&gt; Annotation -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Annotation
</span><a href="#local-6989586621682163945"><span class="hs-identifier hs-var">a'</span></a></span><span>
</span><span id="line-377"></span><span>
</span><span id="line-378"></span><span class="annot"><span class="hs-comment">-- | Ignore the tactic.</span></span><span>
</span><span id="line-379"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621682162904"><span class="annot"><a href="Agda.TypeChecking.Abstract.html#EqualSy"><span class="hs-identifier hs-type">EqualSy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682162904"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Abstract.html#EqualSy"><span class="hs-identifier hs-type">EqualSy</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Dom"><span class="hs-identifier hs-type">Dom</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682162904"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-380"></span><span>  </span><span id="local-6989586621682163963"><span class="annot"><span class="annottext">equalSy :: Dom a -&gt; Dom a -&gt; Bool
</span><a href="Agda.TypeChecking.Abstract.html#equalSy"><span class="hs-identifier hs-var hs-var hs-var">equalSy</span></a></span></span><span> </span><span id="local-6989586621682163964"><span class="annot"><span class="annottext">d :: Dom a
</span><a href="#local-6989586621682163964"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Dom"><span class="hs-identifier hs-type">Dom</span></a></span><span> </span><span id="local-6989586621682163966"><span class="annot"><span class="annottext">ArgInfo
</span><a href="#local-6989586621682163966"><span class="hs-identifier hs-var">ai</span></a></span></span><span> </span><span id="local-6989586621682163967"><span class="annot"><span class="annottext">Maybe NamedName
</span><a href="#local-6989586621682163967"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621682163968"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682163968"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621682163969"><span class="annot"><span class="annottext">Maybe Term
</span><a href="#local-6989586621682163969"><span class="hs-identifier hs-var">_tac</span></a></span></span><span> </span><span id="local-6989586621682163970"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682163970"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682163971"><span class="annot"><span class="annottext">d' :: Dom a
</span><a href="#local-6989586621682163971"><span class="hs-identifier hs-var">d'</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Dom"><span class="hs-identifier hs-type">Dom</span></a></span><span> </span><span id="local-6989586621682163972"><span class="annot"><span class="annottext">ArgInfo
</span><a href="#local-6989586621682163972"><span class="hs-identifier hs-var">ai'</span></a></span></span><span> </span><span id="local-6989586621682163973"><span class="annot"><span class="annottext">Maybe NamedName
</span><a href="#local-6989586621682163973"><span class="hs-identifier hs-var">x'</span></a></span></span><span> </span><span id="local-6989586621682163974"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682163974"><span class="hs-identifier hs-var">f'</span></a></span></span><span> </span><span id="local-6989586621682163975"><span class="annot"><span class="annottext">Maybe Term
</span><a href="#local-6989586621682163975"><span class="hs-identifier hs-var">_tac'</span></a></span></span><span> </span><span id="local-6989586621682163976"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682163976"><span class="hs-identifier hs-var">a'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Bool] -&gt; Bool
forall (t :: * -&gt; *). Foldable t =&gt; t Bool -&gt; Bool
</span><span class="hs-identifier hs-var">and</span></span><span>
</span><span id="line-381"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Maybe NamedName
</span><a href="#local-6989586621682163967"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe NamedName -&gt; Maybe NamedName -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Maybe NamedName
</span><a href="#local-6989586621682163973"><span class="hs-identifier hs-var">x'</span></a></span><span>
</span><span id="line-382"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682163968"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682163974"><span class="hs-identifier hs-var">f'</span></a></span><span>
</span><span id="line-383"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ArgInfo -&gt; ArgInfo -&gt; Bool
forall a. EqualSy a =&gt; a -&gt; a -&gt; Bool
</span><a href="Agda.TypeChecking.Abstract.html#equalSy"><span class="hs-identifier hs-var">equalSy</span></a></span><span> </span><span class="annot"><span class="annottext">ArgInfo
</span><a href="#local-6989586621682163966"><span class="hs-identifier hs-var">ai</span></a></span><span> </span><span class="annot"><span class="annottext">ArgInfo
</span><a href="#local-6989586621682163972"><span class="hs-identifier hs-var">ai'</span></a></span><span>
</span><span id="line-384"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">a -&gt; a -&gt; Bool
forall a. EqualSy a =&gt; a -&gt; a -&gt; Bool
</span><a href="Agda.TypeChecking.Abstract.html#equalSy"><span class="hs-identifier hs-var">equalSy</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682163970"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682163976"><span class="hs-identifier hs-var">a'</span></a></span><span>
</span><span id="line-385"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-386"></span><span>
</span><span id="line-387"></span><span class="hs-comment">-- | Ignores irrelevant arguments and modality.</span><span>
</span><span id="line-388"></span><span class="hs-comment">--   (And, of course, origin and free variables).</span><span>
</span><span id="line-389"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621682162812"><span class="annot"><a href="Agda.TypeChecking.Abstract.html#EqualSy"><span class="hs-identifier hs-type">EqualSy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682162812"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Abstract.html#EqualSy"><span class="hs-identifier hs-type">EqualSy</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Common.html#Arg"><span class="hs-identifier hs-type">Arg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682162812"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-390"></span><span>  </span><span id="local-6989586621682163984"><span class="annot"><span class="annottext">equalSy :: Arg a -&gt; Arg a -&gt; Bool
</span><a href="Agda.TypeChecking.Abstract.html#equalSy"><span class="hs-identifier hs-var hs-var hs-var">equalSy</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Common.html#Arg"><span class="hs-identifier hs-type">Arg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Common.html#ArgInfo"><span class="hs-identifier hs-type">ArgInfo</span></a></span><span> </span><span id="local-6989586621682163985"><span class="annot"><span class="annottext">Hiding
</span><a href="#local-6989586621682163985"><span class="hs-identifier hs-var">h</span></a></span></span><span> </span><span id="local-6989586621682163986"><span class="annot"><span class="annottext">Modality
</span><a href="#local-6989586621682163986"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span id="local-6989586621682163987"><span class="annot"><span class="annottext">Origin
</span><a href="#local-6989586621682163987"><span class="hs-identifier hs-var">_o</span></a></span></span><span> </span><span id="local-6989586621682163988"><span class="annot"><span class="annottext">FreeVariables
</span><a href="#local-6989586621682163988"><span class="hs-identifier hs-var">_fv</span></a></span></span><span> </span><span id="local-6989586621682163989"><span class="annot"><span class="annottext">Annotation
</span><a href="#local-6989586621682163989"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682163990"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682163990"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Common.html#Arg"><span class="hs-identifier hs-type">Arg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Common.html#ArgInfo"><span class="hs-identifier hs-type">ArgInfo</span></a></span><span> </span><span id="local-6989586621682163991"><span class="annot"><span class="annottext">Hiding
</span><a href="#local-6989586621682163991"><span class="hs-identifier hs-var">h'</span></a></span></span><span> </span><span id="local-6989586621682163992"><span class="annot"><span class="annottext">Modality
</span><a href="#local-6989586621682163992"><span class="hs-identifier hs-var">m'</span></a></span></span><span> </span><span id="local-6989586621682163993"><span class="annot"><span class="annottext">Origin
</span><a href="#local-6989586621682163993"><span class="hs-identifier hs-var">_o'</span></a></span></span><span> </span><span id="local-6989586621682163994"><span class="annot"><span class="annottext">FreeVariables
</span><a href="#local-6989586621682163994"><span class="hs-identifier hs-var">_fv'</span></a></span></span><span> </span><span id="local-6989586621682163995"><span class="annot"><span class="annottext">Annotation
</span><a href="#local-6989586621682163995"><span class="hs-identifier hs-var">a'</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682163996"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682163996"><span class="hs-identifier hs-var">v'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-391"></span><span>    </span><span class="annot"><span class="annottext">Hiding
</span><a href="#local-6989586621682163985"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="annot"><span class="annottext">Hiding -&gt; Hiding -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Hiding
</span><a href="#local-6989586621682163991"><span class="hs-identifier hs-var">h'</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Modality -&gt; Bool
forall a. LensRelevance a =&gt; a -&gt; Bool
</span><a href="Agda.Syntax.Common.html#isIrrelevant"><span class="hs-identifier hs-var">isIrrelevant</span></a></span><span> </span><span class="annot"><span class="annottext">Modality
</span><a href="#local-6989586621682163986"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">Modality -&gt; Bool
forall a. LensRelevance a =&gt; a -&gt; Bool
</span><a href="Agda.Syntax.Common.html#isIrrelevant"><span class="hs-identifier hs-var">isIrrelevant</span></a></span><span> </span><span class="annot"><span class="annottext">Modality
</span><a href="#local-6989586621682163992"><span class="hs-identifier hs-var">m'</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; a -&gt; Bool
forall a. EqualSy a =&gt; a -&gt; a -&gt; Bool
</span><a href="Agda.TypeChecking.Abstract.html#equalSy"><span class="hs-identifier hs-var">equalSy</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682163990"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682163996"><span class="hs-identifier hs-var">v'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-392"></span><span>    </span><span class="hs-comment">-- Andreas, 2017-10-04, issue #2775,</span><span>
</span><span id="line-393"></span><span>    </span><span class="hs-comment">-- ignore irrelevant arguments during with-abstraction.</span><span>
</span><span id="line-394"></span><span>    </span><span class="hs-comment">-- 2019-07-05, issue #3889, don't ignore quantity during caching</span><span>
</span><span id="line-395"></span><span>    </span><span class="hs-comment">-- this is why we let equalSy replace (==).</span><span>
</span><span id="line-396"></span></pre></body></html>