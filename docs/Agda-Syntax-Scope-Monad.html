<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Agda.Syntax.Scope.Monad</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">Agda</span><ul class="links" id="page-menu"><li><a href="src/Agda.Syntax.Scope.Monad.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Agda.Syntax.Scope.Monad</p></div><div id="table-of-contents"><div id="contents-list"><p class="caption" onclick="window.scrollTo(0,0)">Contents</p><ul><li><a href="#g:1">The scope checking monad</a></li><li><a href="#g:2">General operations</a></li><li><a href="#g:3">Names</a></li><li><a href="#g:4">Resolving names</a></li><li><a href="#g:5">Binding names</a></li><li><a href="#g:6">Operations to do with record constructor names</a></li><li><a href="#g:7">Module manipulation operations</a></li><li><a href="#g:8">Definition liveness &amp; copy trimming</a></li><li><a href="#g:9">Import directives</a></li><li><a href="#g:10">Opening a module</a></li><li><a href="#section.orphans">Orphan instances</a></li></ul></div></div><div id="description"><p class="caption">Description</p><div class="doc"><p>The scope monad with operations.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">type</span> <a href="#t:ScopeM">ScopeM</a> = <a href="Agda-TypeChecking-Monad-Base.html#t:TCM" title="Agda.TypeChecking.Monad.Base">TCM</a></li><li class="src short"><a href="#v:printLocals">printLocals</a> :: <a href="https://hackage.haskell.org/package/base-4.21.0.0/docs/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="https://hackage.haskell.org/package/base-4.21.0.0/docs/Data-String.html#t:String" title="Data.String">String</a> -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> ()</li><li class="src short"><a href="#v:scopeWarning-39-">scopeWarning'</a> :: <a href="Agda-Utils-CallStack.html#t:CallStack" title="Agda.Utils.CallStack">CallStack</a> -&gt; <a href="Agda-Syntax-Concrete-Definitions-Errors.html#t:DeclarationWarning-39-" title="Agda.Syntax.Concrete.Definitions.Errors">DeclarationWarning'</a> -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> ()</li><li class="src short"><a href="#v:scopeWarning">scopeWarning</a> :: <a href="Agda-Utils-CallStack.html#t:HasCallStack" title="Agda.Utils.CallStack">HasCallStack</a> =&gt; <a href="Agda-Syntax-Concrete-Definitions-Errors.html#t:DeclarationWarning-39-" title="Agda.Syntax.Concrete.Definitions.Errors">DeclarationWarning'</a> -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> ()</li><li class="src short"><a href="#v:isDatatypeModule">isDatatypeModule</a> :: <a href="Agda-TypeChecking-Monad-Base.html#t:ReadTCState" title="Agda.TypeChecking.Monad.Base">ReadTCState</a> m =&gt; <a href="Agda-Syntax-Abstract-Name.html#t:ModuleName" title="Agda.Syntax.Abstract.Name">ModuleName</a> -&gt; m (<a href="https://hackage.haskell.org/package/base-4.21.0.0/docs/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="Agda-Syntax-Scope-Base.html#t:DataOrRecordModule" title="Agda.Syntax.Scope.Base">DataOrRecordModule</a>)</li><li class="src short"><a href="#v:getCurrentModule">getCurrentModule</a> :: <a href="Agda-TypeChecking-Monad-Base.html#t:ReadTCState" title="Agda.TypeChecking.Monad.Base">ReadTCState</a> m =&gt; m <a href="Agda-Syntax-Abstract-Name.html#t:ModuleName" title="Agda.Syntax.Abstract.Name">ModuleName</a></li><li class="src short"><a href="#v:setCurrentModule">setCurrentModule</a> :: <a href="Agda-TypeChecking-Monad-Base.html#t:MonadTCState" title="Agda.TypeChecking.Monad.Base">MonadTCState</a> m =&gt; <a href="Agda-Syntax-Abstract-Name.html#t:ModuleName" title="Agda.Syntax.Abstract.Name">ModuleName</a> -&gt; m ()</li><li class="src short"><a href="#v:withCurrentModule">withCurrentModule</a> :: (<a href="Agda-TypeChecking-Monad-Base.html#t:ReadTCState" title="Agda.TypeChecking.Monad.Base">ReadTCState</a> m, <a href="Agda-TypeChecking-Monad-Base.html#t:MonadTCState" title="Agda.TypeChecking.Monad.Base">MonadTCState</a> m) =&gt; <a href="Agda-Syntax-Abstract-Name.html#t:ModuleName" title="Agda.Syntax.Abstract.Name">ModuleName</a> -&gt; m a -&gt; m a</li><li class="src short"><a href="#v:withCurrentModule-39-">withCurrentModule'</a> :: (<a href="Agda-Utils-Monad.html#t:MonadTrans" title="Agda.Utils.Monad">MonadTrans</a> t, <a href="https://hackage.haskell.org/package/base-4.21.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> (t <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a>)) =&gt; <a href="Agda-Syntax-Abstract-Name.html#t:ModuleName" title="Agda.Syntax.Abstract.Name">ModuleName</a> -&gt; t <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> a -&gt; t <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> a</li><li class="src short"><a href="#v:getNamedScope">getNamedScope</a> :: <a href="Agda-Syntax-Abstract-Name.html#t:ModuleName" title="Agda.Syntax.Abstract.Name">ModuleName</a> -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> <a href="Agda-Syntax-Scope-Base.html#t:Scope" title="Agda.Syntax.Scope.Base">Scope</a></li><li class="src short"><a href="#v:getCurrentScope">getCurrentScope</a> :: <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> <a href="Agda-Syntax-Scope-Base.html#t:Scope" title="Agda.Syntax.Scope.Base">Scope</a></li><li class="src short"><a href="#v:createModule">createModule</a> :: <a href="https://hackage.haskell.org/package/base-4.21.0.0/docs/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="Agda-Syntax-Scope-Base.html#t:DataOrRecordModule" title="Agda.Syntax.Scope.Base">DataOrRecordModule</a> -&gt; <a href="Agda-Syntax-Abstract-Name.html#t:ModuleName" title="Agda.Syntax.Abstract.Name">ModuleName</a> -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> ()</li><li class="src short"><a href="#v:modifyScopes">modifyScopes</a> :: (<a href="https://hackage.haskell.org/package/containers-0.7/docs/Data-Map-Strict.html#t:Map" title="Data.Map.Strict">Map</a> <a href="Agda-Syntax-Abstract-Name.html#t:ModuleName" title="Agda.Syntax.Abstract.Name">ModuleName</a> <a href="Agda-Syntax-Scope-Base.html#t:Scope" title="Agda.Syntax.Scope.Base">Scope</a> -&gt; <a href="https://hackage.haskell.org/package/containers-0.7/docs/Data-Map-Strict.html#t:Map" title="Data.Map.Strict">Map</a> <a href="Agda-Syntax-Abstract-Name.html#t:ModuleName" title="Agda.Syntax.Abstract.Name">ModuleName</a> <a href="Agda-Syntax-Scope-Base.html#t:Scope" title="Agda.Syntax.Scope.Base">Scope</a>) -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> ()</li><li class="src short"><a href="#v:modifyNamedScope">modifyNamedScope</a> :: <a href="Agda-Syntax-Abstract-Name.html#t:ModuleName" title="Agda.Syntax.Abstract.Name">ModuleName</a> -&gt; (<a href="Agda-Syntax-Scope-Base.html#t:Scope" title="Agda.Syntax.Scope.Base">Scope</a> -&gt; <a href="Agda-Syntax-Scope-Base.html#t:Scope" title="Agda.Syntax.Scope.Base">Scope</a>) -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> ()</li><li class="src short"><a href="#v:modifyCurrentScope">modifyCurrentScope</a> :: (<a href="Agda-Syntax-Scope-Base.html#t:Scope" title="Agda.Syntax.Scope.Base">Scope</a> -&gt; <a href="Agda-Syntax-Scope-Base.html#t:Scope" title="Agda.Syntax.Scope.Base">Scope</a>) -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> ()</li><li class="src short"><a href="#v:setContextPrecedence">setContextPrecedence</a> :: <a href="Agda-Syntax-Fixity.html#t:PrecedenceStack" title="Agda.Syntax.Fixity">PrecedenceStack</a> -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> ()</li><li class="src short"><a href="#v:withContextPrecedence">withContextPrecedence</a> :: <a href="Agda-TypeChecking-Monad-Base.html#t:ReadTCState" title="Agda.TypeChecking.Monad.Base">ReadTCState</a> m =&gt; <a href="Agda-Syntax-Fixity.html#t:Precedence" title="Agda.Syntax.Fixity">Precedence</a> -&gt; m a -&gt; m a</li><li class="src short"><a href="#v:getLocalVars">getLocalVars</a> :: <a href="Agda-TypeChecking-Monad-Base.html#t:ReadTCState" title="Agda.TypeChecking.Monad.Base">ReadTCState</a> m =&gt; m <a href="Agda-Syntax-Scope-Base.html#t:LocalVars" title="Agda.Syntax.Scope.Base">LocalVars</a></li><li class="src short"><a href="#v:modifyLocalVars">modifyLocalVars</a> :: (<a href="Agda-Syntax-Scope-Base.html#t:LocalVars" title="Agda.Syntax.Scope.Base">LocalVars</a> -&gt; <a href="Agda-Syntax-Scope-Base.html#t:LocalVars" title="Agda.Syntax.Scope.Base">LocalVars</a>) -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> ()</li><li class="src short"><a href="#v:setLocalVars">setLocalVars</a> :: <a href="Agda-Syntax-Scope-Base.html#t:LocalVars" title="Agda.Syntax.Scope.Base">LocalVars</a> -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> ()</li><li class="src short"><a href="#v:withLocalVars">withLocalVars</a> :: <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> a -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> a</li><li class="src short"><a href="#v:outsideLocalVars">outsideLocalVars</a> :: <a href="https://hackage.haskell.org/package/base-4.21.0.0/docs/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> a -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> a</li><li class="src short"><a href="#v:withCheckNoShadowing">withCheckNoShadowing</a> :: <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> a -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> a</li><li class="src short"><a href="#v:checkNoShadowing">checkNoShadowing</a> :: <a href="Agda-Syntax-Scope-Base.html#t:LocalVars" title="Agda.Syntax.Scope.Base">LocalVars</a> -&gt; <a href="Agda-Syntax-Scope-Base.html#t:LocalVars" title="Agda.Syntax.Scope.Base">LocalVars</a> -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> ()</li><li class="src short"><a href="#v:getVarsToBind">getVarsToBind</a> :: <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> <a href="Agda-Syntax-Scope-Base.html#t:LocalVars" title="Agda.Syntax.Scope.Base">LocalVars</a></li><li class="src short"><a href="#v:addVarToBind">addVarToBind</a> :: <a href="Agda-Syntax-Concrete-Name.html#t:Name" title="Agda.Syntax.Concrete.Name">Name</a> -&gt; <a href="Agda-Syntax-Scope-Base.html#t:LocalVar" title="Agda.Syntax.Scope.Base">LocalVar</a> -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> ()</li><li class="src short"><a href="#v:bindVarsToBind">bindVarsToBind</a> :: <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> ()</li><li class="src short"><a href="#v:annotateDecls">annotateDecls</a> :: <a href="Agda-TypeChecking-Monad-Base.html#t:ReadTCState" title="Agda.TypeChecking.Monad.Base">ReadTCState</a> m =&gt; m [<a href="Agda-Syntax-Abstract.html#t:Declaration" title="Agda.Syntax.Abstract">Declaration</a>] -&gt; m <a href="Agda-Syntax-Abstract.html#t:Declaration" title="Agda.Syntax.Abstract">Declaration</a></li><li class="src short"><a href="#v:annotateExpr">annotateExpr</a> :: <a href="Agda-TypeChecking-Monad-Base.html#t:ReadTCState" title="Agda.TypeChecking.Monad.Base">ReadTCState</a> m =&gt; m <a href="Agda-Syntax-Abstract.html#t:Expr" title="Agda.Syntax.Abstract">Expr</a> -&gt; m <a href="Agda-Syntax-Abstract.html#t:Expr" title="Agda.Syntax.Abstract">Expr</a></li><li class="src short"><a href="#v:freshAbstractName">freshAbstractName</a> :: <a href="Agda-Syntax-Common.html#t:Fixity-39-" title="Agda.Syntax.Common">Fixity'</a> -&gt; <a href="Agda-Syntax-Concrete-Name.html#t:Name" title="Agda.Syntax.Concrete.Name">Name</a> -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> <a href="Agda-Syntax-Abstract-Name.html#t:Name" title="Agda.Syntax.Abstract.Name">Name</a></li><li class="src short"><a href="#v:freshAbstractName_">freshAbstractName_</a> :: <a href="Agda-Syntax-Concrete-Name.html#t:Name" title="Agda.Syntax.Concrete.Name">Name</a> -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> <a href="Agda-Syntax-Abstract-Name.html#t:Name" title="Agda.Syntax.Abstract.Name">Name</a></li><li class="src short"><a href="#v:freshAbstractQName">freshAbstractQName</a> :: <a href="Agda-Syntax-Common.html#t:Fixity-39-" title="Agda.Syntax.Common">Fixity'</a> -&gt; <a href="Agda-Syntax-Concrete-Name.html#t:Name" title="Agda.Syntax.Concrete.Name">Name</a> -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> <a href="Agda-Syntax-Abstract-Name.html#t:QName" title="Agda.Syntax.Abstract.Name">QName</a></li><li class="src short"><a href="#v:freshAbstractQName-39-">freshAbstractQName'</a> :: <a href="Agda-Syntax-Concrete-Name.html#t:Name" title="Agda.Syntax.Concrete.Name">Name</a> -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> <a href="Agda-Syntax-Abstract-Name.html#t:QName" title="Agda.Syntax.Abstract.Name">QName</a></li><li class="src short"><a href="#v:freshConcreteName">freshConcreteName</a> :: <a href="Agda-Syntax-Position.html#t:Range" title="Agda.Syntax.Position">Range</a> -&gt; <a href="https://hackage.haskell.org/package/base-4.21.0.0/docs/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="https://hackage.haskell.org/package/base-4.21.0.0/docs/Data-String.html#t:String" title="Data.String">String</a> -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> <a href="Agda-Syntax-Concrete-Name.html#t:Name" title="Agda.Syntax.Concrete.Name">Name</a></li><li class="src short"><a href="#v:resolveName">resolveName</a> :: <a href="Agda-Syntax-Concrete-Name.html#t:QName" title="Agda.Syntax.Concrete.Name">QName</a> -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> <a href="Agda-Syntax-Scope-Base.html#t:ResolvedName" title="Agda.Syntax.Scope.Base">ResolvedName</a></li><li class="src short"><a href="#v:resolveName-39-">resolveName'</a> :: <a href="Agda-Syntax-Scope-Base.html#t:KindsOfNames" title="Agda.Syntax.Scope.Base">KindsOfNames</a> -&gt; <a href="https://hackage.haskell.org/package/base-4.21.0.0/docs/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> (<a href="Agda-Utils-Set1.html#t:Set1" title="Agda.Utils.Set1">Set1</a> <a href="Agda-Syntax-Abstract-Name.html#t:Name" title="Agda.Syntax.Abstract.Name">Name</a>) -&gt; <a href="Agda-Syntax-Concrete-Name.html#t:QName" title="Agda.Syntax.Concrete.Name">QName</a> -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> <a href="Agda-Syntax-Scope-Base.html#t:ResolvedName" title="Agda.Syntax.Scope.Base">ResolvedName</a></li><li class="src short"><a href="#v:tryResolveName">tryResolveName</a> :: (<a href="Agda-TypeChecking-Monad-Base.html#t:ReadTCState" title="Agda.TypeChecking.Monad.Base">ReadTCState</a> m, <a href="Agda-TypeChecking-Monad-Builtin.html#t:HasBuiltins" title="Agda.TypeChecking.Monad.Builtin">HasBuiltins</a> m, <a href="https://hackage.haskell.org/package/mtl-2.3.1/docs/Control-Monad-Error-Class.html#t:MonadError" title="Control.Monad.Error.Class">MonadError</a> <a href="Agda-Syntax-Scope-Base.html#t:NameResolutionError" title="Agda.Syntax.Scope.Base">NameResolutionError</a> m) =&gt; <a href="Agda-Syntax-Scope-Base.html#t:KindsOfNames" title="Agda.Syntax.Scope.Base">KindsOfNames</a> -&gt; <a href="https://hackage.haskell.org/package/base-4.21.0.0/docs/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> (<a href="Agda-Utils-Set1.html#t:Set1" title="Agda.Utils.Set1">Set1</a> <a href="Agda-Syntax-Abstract-Name.html#t:Name" title="Agda.Syntax.Abstract.Name">Name</a>) -&gt; <a href="Agda-Syntax-Concrete-Name.html#t:QName" title="Agda.Syntax.Concrete.Name">QName</a> -&gt; m <a href="Agda-Syntax-Scope-Base.html#t:ResolvedName" title="Agda.Syntax.Scope.Base">ResolvedName</a></li><li class="src short"><a href="#v:canHaveSuffixTest">canHaveSuffixTest</a> :: <a href="Agda-TypeChecking-Monad-Builtin.html#t:HasBuiltins" title="Agda.TypeChecking.Monad.Builtin">HasBuiltins</a> m =&gt; m (<a href="Agda-Syntax-Abstract-Name.html#t:QName" title="Agda.Syntax.Abstract.Name">QName</a> -&gt; <a href="https://hackage.haskell.org/package/base-4.21.0.0/docs/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>)</li><li class="src short"><a href="#v:resolveModule">resolveModule</a> :: <a href="Agda-Syntax-Concrete-Name.html#t:QName" title="Agda.Syntax.Concrete.Name">QName</a> -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> <a href="Agda-Syntax-Scope-Base.html#t:AbstractModule" title="Agda.Syntax.Scope.Base">AbstractModule</a></li><li class="src short"><a href="#v:getConcreteFixity">getConcreteFixity</a> :: <a href="Agda-Syntax-Concrete-Name.html#t:Name" title="Agda.Syntax.Concrete.Name">Name</a> -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> <a href="Agda-Syntax-Common.html#t:Fixity-39-" title="Agda.Syntax.Common">Fixity'</a></li><li class="src short"><a href="#v:getConcretePolarity">getConcretePolarity</a> :: <a href="Agda-Syntax-Concrete-Name.html#t:Name" title="Agda.Syntax.Concrete.Name">Name</a> -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> (<a href="https://hackage.haskell.org/package/base-4.21.0.0/docs/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="Agda-TypeChecking-Positivity-Occurrence.html#t:PragmaPolarities" title="Agda.TypeChecking.Positivity.Occurrence">PragmaPolarities</a>)</li><li class="src short"><a href="#v:computeFixitiesAndPolarities">computeFixitiesAndPolarities</a> :: <a href="Agda-Syntax-Concrete-Fixity.html#t:DoWarn" title="Agda.Syntax.Concrete.Fixity">DoWarn</a> -&gt; [<a href="Agda-Syntax-Concrete.html#t:Declaration" title="Agda.Syntax.Concrete">Declaration</a>] -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> a -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> a</li><li class="src short"><a href="#v:getNotation">getNotation</a> :: <a href="Agda-Syntax-Concrete-Name.html#t:QName" title="Agda.Syntax.Concrete.Name">QName</a> -&gt; <a href="Agda-Utils-Set1.html#t:Set1" title="Agda.Utils.Set1">Set1</a> <a href="Agda-Syntax-Abstract-Name.html#t:Name" title="Agda.Syntax.Abstract.Name">Name</a> -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> <a href="Agda-Syntax-Notation.html#t:NewNotation" title="Agda.Syntax.Notation">NewNotation</a></li><li class="src short"><a href="#v:bindVariable">bindVariable</a> :: <a href="Agda-Syntax-Scope-Base.html#t:BindingSource" title="Agda.Syntax.Scope.Base">BindingSource</a> -&gt; <a href="Agda-Syntax-Concrete-Name.html#t:Name" title="Agda.Syntax.Concrete.Name">Name</a> -&gt; <a href="Agda-Syntax-Abstract-Name.html#t:Name" title="Agda.Syntax.Abstract.Name">Name</a> -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> ()</li><li class="src short"><a href="#v:unbindVariable">unbindVariable</a> :: <a href="Agda-Syntax-Concrete-Name.html#t:Name" title="Agda.Syntax.Concrete.Name">Name</a> -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> a -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> a</li><li class="src short"><a href="#v:bindName">bindName</a> :: <a href="Agda-Syntax-Common.html#t:Access" title="Agda.Syntax.Common">Access</a> -&gt; <a href="Agda-Syntax-Scope-Base.html#t:KindOfName" title="Agda.Syntax.Scope.Base">KindOfName</a> -&gt; <a href="Agda-Syntax-Concrete-Name.html#t:Name" title="Agda.Syntax.Concrete.Name">Name</a> -&gt; <a href="Agda-Syntax-Abstract-Name.html#t:QName" title="Agda.Syntax.Abstract.Name">QName</a> -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> ()</li><li class="src short"><a href="#v:bindName-39-">bindName'</a> :: <a href="Agda-Syntax-Common.html#t:Access" title="Agda.Syntax.Common">Access</a> -&gt; <a href="Agda-Syntax-Scope-Base.html#t:KindOfName" title="Agda.Syntax.Scope.Base">KindOfName</a> -&gt; <a href="Agda-Syntax-Scope-Base.html#t:NameMetadata" title="Agda.Syntax.Scope.Base">NameMetadata</a> -&gt; <a href="Agda-Syntax-Concrete-Name.html#t:Name" title="Agda.Syntax.Concrete.Name">Name</a> -&gt; <a href="Agda-Syntax-Abstract-Name.html#t:QName" title="Agda.Syntax.Abstract.Name">QName</a> -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> ()</li><li class="src short"><a href="#v:addNameToInverseScope">addNameToInverseScope</a> :: <a href="Agda-Syntax-Scope-Base.html#t:KindOfName" title="Agda.Syntax.Scope.Base">KindOfName</a> -&gt; <a href="Agda-Syntax-Concrete-Name.html#t:Name" title="Agda.Syntax.Concrete.Name">Name</a> -&gt; <a href="Agda-Syntax-Scope-Base.html#t:AbstractName" title="Agda.Syntax.Scope.Base">AbstractName</a> -&gt; <a href="Agda-Syntax-Scope-Base.html#t:ScopeInfo" title="Agda.Syntax.Scope.Base">ScopeInfo</a> -&gt; <a href="Agda-Syntax-Scope-Base.html#t:ScopeInfo" title="Agda.Syntax.Scope.Base">ScopeInfo</a></li><li class="src short"><a href="#v:bindName-39--39-">bindName''</a> :: <a href="Agda-Syntax-Common.html#t:Access" title="Agda.Syntax.Common">Access</a> -&gt; <a href="Agda-Syntax-Scope-Base.html#t:KindOfName" title="Agda.Syntax.Scope.Base">KindOfName</a> -&gt; <a href="Agda-Syntax-Scope-Base.html#t:NameMetadata" title="Agda.Syntax.Scope.Base">NameMetadata</a> -&gt; <a href="Agda-Syntax-Concrete-Name.html#t:Name" title="Agda.Syntax.Concrete.Name">Name</a> -&gt; <a href="Agda-Syntax-Abstract-Name.html#t:QName" title="Agda.Syntax.Abstract.Name">QName</a> -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> (<a href="https://hackage.haskell.org/package/base-4.21.0.0/docs/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="Agda-TypeChecking-Monad-Base.html#t:TypeError" title="Agda.TypeChecking.Monad.Base">TypeError</a>)</li><li class="src short"><a href="#v:rebindName">rebindName</a> :: <a href="Agda-Syntax-Common.html#t:Access" title="Agda.Syntax.Common">Access</a> -&gt; <a href="Agda-Syntax-Scope-Base.html#t:KindOfName" title="Agda.Syntax.Scope.Base">KindOfName</a> -&gt; <a href="Agda-Syntax-Concrete-Name.html#t:Name" title="Agda.Syntax.Concrete.Name">Name</a> -&gt; <a href="Agda-Syntax-Abstract-Name.html#t:QName" title="Agda.Syntax.Abstract.Name">QName</a> -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> ()</li><li class="src short"><a href="#v:bindModule">bindModule</a> :: <a href="Agda-Syntax-Common.html#t:Access" title="Agda.Syntax.Common">Access</a> -&gt; <a href="Agda-Syntax-Concrete-Name.html#t:Name" title="Agda.Syntax.Concrete.Name">Name</a> -&gt; <a href="Agda-Syntax-Abstract-Name.html#t:ModuleName" title="Agda.Syntax.Abstract.Name">ModuleName</a> -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> ()</li><li class="src short"><a href="#v:bindQModule">bindQModule</a> :: <a href="Agda-Syntax-Common.html#t:Access" title="Agda.Syntax.Common">Access</a> -&gt; <a href="Agda-Syntax-Concrete-Name.html#t:QName" title="Agda.Syntax.Concrete.Name">QName</a> -&gt; <a href="Agda-Syntax-Abstract-Name.html#t:ModuleName" title="Agda.Syntax.Abstract.Name">ModuleName</a> -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> ()</li><li class="src short"><a href="#v:setRecordConstructor">setRecordConstructor</a> :: <a href="Agda-Syntax-Abstract-Name.html#t:QName" title="Agda.Syntax.Abstract.Name">QName</a> -&gt; (<a href="Agda-Syntax-Abstract-Name.html#t:QName" title="Agda.Syntax.Abstract.Name">QName</a>, <a href="https://hackage.haskell.org/package/base-4.21.0.0/docs/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="Agda-Syntax-Common-Aspect.html#t:Induction" title="Agda.Syntax.Common.Aspect">Induction</a>) -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> ()</li><li class="src short"><a href="#v:getRecordConstructor">getRecordConstructor</a> :: <a href="Agda-TypeChecking-Monad-Base.html#t:ReadTCState" title="Agda.TypeChecking.Monad.Base">ReadTCState</a> m =&gt; <a href="Agda-Syntax-Abstract-Name.html#t:QName" title="Agda.Syntax.Abstract.Name">QName</a> -&gt; m (<a href="https://hackage.haskell.org/package/base-4.21.0.0/docs/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> (<a href="Agda-Syntax-Abstract-Name.html#t:QName" title="Agda.Syntax.Abstract.Name">QName</a>, <a href="https://hackage.haskell.org/package/base-4.21.0.0/docs/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="Agda-Syntax-Common-Aspect.html#t:Induction" title="Agda.Syntax.Common.Aspect">Induction</a>))</li><li class="src short"><a href="#v:isRecordConstructor">isRecordConstructor</a> :: <a href="Agda-Syntax-Concrete-Name.html#t:QName" title="Agda.Syntax.Concrete.Name">QName</a> -&gt; <a href="https://hackage.haskell.org/package/base-4.21.0.0/docs/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="Agda-Syntax-Concrete-Name.html#t:QName" title="Agda.Syntax.Concrete.Name">QName</a></li><li class="src short"><a href="#v:stripNoNames">stripNoNames</a> :: <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> ()</li><li class="src short"><span class="keyword">type</span> <a href="#t:WSM">WSM</a> = <a href="https://hackage.haskell.org/package/mtl-2.3.1/docs/Control-Monad-State-Lazy.html#t:StateT" title="Control.Monad.State.Lazy">StateT</a> <a href="Agda-Syntax-Scope-Monad.html#t:ScopeMemo" title="Agda.Syntax.Scope.Monad">ScopeMemo</a> <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:ScopeMemo">ScopeMemo</a> = <a href="#v:ScopeMemo">ScopeMemo</a> {<ul class="subs"><li><a href="#v:memoNames">memoNames</a> :: <a href="Agda-Syntax-Abstract.html#t:Ren" title="Agda.Syntax.Abstract">Ren</a> <a href="Agda-Syntax-Abstract-Name.html#t:QName" title="Agda.Syntax.Abstract.Name">QName</a></li><li><a href="#v:memoModules">memoModules</a> :: <a href="https://hackage.haskell.org/package/containers-0.7/docs/Data-Map-Strict.html#t:Map" title="Data.Map.Strict">Map</a> <a href="Agda-Syntax-Abstract-Name.html#t:ModuleName" title="Agda.Syntax.Abstract.Name">ModuleName</a> (<a href="Agda-Syntax-Abstract-Name.html#t:ModuleName" title="Agda.Syntax.Abstract.Name">ModuleName</a>, <a href="https://hackage.haskell.org/package/base-4.21.0.0/docs/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>)</li><li><a href="#v:memoTrimming">memoTrimming</a> :: <a href="Agda-Syntax-Scope-Base.html#t:ScopeCopyRef" title="Agda.Syntax.Scope.Base">ScopeCopyRef</a></li></ul>}</li><li class="src short"><a href="#v:memoToScopeInfo">memoToScopeInfo</a> :: <a href="Agda-Syntax-Scope-Monad.html#t:ScopeMemo" title="Agda.Syntax.Scope.Monad">ScopeMemo</a> -&gt; <a href="Agda-Syntax-Abstract.html#t:ScopeCopyInfo" title="Agda.Syntax.Abstract">ScopeCopyInfo</a></li><li class="src short"><a href="#v:newScopeCopyRef">newScopeCopyRef</a> :: <a href="Agda-Syntax-Abstract-Name.html#t:ModuleName" title="Agda.Syntax.Abstract.Name">ModuleName</a> -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> <a href="Agda-Syntax-Scope-Base.html#t:ScopeCopyRef" title="Agda.Syntax.Scope.Base">ScopeCopyRef</a></li><li class="src short"><a href="#v:copyName">copyName</a> :: <a href="Agda-Syntax-Scope-Base.html#t:ScopeCopyRef" title="Agda.Syntax.Scope.Base">ScopeCopyRef</a> -&gt; <a href="Agda-Syntax-Abstract-Name.html#t:QName" title="Agda.Syntax.Abstract.Name">QName</a> -&gt; <a href="Agda-Syntax-Abstract-Name.html#t:QName" title="Agda.Syntax.Abstract.Name">QName</a> -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> ()</li><li class="src short"><span class="keyword">class</span> <a href="#t:MarkLive">MarkLive</a> n <span class="keyword">where</span><ul class="subs"><li><a href="#v:markLiveName">markLiveName</a> :: n -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> ()</li></ul></li><li class="src short"><a href="#v:readLiveNames">readLiveNames</a> :: <a href="Agda-Syntax-Scope-Base.html#t:ScopeCopyRef" title="Agda.Syntax.Scope.Base">ScopeCopyRef</a> -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> <a href="Agda-Syntax-Scope-Base.html#t:LiveNames" title="Agda.Syntax.Scope.Base">LiveNames</a></li><li class="src short"><a href="#v:sameTrimming">sameTrimming</a> :: <a href="Agda-Syntax-Abstract.html#t:ScopeCopyInfo" title="Agda.Syntax.Abstract">ScopeCopyInfo</a> -&gt; <a href="Agda-Syntax-Abstract.html#t:ScopeCopyInfo" title="Agda.Syntax.Abstract">ScopeCopyInfo</a> -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> <a href="https://hackage.haskell.org/package/base-4.21.0.0/docs/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li class="src short"><a href="#v:clobberLiveNames">clobberLiveNames</a> :: <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> ()</li><li class="src short"><a href="#v:copyScope">copyScope</a> :: <a href="Agda-Syntax-Concrete-Name.html#t:QName" title="Agda.Syntax.Concrete.Name">QName</a> -&gt; <a href="Agda-Syntax-Abstract-Name.html#t:ModuleName" title="Agda.Syntax.Abstract.Name">ModuleName</a> -&gt; <a href="Agda-Syntax-Scope-Base.html#t:Scope" title="Agda.Syntax.Scope.Base">Scope</a> -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> (<a href="Agda-Syntax-Scope-Base.html#t:Scope" title="Agda.Syntax.Scope.Base">Scope</a>, <a href="Agda-Syntax-Abstract.html#t:ScopeCopyInfo" title="Agda.Syntax.Abstract">ScopeCopyInfo</a>)</li><li class="src short"><a href="#v:checkNoFixityInRenamingModule">checkNoFixityInRenamingModule</a> :: [<a href="Agda-Syntax-Concrete.html#t:Renaming" title="Agda.Syntax.Concrete">Renaming</a>] -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> ()</li><li class="src short"><a href="#v:verifyImportDirective">verifyImportDirective</a> :: [<a href="Agda-Syntax-Concrete.html#t:ImportedName" title="Agda.Syntax.Concrete">ImportedName</a>] -&gt; <a href="Agda-Syntax-Concrete.html#t:HidingDirective" title="Agda.Syntax.Concrete">HidingDirective</a> -&gt; <a href="Agda-Syntax-Concrete.html#t:RenamingDirective" title="Agda.Syntax.Concrete">RenamingDirective</a> -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> ()</li><li class="src short"><a href="#v:applyImportDirectiveM">applyImportDirectiveM</a> :: <a href="Agda-Syntax-Concrete-Name.html#t:QName" title="Agda.Syntax.Concrete.Name">QName</a> -&gt; <a href="Agda-Syntax-Concrete.html#t:ImportDirective" title="Agda.Syntax.Concrete">ImportDirective</a> -&gt; <a href="Agda-Syntax-Scope-Base.html#t:Scope" title="Agda.Syntax.Scope.Base">Scope</a> -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> (<a href="Agda-Syntax-Abstract.html#t:ImportDirective" title="Agda.Syntax.Abstract">ImportDirective</a>, <a href="Agda-Syntax-Scope-Base.html#t:Scope" title="Agda.Syntax.Scope.Base">Scope</a>)</li><li class="src short"><a href="#v:mapImportDir">mapImportDir</a> :: (<a href="https://hackage.haskell.org/package/base-4.21.0.0/docs/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> n1, <a href="https://hackage.haskell.org/package/base-4.21.0.0/docs/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> m1) =&gt; [<a href="Agda-Syntax-Common.html#t:ImportedName-39-" title="Agda.Syntax.Common">ImportedName'</a> (n1, n2) (m1, m2)] -&gt; [<a href="Agda-Syntax-Common.html#t:ImportedName-39-" title="Agda.Syntax.Common">ImportedName'</a> (n1, n2) (m1, m2)] -&gt; <a href="Agda-Syntax-Common.html#t:ImportDirective-39-" title="Agda.Syntax.Common">ImportDirective'</a> n1 m1 -&gt; <a href="Agda-Syntax-Common.html#t:ImportDirective-39-" title="Agda.Syntax.Common">ImportDirective'</a> n2 m2</li><li class="src short"><span class="keyword">data</span> <a href="#t:ImportedNameMap">ImportedNameMap</a> n1 n2 m1 m2 = <a href="#v:ImportedNameMap">ImportedNameMap</a> {<ul class="subs"><li><a href="#v:inameMap">inameMap</a> :: <a href="https://hackage.haskell.org/package/containers-0.7/docs/Data-Map-Strict.html#t:Map" title="Data.Map.Strict">Map</a> n1 n2</li><li><a href="#v:imoduleMap">imoduleMap</a> :: <a href="https://hackage.haskell.org/package/containers-0.7/docs/Data-Map-Strict.html#t:Map" title="Data.Map.Strict">Map</a> m1 m2</li></ul>}</li><li class="src short"><a href="#v:importedNameMapFromList">importedNameMapFromList</a> :: (<a href="https://hackage.haskell.org/package/base-4.21.0.0/docs/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> n1, <a href="https://hackage.haskell.org/package/base-4.21.0.0/docs/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> m1) =&gt; [<a href="Agda-Syntax-Common.html#t:ImportedName-39-" title="Agda.Syntax.Common">ImportedName'</a> (n1, n2) (m1, m2)] -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ImportedNameMap" title="Agda.Syntax.Scope.Monad">ImportedNameMap</a> n1 n2 m1 m2</li><li class="src short"><a href="#v:lookupImportedName">lookupImportedName</a> :: (<a href="https://hackage.haskell.org/package/base-4.21.0.0/docs/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> n1, <a href="https://hackage.haskell.org/package/base-4.21.0.0/docs/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> m1) =&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ImportedNameMap" title="Agda.Syntax.Scope.Monad">ImportedNameMap</a> n1 n2 m1 m2 -&gt; <a href="Agda-Syntax-Common.html#t:ImportedName-39-" title="Agda.Syntax.Common">ImportedName'</a> n1 m1 -&gt; <a href="Agda-Syntax-Common.html#t:ImportedName-39-" title="Agda.Syntax.Common">ImportedName'</a> n2 m2</li><li class="src short"><a href="#v:mapRenaming">mapRenaming</a> :: (<a href="https://hackage.haskell.org/package/base-4.21.0.0/docs/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> n1, <a href="https://hackage.haskell.org/package/base-4.21.0.0/docs/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> m1) =&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ImportedNameMap" title="Agda.Syntax.Scope.Monad">ImportedNameMap</a> n1 n2 m1 m2 -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ImportedNameMap" title="Agda.Syntax.Scope.Monad">ImportedNameMap</a> n1 n2 m1 m2 -&gt; <a href="Agda-Syntax-Common.html#t:Renaming-39-" title="Agda.Syntax.Common">Renaming'</a> n1 m1 -&gt; <a href="Agda-Syntax-Common.html#t:Renaming-39-" title="Agda.Syntax.Common">Renaming'</a> n2 m2</li><li class="src short"><span class="keyword">data</span> <a href="#t:OpenKind">OpenKind</a><ul class="subs"><li>= <a href="#v:LetOpenModule">LetOpenModule</a></li><li>| <a href="#v:TopOpenModule">TopOpenModule</a></li></ul></li><li class="src short"><a href="#v:noGeneralizedVarsIfLetOpen">noGeneralizedVarsIfLetOpen</a> :: <a href="Agda-Syntax-Scope-Monad.html#t:OpenKind" title="Agda.Syntax.Scope.Monad">OpenKind</a> -&gt; <a href="Agda-Syntax-Scope-Base.html#t:Scope" title="Agda.Syntax.Scope.Base">Scope</a> -&gt; <a href="Agda-Syntax-Scope-Base.html#t:Scope" title="Agda.Syntax.Scope.Base">Scope</a></li><li class="src short"><a href="#v:openModule_">openModule_</a> :: <a href="Agda-Syntax-Scope-Monad.html#t:OpenKind" title="Agda.Syntax.Scope.Monad">OpenKind</a> -&gt; <a href="Agda-Syntax-Concrete-Name.html#t:QName" title="Agda.Syntax.Concrete.Name">QName</a> -&gt; <a href="Agda-Syntax-Concrete.html#t:ImportDirective" title="Agda.Syntax.Concrete">ImportDirective</a> -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> <a href="Agda-Syntax-Abstract.html#t:ImportDirective" title="Agda.Syntax.Abstract">ImportDirective</a></li><li class="src short"><a href="#v:openModule">openModule</a> :: <a href="Agda-Syntax-Scope-Monad.html#t:OpenKind" title="Agda.Syntax.Scope.Monad">OpenKind</a> -&gt; <a href="https://hackage.haskell.org/package/base-4.21.0.0/docs/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="Agda-Syntax-Abstract-Name.html#t:ModuleName" title="Agda.Syntax.Abstract.Name">ModuleName</a> -&gt; <a href="Agda-Syntax-Concrete-Name.html#t:QName" title="Agda.Syntax.Concrete.Name">QName</a> -&gt; <a href="Agda-Syntax-Concrete.html#t:ImportDirective" title="Agda.Syntax.Concrete">ImportDirective</a> -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> <a href="Agda-Syntax-Abstract.html#t:ImportDirective" title="Agda.Syntax.Abstract">ImportDirective</a></li></ul></details></div><div id="interface"><a href="#g:1" id="g:1"><h1>The scope checking monad</h1></a><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:ScopeM" class="def">ScopeM</a> = <a href="Agda-TypeChecking-Monad-Base.html#t:TCM" title="Agda.TypeChecking.Monad.Base">TCM</a> <a href="src/Agda.Syntax.Scope.Monad.html#ScopeM" class="link">Source</a> <a href="#t:ScopeM" class="selflink">#</a></p><div class="doc"><p>To simplify interaction between scope checking and type checking (in
   particular when chasing imports), we use the same monad.</p></div></div><div class="top"><p class="src"><a id="v:printLocals" class="def">printLocals</a> :: <a href="https://hackage.haskell.org/package/base-4.21.0.0/docs/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="https://hackage.haskell.org/package/base-4.21.0.0/docs/Data-String.html#t:String" title="Data.String">String</a> -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> () <a href="src/Agda.Syntax.Scope.Monad.html#printLocals" class="link">Source</a> <a href="#v:printLocals" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:scopeWarning-39-" class="def">scopeWarning'</a> :: <a href="Agda-Utils-CallStack.html#t:CallStack" title="Agda.Utils.CallStack">CallStack</a> -&gt; <a href="Agda-Syntax-Concrete-Definitions-Errors.html#t:DeclarationWarning-39-" title="Agda.Syntax.Concrete.Definitions.Errors">DeclarationWarning'</a> -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> () <a href="src/Agda.Syntax.Scope.Monad.html#scopeWarning%27" class="link">Source</a> <a href="#v:scopeWarning-39-" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:scopeWarning" class="def">scopeWarning</a> :: <a href="Agda-Utils-CallStack.html#t:HasCallStack" title="Agda.Utils.CallStack">HasCallStack</a> =&gt; <a href="Agda-Syntax-Concrete-Definitions-Errors.html#t:DeclarationWarning-39-" title="Agda.Syntax.Concrete.Definitions.Errors">DeclarationWarning'</a> -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> () <a href="src/Agda.Syntax.Scope.Monad.html#scopeWarning" class="link">Source</a> <a href="#v:scopeWarning" class="selflink">#</a></p></div><a href="#g:2" id="g:2"><h1>General operations</h1></a><div class="top"><p class="src"><a id="v:isDatatypeModule" class="def">isDatatypeModule</a> :: <a href="Agda-TypeChecking-Monad-Base.html#t:ReadTCState" title="Agda.TypeChecking.Monad.Base">ReadTCState</a> m =&gt; <a href="Agda-Syntax-Abstract-Name.html#t:ModuleName" title="Agda.Syntax.Abstract.Name">ModuleName</a> -&gt; m (<a href="https://hackage.haskell.org/package/base-4.21.0.0/docs/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="Agda-Syntax-Scope-Base.html#t:DataOrRecordModule" title="Agda.Syntax.Scope.Base">DataOrRecordModule</a>) <a href="src/Agda.Syntax.Scope.Monad.html#isDatatypeModule" class="link">Source</a> <a href="#v:isDatatypeModule" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:getCurrentModule" class="def">getCurrentModule</a> :: <a href="Agda-TypeChecking-Monad-Base.html#t:ReadTCState" title="Agda.TypeChecking.Monad.Base">ReadTCState</a> m =&gt; m <a href="Agda-Syntax-Abstract-Name.html#t:ModuleName" title="Agda.Syntax.Abstract.Name">ModuleName</a> <a href="src/Agda.Syntax.Scope.Monad.html#getCurrentModule" class="link">Source</a> <a href="#v:getCurrentModule" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:setCurrentModule" class="def">setCurrentModule</a> :: <a href="Agda-TypeChecking-Monad-Base.html#t:MonadTCState" title="Agda.TypeChecking.Monad.Base">MonadTCState</a> m =&gt; <a href="Agda-Syntax-Abstract-Name.html#t:ModuleName" title="Agda.Syntax.Abstract.Name">ModuleName</a> -&gt; m () <a href="src/Agda.Syntax.Scope.Monad.html#setCurrentModule" class="link">Source</a> <a href="#v:setCurrentModule" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:withCurrentModule" class="def">withCurrentModule</a> :: (<a href="Agda-TypeChecking-Monad-Base.html#t:ReadTCState" title="Agda.TypeChecking.Monad.Base">ReadTCState</a> m, <a href="Agda-TypeChecking-Monad-Base.html#t:MonadTCState" title="Agda.TypeChecking.Monad.Base">MonadTCState</a> m) =&gt; <a href="Agda-Syntax-Abstract-Name.html#t:ModuleName" title="Agda.Syntax.Abstract.Name">ModuleName</a> -&gt; m a -&gt; m a <a href="src/Agda.Syntax.Scope.Monad.html#withCurrentModule" class="link">Source</a> <a href="#v:withCurrentModule" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:withCurrentModule-39-" class="def">withCurrentModule'</a> :: (<a href="Agda-Utils-Monad.html#t:MonadTrans" title="Agda.Utils.Monad">MonadTrans</a> t, <a href="https://hackage.haskell.org/package/base-4.21.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> (t <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a>)) =&gt; <a href="Agda-Syntax-Abstract-Name.html#t:ModuleName" title="Agda.Syntax.Abstract.Name">ModuleName</a> -&gt; t <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> a -&gt; t <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> a <a href="src/Agda.Syntax.Scope.Monad.html#withCurrentModule%27" class="link">Source</a> <a href="#v:withCurrentModule-39-" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:getNamedScope" class="def">getNamedScope</a> :: <a href="Agda-Syntax-Abstract-Name.html#t:ModuleName" title="Agda.Syntax.Abstract.Name">ModuleName</a> -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> <a href="Agda-Syntax-Scope-Base.html#t:Scope" title="Agda.Syntax.Scope.Base">Scope</a> <a href="src/Agda.Syntax.Scope.Monad.html#getNamedScope" class="link">Source</a> <a href="#v:getNamedScope" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:getCurrentScope" class="def">getCurrentScope</a> :: <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> <a href="Agda-Syntax-Scope-Base.html#t:Scope" title="Agda.Syntax.Scope.Base">Scope</a> <a href="src/Agda.Syntax.Scope.Monad.html#getCurrentScope" class="link">Source</a> <a href="#v:getCurrentScope" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:createModule" class="def">createModule</a> :: <a href="https://hackage.haskell.org/package/base-4.21.0.0/docs/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="Agda-Syntax-Scope-Base.html#t:DataOrRecordModule" title="Agda.Syntax.Scope.Base">DataOrRecordModule</a> -&gt; <a href="Agda-Syntax-Abstract-Name.html#t:ModuleName" title="Agda.Syntax.Abstract.Name">ModuleName</a> -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> () <a href="src/Agda.Syntax.Scope.Monad.html#createModule" class="link">Source</a> <a href="#v:createModule" class="selflink">#</a></p><div class="doc"><p>Create a new module with an empty scope.
   If the module is not new (e.g. duplicate <code class="inline-code">import</code>),
   don't erase its contents.
   (<code class="inline-code">Just</code> if it is a datatype or record module.)</p></div></div><div class="top"><p class="src"><a id="v:modifyScopes" class="def">modifyScopes</a> :: (<a href="https://hackage.haskell.org/package/containers-0.7/docs/Data-Map-Strict.html#t:Map" title="Data.Map.Strict">Map</a> <a href="Agda-Syntax-Abstract-Name.html#t:ModuleName" title="Agda.Syntax.Abstract.Name">ModuleName</a> <a href="Agda-Syntax-Scope-Base.html#t:Scope" title="Agda.Syntax.Scope.Base">Scope</a> -&gt; <a href="https://hackage.haskell.org/package/containers-0.7/docs/Data-Map-Strict.html#t:Map" title="Data.Map.Strict">Map</a> <a href="Agda-Syntax-Abstract-Name.html#t:ModuleName" title="Agda.Syntax.Abstract.Name">ModuleName</a> <a href="Agda-Syntax-Scope-Base.html#t:Scope" title="Agda.Syntax.Scope.Base">Scope</a>) -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> () <a href="src/Agda.Syntax.Scope.Monad.html#modifyScopes" class="link">Source</a> <a href="#v:modifyScopes" class="selflink">#</a></p><div class="doc"><p>Apply a function to the scope map.</p></div></div><div class="top"><p class="src"><a id="v:modifyNamedScope" class="def">modifyNamedScope</a> :: <a href="Agda-Syntax-Abstract-Name.html#t:ModuleName" title="Agda.Syntax.Abstract.Name">ModuleName</a> -&gt; (<a href="Agda-Syntax-Scope-Base.html#t:Scope" title="Agda.Syntax.Scope.Base">Scope</a> -&gt; <a href="Agda-Syntax-Scope-Base.html#t:Scope" title="Agda.Syntax.Scope.Base">Scope</a>) -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> () <a href="src/Agda.Syntax.Scope.Monad.html#modifyNamedScope" class="link">Source</a> <a href="#v:modifyNamedScope" class="selflink">#</a></p><div class="doc"><p>Apply a function to the given scope.</p></div></div><div class="top"><p class="src"><a id="v:modifyCurrentScope" class="def">modifyCurrentScope</a> :: (<a href="Agda-Syntax-Scope-Base.html#t:Scope" title="Agda.Syntax.Scope.Base">Scope</a> -&gt; <a href="Agda-Syntax-Scope-Base.html#t:Scope" title="Agda.Syntax.Scope.Base">Scope</a>) -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> () <a href="src/Agda.Syntax.Scope.Monad.html#modifyCurrentScope" class="link">Source</a> <a href="#v:modifyCurrentScope" class="selflink">#</a></p><div class="doc"><p>Apply a function to the current scope.</p></div></div><div class="top"><p class="src"><a id="v:setContextPrecedence" class="def">setContextPrecedence</a> :: <a href="Agda-Syntax-Fixity.html#t:PrecedenceStack" title="Agda.Syntax.Fixity">PrecedenceStack</a> -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> () <a href="src/Agda.Syntax.Scope.Monad.html#setContextPrecedence" class="link">Source</a> <a href="#v:setContextPrecedence" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:withContextPrecedence" class="def">withContextPrecedence</a> :: <a href="Agda-TypeChecking-Monad-Base.html#t:ReadTCState" title="Agda.TypeChecking.Monad.Base">ReadTCState</a> m =&gt; <a href="Agda-Syntax-Fixity.html#t:Precedence" title="Agda.Syntax.Fixity">Precedence</a> -&gt; m a -&gt; m a <a href="src/Agda.Syntax.Scope.Monad.html#withContextPrecedence" class="link">Source</a> <a href="#v:withContextPrecedence" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:getLocalVars" class="def">getLocalVars</a> :: <a href="Agda-TypeChecking-Monad-Base.html#t:ReadTCState" title="Agda.TypeChecking.Monad.Base">ReadTCState</a> m =&gt; m <a href="Agda-Syntax-Scope-Base.html#t:LocalVars" title="Agda.Syntax.Scope.Base">LocalVars</a> <a href="src/Agda.Syntax.Scope.Monad.html#getLocalVars" class="link">Source</a> <a href="#v:getLocalVars" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:modifyLocalVars" class="def">modifyLocalVars</a> :: (<a href="Agda-Syntax-Scope-Base.html#t:LocalVars" title="Agda.Syntax.Scope.Base">LocalVars</a> -&gt; <a href="Agda-Syntax-Scope-Base.html#t:LocalVars" title="Agda.Syntax.Scope.Base">LocalVars</a>) -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> () <a href="src/Agda.Syntax.Scope.Monad.html#modifyLocalVars" class="link">Source</a> <a href="#v:modifyLocalVars" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:setLocalVars" class="def">setLocalVars</a> :: <a href="Agda-Syntax-Scope-Base.html#t:LocalVars" title="Agda.Syntax.Scope.Base">LocalVars</a> -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> () <a href="src/Agda.Syntax.Scope.Monad.html#setLocalVars" class="link">Source</a> <a href="#v:setLocalVars" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:withLocalVars" class="def">withLocalVars</a> :: <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> a -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> a <a href="src/Agda.Syntax.Scope.Monad.html#withLocalVars" class="link">Source</a> <a href="#v:withLocalVars" class="selflink">#</a></p><div class="doc"><p>Run a computation without changing the local variables.</p></div></div><div class="top"><p class="src"><a id="v:outsideLocalVars" class="def">outsideLocalVars</a> :: <a href="https://hackage.haskell.org/package/base-4.21.0.0/docs/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> a -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> a <a href="src/Agda.Syntax.Scope.Monad.html#outsideLocalVars" class="link">Source</a> <a href="#v:outsideLocalVars" class="selflink">#</a></p><div class="doc"><p>Run a computation outside some number of local variables and add them back afterwards. This
   lets you bind variables in the middle of the context and is used when binding generalizable
   variables (#3735).</p></div></div><div class="top"><p class="src"><a id="v:withCheckNoShadowing" class="def">withCheckNoShadowing</a> :: <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> a -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> a <a href="src/Agda.Syntax.Scope.Monad.html#withCheckNoShadowing" class="link">Source</a> <a href="#v:withCheckNoShadowing" class="selflink">#</a></p><div class="doc"><p>Check that the newly added variable have unique names.</p></div></div><div class="top"><p class="src"><a id="v:checkNoShadowing" class="def">checkNoShadowing</a> <a href="src/Agda.Syntax.Scope.Monad.html#checkNoShadowing" class="link">Source</a> <a href="#v:checkNoShadowing" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="Agda-Syntax-Scope-Base.html#t:LocalVars" title="Agda.Syntax.Scope.Base">LocalVars</a></td><td class="doc"><p>Old local scope</p></td></tr><tr><td class="src">-&gt; <a href="Agda-Syntax-Scope-Base.html#t:LocalVars" title="Agda.Syntax.Scope.Base">LocalVars</a></td><td class="doc"><p>New local scope</p></td></tr><tr><td class="src">-&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> ()</td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><a id="v:getVarsToBind" class="def">getVarsToBind</a> :: <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> <a href="Agda-Syntax-Scope-Base.html#t:LocalVars" title="Agda.Syntax.Scope.Base">LocalVars</a> <a href="src/Agda.Syntax.Scope.Monad.html#getVarsToBind" class="link">Source</a> <a href="#v:getVarsToBind" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:addVarToBind" class="def">addVarToBind</a> :: <a href="Agda-Syntax-Concrete-Name.html#t:Name" title="Agda.Syntax.Concrete.Name">Name</a> -&gt; <a href="Agda-Syntax-Scope-Base.html#t:LocalVar" title="Agda.Syntax.Scope.Base">LocalVar</a> -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> () <a href="src/Agda.Syntax.Scope.Monad.html#addVarToBind" class="link">Source</a> <a href="#v:addVarToBind" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:bindVarsToBind" class="def">bindVarsToBind</a> :: <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> () <a href="src/Agda.Syntax.Scope.Monad.html#bindVarsToBind" class="link">Source</a> <a href="#v:bindVarsToBind" class="selflink">#</a></p><div class="doc"><p>After collecting some variable names in the scopeVarsToBind,
   bind them all simultaneously.</p></div></div><div class="top"><p class="src"><a id="v:annotateDecls" class="def">annotateDecls</a> :: <a href="Agda-TypeChecking-Monad-Base.html#t:ReadTCState" title="Agda.TypeChecking.Monad.Base">ReadTCState</a> m =&gt; m [<a href="Agda-Syntax-Abstract.html#t:Declaration" title="Agda.Syntax.Abstract">Declaration</a>] -&gt; m <a href="Agda-Syntax-Abstract.html#t:Declaration" title="Agda.Syntax.Abstract">Declaration</a> <a href="src/Agda.Syntax.Scope.Monad.html#annotateDecls" class="link">Source</a> <a href="#v:annotateDecls" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:annotateExpr" class="def">annotateExpr</a> :: <a href="Agda-TypeChecking-Monad-Base.html#t:ReadTCState" title="Agda.TypeChecking.Monad.Base">ReadTCState</a> m =&gt; m <a href="Agda-Syntax-Abstract.html#t:Expr" title="Agda.Syntax.Abstract">Expr</a> -&gt; m <a href="Agda-Syntax-Abstract.html#t:Expr" title="Agda.Syntax.Abstract">Expr</a> <a href="src/Agda.Syntax.Scope.Monad.html#annotateExpr" class="link">Source</a> <a href="#v:annotateExpr" class="selflink">#</a></p></div><a href="#g:3" id="g:3"><h1>Names</h1></a><div class="top"><p class="src"><a id="v:freshAbstractName" class="def">freshAbstractName</a> :: <a href="Agda-Syntax-Common.html#t:Fixity-39-" title="Agda.Syntax.Common">Fixity'</a> -&gt; <a href="Agda-Syntax-Concrete-Name.html#t:Name" title="Agda.Syntax.Concrete.Name">Name</a> -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> <a href="Agda-Syntax-Abstract-Name.html#t:Name" title="Agda.Syntax.Abstract.Name">Name</a> <a href="src/Agda.Syntax.Scope.Monad.html#freshAbstractName" class="link">Source</a> <a href="#v:freshAbstractName" class="selflink">#</a></p><div class="doc"><p>Create a fresh abstract name from a concrete name.</p><p>This function is used when we translate a concrete name
   in a binder.  The <code><a href="Agda-Syntax-Position.html#t:Range" title="Agda.Syntax.Position">Range</a></code> of the concrete name is
   saved as the <code><a href="Agda-Syntax-Abstract-Name.html#v:nameBindingSite" title="Agda.Syntax.Abstract.Name">nameBindingSite</a></code> of the abstract name.</p></div></div><div class="top"><p class="src"><a id="v:freshAbstractName_" class="def">freshAbstractName_</a> :: <a href="Agda-Syntax-Concrete-Name.html#t:Name" title="Agda.Syntax.Concrete.Name">Name</a> -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> <a href="Agda-Syntax-Abstract-Name.html#t:Name" title="Agda.Syntax.Abstract.Name">Name</a> <a href="src/Agda.Syntax.Scope.Monad.html#freshAbstractName_" class="link">Source</a> <a href="#v:freshAbstractName_" class="selflink">#</a></p><div class="doc"><pre>freshAbstractName_ = freshAbstractName noFixity'</pre></div></div><div class="top"><p class="src"><a id="v:freshAbstractQName" class="def">freshAbstractQName</a> :: <a href="Agda-Syntax-Common.html#t:Fixity-39-" title="Agda.Syntax.Common">Fixity'</a> -&gt; <a href="Agda-Syntax-Concrete-Name.html#t:Name" title="Agda.Syntax.Concrete.Name">Name</a> -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> <a href="Agda-Syntax-Abstract-Name.html#t:QName" title="Agda.Syntax.Abstract.Name">QName</a> <a href="src/Agda.Syntax.Scope.Monad.html#freshAbstractQName" class="link">Source</a> <a href="#v:freshAbstractQName" class="selflink">#</a></p><div class="doc"><p>Create a fresh abstract qualified name.</p></div></div><div class="top"><p class="src"><a id="v:freshAbstractQName-39-" class="def">freshAbstractQName'</a> :: <a href="Agda-Syntax-Concrete-Name.html#t:Name" title="Agda.Syntax.Concrete.Name">Name</a> -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> <a href="Agda-Syntax-Abstract-Name.html#t:QName" title="Agda.Syntax.Abstract.Name">QName</a> <a href="src/Agda.Syntax.Scope.Monad.html#freshAbstractQName%27" class="link">Source</a> <a href="#v:freshAbstractQName-39-" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:freshConcreteName" class="def">freshConcreteName</a> :: <a href="Agda-Syntax-Position.html#t:Range" title="Agda.Syntax.Position">Range</a> -&gt; <a href="https://hackage.haskell.org/package/base-4.21.0.0/docs/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="https://hackage.haskell.org/package/base-4.21.0.0/docs/Data-String.html#t:String" title="Data.String">String</a> -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> <a href="Agda-Syntax-Concrete-Name.html#t:Name" title="Agda.Syntax.Concrete.Name">Name</a> <a href="src/Agda.Syntax.Scope.Monad.html#freshConcreteName" class="link">Source</a> <a href="#v:freshConcreteName" class="selflink">#</a></p><div class="doc"><p>Create a concrete name that is not yet in scope.
 | NOTE: See <code class="inline-code">chooseName</code> in <code class="inline-code">Agda.Syntax.Translation.AbstractToConcrete</code> for similar logic.
 | NOTE: See <code class="inline-code">withName</code> in <code class="inline-code">Agda.Syntax.Translation.ReflectedToAbstract</code> for similar logic.</p></div></div><a href="#g:4" id="g:4"><h1>Resolving names</h1></a><div class="top"><p class="src"><a id="v:resolveName" class="def">resolveName</a> :: <a href="Agda-Syntax-Concrete-Name.html#t:QName" title="Agda.Syntax.Concrete.Name">QName</a> -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> <a href="Agda-Syntax-Scope-Base.html#t:ResolvedName" title="Agda.Syntax.Scope.Base">ResolvedName</a> <a href="src/Agda.Syntax.Scope.Monad.html#resolveName" class="link">Source</a> <a href="#v:resolveName" class="selflink">#</a></p><div class="doc"><p>Look up the abstract name referred to by a given concrete name.</p></div></div><div class="top"><p class="src"><a id="v:resolveName-39-" class="def">resolveName'</a> :: <a href="Agda-Syntax-Scope-Base.html#t:KindsOfNames" title="Agda.Syntax.Scope.Base">KindsOfNames</a> -&gt; <a href="https://hackage.haskell.org/package/base-4.21.0.0/docs/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> (<a href="Agda-Utils-Set1.html#t:Set1" title="Agda.Utils.Set1">Set1</a> <a href="Agda-Syntax-Abstract-Name.html#t:Name" title="Agda.Syntax.Abstract.Name">Name</a>) -&gt; <a href="Agda-Syntax-Concrete-Name.html#t:QName" title="Agda.Syntax.Concrete.Name">QName</a> -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> <a href="Agda-Syntax-Scope-Base.html#t:ResolvedName" title="Agda.Syntax.Scope.Base">ResolvedName</a> <a href="src/Agda.Syntax.Scope.Monad.html#resolveName%27" class="link">Source</a> <a href="#v:resolveName-39-" class="selflink">#</a></p><div class="doc"><p>Look up the abstract name corresponding to a concrete name of
   a certain kind and/or from a given set of names.
   Sometimes we know already that we are dealing with a constructor
   or pattern synonym (e.g. when we have parsed a pattern).
   Then, we can ignore conflicting definitions of that name
   of a different kind. (See issue 822.)</p></div></div><div class="top"><p class="src"><a id="v:tryResolveName" class="def">tryResolveName</a> <a href="src/Agda.Syntax.Scope.Monad.html#tryResolveName" class="link">Source</a> <a href="#v:tryResolveName" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: (<a href="Agda-TypeChecking-Monad-Base.html#t:ReadTCState" title="Agda.TypeChecking.Monad.Base">ReadTCState</a> m, <a href="Agda-TypeChecking-Monad-Builtin.html#t:HasBuiltins" title="Agda.TypeChecking.Monad.Builtin">HasBuiltins</a> m, <a href="https://hackage.haskell.org/package/mtl-2.3.1/docs/Control-Monad-Error-Class.html#t:MonadError" title="Control.Monad.Error.Class">MonadError</a> <a href="Agda-Syntax-Scope-Base.html#t:NameResolutionError" title="Agda.Syntax.Scope.Base">NameResolutionError</a> m)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; <a href="Agda-Syntax-Scope-Base.html#t:KindsOfNames" title="Agda.Syntax.Scope.Base">KindsOfNames</a></td><td class="doc"><p>Restrict search to these kinds of names.</p></td></tr><tr><td class="src">-&gt; <a href="https://hackage.haskell.org/package/base-4.21.0.0/docs/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> (<a href="Agda-Utils-Set1.html#t:Set1" title="Agda.Utils.Set1">Set1</a> <a href="Agda-Syntax-Abstract-Name.html#t:Name" title="Agda.Syntax.Abstract.Name">Name</a>)</td><td class="doc"><p>Unless <code><a href="https://hackage.haskell.org/package/base-4.21.0.0/docs/Data-Maybe.html#v:Nothing" title="Data.Maybe">Nothing</a></code>, restrict search to match any of these names.</p></td></tr><tr><td class="src">-&gt; <a href="Agda-Syntax-Concrete-Name.html#t:QName" title="Agda.Syntax.Concrete.Name">QName</a></td><td class="doc"><p>Name to be resolved</p></td></tr><tr><td class="src">-&gt; m <a href="Agda-Syntax-Scope-Base.html#t:ResolvedName" title="Agda.Syntax.Scope.Base">ResolvedName</a></td><td class="doc"><p>If illegally ambiguous, throw error with the ambiguous name.</p></td></tr></table></div></div><div class="top"><p class="src"><a id="v:canHaveSuffixTest" class="def">canHaveSuffixTest</a> :: <a href="Agda-TypeChecking-Monad-Builtin.html#t:HasBuiltins" title="Agda.TypeChecking.Monad.Builtin">HasBuiltins</a> m =&gt; m (<a href="Agda-Syntax-Abstract-Name.html#t:QName" title="Agda.Syntax.Abstract.Name">QName</a> -&gt; <a href="https://hackage.haskell.org/package/base-4.21.0.0/docs/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) <a href="src/Agda.Syntax.Scope.Monad.html#canHaveSuffixTest" class="link">Source</a> <a href="#v:canHaveSuffixTest" class="selflink">#</a></p><div class="doc"><p>Test if a given abstract name can appear with a suffix. Currently
   only true for the names of builtin sorts.</p></div></div><div class="top"><p class="src"><a id="v:resolveModule" class="def">resolveModule</a> :: <a href="Agda-Syntax-Concrete-Name.html#t:QName" title="Agda.Syntax.Concrete.Name">QName</a> -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> <a href="Agda-Syntax-Scope-Base.html#t:AbstractModule" title="Agda.Syntax.Scope.Base">AbstractModule</a> <a href="src/Agda.Syntax.Scope.Monad.html#resolveModule" class="link">Source</a> <a href="#v:resolveModule" class="selflink">#</a></p><div class="doc"><p>Look up a module in the scope.</p></div></div><div class="top"><p class="src"><a id="v:getConcreteFixity" class="def">getConcreteFixity</a> :: <a href="Agda-Syntax-Concrete-Name.html#t:Name" title="Agda.Syntax.Concrete.Name">Name</a> -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> <a href="Agda-Syntax-Common.html#t:Fixity-39-" title="Agda.Syntax.Common">Fixity'</a> <a href="src/Agda.Syntax.Scope.Monad.html#getConcreteFixity" class="link">Source</a> <a href="#v:getConcreteFixity" class="selflink">#</a></p><div class="doc"><p>Get the fixity of a not yet bound name.</p></div></div><div class="top"><p class="src"><a id="v:getConcretePolarity" class="def">getConcretePolarity</a> :: <a href="Agda-Syntax-Concrete-Name.html#t:Name" title="Agda.Syntax.Concrete.Name">Name</a> -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> (<a href="https://hackage.haskell.org/package/base-4.21.0.0/docs/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="Agda-TypeChecking-Positivity-Occurrence.html#t:PragmaPolarities" title="Agda.TypeChecking.Positivity.Occurrence">PragmaPolarities</a>) <a href="src/Agda.Syntax.Scope.Monad.html#getConcretePolarity" class="link">Source</a> <a href="#v:getConcretePolarity" class="selflink">#</a></p><div class="doc"><p>Get the polarities of a not yet bound name.</p></div></div><div class="top"><p class="src"><a id="v:computeFixitiesAndPolarities" class="def">computeFixitiesAndPolarities</a> :: <a href="Agda-Syntax-Concrete-Fixity.html#t:DoWarn" title="Agda.Syntax.Concrete.Fixity">DoWarn</a> -&gt; [<a href="Agda-Syntax-Concrete.html#t:Declaration" title="Agda.Syntax.Concrete">Declaration</a>] -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> a -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> a <a href="src/Agda.Syntax.Scope.Monad.html#computeFixitiesAndPolarities" class="link">Source</a> <a href="#v:computeFixitiesAndPolarities" class="selflink">#</a></p><div class="doc"><p>Collect the fixity/syntax declarations and polarity pragmas from the list
   of declarations and store them in the scope.</p></div></div><div class="top"><p class="src"><a id="v:getNotation" class="def">getNotation</a> <a href="src/Agda.Syntax.Scope.Monad.html#getNotation" class="link">Source</a> <a href="#v:getNotation" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="Agda-Syntax-Concrete-Name.html#t:QName" title="Agda.Syntax.Concrete.Name">QName</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="Agda-Utils-Set1.html#t:Set1" title="Agda.Utils.Set1">Set1</a> <a href="Agda-Syntax-Abstract-Name.html#t:Name" title="Agda.Syntax.Abstract.Name">Name</a></td><td class="doc"><p>The name must correspond to one of the names in this set.</p></td></tr><tr><td class="src">-&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> <a href="Agda-Syntax-Notation.html#t:NewNotation" title="Agda.Syntax.Notation">NewNotation</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Get the notation of a name. The name is assumed to be in scope.</p></div></div><a href="#g:5" id="g:5"><h1>Binding names</h1></a><div class="top"><p class="src"><a id="v:bindVariable" class="def">bindVariable</a> <a href="src/Agda.Syntax.Scope.Monad.html#bindVariable" class="link">Source</a> <a href="#v:bindVariable" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="Agda-Syntax-Scope-Base.html#t:BindingSource" title="Agda.Syntax.Scope.Base">BindingSource</a></td><td class="doc"><p><code class="inline-code">&#955;</code>, <code class="inline-code">&#928;</code>, <code class="inline-code">let</code>, ...?</p></td></tr><tr><td class="src">-&gt; <a href="Agda-Syntax-Concrete-Name.html#t:Name" title="Agda.Syntax.Concrete.Name">Name</a></td><td class="doc"><p>Concrete name.</p></td></tr><tr><td class="src">-&gt; <a href="Agda-Syntax-Abstract-Name.html#t:Name" title="Agda.Syntax.Abstract.Name">Name</a></td><td class="doc"><p>Abstract name.</p></td></tr><tr><td class="src">-&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> ()</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Bind a variable.</p></div></div><div class="top"><p class="src"><a id="v:unbindVariable" class="def">unbindVariable</a> :: <a href="Agda-Syntax-Concrete-Name.html#t:Name" title="Agda.Syntax.Concrete.Name">Name</a> -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> a -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> a <a href="src/Agda.Syntax.Scope.Monad.html#unbindVariable" class="link">Source</a> <a href="#v:unbindVariable" class="selflink">#</a></p><div class="doc"><p>Temporarily unbind a variable. Used for non-recursive lets.</p></div></div><div class="top"><p class="src"><a id="v:bindName" class="def">bindName</a> :: <a href="Agda-Syntax-Common.html#t:Access" title="Agda.Syntax.Common">Access</a> -&gt; <a href="Agda-Syntax-Scope-Base.html#t:KindOfName" title="Agda.Syntax.Scope.Base">KindOfName</a> -&gt; <a href="Agda-Syntax-Concrete-Name.html#t:Name" title="Agda.Syntax.Concrete.Name">Name</a> -&gt; <a href="Agda-Syntax-Abstract-Name.html#t:QName" title="Agda.Syntax.Abstract.Name">QName</a> -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> () <a href="src/Agda.Syntax.Scope.Monad.html#bindName" class="link">Source</a> <a href="#v:bindName" class="selflink">#</a></p><div class="doc"><p>Bind a defined name. Must not shadow anything.</p></div></div><div class="top"><p class="src"><a id="v:bindName-39-" class="def">bindName'</a> :: <a href="Agda-Syntax-Common.html#t:Access" title="Agda.Syntax.Common">Access</a> -&gt; <a href="Agda-Syntax-Scope-Base.html#t:KindOfName" title="Agda.Syntax.Scope.Base">KindOfName</a> -&gt; <a href="Agda-Syntax-Scope-Base.html#t:NameMetadata" title="Agda.Syntax.Scope.Base">NameMetadata</a> -&gt; <a href="Agda-Syntax-Concrete-Name.html#t:Name" title="Agda.Syntax.Concrete.Name">Name</a> -&gt; <a href="Agda-Syntax-Abstract-Name.html#t:QName" title="Agda.Syntax.Abstract.Name">QName</a> -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> () <a href="src/Agda.Syntax.Scope.Monad.html#bindName%27" class="link">Source</a> <a href="#v:bindName-39-" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:addNameToInverseScope" class="def">addNameToInverseScope</a> :: <a href="Agda-Syntax-Scope-Base.html#t:KindOfName" title="Agda.Syntax.Scope.Base">KindOfName</a> -&gt; <a href="Agda-Syntax-Concrete-Name.html#t:Name" title="Agda.Syntax.Concrete.Name">Name</a> -&gt; <a href="Agda-Syntax-Scope-Base.html#t:AbstractName" title="Agda.Syntax.Scope.Base">AbstractName</a> -&gt; <a href="Agda-Syntax-Scope-Base.html#t:ScopeInfo" title="Agda.Syntax.Scope.Base">ScopeInfo</a> -&gt; <a href="Agda-Syntax-Scope-Base.html#t:ScopeInfo" title="Agda.Syntax.Scope.Base">ScopeInfo</a> <a href="src/Agda.Syntax.Scope.Monad.html#addNameToInverseScope" class="link">Source</a> <a href="#v:addNameToInverseScope" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:bindName-39--39-" class="def">bindName''</a> :: <a href="Agda-Syntax-Common.html#t:Access" title="Agda.Syntax.Common">Access</a> -&gt; <a href="Agda-Syntax-Scope-Base.html#t:KindOfName" title="Agda.Syntax.Scope.Base">KindOfName</a> -&gt; <a href="Agda-Syntax-Scope-Base.html#t:NameMetadata" title="Agda.Syntax.Scope.Base">NameMetadata</a> -&gt; <a href="Agda-Syntax-Concrete-Name.html#t:Name" title="Agda.Syntax.Concrete.Name">Name</a> -&gt; <a href="Agda-Syntax-Abstract-Name.html#t:QName" title="Agda.Syntax.Abstract.Name">QName</a> -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> (<a href="https://hackage.haskell.org/package/base-4.21.0.0/docs/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="Agda-TypeChecking-Monad-Base.html#t:TypeError" title="Agda.TypeChecking.Monad.Base">TypeError</a>) <a href="src/Agda.Syntax.Scope.Monad.html#bindName%27%27" class="link">Source</a> <a href="#v:bindName-39--39-" class="selflink">#</a></p><div class="doc"><p>Bind a name. Returns the <code><a href="Agda-TypeChecking-Monad-Base.html#t:TypeError" title="Agda.TypeChecking.Monad.Base">TypeError</a></code> if exists, but does not throw it.</p></div></div><div class="top"><p class="src"><a id="v:rebindName" class="def">rebindName</a> :: <a href="Agda-Syntax-Common.html#t:Access" title="Agda.Syntax.Common">Access</a> -&gt; <a href="Agda-Syntax-Scope-Base.html#t:KindOfName" title="Agda.Syntax.Scope.Base">KindOfName</a> -&gt; <a href="Agda-Syntax-Concrete-Name.html#t:Name" title="Agda.Syntax.Concrete.Name">Name</a> -&gt; <a href="Agda-Syntax-Abstract-Name.html#t:QName" title="Agda.Syntax.Abstract.Name">QName</a> -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> () <a href="src/Agda.Syntax.Scope.Monad.html#rebindName" class="link">Source</a> <a href="#v:rebindName" class="selflink">#</a></p><div class="doc"><p>Rebind a name. Use with care!
   Ulf, 2014-06-29: Currently used to rebind the name defined by an
   unquoteDecl, which is a <code><a href="Agda-Syntax-Scope-Base.html#v:QuotableName" title="Agda.Syntax.Scope.Base">QuotableName</a></code> in the body, but a <code><a href="Agda-Syntax-Scope-Base.html#v:DefinedName" title="Agda.Syntax.Scope.Base">DefinedName</a></code>
   later on.</p></div></div><div class="top"><p class="src"><a id="v:bindModule" class="def">bindModule</a> :: <a href="Agda-Syntax-Common.html#t:Access" title="Agda.Syntax.Common">Access</a> -&gt; <a href="Agda-Syntax-Concrete-Name.html#t:Name" title="Agda.Syntax.Concrete.Name">Name</a> -&gt; <a href="Agda-Syntax-Abstract-Name.html#t:ModuleName" title="Agda.Syntax.Abstract.Name">ModuleName</a> -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> () <a href="src/Agda.Syntax.Scope.Monad.html#bindModule" class="link">Source</a> <a href="#v:bindModule" class="selflink">#</a></p><div class="doc"><p>Bind a module name.</p></div></div><div class="top"><p class="src"><a id="v:bindQModule" class="def">bindQModule</a> :: <a href="Agda-Syntax-Common.html#t:Access" title="Agda.Syntax.Common">Access</a> -&gt; <a href="Agda-Syntax-Concrete-Name.html#t:QName" title="Agda.Syntax.Concrete.Name">QName</a> -&gt; <a href="Agda-Syntax-Abstract-Name.html#t:ModuleName" title="Agda.Syntax.Abstract.Name">ModuleName</a> -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> () <a href="src/Agda.Syntax.Scope.Monad.html#bindQModule" class="link">Source</a> <a href="#v:bindQModule" class="selflink">#</a></p><div class="doc"><p>Bind a qualified module name. Adds it to the imports field of the scope.</p></div></div><a href="#g:6" id="g:6"><h1>Operations to do with record constructor names</h1></a><div class="top"><p class="src"><a id="v:setRecordConstructor" class="def">setRecordConstructor</a> :: <a href="Agda-Syntax-Abstract-Name.html#t:QName" title="Agda.Syntax.Abstract.Name">QName</a> -&gt; (<a href="Agda-Syntax-Abstract-Name.html#t:QName" title="Agda.Syntax.Abstract.Name">QName</a>, <a href="https://hackage.haskell.org/package/base-4.21.0.0/docs/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="Agda-Syntax-Common-Aspect.html#t:Induction" title="Agda.Syntax.Common.Aspect">Induction</a>) -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> () <a href="src/Agda.Syntax.Scope.Monad.html#setRecordConstructor" class="link">Source</a> <a href="#v:setRecordConstructor" class="selflink">#</a></p><div class="doc"><p>Record (ha) that a given record has the specified constructor name.</p></div></div><div class="top"><p class="src"><a id="v:getRecordConstructor" class="def">getRecordConstructor</a> :: <a href="Agda-TypeChecking-Monad-Base.html#t:ReadTCState" title="Agda.TypeChecking.Monad.Base">ReadTCState</a> m =&gt; <a href="Agda-Syntax-Abstract-Name.html#t:QName" title="Agda.Syntax.Abstract.Name">QName</a> -&gt; m (<a href="https://hackage.haskell.org/package/base-4.21.0.0/docs/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> (<a href="Agda-Syntax-Abstract-Name.html#t:QName" title="Agda.Syntax.Abstract.Name">QName</a>, <a href="https://hackage.haskell.org/package/base-4.21.0.0/docs/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="Agda-Syntax-Common-Aspect.html#t:Induction" title="Agda.Syntax.Common.Aspect">Induction</a>)) <a href="src/Agda.Syntax.Scope.Monad.html#getRecordConstructor" class="link">Source</a> <a href="#v:getRecordConstructor" class="selflink">#</a></p><div class="doc"><p>Get the internal <code><a href="Agda-Syntax-Concrete-Name.html#t:QName" title="Agda.Syntax.Concrete.Name">QName</a></code> for the  name of a record constructor. If
 the name does not refer to a record type, <code><a href="https://hackage.haskell.org/package/base-4.21.0.0/docs/Data-Maybe.html#v:Nothing" title="Data.Maybe">Nothing</a></code> is returned.</p></div></div><div class="top"><p class="src"><a id="v:isRecordConstructor" class="def">isRecordConstructor</a> :: <a href="Agda-Syntax-Concrete-Name.html#t:QName" title="Agda.Syntax.Concrete.Name">QName</a> -&gt; <a href="https://hackage.haskell.org/package/base-4.21.0.0/docs/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="Agda-Syntax-Concrete-Name.html#t:QName" title="Agda.Syntax.Concrete.Name">QName</a> <a href="src/Agda.Syntax.Scope.Monad.html#isRecordConstructor" class="link">Source</a> <a href="#v:isRecordConstructor" class="selflink">#</a></p><div class="doc"><p>Is this the qualified name which refers to the constructor of an
 anonymous record (like <code class="inline-code">Foo.constructor</code>)?</p><p>If so, return the part of the name referring to the record (<code class="inline-code">Foo</code>).</p></div></div><a href="#g:7" id="g:7"><h1>Module manipulation operations</h1></a><div class="top"><p class="src"><a id="v:stripNoNames" class="def">stripNoNames</a> :: <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> () <a href="src/Agda.Syntax.Scope.Monad.html#stripNoNames" class="link">Source</a> <a href="#v:stripNoNames" class="selflink">#</a></p><div class="doc"><p>Clear the scope of any no names.</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:WSM" class="def">WSM</a> = <a href="https://hackage.haskell.org/package/mtl-2.3.1/docs/Control-Monad-State-Lazy.html#t:StateT" title="Control.Monad.State.Lazy">StateT</a> <a href="Agda-Syntax-Scope-Monad.html#t:ScopeMemo" title="Agda.Syntax.Scope.Monad">ScopeMemo</a> <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> <a href="src/Agda.Syntax.Scope.Monad.html#WSM" class="link">Source</a> <a href="#t:WSM" class="selflink">#</a></p></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:ScopeMemo" class="def">ScopeMemo</a> <a href="src/Agda.Syntax.Scope.Monad.html#ScopeMemo" class="link">Source</a> <a href="#t:ScopeMemo" class="selflink">#</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:ScopeMemo" class="def">ScopeMemo</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:memoNames" class="def">memoNames</a> :: <a href="Agda-Syntax-Abstract.html#t:Ren" title="Agda.Syntax.Abstract">Ren</a> <a href="Agda-Syntax-Abstract-Name.html#t:QName" title="Agda.Syntax.Abstract.Name">QName</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:memoModules" class="def">memoModules</a> :: <a href="https://hackage.haskell.org/package/containers-0.7/docs/Data-Map-Strict.html#t:Map" title="Data.Map.Strict">Map</a> <a href="Agda-Syntax-Abstract-Name.html#t:ModuleName" title="Agda.Syntax.Abstract.Name">ModuleName</a> (<a href="Agda-Syntax-Abstract-Name.html#t:ModuleName" title="Agda.Syntax.Abstract.Name">ModuleName</a>, <a href="https://hackage.haskell.org/package/base-4.21.0.0/docs/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>)</dfn><div class="doc"><p>Bool: did we copy recursively? We need to track this because we don't
   copy recursively when creating new modules for reexported functions
   (issue1985), but we might need to copy recursively later.</p></div></li><li><dfn class="src"><a id="v:memoTrimming" class="def">memoTrimming</a> :: <a href="Agda-Syntax-Scope-Base.html#t:ScopeCopyRef" title="Agda.Syntax.Scope.Base">ScopeCopyRef</a></dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div></div><div class="top"><p class="src"><a id="v:memoToScopeInfo" class="def">memoToScopeInfo</a> :: <a href="Agda-Syntax-Scope-Monad.html#t:ScopeMemo" title="Agda.Syntax.Scope.Monad">ScopeMemo</a> -&gt; <a href="Agda-Syntax-Abstract.html#t:ScopeCopyInfo" title="Agda.Syntax.Abstract">ScopeCopyInfo</a> <a href="src/Agda.Syntax.Scope.Monad.html#memoToScopeInfo" class="link">Source</a> <a href="#v:memoToScopeInfo" class="selflink">#</a></p></div><a href="#g:8" id="g:8"><h1>Definition liveness &amp; copy trimming</h1></a><div class="doc"><p>The purpose of these operations is to let the type checker know what
 definition copies are actually used for type-checking and need to be
 created, and which can be safely skipped (&quot;trimmed&quot;, hence the name
 <code><a href="Agda-Syntax-Abstract.html#v:renTrimming" title="Agda.Syntax.Abstract">renTrimming</a></code>).</p><p>The liveness the scope-checker reports should be a conservative
 over-approximation of what names are actually used.  For example,
 when an overloaded field/constructor name is resolved, we (have to)
 mark all of the names in the set as used: not only do we not know
 which one the type checker will actually pick, but the type checker
 will ask for all of their
 <code><a href="Agda-TypeChecking-Monad-Signature.html#v:getConstInfo" title="Agda.TypeChecking.Monad.Signature">getConstInfo</a></code> when disambiguating.</p><p>Marking a name as live is done through the <code><a href="Agda-Syntax-Scope-Monad.html#v:markLiveName" title="Agda.Syntax.Scope.Monad">markLiveName</a></code> function,
 which is called from <code><a href="Agda-Syntax-Scope-Monad.html#v:resolveName-39-" title="Agda.Syntax.Scope.Monad">resolveName'</a></code>, so any names coming from
 concrete syntax will already be marked live. However, if potential
 references to copies are being inserted &quot;synthetically&quot; by the scope
 checker, they <strong>must</strong> be referred to by an explicit <code><a href="Agda-Syntax-Scope-Monad.html#v:markLiveName" title="Agda.Syntax.Scope.Monad">markLiveName</a></code>
 call.</p><p>Module names can also be <code><a href="Agda-Syntax-Scope-Monad.html#v:markLiveName" title="Agda.Syntax.Scope.Monad">markLiveName</a></code>d, and this has the effect of
 transitively saving every definition having that module as a prefix.</p></div><div class="top"><p class="src"><a id="v:newScopeCopyRef" class="def">newScopeCopyRef</a> :: <a href="Agda-Syntax-Abstract-Name.html#t:ModuleName" title="Agda.Syntax.Abstract.Name">ModuleName</a> -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> <a href="Agda-Syntax-Scope-Base.html#t:ScopeCopyRef" title="Agda.Syntax.Scope.Base">ScopeCopyRef</a> <a href="src/Agda.Syntax.Scope.Monad.html#newScopeCopyRef" class="link">Source</a> <a href="#v:newScopeCopyRef" class="selflink">#</a></p><div class="doc"><p>Create a new reference to store liveness information for names in
 the given copied module.</p></div></div><div class="top"><p class="src"><a id="v:copyName" class="def">copyName</a> :: <a href="Agda-Syntax-Scope-Base.html#t:ScopeCopyRef" title="Agda.Syntax.Scope.Base">ScopeCopyRef</a> -&gt; <a href="Agda-Syntax-Abstract-Name.html#t:QName" title="Agda.Syntax.Abstract.Name">QName</a> -&gt; <a href="Agda-Syntax-Abstract-Name.html#t:QName" title="Agda.Syntax.Abstract.Name">QName</a> -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> () <a href="src/Agda.Syntax.Scope.Monad.html#copyName" class="link">Source</a> <a href="#v:copyName" class="selflink">#</a></p><div class="doc"><p>Mark a name as being a copy in the TC state, associating it with
 the given <code><a href="A.html#v:ScopeCopyRef" title="A">ScopeCopyRef</a></code> for liveness information.</p></div></div><div class="top"><p class="src"><span class="keyword">class</span> <a id="t:MarkLive" class="def">MarkLive</a> n <span class="keyword">where</span> <a href="src/Agda.Syntax.Scope.Monad.html#MarkLive" class="link">Source</a> <a href="#t:MarkLive" class="selflink">#</a></p><div class="doc"><p>Class for entities which contain names that can be marked live.
 The two fundamental instances are <code><a href="A.html#v:QName" title="A">QName</a></code>s and <code><a href="A.html#v:ModuleName" title="A">ModuleName</a></code>s, but
 there are some convenience instances for things like
 <code><a href="A.html#v:ResolvedName" title="A">ResolvedName</a></code>s.</p></div><div class="subs minimal"><p class="caption">Minimal complete definition</p><p class="src">Nothing</p></div><div class="subs methods"><p class="caption">Methods</p><p class="src"><a id="v:markLiveName" class="def">markLiveName</a> :: n -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> () <a href="src/Agda.Syntax.Scope.Monad.html#markLiveName" class="link">Source</a> <a href="#v:markLiveName" class="selflink">#</a></p><div class="doc"><p>Mark a name as (potentially) having been used.</p></div> <div class="subs default"><p class="caption"></p><p class="src"><span class="keyword">default</span> <a id="v:markLiveName" class="def">markLiveName</a> :: <span class="keyword">forall</span> (t :: <a href="https://hackage.haskell.org/package/base-4.21.0.0/docs/Data-Kind.html#t:Type" title="Data.Kind">Type</a> -&gt; <a href="https://hackage.haskell.org/package/base-4.21.0.0/docs/Data-Kind.html#t:Type" title="Data.Kind">Type</a>) n'. (<a href="https://hackage.haskell.org/package/base-4.21.0.0/docs/Data-Traversable.html#t:Traversable" title="Data.Traversable">Traversable</a> t, n <a href="https://hackage.haskell.org/package/base-4.21.0.0/docs/Data-Type-Equality.html#t:-126-" title="Data.Type.Equality">~</a> t n', <a href="Agda-Syntax-Scope-Monad.html#t:MarkLive" title="Agda.Syntax.Scope.Monad">MarkLive</a> n') =&gt; n -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> () <a href="src/Agda.Syntax.Scope.Monad.html#markLiveName" class="link">Source</a> <a href="#v:markLiveName" class="selflink">#</a></p></div></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:MarkLive">Instances</h4><details id="i:MarkLive" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:MarkLive:MarkLive:1"></span> <a href="Agda-Syntax-Scope-Monad.html#t:MarkLive" title="Agda.Syntax.Scope.Monad">MarkLive</a> <a href="Agda-Syntax-Abstract-Name.html#t:ModuleName" title="Agda.Syntax.Abstract.Name">ModuleName</a></span> <a href="src/Agda.Syntax.Scope.Monad.html#line-745" class="link">Source</a> <a href="#t:MarkLive" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:ic:MarkLive:MarkLive:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Agda-Syntax-Scope-Monad.html">Agda.Syntax.Scope.Monad</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:markLiveName">markLiveName</a> :: <a href="Agda-Syntax-Abstract-Name.html#t:ModuleName" title="Agda.Syntax.Abstract.Name">ModuleName</a> -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> () <a href="src/Agda.Syntax.Scope.Monad.html#markLiveName" class="link">Source</a> <a href="#v:markLiveName" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:MarkLive:MarkLive:2"></span> <a href="Agda-Syntax-Scope-Monad.html#t:MarkLive" title="Agda.Syntax.Scope.Monad">MarkLive</a> <a href="Agda-Syntax-Abstract-Name.html#t:QName" title="Agda.Syntax.Abstract.Name">QName</a></span> <a href="src/Agda.Syntax.Scope.Monad.html#line-737" class="link">Source</a> <a href="#t:MarkLive" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:ic:MarkLive:MarkLive:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Agda-Syntax-Scope-Monad.html">Agda.Syntax.Scope.Monad</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:markLiveName">markLiveName</a> :: <a href="Agda-Syntax-Abstract-Name.html#t:QName" title="Agda.Syntax.Abstract.Name">QName</a> -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> () <a href="src/Agda.Syntax.Scope.Monad.html#markLiveName" class="link">Source</a> <a href="#v:markLiveName" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:MarkLive:MarkLive:3"></span> <a href="Agda-Syntax-Scope-Monad.html#t:MarkLive" title="Agda.Syntax.Scope.Monad">MarkLive</a> <a href="Agda-Syntax-Scope-Base.html#t:AbstractName" title="Agda.Syntax.Scope.Base">AbstractName</a></span> <a href="src/Agda.Syntax.Scope.Monad.html#line-752" class="link">Source</a> <a href="#t:MarkLive" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:ic:MarkLive:MarkLive:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Agda-Syntax-Scope-Monad.html">Agda.Syntax.Scope.Monad</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:markLiveName">markLiveName</a> :: <a href="Agda-Syntax-Scope-Base.html#t:AbstractName" title="Agda.Syntax.Scope.Base">AbstractName</a> -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> () <a href="src/Agda.Syntax.Scope.Monad.html#markLiveName" class="link">Source</a> <a href="#v:markLiveName" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:MarkLive:MarkLive:4"></span> <a href="Agda-Syntax-Scope-Monad.html#t:MarkLive" title="Agda.Syntax.Scope.Monad">MarkLive</a> <a href="Agda-Syntax-Scope-Base.html#t:ResolvedName" title="Agda.Syntax.Scope.Base">ResolvedName</a></span> <a href="src/Agda.Syntax.Scope.Monad.html#line-755" class="link">Source</a> <a href="#t:MarkLive" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:ic:MarkLive:MarkLive:4"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Agda-Syntax-Scope-Monad.html">Agda.Syntax.Scope.Monad</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:markLiveName">markLiveName</a> :: <a href="Agda-Syntax-Scope-Base.html#t:ResolvedName" title="Agda.Syntax.Scope.Base">ResolvedName</a> -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> () <a href="src/Agda.Syntax.Scope.Monad.html#markLiveName" class="link">Source</a> <a href="#v:markLiveName" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:MarkLive:MarkLive:5"></span> <a href="Agda-Syntax-Scope-Monad.html#t:MarkLive" title="Agda.Syntax.Scope.Monad">MarkLive</a> n =&gt; <a href="Agda-Syntax-Scope-Monad.html#t:MarkLive" title="Agda.Syntax.Scope.Monad">MarkLive</a> (<a href="Agda-Utils-List1.html#t:List1" title="Agda.Utils.List1">List1</a> n)</span> <a href="src/Agda.Syntax.Scope.Monad.html#line-735" class="link">Source</a> <a href="#t:MarkLive" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:ic:MarkLive:MarkLive:5"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Agda-Syntax-Scope-Monad.html">Agda.Syntax.Scope.Monad</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:markLiveName">markLiveName</a> :: <a href="Agda-Utils-List1.html#t:List1" title="Agda.Utils.List1">List1</a> n -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> () <a href="src/Agda.Syntax.Scope.Monad.html#markLiveName" class="link">Source</a> <a href="#v:markLiveName" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:readLiveNames" class="def">readLiveNames</a> :: <a href="Agda-Syntax-Scope-Base.html#t:ScopeCopyRef" title="Agda.Syntax.Scope.Base">ScopeCopyRef</a> -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> <a href="Agda-Syntax-Scope-Base.html#t:LiveNames" title="Agda.Syntax.Scope.Base">LiveNames</a> <a href="src/Agda.Syntax.Scope.Monad.html#readLiveNames" class="link">Source</a> <a href="#v:readLiveNames" class="selflink">#</a></p><div class="doc"><p>Read the <code><a href="Agda-Syntax-Scope-Base.html#t:LiveNames" title="Agda.Syntax.Scope.Base">LiveNames</a></code> from the given <code><a href="Agda-Syntax-Scope-Base.html#t:ScopeCopyRef" title="Agda.Syntax.Scope.Base">ScopeCopyRef</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:sameTrimming" class="def">sameTrimming</a> :: <a href="Agda-Syntax-Abstract.html#t:ScopeCopyInfo" title="Agda.Syntax.Abstract">ScopeCopyInfo</a> -&gt; <a href="Agda-Syntax-Abstract.html#t:ScopeCopyInfo" title="Agda.Syntax.Abstract">ScopeCopyInfo</a> -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> <a href="https://hackage.haskell.org/package/base-4.21.0.0/docs/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="src/Agda.Syntax.Scope.Monad.html#sameTrimming" class="link">Source</a> <a href="#v:sameTrimming" class="selflink">#</a></p><div class="doc"><p>Compare the trimming from an old <code><a href="Agda-Syntax-Abstract.html#t:ScopeCopyInfo" title="Agda.Syntax.Abstract">ScopeCopyInfo</a></code> with a new one.</p></div></div><div class="top"><p class="src"><a id="v:clobberLiveNames" class="def">clobberLiveNames</a> :: <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> () <a href="src/Agda.Syntax.Scope.Monad.html#clobberLiveNames" class="link">Source</a> <a href="#v:clobberLiveNames" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:copyScope" class="def">copyScope</a> :: <a href="Agda-Syntax-Concrete-Name.html#t:QName" title="Agda.Syntax.Concrete.Name">QName</a> -&gt; <a href="Agda-Syntax-Abstract-Name.html#t:ModuleName" title="Agda.Syntax.Abstract.Name">ModuleName</a> -&gt; <a href="Agda-Syntax-Scope-Base.html#t:Scope" title="Agda.Syntax.Scope.Base">Scope</a> -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> (<a href="Agda-Syntax-Scope-Base.html#t:Scope" title="Agda.Syntax.Scope.Base">Scope</a>, <a href="Agda-Syntax-Abstract.html#t:ScopeCopyInfo" title="Agda.Syntax.Abstract">ScopeCopyInfo</a>) <a href="src/Agda.Syntax.Scope.Monad.html#copyScope" class="link">Source</a> <a href="#v:copyScope" class="selflink">#</a></p><div class="doc"><p>Create a new scope with the given name from an old scope. Renames
   public names in the old scope to match the new name and returns the
   renamings.</p></div></div><a href="#g:9" id="g:9"><h1>Import directives</h1></a><div class="top"><p class="src"><a id="v:checkNoFixityInRenamingModule" class="def">checkNoFixityInRenamingModule</a> :: [<a href="Agda-Syntax-Concrete.html#t:Renaming" title="Agda.Syntax.Concrete">Renaming</a>] -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> () <a href="src/Agda.Syntax.Scope.Monad.html#checkNoFixityInRenamingModule" class="link">Source</a> <a href="#v:checkNoFixityInRenamingModule" class="selflink">#</a></p><div class="doc"><p>Warn about useless fixity declarations in <code class="inline-code">renaming</code> directives.
   Monadic for the sake of error reporting.</p></div></div><div class="top"><p class="src"><a id="v:verifyImportDirective" class="def">verifyImportDirective</a> :: [<a href="Agda-Syntax-Concrete.html#t:ImportedName" title="Agda.Syntax.Concrete">ImportedName</a>] -&gt; <a href="Agda-Syntax-Concrete.html#t:HidingDirective" title="Agda.Syntax.Concrete">HidingDirective</a> -&gt; <a href="Agda-Syntax-Concrete.html#t:RenamingDirective" title="Agda.Syntax.Concrete">RenamingDirective</a> -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> () <a href="src/Agda.Syntax.Scope.Monad.html#verifyImportDirective" class="link">Source</a> <a href="#v:verifyImportDirective" class="selflink">#</a></p><div class="doc"><p>Check that an import directive doesn't contain repeated names.</p></div></div><div class="top"><p class="src"><a id="v:applyImportDirectiveM" class="def">applyImportDirectiveM</a> <a href="src/Agda.Syntax.Scope.Monad.html#applyImportDirectiveM" class="link">Source</a> <a href="#v:applyImportDirectiveM" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="Agda-Syntax-Concrete-Name.html#t:QName" title="Agda.Syntax.Concrete.Name">QName</a></td><td class="doc"><p>Name of the scope, only for error reporting.</p></td></tr><tr><td class="src">-&gt; <a href="Agda-Syntax-Concrete.html#t:ImportDirective" title="Agda.Syntax.Concrete">ImportDirective</a></td><td class="doc"><p>Description of how scope is to be modified.</p></td></tr><tr><td class="src">-&gt; <a href="Agda-Syntax-Scope-Base.html#t:Scope" title="Agda.Syntax.Scope.Base">Scope</a></td><td class="doc"><p>Input scope.</p></td></tr><tr><td class="src">-&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> (<a href="Agda-Syntax-Abstract.html#t:ImportDirective" title="Agda.Syntax.Abstract">ImportDirective</a>, <a href="Agda-Syntax-Scope-Base.html#t:Scope" title="Agda.Syntax.Scope.Base">Scope</a>)</td><td class="doc"><p>Scope-checked description, output scope.</p></td></tr></table></div><div class="doc"><p>Apply an import directive and check that all the names mentioned actually
   exist.</p><p>Monadic for the sake of error reporting.</p></div></div><div class="top"><p class="src"><a id="v:mapImportDir" class="def">mapImportDir</a> <a href="src/Agda.Syntax.Scope.Monad.html#mapImportDir" class="link">Source</a> <a href="#v:mapImportDir" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: (<a href="https://hackage.haskell.org/package/base-4.21.0.0/docs/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> n1, <a href="https://hackage.haskell.org/package/base-4.21.0.0/docs/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> m1)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; [<a href="Agda-Syntax-Common.html#t:ImportedName-39-" title="Agda.Syntax.Common">ImportedName'</a> (n1, n2) (m1, m2)]</td><td class="doc"><p>Translation of imported names.</p></td></tr><tr><td class="src">-&gt; [<a href="Agda-Syntax-Common.html#t:ImportedName-39-" title="Agda.Syntax.Common">ImportedName'</a> (n1, n2) (m1, m2)]</td><td class="doc"><p>Translation of names defined by this import.</p></td></tr><tr><td class="src">-&gt; <a href="Agda-Syntax-Common.html#t:ImportDirective-39-" title="Agda.Syntax.Common">ImportDirective'</a> n1 m1</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="Agda-Syntax-Common.html#t:ImportDirective-39-" title="Agda.Syntax.Common">ImportDirective'</a> n2 m2</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Translation of <code class="inline-code">ImportDirective</code>.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:ImportedNameMap" class="def">ImportedNameMap</a> n1 n2 m1 m2 <a href="src/Agda.Syntax.Scope.Monad.html#ImportedNameMap" class="link">Source</a> <a href="#t:ImportedNameMap" class="selflink">#</a></p><div class="doc"><p>A finite map for <code class="inline-code">ImportedName</code>s.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:ImportedNameMap" class="def">ImportedNameMap</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:inameMap" class="def">inameMap</a> :: <a href="https://hackage.haskell.org/package/containers-0.7/docs/Data-Map-Strict.html#t:Map" title="Data.Map.Strict">Map</a> n1 n2</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:imoduleMap" class="def">imoduleMap</a> :: <a href="https://hackage.haskell.org/package/containers-0.7/docs/Data-Map-Strict.html#t:Map" title="Data.Map.Strict">Map</a> m1 m2</dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div></div><div class="top"><p class="src"><a id="v:importedNameMapFromList" class="def">importedNameMapFromList</a> :: (<a href="https://hackage.haskell.org/package/base-4.21.0.0/docs/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> n1, <a href="https://hackage.haskell.org/package/base-4.21.0.0/docs/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> m1) =&gt; [<a href="Agda-Syntax-Common.html#t:ImportedName-39-" title="Agda.Syntax.Common">ImportedName'</a> (n1, n2) (m1, m2)] -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ImportedNameMap" title="Agda.Syntax.Scope.Monad">ImportedNameMap</a> n1 n2 m1 m2 <a href="src/Agda.Syntax.Scope.Monad.html#importedNameMapFromList" class="link">Source</a> <a href="#v:importedNameMapFromList" class="selflink">#</a></p><div class="doc"><p>Create a <code><a href="Agda-Syntax-Scope-Monad.html#t:ImportedNameMap" title="Agda.Syntax.Scope.Monad">ImportedNameMap</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:lookupImportedName" class="def">lookupImportedName</a> :: (<a href="https://hackage.haskell.org/package/base-4.21.0.0/docs/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> n1, <a href="https://hackage.haskell.org/package/base-4.21.0.0/docs/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> m1) =&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ImportedNameMap" title="Agda.Syntax.Scope.Monad">ImportedNameMap</a> n1 n2 m1 m2 -&gt; <a href="Agda-Syntax-Common.html#t:ImportedName-39-" title="Agda.Syntax.Common">ImportedName'</a> n1 m1 -&gt; <a href="Agda-Syntax-Common.html#t:ImportedName-39-" title="Agda.Syntax.Common">ImportedName'</a> n2 m2 <a href="src/Agda.Syntax.Scope.Monad.html#lookupImportedName" class="link">Source</a> <a href="#v:lookupImportedName" class="selflink">#</a></p><div class="doc"><p>Apply a <code><a href="Agda-Syntax-Scope-Monad.html#t:ImportedNameMap" title="Agda.Syntax.Scope.Monad">ImportedNameMap</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:mapRenaming" class="def">mapRenaming</a> <a href="src/Agda.Syntax.Scope.Monad.html#mapRenaming" class="link">Source</a> <a href="#v:mapRenaming" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: (<a href="https://hackage.haskell.org/package/base-4.21.0.0/docs/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> n1, <a href="https://hackage.haskell.org/package/base-4.21.0.0/docs/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> m1)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ImportedNameMap" title="Agda.Syntax.Scope.Monad">ImportedNameMap</a> n1 n2 m1 m2</td><td class="doc"><p>Translation of <code><a href="Agda-Syntax-Common.html#v:renFrom" title="Agda.Syntax.Common">renFrom</a></code> names and module names.</p></td></tr><tr><td class="src">-&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ImportedNameMap" title="Agda.Syntax.Scope.Monad">ImportedNameMap</a> n1 n2 m1 m2</td><td class="doc"><p>Translation of <code class="inline-code">rento</code>   names and module names.</p></td></tr><tr><td class="src">-&gt; <a href="Agda-Syntax-Common.html#t:Renaming-39-" title="Agda.Syntax.Common">Renaming'</a> n1 m1</td><td class="doc"><p>Renaming before translation (1).</p></td></tr><tr><td class="src">-&gt; <a href="Agda-Syntax-Common.html#t:Renaming-39-" title="Agda.Syntax.Common">Renaming'</a> n2 m2</td><td class="doc"><p>Renaming after  translation (2).</p></td></tr></table></div><div class="doc"><p>Translation of <code class="inline-code">Renaming</code>.</p></div></div><a href="#g:10" id="g:10"><h1>Opening a module</h1></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:OpenKind" class="def">OpenKind</a> <a href="src/Agda.Syntax.Scope.Monad.html#OpenKind" class="link">Source</a> <a href="#t:OpenKind" class="selflink">#</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:LetOpenModule" class="def">LetOpenModule</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:TopOpenModule" class="def">TopOpenModule</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><a id="v:noGeneralizedVarsIfLetOpen" class="def">noGeneralizedVarsIfLetOpen</a> :: <a href="Agda-Syntax-Scope-Monad.html#t:OpenKind" title="Agda.Syntax.Scope.Monad">OpenKind</a> -&gt; <a href="Agda-Syntax-Scope-Base.html#t:Scope" title="Agda.Syntax.Scope.Base">Scope</a> -&gt; <a href="Agda-Syntax-Scope-Base.html#t:Scope" title="Agda.Syntax.Scope.Base">Scope</a> <a href="src/Agda.Syntax.Scope.Monad.html#noGeneralizedVarsIfLetOpen" class="link">Source</a> <a href="#v:noGeneralizedVarsIfLetOpen" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:openModule_" class="def">openModule_</a> :: <a href="Agda-Syntax-Scope-Monad.html#t:OpenKind" title="Agda.Syntax.Scope.Monad">OpenKind</a> -&gt; <a href="Agda-Syntax-Concrete-Name.html#t:QName" title="Agda.Syntax.Concrete.Name">QName</a> -&gt; <a href="Agda-Syntax-Concrete.html#t:ImportDirective" title="Agda.Syntax.Concrete">ImportDirective</a> -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> <a href="Agda-Syntax-Abstract.html#t:ImportDirective" title="Agda.Syntax.Abstract">ImportDirective</a> <a href="src/Agda.Syntax.Scope.Monad.html#openModule_" class="link">Source</a> <a href="#v:openModule_" class="selflink">#</a></p><div class="doc"><p>Open a module.</p></div></div><div class="top"><p class="src"><a id="v:openModule" class="def">openModule</a> :: <a href="Agda-Syntax-Scope-Monad.html#t:OpenKind" title="Agda.Syntax.Scope.Monad">OpenKind</a> -&gt; <a href="https://hackage.haskell.org/package/base-4.21.0.0/docs/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="Agda-Syntax-Abstract-Name.html#t:ModuleName" title="Agda.Syntax.Abstract.Name">ModuleName</a> -&gt; <a href="Agda-Syntax-Concrete-Name.html#t:QName" title="Agda.Syntax.Concrete.Name">QName</a> -&gt; <a href="Agda-Syntax-Concrete.html#t:ImportDirective" title="Agda.Syntax.Concrete">ImportDirective</a> -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> <a href="Agda-Syntax-Abstract.html#t:ImportDirective" title="Agda.Syntax.Abstract">ImportDirective</a> <a href="src/Agda.Syntax.Scope.Monad.html#openModule" class="link">Source</a> <a href="#v:openModule" class="selflink">#</a></p><div class="doc"><p>Open a module, possibly given an already resolved module name.</p></div></div><h1>Orphan instances</h1><div id="section.orphans"><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:o:ic:MonadFixityError:MonadFixityError:1"></span> <a href="Agda-Syntax-Concrete-Fixity.html#t:MonadFixityError" title="Agda.Syntax.Concrete.Fixity">MonadFixityError</a> <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a></span> <a href="src/Agda.Syntax.Scope.Monad.html#line-465" class="link">Source</a> <a href="#v:-36-fMonadFixityErrorTCMT" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:o:ic:MonadFixityError:MonadFixityError:1"><summary class="hide-when-js-enabled">Instance details</summary><p></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:throwMultipleFixityDecls">throwMultipleFixityDecls</a> :: <a href="Agda-Utils-List1.html#t:List1" title="Agda.Utils.List1">List1</a> (<a href="Agda-Syntax-Concrete-Name.html#t:Name" title="Agda.Syntax.Concrete.Name">Name</a>, <a href="Agda-Utils-Tuple.html#t:Pair" title="Agda.Utils.Tuple">Pair</a> <a href="Agda-Syntax-Common.html#t:Fixity-39-" title="Agda.Syntax.Common">Fixity'</a>) -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> a <a href="src/Agda.Syntax.Concrete.Fixity.html#throwMultipleFixityDecls" class="link">Source</a> <a href="#v:throwMultipleFixityDecls" class="selflink">#</a></p><p class="src"><a href="#v:throwMultiplePolarityPragmas">throwMultiplePolarityPragmas</a> :: <a href="Agda-Utils-List1.html#t:List1" title="Agda.Utils.List1">List1</a> <a href="Agda-Syntax-Concrete-Name.html#t:Name" title="Agda.Syntax.Concrete.Name">Name</a> -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> a <a href="src/Agda.Syntax.Concrete.Fixity.html#throwMultiplePolarityPragmas" class="link">Source</a> <a href="#v:throwMultiplePolarityPragmas" class="selflink">#</a></p><p class="src"><a href="#v:warnUnknownNamesInFixityDecl">warnUnknownNamesInFixityDecl</a> :: <a href="Agda-Utils-Set1.html#t:Set1" title="Agda.Utils.Set1">Set1</a> <a href="Agda-Syntax-Concrete-Name.html#t:Name" title="Agda.Syntax.Concrete.Name">Name</a> -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> () <a href="src/Agda.Syntax.Concrete.Fixity.html#warnUnknownNamesInFixityDecl" class="link">Source</a> <a href="#v:warnUnknownNamesInFixityDecl" class="selflink">#</a></p><p class="src"><a href="#v:warnUnknownNamesInPolarityPragmas">warnUnknownNamesInPolarityPragmas</a> :: <a href="Agda-Utils-Set1.html#t:Set1" title="Agda.Utils.Set1">Set1</a> <a href="Agda-Syntax-Concrete-Name.html#t:Name" title="Agda.Syntax.Concrete.Name">Name</a> -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> () <a href="src/Agda.Syntax.Concrete.Fixity.html#warnUnknownNamesInPolarityPragmas" class="link">Source</a> <a href="#v:warnUnknownNamesInPolarityPragmas" class="selflink">#</a></p><p class="src"><a href="#v:warnUnknownFixityInMixfixDecl">warnUnknownFixityInMixfixDecl</a> :: <a href="Agda-Utils-Set1.html#t:Set1" title="Agda.Utils.Set1">Set1</a> <a href="Agda-Syntax-Concrete-Name.html#t:Name" title="Agda.Syntax.Concrete.Name">Name</a> -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> () <a href="src/Agda.Syntax.Concrete.Fixity.html#warnUnknownFixityInMixfixDecl" class="link">Source</a> <a href="#v:warnUnknownFixityInMixfixDecl" class="selflink">#</a></p><p class="src"><a href="#v:warnPolarityPragmasButNotPostulates">warnPolarityPragmasButNotPostulates</a> :: <a href="Agda-Utils-Set1.html#t:Set1" title="Agda.Utils.Set1">Set1</a> <a href="Agda-Syntax-Concrete-Name.html#t:Name" title="Agda.Syntax.Concrete.Name">Name</a> -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> () <a href="src/Agda.Syntax.Concrete.Fixity.html#warnPolarityPragmasButNotPostulates" class="link">Source</a> <a href="#v:warnPolarityPragmasButNotPostulates" class="selflink">#</a></p><p class="src"><a href="#v:warnEmptyPolarityPragma">warnEmptyPolarityPragma</a> :: <a href="Agda-Syntax-Position.html#t:Range" title="Agda.Syntax.Position">Range</a> -&gt; <a href="Agda-Syntax-Scope-Monad.html#t:ScopeM" title="Agda.Syntax.Scope.Monad">ScopeM</a> () <a href="src/Agda.Syntax.Concrete.Fixity.html#warnEmptyPolarityPragma" class="link">Source</a> <a href="#v:warnEmptyPolarityPragma" class="selflink">#</a></p></div></details></td></tr></table></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.30.0</p></div></body></html>