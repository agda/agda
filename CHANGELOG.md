Release notes for Agda version 2.6.2
====================================

Installation and infrastructure
-------------------------------

* Added support for GHC 8.10.1
  [Issue [#4242](https://github.com/agda/agda/issues/4242)] and GHC
  8.8.3 [Issue [#4476](https://github.com/agda/agda/issues/4476)].

Command-line interaction
------------------------

* In the previous release, Agda exited with either status 0 when the program
  type checks successfully, or status 1 when encountering any kind of error.
  Now Agda exits with status 42 for type errors, 71 for errors in the
  commandline arguments, and 154 for impossible errors. Exit status 1
  may be returned under other circumstances; for instance, an incomplete
  pattern matching, or an error generated by the Haskell runtime.
  See PR [#4540](https://github.com/agda/agda/pull/4535).

Pragmas and options
-------------------

* New options `--qualified-instances` (default) and
  `--no-qualified-instances`. When `--no-qualified-instances` is
  enabled, Agda will only consider candidates for instance search that
  are in scope under an unqualified name (see
  [#4522](https://github.com/agda/agda/pull/4522)).

* New option `--call-by-name` turns off call-by-need evaluation at type
  checking time.

* New option `--highlight-occurrences` (off by default) enables the HTML
  backend to include a JavaScript file that highlights all occurrences of
  the mouse-hovered symbol (see
  [#4535](https://github.com/agda/agda/pull/4535)).

Language
--------

* Inductive records without η-equality no longer support both matching
  on the record constructor and construction of record elements by
  copattern matching.  It has been discovered that the combination of
  both leads to loss of subject reduction, i.e., reduction does not
  preserve typing.  See issue
  [#4560](https://github.com/agda/agda/issues/4560).

  η-equality for a record can be turned off manually with directive
  `no-eta-equality` or command-line option `--no-eta-equality`, but it
  is also automatically turned off for some recursive records.  For
  records without η, matching on the record constructor is now off by
  default and construction by copattern matching is on.  If you want
  the converse, you can add the new record directive `pattern`.

  Example with record pattern:
  ```agda
  record N : Set where
    inductive
    no-eta-equality
    pattern
    field out : Maybe N

  pred : N → Maybe N
  pred record{ out = m } = m
  ```
  Example with record constructor and use of `;` instead of newline:
  ```agda
  record N : Set where
    inductive; no-eta-equality
    pattern; constructor inn
    field out : Maybe N

  pred : N → Maybe N
  pred (inn m) = m
  ```

Reflection
----------

- New operation in `TC` monad, similar to `quoteTC` but operating on types in `Setω`
  ```agda
  quoteωTC : ∀ {A : Setω} → A → TC Term
  ```
